var ts=Object.defineProperty;var es=(S,e,M)=>e in S?ts(S,e,{enumerable:!0,configurable:!0,writable:!0,value:M}):S[e]=M;var ee=(S,e,M)=>(es(S,typeof e!="symbol"?e+"":e,M),M),je=(S,e,M)=>{if(!e.has(S))throw TypeError("Cannot "+M)};var t=(S,e,M)=>(je(S,e,"read from private field"),M?M.call(S):e.get(S)),$=(S,e,M)=>{if(e.has(S))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(S):e.set(S,M)},rt=(S,e,M,r)=>(je(S,e,"write to private field"),r?r.call(S,M):e.set(S,M),M);var ge=(S,e,M,r)=>({set _(u){rt(S,e,u,M)},get _(){return t(S,e,r)}}),X=(S,e,M)=>(je(S,e,"access private method"),M);import{p as getDefaultExportFromCjs,r as reactExports,h as generateUtilityClasses,g as generateUtilityClass,s as styled,_ as _extends,k as alpha,f as useThemeProps,b as _objectWithoutPropertiesLoose,j as jsxRuntimeExports,d as clsx,a as capitalize,e as composeClasses,n as useParams,m as useSearchParams,B as Box,t as getAugmentedNamespace,R as React}from"./index-a576c8ed.js";import{c as create}from"./index-27f5d3c3.js";import{S as Stack}from"./Stack-8bed2fb6.js";import{T as Typography,A as AppBar,a as Toolbar,I as IconButton,M as Menu}from"./Menu-dd7ae19e.js";import{A as Avatar}from"./Avatar-92a98cab.js";import{k as ButtonGroupContext,l as ButtonGroupButtonContext,c as createSvgIcon,B as Button}from"./Modal-f965e789.js";import{I as Input}from"./Input-ea5e1d67.js";import{S as Snackbar,A as Alert}from"./Snackbar-2987fee0.js";import{u as useMediaQuery,S as SwipeableDrawer}from"./SwipeableDrawer-eed964f2.js";import{D as Dialog,a as DialogContent}from"./DialogContent-f0f57db0.js";import{D as DialogTitle}from"./DialogTitle-71759416.js";import{D as DialogActions}from"./DialogActions-890862aa.js";import{T as TableContainer,a as Table,b as TableHead,c as TableRow,d as TableCell,e as TableBody}from"./TableRow-8d81f6ec.js";import{A as ArrowBack}from"./ArrowBack-033d9b39.js";import"./InputBase-55cd521b.js";import"./Grow-c16df990.js";import"./useId-98600e7d.js";function _mergeNamespaces(S,e){for(var M=0;M<e.length;M++){const r=e[M];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in S)){const G=Object.getOwnPropertyDescriptor(r,u);G&&Object.defineProperty(S,u,G.get?G:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function S(r,u,G,j,ot,P){if(P!==ReactPropTypesSecret){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}S.isRequired=S;function e(){return S}var M={array:S,bigint:S,bool:S,func:S,number:S,object:S,string:S,symbol:S,any:S,arrayOf:e,element:S,elementType:S,instanceOf:e,node:S,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return M.PropTypes=M,M};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function getValidReactChildren(S){return reactExports.Children.toArray(S).filter(e=>reactExports.isValidElement(e))}function getButtonGroupUtilityClass(S){return generateUtilityClass("MuiButtonGroup",S)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),buttonGroupClasses$1=buttonGroupClasses,_excluded=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(S,e)=>{const{ownerState:M}=S;return[{[`& .${buttonGroupClasses$1.grouped}`]:e.grouped},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}${capitalize(M.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}${capitalize(M.color)}`]},{[`& .${buttonGroupClasses$1.firstButton}`]:e.firstButton},{[`& .${buttonGroupClasses$1.lastButton}`]:e.lastButton},{[`& .${buttonGroupClasses$1.middleButton}`]:e.middleButton},e.root,e[M.variant],M.disableElevation===!0&&e.disableElevation,M.fullWidth&&e.fullWidth,M.orientation==="vertical"&&e.vertical]},useUtilityClasses=S=>{const{classes:e,color:M,disabled:r,disableElevation:u,fullWidth:G,orientation:j,variant:ot}=S,P={root:["root",ot,j==="vertical"&&"vertical",G&&"fullWidth",u&&"disableElevation"],grouped:["grouped",`grouped${capitalize(j)}`,`grouped${capitalize(ot)}`,`grouped${capitalize(ot)}${capitalize(j)}`,`grouped${capitalize(ot)}${capitalize(M)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(P,getButtonGroupUtilityClass,e)},ButtonGroupRoot=styled("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:S,ownerState:e})=>_extends({display:"inline-flex",borderRadius:(S.vars||S).shape.borderRadius},e.variant==="contained"&&{boxShadow:(S.vars||S).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses$1.grouped}`]:_extends({minWidth:40,"&:hover":_extends({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${buttonGroupClasses$1.firstButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:S.vars?`1px solid rgba(${S.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${S.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:S.vars?`1px solid rgba(${S.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${S.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:S.vars?`rgba(${S.vars.palette[e.color].mainChannel} / 0.5)`:alpha(S.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(S.vars||S).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(S.vars||S).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(S.vars||S).palette[e.color].dark},{"&:hover":_extends({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${buttonGroupClasses$1.lastButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),ButtonGroup=reactExports.forwardRef(function(e,M){const r=useThemeProps({props:e,name:"MuiButtonGroup"}),{children:u,className:G,color:j="primary",component:ot="div",disabled:P=!1,disableElevation:w=!1,disableFocusRipple:f=!1,disableRipple:O=!1,fullWidth:L=!1,orientation:T="horizontal",size:x="medium",variant:v="outlined"}=r,p=_objectWithoutPropertiesLoose(r,_excluded),b=_extends({},r,{color:j,component:ot,disabled:P,disableElevation:w,disableFocusRipple:f,disableRipple:O,fullWidth:L,orientation:T,size:x,variant:v}),m=useUtilityClasses(b),A=reactExports.useMemo(()=>({className:m.grouped,color:j,disabled:P,disableElevation:w,disableFocusRipple:f,disableRipple:O,fullWidth:L,size:x,variant:v}),[j,P,w,f,O,L,x,v,m.grouped]),_=getValidReactChildren(u),o=_.length,c=D=>{const y=D===0,l=D===o-1;return y&&l?"":y?m.firstButton:l?m.lastButton:m.middleButton};return jsxRuntimeExports.jsx(ButtonGroupRoot,_extends({as:ot,role:"group",className:clsx(m.root,G),ref:M,ownerState:b},p,{children:jsxRuntimeExports.jsx(ButtonGroupContext.Provider,{value:A,children:_.map((D,y)=>jsxRuntimeExports.jsx(ButtonGroupButtonContext.Provider,{value:c(y),children:D},y))})}))}),ButtonGroup$1=ButtonGroup,ArrowForward=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),Keyboard=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),"Keyboard"),Lock=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),Person=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),initialState={page:0,userName:void 0,userMail:void 0,userPW:void 0,examParams:{},userRes:[]},useTestStore=create(S=>({setPage:e=>S({page:e}),setUserDetails:(e,M,r)=>S({userName:e,userMail:M,userPW:r}),setExamParams:e=>S({page:e.meta.interface,examParams:e}),setUserRes:e=>S({userRes:e}),reset:()=>S(initialState)})),Password=()=>{const{edu:S}=useParams(),[e]=useSearchParams(),M=e.get("t"),r=e.get("n"),u=e.get("e"),[G,j]=reactExports.useState(u||""),ot=b=>{j(b.target.value)},[P,w]=reactExports.useState(""),f=b=>{w(b.target.value)},[O,L]=reactExports.useState(!1),T=()=>L(!1),{setExamParams:x,setUserDetails:v}=useTestStore(),p=async()=>{const b=await fetch(`./examiner/${S}/${M}.json`);if(b.ok){const m=await b.json();x(m),v(r,G,P)}else L(!0)};return jsxRuntimeExports.jsxs(Box,{width:"100%",children:[jsxRuntimeExports.jsx(Box,{bgcolor:"#2d70b6",height:40}),jsxRuntimeExports.jsxs(Stack,{bgcolor:"#666",direction:"row",flexWrap:"nowrap",justifyContent:"space-between",border:2,borderColor:"#666",display:{xs:"none",sm:"flex"},children:[jsxRuntimeExports.jsxs(Stack,{color:"#fff",p:2,direction:"row",flexWrap:"nowrap",justifyContent:"space-between",flexGrow:1,children:[jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{children:"System Name :"}),jsxRuntimeExports.jsx(Typography,{color:"#ff0",fontSize:"3rem",children:"C001"}),jsxRuntimeExports.jsx(Typography,{children:"Kindly contact the invigilator if there are any discrepancies in the Name and Photograph displayed on the screen or if the photograph is not yours"})]}),jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{align:"right",children:"Candidate Name :"}),jsxRuntimeExports.jsx(Typography,{align:"right",color:"#ff0",fontSize:"3rem",children:r||"John Smith"}),jsxRuntimeExports.jsxs(Typography,{align:"right",children:["Subject : ",jsxRuntimeExports.jsx("span",{style:{color:"#ff0"},children:"Mock Exam"})]})]})]}),jsxRuntimeExports.jsx(Box,{minWidth:"8rem",bgcolor:"#fff",sx:{backgroundImage:"url(./image/user.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),jsxRuntimeExports.jsx(Box,{pt:"10dvh",px:1,children:jsxRuntimeExports.jsxs(Box,{maxWidth:370,mx:"auto",flexGrow:1,children:[jsxRuntimeExports.jsx(Typography,{fontSize:"0.8rem",bgcolor:"#ddd",sx:{borderTopRightRadius:5,borderTopLeftRadius:5},fontWeight:"bold",px:2,py:1,color:"#444",children:"Login"}),jsxRuntimeExports.jsx(Box,{p:2,backgroundColor:"#f5f5f5",border:1,borderColor:"#dbdbdb",sx:{borderBottomRightRadius:5,borderBottomLeftRadius:5},children:jsxRuntimeExports.jsxs(Stack,{children:[jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Person,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,fullWidth:!0,placeholder:"User ID here",value:G,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:ot})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Lock,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,type:"password",fullWidth:!0,placeholder:"Password here",value:P,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:f})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsx(Button,{variant:"contained",sx:{marginTop:"20px"},onClick:p,children:"Sign In"})]})})]})}),jsxRuntimeExports.jsx(Box,{bgcolor:"#617b8c",textAlign:"center",color:"#fff",py:.2,fontSize:"small",position:"absolute",bottom:0,width:"100%",children:"Version 00.00.01"}),jsxRuntimeExports.jsx(Snackbar,{open:O,anchorOrigin:{horizontal:"center",vertical:"bottom"},autoHideDuration:3e3,onClose:T,children:jsxRuntimeExports.jsx(Alert,{severity:"error",elevation:6,variant:"filled",children:"Something went Wrong !!"})})]})},Instruction$1="";function Instruction(){const S=useMediaQuery("(min-width:600px)"),[e,M]=reactExports.useState(!1),r=reactExports.useRef(null),u=()=>{M(!0)},G=()=>{M(!1)},{examParams:j,setPage:ot}=useTestStore(),P=()=>{r.current.checked?(ot(S?2:5),document.getElementsByTagName("body")[0].requestFullscreen()):u()};return jsxRuntimeExports.jsxs("div",{id:"instructionpage",className:"l",children:[jsxRuntimeExports.jsx("h3",{className:"l1",children:"Please read the instructions carefully"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"General Instructions:"})}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:["Total duration of ",j.meta.eName," - ",j.meta.tName," exam is ",j.meta.timeMinutes," min."]}),jsxRuntimeExports.jsx("li",{children:"The clock will be set at the server. The countdown timer in the top left corner of screen will display the remaining time available for you to complete the examination. When the timer reaches zero, the examination will end by itself. You will not be required to end or submit your examination."}),jsxRuntimeExports.jsxs("li",{children:["The Questions Palette displayed on the right side of screen will show the status of each question using one of the following symbols:",jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo1.png",className:"l2"})," You have not visited the question yet."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo2.png",className:"l2"})," You have not answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo3.png",className:"l2"})," You have answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo4.png",className:"l2"})," You have NOT answered the question, but have marked the question for review."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo5.png",className:"l2"}),' The question(s) "Answered and Marked for Review" will be considered for evalution.']})]})]}),jsxRuntimeExports.jsx("li",{children:'You can click on the ">" arrow which apperes to the left of question palette to collapse the question palette thereby maximizing the question window. To view the question palette again, you can click on "<" which appears on the right side of question window.'}),jsxRuntimeExports.jsx("li",{children:'You can click on your "Profile" image on top right corner of your screen to change the language during the exam for entire question paper. On clicking of Profile image you will get a drop-down to change the question content to the desired language.'}),jsxRuntimeExports.jsxs("li",{children:["You can click on ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})," to navigate to the bottom and ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})," to navigate to top of the question are, without scrolling."]})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating to a Question:"})}),jsxRuntimeExports.jsx("ol",{start:"7",children:jsxRuntimeExports.jsxs("li",{children:["To answer a question, do the following:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"Click on the question number in the Question Palette at the right of your screen to go to that numbered question directly. Note that using this option does NOT save your answer to the current question."}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Save & Next"})," to save your answer for the current question and then go to the next question."]}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Mark for Review & Next"})," to save your answer for the current question, mark it for review, and then go to the next question."]})]})]})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Answering a Question:"})}),jsxRuntimeExports.jsxs("ol",{start:"8",children:[jsxRuntimeExports.jsxs("li",{children:["Procedure for answering a multiple choice type question:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"To select you answer, click on the button of one of the options."}),jsxRuntimeExports.jsxs("li",{children:["To deselect your chosen answer, click on the button of the chosen option again or click on the ",jsxRuntimeExports.jsx("strong",{children:"Clear Response"})," button"]}),jsxRuntimeExports.jsx("li",{children:"To change your chosen answer, click on the button of another option"}),jsxRuntimeExports.jsx("li",{children:"To save your answer, you MUST click on the Save & Next button."}),jsxRuntimeExports.jsx("li",{children:"To mark the question for review, click on the Mark for Review & Next button."})]})]}),jsxRuntimeExports.jsx("li",{children:"To change your answer to a question that has already been answered, first select that question for answering and then follow the procedure for answering that type of question."})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating through sections:"})}),jsxRuntimeExports.jsxs("ol",{start:"10",children:[jsxRuntimeExports.jsx("li",{children:"Sections in this question paper are displayed on the top bar of the screen. Questions in a section can be viewed by click on the section name. The section you are currently viewing is highlighted."}),jsxRuntimeExports.jsx("li",{children:"After click the Save & Next button on the last question for a section, you will automatically be taken to the first question of the next section."}),jsxRuntimeExports.jsx("li",{children:"You can shuffle between sections and questions anything during the examination as per your convenience only during the time stipulated."}),jsxRuntimeExports.jsx("li",{children:"Candidate can view the corresponding section summery as part of the legend that appears in every section above the question palette."})]}),jsxRuntimeExports.jsx("h4",{className:"l3",children:"Please note all questions will appear in your default language. This language can be changed for a particular question later on."}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"terms",ref:r}),jsxRuntimeExports.jsx("label",{htmlFor:"terms",children:"  I have read and understood the instructions. All computer hardware allotted to me are in proper working condition. I declare that I am not in possession of / not wearing / not carrying any prohibited gadget like mobile phone, bluetooth devices etc. / any prohibited material with me into the Examination Hall.I agree that in case of not adhering to the instructions, I shall be liable to be debarred from this Test and/or to disciplinary action, which may include ban from future Tests / Examinations."}),jsxRuntimeExports.jsx("p",{className:"lo",onClick:P,children:"PROCEED"}),jsxRuntimeExports.jsxs(Dialog,{open:e,onClose:G,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Please check Terms and Conditions and then proceed"}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button,{onClick:G,autoFocus:!0,children:"OK"})})]})]})}function commonjsRequire(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,M){module.exports=e.pdfjsLib=M()})(globalThis,()=>(()=>{var __webpack_modules__=[,(S,e)=>{var Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=lt,e.bytesToString=U,e.createValidAbsoluteUrl=xt,e.getModificationDate=wt,e.getUuid=Ht,e.getVerbosityLevel=q,e.info=tt,e.isArrayBuffer=pt,e.isArrayEqual=Tt,e.isNodeJS=void 0,e.normalizeUnicode=zt,e.objectFromMap=dt,e.objectSize=at,e.setVerbosityLevel=R,e.shadow=St,e.string32=et,e.stringToBytes=it,e.stringToPDFString=mt,e.stringToUTF8String=nt,e.unreachable=W,e.utf8StringToString=st,e.warn=Q;const M=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=M;const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const u=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=u;const G=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=G;const j=1.35;e.LINE_FACTOR=j;const ot=.35;e.LINE_DESCENT_FACTOR=ot;const P=ot/j;e.BASELINE_FACTOR=P;const w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=w;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=f;const O="pdfjs_internal_editor_";e.AnnotationEditorPrefix=O;const L={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=L;const T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=T;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=x;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=v;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=p;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=b;const m={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=m;const A={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=A;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=_;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=o;const c={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=c;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=D;const y={O:"PageOpen",C:"PageClose"};e.PageActionEventType=y;const l={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=l;const F={NONE:0,BINARY:1};e.CMapCompressionType=F;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=g;const H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=H;let z=l.WARNINGS;function R(ut){Number.isInteger(ut)&&(z=ut)}function q(){return z}function tt(ut){z>=l.INFOS&&console.log(`Info: ${ut}`)}function Q(ut){z>=l.WARNINGS&&console.log(`Warning: ${ut}`)}function W(ut){throw new Error(ut)}function lt(ut,Z){ut||W(Z)}function ft(ut){switch(ut==null?void 0:ut.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xt(ut,Z=null,Y=null){if(!ut)return null;try{if(Y&&typeof ut=="string"){if(Y.addDefaultProtocol&&ut.startsWith("www.")){const At=ut.match(/\./g);(At==null?void 0:At.length)>=2&&(ut=`http://${ut}`)}if(Y.tryConvertEncoding)try{ut=nt(ut)}catch{}}const yt=Z?new URL(ut,Z):new URL(ut);if(ft(yt))return yt}catch{}return null}function St(ut,Z,Y,yt=!1){return Object.defineProperty(ut,Z,{value:Y,enumerable:!yt,configurable:!0,writable:!1}),Y}const k=function(){function Z(Y,yt){this.constructor===Z&&W("Cannot initialize BaseException."),this.message=Y,this.name=yt}return Z.prototype=new Error,Z.constructor=Z,Z}();e.BaseException=k;class n extends k{constructor(Z,Y){super(Z,"PasswordException"),this.code=Y}}e.PasswordException=n;class a extends k{constructor(Z,Y){super(Z,"UnknownErrorException"),this.details=Y}}e.UnknownErrorException=a;class i extends k{constructor(Z){super(Z,"InvalidPDFException")}}e.InvalidPDFException=i;class h extends k{constructor(Z){super(Z,"MissingPDFException")}}e.MissingPDFException=h;class d extends k{constructor(Z,Y){super(Z,"UnexpectedResponseException"),this.status=Y}}e.UnexpectedResponseException=d;class C extends k{constructor(Z){super(Z,"FormatError")}}e.FormatError=C;class I extends k{constructor(Z){super(Z,"AbortException")}}e.AbortException=I;function U(ut){(typeof ut!="object"||(ut==null?void 0:ut.length)===void 0)&&W("Invalid argument for bytesToString");const Z=ut.length,Y=8192;if(Z<Y)return String.fromCharCode.apply(null,ut);const yt=[];for(let At=0;At<Z;At+=Y){const te=Math.min(At+Y,Z),Zt=ut.subarray(At,te);yt.push(String.fromCharCode.apply(null,Zt))}return yt.join("")}function it(ut){typeof ut!="string"&&W("Invalid argument for stringToBytes");const Z=ut.length,Y=new Uint8Array(Z);for(let yt=0;yt<Z;++yt)Y[yt]=ut.charCodeAt(yt)&255;return Y}function et(ut){return String.fromCharCode(ut>>24&255,ut>>16&255,ut>>8&255,ut&255)}function at(ut){return Object.keys(ut).length}function dt(ut){const Z=Object.create(null);for(const[Y,yt]of ut)Z[Y]=yt;return Z}function gt(){const ut=new Uint8Array(4);return ut[0]=1,new Uint32Array(ut.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class Rt{static get isLittleEndian(){return St(this,"isLittleEndian",gt())}static get isEvalSupported(){return St(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?St(this,"platform",{isWin:!1,isMac:!1}):St(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Z,Y;return St(this,"isCSSRoundSupported",(Y=(Z=globalThis.CSS)==null?void 0:Z.supports)==null?void 0:Y.call(Z,"width: round(1.5px, 1px)"))}}e.FeatureTest=Rt;const Lt=[...Array(256).keys()].map(ut=>ut.toString(16).padStart(2,"0"));class vt{static makeHexColor(Z,Y,yt){return`#${Lt[Z]}${Lt[Y]}${Lt[yt]}`}static scaleMinMax(Z,Y){let yt;Z[0]?(Z[0]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=Z[0],Y[1]*=Z[0],Z[3]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=Z[3],Y[3]*=Z[3]):(yt=Y[0],Y[0]=Y[2],Y[2]=yt,yt=Y[1],Y[1]=Y[3],Y[3]=yt,Z[1]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=Z[1],Y[3]*=Z[1],Z[2]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=Z[2],Y[1]*=Z[2]),Y[0]+=Z[4],Y[1]+=Z[4],Y[2]+=Z[5],Y[3]+=Z[5]}static transform(Z,Y){return[Z[0]*Y[0]+Z[2]*Y[1],Z[1]*Y[0]+Z[3]*Y[1],Z[0]*Y[2]+Z[2]*Y[3],Z[1]*Y[2]+Z[3]*Y[3],Z[0]*Y[4]+Z[2]*Y[5]+Z[4],Z[1]*Y[4]+Z[3]*Y[5]+Z[5]]}static applyTransform(Z,Y){const yt=Z[0]*Y[0]+Z[1]*Y[2]+Y[4],At=Z[0]*Y[1]+Z[1]*Y[3]+Y[5];return[yt,At]}static applyInverseTransform(Z,Y){const yt=Y[0]*Y[3]-Y[1]*Y[2],At=(Z[0]*Y[3]-Z[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/yt,te=(-Z[0]*Y[1]+Z[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/yt;return[At,te]}static getAxialAlignedBoundingBox(Z,Y){const yt=this.applyTransform(Z,Y),At=this.applyTransform(Z.slice(2,4),Y),te=this.applyTransform([Z[0],Z[3]],Y),Zt=this.applyTransform([Z[2],Z[1]],Y);return[Math.min(yt[0],At[0],te[0],Zt[0]),Math.min(yt[1],At[1],te[1],Zt[1]),Math.max(yt[0],At[0],te[0],Zt[0]),Math.max(yt[1],At[1],te[1],Zt[1])]}static inverseTransform(Z){const Y=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/Y,-Z[1]/Y,-Z[2]/Y,Z[0]/Y,(Z[2]*Z[5]-Z[4]*Z[3])/Y,(Z[4]*Z[1]-Z[5]*Z[0])/Y]}static singularValueDecompose2dScale(Z){const Y=[Z[0],Z[2],Z[1],Z[3]],yt=Z[0]*Y[0]+Z[1]*Y[2],At=Z[0]*Y[1]+Z[1]*Y[3],te=Z[2]*Y[0]+Z[3]*Y[2],Zt=Z[2]*Y[1]+Z[3]*Y[3],J=(yt+Zt)/2,Et=Math.sqrt((yt+Zt)**2-4*(yt*Zt-te*At))/2,It=J+Et||1,Ct=J-Et||1;return[Math.sqrt(It),Math.sqrt(Ct)]}static normalizeRect(Z){const Y=Z.slice(0);return Z[0]>Z[2]&&(Y[0]=Z[2],Y[2]=Z[0]),Z[1]>Z[3]&&(Y[1]=Z[3],Y[3]=Z[1]),Y}static intersect(Z,Y){const yt=Math.max(Math.min(Z[0],Z[2]),Math.min(Y[0],Y[2])),At=Math.min(Math.max(Z[0],Z[2]),Math.max(Y[0],Y[2]));if(yt>At)return null;const te=Math.max(Math.min(Z[1],Z[3]),Math.min(Y[1],Y[3])),Zt=Math.min(Math.max(Z[1],Z[3]),Math.max(Y[1],Y[3]));return te>Zt?null:[yt,te,At,Zt]}static bezierBoundingBox(Z,Y,yt,At,te,Zt,J,Et){const It=[],Ct=[[],[]];let jt,Nt,Jt,_t,Yt,Ot,N,s;for(let K=0;K<2;++K){if(K===0?(Nt=6*Z-12*yt+6*te,jt=-3*Z+9*yt-9*te+3*J,Jt=3*yt-3*Z):(Nt=6*Y-12*At+6*Zt,jt=-3*Y+9*At-9*Zt+3*Et,Jt=3*At-3*Y),Math.abs(jt)<1e-12){if(Math.abs(Nt)<1e-12)continue;_t=-Jt/Nt,0<_t&&_t<1&&It.push(_t);continue}N=Nt*Nt-4*Jt*jt,s=Math.sqrt(N),!(N<0)&&(Yt=(-Nt+s)/(2*jt),0<Yt&&Yt<1&&It.push(Yt),Ot=(-Nt-s)/(2*jt),0<Ot&&Ot<1&&It.push(Ot))}let E=It.length,B;const V=E;for(;E--;)_t=It[E],B=1-_t,Ct[0][E]=B*B*B*Z+3*B*B*_t*yt+3*B*_t*_t*te+_t*_t*_t*J,Ct[1][E]=B*B*B*Y+3*B*B*_t*At+3*B*_t*_t*Zt+_t*_t*_t*Et;return Ct[0][V]=Z,Ct[1][V]=Y,Ct[0][V+1]=J,Ct[1][V+1]=Et,Ct[0].length=Ct[1].length=V+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}e.Util=vt;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mt(ut){if(ut[0]>="ï"){let Y;if(ut[0]==="þ"&&ut[1]==="ÿ"?Y="utf-16be":ut[0]==="ÿ"&&ut[1]==="þ"?Y="utf-16le":ut[0]==="ï"&&ut[1]==="»"&&ut[2]==="¿"&&(Y="utf-8"),Y)try{const yt=new TextDecoder(Y,{fatal:!0}),At=it(ut);return yt.decode(At)}catch(yt){Q(`stringToPDFString: "${yt}".`)}}const Z=[];for(let Y=0,yt=ut.length;Y<yt;Y++){const At=Dt[ut.charCodeAt(Y)];Z.push(At?String.fromCharCode(At):ut.charAt(Y))}return Z.join("")}function nt(ut){return decodeURIComponent(escape(ut))}function st(ut){return unescape(encodeURIComponent(ut))}function pt(ut){return typeof ut=="object"&&(ut==null?void 0:ut.byteLength)!==void 0}function Tt(ut,Z){if(ut.length!==Z.length)return!1;for(let Y=0,yt=ut.length;Y<yt;Y++)if(ut[Y]!==Z[Y])return!1;return!0}function wt(ut=new Date){return[ut.getUTCFullYear().toString(),(ut.getUTCMonth()+1).toString().padStart(2,"0"),ut.getUTCDate().toString().padStart(2,"0"),ut.getUTCHours().toString().padStart(2,"0"),ut.getUTCMinutes().toString().padStart(2,"0"),ut.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){$(this,Vt,!1);this.promise=new Promise((Z,Y)=>{this.resolve=yt=>{rt(this,Vt,!0),Z(yt)},this.reject=yt=>{rt(this,Vt,!0),Y(yt)}})}get settled(){return t(this,Vt)}}Vt=new WeakMap,e.PromiseCapability=Bt;let Gt=null,Ut=null;function zt(ut){return Gt||(Gt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ut=new Map([["ﬅ","ſt"]])),ut.replaceAll(Gt,(Z,Y,yt)=>Y?Y.normalize("NFKC"):Ut.get(yt))}function Ht(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ut=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ut);else for(let Z=0;Z<32;Z++)ut[Z]=Math.floor(Math.random()*255);return U(ut)}const $t="pdfjs_internal_id_";e.AnnotationPrefix=$t},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var S,M,r,u,he,j,Ee,P,w,f,O,L,T,x,v,p,Se,m,A,Ne,o,c;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:F}=l,g=y.url?getUrlProp(y.url):null,H=y.data?getDataProp(y.data):null,z=y.httpHeaders||null,R=y.withCredentials===!0,q=y.password??null,tt=y.range instanceof PDFDataRangeTransport?y.range:null,Q=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let W=y.worker instanceof PDFWorker?y.worker:null;const lt=y.verbosity,ft=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,xt=typeof y.cMapUrl=="string"?y.cMapUrl:null,St=y.cMapPacked!==!1,k=y.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,a=y.StandardFontDataFactory||DefaultStandardFontDataFactory,i=y.stopAtErrors!==!0,h=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,d=y.isEvalSupported!==!1,C=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,I=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,U=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,it=y.fontExtraProperties===!0,et=y.enableXfa===!0,at=y.ownerDocument||globalThis.document,dt=y.disableRange===!0,gt=y.disableStream===!0,ht=y.disableAutoFetch===!0,Rt=y.pdfBug===!0,Lt=tt?tt.length:y.length??NaN,vt=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!U,Dt=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:k===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&xt&&n&&(0,_display_utils.isValidFetchUrl)(xt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),mt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:at}),nt=y.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:at}),st=null;(0,_util.setVerbosityLevel)(lt);const pt={canvasFactory:mt,filterFactory:nt};if(Dt||(pt.cMapReaderFactory=new k({baseUrl:xt,isCompressed:St}),pt.standardFontDataFactory=new a({baseUrl:n})),!W){const Bt={verbosity:lt,port:_worker_options.GlobalWorkerOptions.workerPort};W=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),l._worker=W}const Tt={docId:F,apiVersion:"3.11.174",data:H,password:q,disableAutoFetch:ht,rangeChunkSize:Q,length:Lt,docBaseUrl:ft,enableXfa:et,evaluatorOptions:{maxImageSize:h,disableFontFace:U,ignoreErrors:i,isEvalSupported:d,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:I,fontExtraProperties:it,useSystemFonts:vt,cMapUrl:Dt?xt:null,standardFontDataUrl:Dt?n:null}},wt={ignoreErrors:i,isEvalSupported:d,disableFontFace:U,fontExtraProperties:it,enableXfa:et,ownerDocument:at,disableAutoFetch:ht,pdfBug:Rt,styleElement:st};return W.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(W,Tt),Gt=new Promise(function(Ut){let zt;tt?zt=new _transport_stream.PDFDataTransportStream({length:Lt,initialData:tt.initialData,progressiveDone:tt.progressiveDone,contentDispositionFilename:tt.contentDispositionFilename,disableRange:dt,disableStream:gt},tt):H||(zt=($t=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream($t):(0,_display_utils.isValidFetchUrl)($t.url)?new _displayFetch_stream.PDFFetchStream($t):new _displayNetwork.PDFNetworkStream($t))({url:g,length:Lt,httpHeaders:z,withCredentials:R,rangeChunkSize:Q,disableRange:dt,disableStream:gt})),Ut(zt)});return Promise.all([Bt,Gt]).then(function([Ut,zt]){if(l.destroyed)throw new Error("Loading aborted");const Ht=new _message_handler.MessageHandler(F,Ut,W.port),$t=new WorkerTransport(Ht,l,zt,wt,pt);l._transport=$t,Ht.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(y,l){if(y.destroyed)throw new Error("Worker was destroyed");const F=await y.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(e,S)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,F,g;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(H){throw(g=this._worker)!=null&&g.port&&delete this._worker._pendingDestroy,H}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};S=new WeakMap,$(e,S,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,F,g=!1,H=null){this.length=l,this.initialData=F,this.progressiveDone=g,this.contentDispositionFilename=H,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,F){for(const g of this._rangeListeners)g(l,F)}onDataProgress(l,F){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(l,F)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,F){this._pdfInfo=l,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(g=>{if(!g)return g;const H=[];for(const z in g)H.push(...g[z]);return H}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,F,g,H=!1){$(this,u);$(this,j);$(this,M,null);$(this,r,!1);this._pageIndex=l,this._pageInfo=F,this._transport=g,this._stats=H?new _display_utils.StatTimer:null,this._pdfBug=H,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:F=this.rotate,offsetX:g=0,offsetY:H=0,dontFlip:z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:F,offsetX:g,offsetY:H,dontFlip:z})}getAnnotations({intent:l="display"}={}){const F=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:F,intent:g="display",annotationMode:H=_util.AnnotationMode.ENABLE,transform:z=null,background:R=null,optionalContentConfigPromise:q=null,annotationCanvasMap:tt=null,pageColors:Q=null,printAnnotationStorage:W=null}){var a,i;(a=this._stats)==null||a.time("Overall");const lt=this._transport.getRenderingIntent(g,H,W);rt(this,r,!1),X(this,j,Ee).call(this),q||(q=this._transport.getOptionalContentConfig());let ft=this._intentStates.get(lt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(lt.cacheKey,ft)),ft.streamReaderCancelTimeout&&(clearTimeout(ft.streamReaderCancelTimeout),ft.streamReaderCancelTimeout=null);const xt=!!(lt.renderingIntent&_util.RenderingIntentFlag.PRINT);ft.displayReadyCapability||(ft.displayReadyCapability=new _util.PromiseCapability,ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(i=this._stats)==null||i.time("Page Request"),this._pumpOperatorList(lt));const St=h=>{var d,C;ft.renderTasks.delete(k),(this._maybeCleanupAfterRender||xt)&&rt(this,r,!0),X(this,u,he).call(this,!xt),h?(k.capability.reject(h),this._abortOperatorList({intentState:ft,reason:h instanceof Error?h:new Error(h)})):k.capability.resolve(),(d=this._stats)==null||d.timeEnd("Rendering"),(C=this._stats)==null||C.timeEnd("Overall")},k=new InternalRenderTask({callback:St,params:{canvasContext:l,viewport:F,transform:z,background:R},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:tt,operatorList:ft.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!xt,pdfBug:this._pdfBug,pageColors:Q});(ft.renderTasks||(ft.renderTasks=new Set)).add(k);const n=k.task;return Promise.all([ft.displayReadyCapability.promise,q]).then(([h,d])=>{var C;if(this.destroyed){St();return}(C=this._stats)==null||C.time("Rendering"),k.initializeGraphics({transparency:h,optionalContentConfig:d}),k.operatorListChanged()}).catch(St),n}getOperatorList({intent:l="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var tt;function H(){R.operatorList.lastChunk&&(R.opListReadCapability.resolve(R.operatorList),R.renderTasks.delete(q))}const z=this._transport.getRenderingIntent(l,F,g,!0);let R=this._intentStates.get(z.cacheKey);R||(R=Object.create(null),this._intentStates.set(z.cacheKey,R));let q;return R.opListReadCapability||(q=Object.create(null),q.operatorListChanged=H,R.opListReadCapability=new _util.PromiseCapability,(R.renderTasks||(R.renderTasks=new Set)).add(q),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(tt=this._stats)==null||tt.time("Page Request"),this._pumpOperatorList(z)),R.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:F===!0},{highWaterMark:100,size(H){return H.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const F=this.streamTextContent(l);return new Promise(function(g,H){function z(){R.read().then(function({value:tt,done:Q}){if(Q){g(q);return}Object.assign(q.styles,tt.styles),q.items.push(...tt.items),z()},H)}const R=F.getReader(),q={items:[],styles:Object.create(null)};z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const g of F.renderTasks)l.push(g.completed),g.cancel();return this.objs.clear(),rt(this,r,!1),X(this,j,Ee).call(this),Promise.all(l)}cleanup(l=!1){rt(this,r,!0);const F=X(this,u,he).call(this,!1);return l&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(l,F){var H,z;const g=this._intentStates.get(F);g&&((H=this._stats)==null||H.timeEnd("Page Request"),(z=g.displayReadyCapability)==null||z.resolve(l))}_renderPageChunk(l,F){for(let g=0,H=l.length;g<H;g++)F.operatorList.fnArray.push(l.fnArray[g]),F.operatorList.argsArray.push(l.argsArray[g]);F.operatorList.lastChunk=l.lastChunk,F.operatorList.separateAnnots=l.separateAnnots;for(const g of F.renderTasks)g.operatorListChanged();l.lastChunk&&X(this,u,he).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:F,annotationStorageSerializable:g}){const{map:H,transfers:z}=g,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:F,annotationStorage:H},z).getReader(),tt=this._intentStates.get(F);tt.streamReader=q;const Q=()=>{q.read().then(({value:W,done:lt})=>{if(lt){tt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(W,tt),Q())},W=>{if(tt.streamReader=null,!this._transport.destroyed){if(tt.operatorList){tt.operatorList.lastChunk=!0;for(const lt of tt.renderTasks)lt.operatorListChanged();X(this,u,he).call(this,!0)}if(tt.displayReadyCapability)tt.displayReadyCapability.reject(W);else if(tt.opListReadCapability)tt.opListReadCapability.reject(W);else throw W}})};Q()}_abortOperatorList({intentState:l,reason:F,force:g=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!g){if(l.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let H=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(H+=F.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:F,force:!0})},H);return}}if(l.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[H,z]of this._intentStates)if(z===l){this._intentStates.delete(H);break}this.cleanup()}}}get stats(){return this._stats}}M=new WeakMap,r=new WeakMap,u=new WeakSet,he=function(l=!1){if(X(this,j,Ee).call(this),!t(this,r)||this.destroyed)return!1;if(l)return rt(this,M,setTimeout(()=>{rt(this,M,null),X(this,u,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:g}of this._intentStates.values())if(F.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,r,!1),!0},j=new WeakSet,Ee=function(){t(this,M)&&(clearTimeout(t(this,M)),rt(this,M,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){$(this,P,new Set);$(this,w,Promise.resolve())}postMessage(l,F){const g={data:structuredClone(l,F?{transfer:F}:null)};t(this,w).then(()=>{for(const H of t(this,P))H.call(this,g)})}addEventListener(l,F){t(this,P).add(F)}removeEventListener(l,F){t(this,P).delete(F)}terminate(){t(this,P).clear()}}P=new WeakMap,w=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,l){let F;try{if(F=new URL(y),!F.origin||F.origin==="null")return!1}catch{return!1}const g=new URL(l,F);return F.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(y){const l=`importScripts("${y}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:l=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var g;if(this.name=y,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((g=t(_PDFWorker,O))!=null&&g.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,O)||rt(_PDFWorker,O,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const l=new Worker(y),F=new _message_handler.MessageHandler("main","worker",l),g=()=>{l.removeEventListener("error",H),F.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},H=()=>{this._webWorker||g()};l.addEventListener("error",H),F.on("test",R=>{if(l.removeEventListener("error",H),this.destroyed){g();return}R?(this._messageHandler=F,this._port=l,this._webWorker=l,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),l.terminate())}),F.on("ready",R=>{if(l.removeEventListener("error",H),this.destroyed){g();return}try{z()}catch{this._setupFakeWorker()}});const z=()=>{const R=new Uint8Array;F.send("test",R,[R.buffer])};z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(F+"_worker",F,l);y.setup(g,l);const H=new _message_handler.MessageHandler(F,F+"_worker",l);this._messageHandler=H,this._readyCapability.resolve(),H.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=t(_PDFWorker,O))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var F;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(F=t(this,O))==null?void 0:F.get(y.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};O=new WeakMap,$(_PDFWorker,O,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,F,g,H,z){$(this,p);$(this,L,new Map);$(this,T,new Map);$(this,x,new Map);$(this,v,null);this.messageHandler=l,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:H.ownerDocument,styleElement:H.styleElement}),this._params=H,this.canvasFactory=z.canvasFactory,this.filterFactory=z.filterFactory,this.cMapReaderFactory=z.cMapReaderFactory,this.standardFontDataFactory=z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,F=_util.AnnotationMode.ENABLE,g=null,H=!1){let z=_util.RenderingIntentFlag.DISPLAY,R=_annotation_storage.SerializableEmpty;switch(l){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(F){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,R=(z&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return H&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${R.hash}`,annotationStorageSerializable:R}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,v))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const H of t(this,T).values())l.push(H._destroy());t(this,T).clear(),t(this,x).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return l.push(F),Promise.all(l).then(()=>{var H;this.commonObjs.clear(),this.fontLoader.clear(),t(this,L).clear(),this.filterFactory.destroy(),(H=this._networkStream)==null||H.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:F}=this;l.on("GetReader",(g,H)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=z=>{this._lastProgress={loaded:z.loaded,total:z.total}},H.onPull=()=>{this._fullReader.read().then(function({value:z,done:R}){if(R){H.close();return}(0,_util.assert)(z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array(z),1,[z])}).catch(z=>{H.error(z)})},H.onCancel=z=>{this._fullReader.cancel(z),H.ready.catch(R=>{if(!this.destroyed)throw R})}}),l.on("ReaderHeadersReady",g=>{const H=new _util.PromiseCapability,z=this._fullReader;return z.headersReady.then(()=>{var R;(!z.isStreamingSupported||!z.isRangeSupported)&&(this._lastProgress&&((R=F.onProgress)==null||R.call(F,this._lastProgress)),z.onProgress=q=>{var tt;(tt=F.onProgress)==null||tt.call(F,{loaded:q.loaded,total:q.total})}),H.resolve({isStreamingSupported:z.isStreamingSupported,isRangeSupported:z.isRangeSupported,contentLength:z.contentLength})},H.reject),H.promise}),l.on("GetRangeReader",(g,H)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const z=this._networkStream.getRangeReader(g.begin,g.end);if(!z){H.close();return}H.onPull=()=>{z.read().then(function({value:R,done:q}){if(q){H.close();return}(0,_util.assert)(R instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array(R),1,[R])}).catch(R=>{H.error(R)})},H.onCancel=R=>{z.cancel(R),H.ready.catch(q=>{if(!this.destroyed)throw q})}}),l.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(g,this))}),l.on("DocException",function(g){let H;switch(g.name){case"PasswordException":H=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":H=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":H=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":H=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":H=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(H)}),l.on("PasswordRequest",g=>{if(rt(this,v,new _util.PromiseCapability),F.onPassword){const H=z=>{z instanceof Error?t(this,v).reject(z):t(this,v).resolve({password:z})};try{F.onPassword(H,g.code)}catch(z){t(this,v).reject(z)}}else t(this,v).reject(new _util.PasswordException(g.message,g.code));return t(this,v).promise}),l.on("DataLoaded",g=>{var H;(H=F.onProgress)==null||H.call(F,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),l.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,T).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),l.on("commonobj",([g,H,z])=>{var R;if(!this.destroyed&&!this.commonObjs.has(g))switch(H){case"Font":const q=this._params;if("error"in z){const W=z.error;(0,_util.warn)(`Error during font loading: ${W}`),this.commonObjs.resolve(g,W);break}const tt=q.pdfBug&&((R=globalThis.FontInspector)!=null&&R.enabled)?(W,lt)=>globalThis.FontInspector.fontAdded(W,lt):null,Q=new _font_loader.FontFaceObject(z,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:tt});this.fontLoader.bind(Q).catch(W=>l.sendWithPromise("FontFallback",{id:g})).finally(()=>{!q.fontExtraProperties&&Q.data&&(Q.data=null),this.commonObjs.resolve(g,Q)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,z);break;default:throw new Error(`Got unknown common object type ${H}`)}}),l.on("obj",([g,H,z,R])=>{var tt;if(this.destroyed)return;const q=t(this,T).get(H);if(!q.objs.has(g))switch(z){case"Image":if(q.objs.resolve(g,R),R){let Q;if(R.bitmap){const{width:W,height:lt}=R;Q=W*lt*4}else Q=((tt=R.data)==null?void 0:tt.length)||0;Q>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(g,R);break;default:throw new Error(`Got unknown object type ${z}`)}}),l.on("DocProgress",g=>{var H;this.destroyed||(H=F.onProgress)==null||H.call(F,{loaded:g.loaded,total:g.total})}),l.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((g=this._fullReader)==null?void 0:g.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=l-1,g=t(this,x).get(F);if(g)return g;const H=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(z=>{if(this.destroyed)throw new Error("Transport destroyed");const R=new PDFPageProxy(F,z,this,this._params.pdfBug);return t(this,T).set(F,R),R});return t(this,x).set(F,H),H}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:F})}getFieldObjects(){return X(this,p,Se).call(this,"GetFieldObjects")}hasJSActions(){return X(this,p,Se).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,p,Se).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",F=t(this,L).get(l);if(F)return F;const g=this.messageHandler.sendWithPromise(l,null).then(H=>{var z,R;return{info:H[0],metadata:H[1]?new _metadata.Metadata(H[1]):null,contentDispositionFilename:((z=this._fullReader)==null?void 0:z.filename)??null,contentLength:((R=this._fullReader)==null?void 0:R.contentLength)??null}});return t(this,L).set(l,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of t(this,T).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,L).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:F})}}L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakSet,Se=function(l,F=null){const g=t(this,L).get(l);if(g)return g;const H=this.messageHandler.sendWithPromise(l,F);return t(this,L).set(l,H),H};class PDFObjects{constructor(){$(this,A);$(this,m,Object.create(null))}get(l,F=null){if(F){const H=X(this,A,Ne).call(this,l);return H.capability.promise.then(()=>F(H.data)),null}const g=t(this,m)[l];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return g.data}has(l){const F=t(this,m)[l];return(F==null?void 0:F.capability.settled)||!1}resolve(l,F=null){const g=X(this,A,Ne).call(this,l);g.data=F,g.capability.resolve()}clear(){var l;for(const F in t(this,m)){const{data:g}=t(this,m)[F];(l=g==null?void 0:g.bitmap)==null||l.close()}rt(this,m,Object.create(null))}}m=new WeakMap,A=new WeakSet,Ne=function(l){var F;return(F=t(this,m))[l]||(F[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){$(this,o,null);rt(this,o,l),this.onContinue=null}get promise(){return t(this,o).capability.promise}cancel(l=0){t(this,o).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,o).operatorList;if(!l)return!1;const{annotationCanvasMap:F}=t(this,o);return l.form||l.canvas&&(F==null?void 0:F.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const D=class D{constructor({callback:l,params:F,objs:g,commonObjs:H,annotationCanvasMap:z,operatorList:R,pageIndex:q,canvasFactory:tt,filterFactory:Q,useRequestAnimationFrame:W=!1,pdfBug:lt=!1,pageColors:ft=null}){this.callback=l,this.params=F,this.objs=g,this.commonObjs=H,this.annotationCanvasMap=z,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=q,this.canvasFactory=tt,this.filterFactory=Q,this._pdfBug=lt,this.pageColors=ft,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=W===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:F}){var q,tt;if(this.cancelled)return;if(this._canvas){if(t(D,c).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(D,c).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:H,transform:z,background:R}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:z,viewport:H,transparency:l,background:R}),this.operatorListIdx=0,this.graphicsReady=!0,(tt=this.graphicsReadyCallback)==null||tt.call(this)}cancel(l=null,F=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),t(D,c).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(D,c).delete(this._canvas),this.callback())))}};c=new WeakMap,$(D,c,new WeakSet);let InternalRenderTask=D;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(S,e,M)=>{var w,f,O,_n,T;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=M(1),u=M(4),G=M(8);const j=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=j;class ot{constructor(){$(this,O);$(this,w,!1);$(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,p){const b=t(this,f).get(v);return b===void 0?p:Object.assign(p,b)}getRawValue(v){return t(this,f).get(v)}remove(v){if(t(this,f).delete(v),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of t(this,f).values())if(p instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,p){const b=t(this,f).get(v);let m=!1;if(b!==void 0)for(const[A,_]of Object.entries(p))b[A]!==_&&(m=!0,b[A]=_);else m=!0,t(this,f).set(v,p);m&&X(this,O,_n).call(this),p instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(v){return t(this,f).has(v)}getAll(){return t(this,f).size>0?(0,r.objectFromMap)(t(this,f)):null}setAll(v){for(const[p,b]of Object.entries(v))this.setValue(p,b)}get size(){return t(this,f).size}resetModified(){t(this,w)&&(rt(this,w,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new P(this)}get serializable(){if(t(this,f).size===0)return j;const v=new Map,p=new G.MurmurHash3_64,b=[],m=Object.create(null);let A=!1;for(const[_,o]of t(this,f)){const c=o instanceof u.AnnotationEditor?o.serialize(!1,m):o;c&&(v.set(_,c),p.update(`${_}:${JSON.stringify(c)}`),A||(A=!!c.bitmap))}if(A)for(const _ of v.values())_.bitmap&&b.push(_.bitmap);return v.size>0?{map:v,hash:p.hexdigest(),transfers:b}:j}}w=new WeakMap,f=new WeakMap,O=new WeakSet,_n=function(){t(this,w)||(rt(this,w,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=ot;class P extends ot{constructor(p){super();$(this,T,void 0);const{map:b,hash:m,transfers:A}=p.serializable,_=structuredClone(b,A?{transfer:A}:null);rt(this,T,{map:_,hash:m,transfers:A})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,T)}}T=new WeakMap,e.PrintAnnotationStorage=P},(S,e,M)=>{var P,w,f,O,L,T,x,v,p,b,m,A,_,o,c,Be,y,Ue,F,$e,H,We,R,An,tt,vn,W,En,ft,He,St,Sn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=M(5),u=M(1),G=M(6);const n=class n{constructor(i){$(this,c);$(this,y);$(this,H);$(this,R);$(this,tt);$(this,W);$(this,ft);$(this,St);$(this,P,"");$(this,w,!1);$(this,f,null);$(this,O,null);$(this,L,null);$(this,T,!1);$(this,x,null);$(this,v,this.focusin.bind(this));$(this,p,this.focusout.bind(this));$(this,b,!1);$(this,m,!1);$(this,A,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);$(this,_,!1);$(this,o,n._zIndex++);this.constructor===n&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=i.isCentered,this._structTreeParentId=null;const{rotation:h,rawDims:{pageWidth:d,pageHeight:C,pageX:I,pageY:U}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,C],this.pageTranslation=[I,U];const[it,et]=this.parentDimensions;this.x=i.x/it,this.y=i.y/et,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(i){const h=new ot({id:i.parent.getNextId(),parent:i.parent,uiManager:i._uiManager});h.annotationElementId=i.annotationElementId,h.deleted=!0,h._uiManager.addToAnnotationStorage(h)}static initialize(i,h=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(C=>[C,i.get(C)]))),h!=null&&h.strings)for(const C of h.strings)n._l10nPromise.set(C,i.get(C));if(n._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(i,h){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(i){return!1}static paste(i,h){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,_)}set _isDraggable(i){var h;rt(this,_,i),(h=this.div)==null||h.classList.toggle("draggable",i)}center(){const[i,h]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*h/(i*2),this.y+=this.width*i/(h*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*h/(i*2),this.y-=this.width*i/(h*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,o)}setParent(i){i!==null&&(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions),this.parent=i}focusin(i){this._focusEventsAllowed&&(t(this,b)?rt(this,b,!1):this.parent.setSelected(this))}focusout(i){var d;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const h=i.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(i.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(i,h,d,C){const[I,U]=this.parentDimensions;[d,C]=this.screenToPageTranslation(d,C),this.x=(i+d)/I,this.y=(h+C)/U,this.fixAndSetPosition()}translate(i,h){X(this,c,Be).call(this,this.parentDimensions,i,h)}translateInPage(i,h){X(this,c,Be).call(this,this.pageDimensions,i,h),this.div.scrollIntoView({block:"nearest"})}drag(i,h){const[d,C]=this.parentDimensions;if(this.x+=i/d,this.y+=h/C,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:at,y:dt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,at,dt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:I,y:U}=this;const[it,et]=X(this,y,Ue).call(this);I+=it,U+=et,this.div.style.left=`${(100*I).toFixed(2)}%`,this.div.style.top=`${(100*U).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[i,h]=this.pageDimensions;let{x:d,y:C,width:I,height:U}=this;switch(I*=i,U*=h,d*=i,C*=h,this.rotation){case 0:d=Math.max(0,Math.min(i-I,d)),C=Math.max(0,Math.min(h-U,C));break;case 90:d=Math.max(0,Math.min(i-U,d)),C=Math.min(h,Math.max(I,C));break;case 180:d=Math.min(i,Math.max(I,d)),C=Math.min(h,Math.max(U,C));break;case 270:d=Math.min(i,Math.max(U,d)),C=Math.max(0,Math.min(h-I,C));break}this.x=d/=i,this.y=C/=h;const[it,et]=X(this,y,Ue).call(this);d+=it,C+=et;const{style:at}=this.div;at.left=`${(100*d).toFixed(2)}%`,at.top=`${(100*C).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(i,h){var d;return X(d=n,F,$e).call(d,i,h,this.parentRotation)}pageTranslationToScreen(i,h){var d;return X(d=n,F,$e).call(d,i,h,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:i,pageDimensions:[h,d]}=this,C=h*i,I=d*i;return u.FeatureTest.isCSSRoundSupported?[Math.round(C),Math.round(I)]:[C,I]}setDims(i,h){var I;const[d,C]=this.parentDimensions;this.div.style.width=`${(100*i/d).toFixed(2)}%`,t(this,T)||(this.div.style.height=`${(100*h/C).toFixed(2)}%`),(I=t(this,f))==null||I.classList.toggle("small",i<n.SMALL_EDITOR_SIZE||h<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:i}=this.div,{height:h,width:d}=i,C=d.endsWith("%"),I=!t(this,T)&&h.endsWith("%");if(C&&I)return;const[U,it]=this.parentDimensions;C||(i.width=`${(100*parseFloat(d)/U).toFixed(2)}%`),!t(this,T)&&!I&&(i.height=`${(100*parseFloat(h)/it).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const i=rt(this,f,document.createElement("button"));i.className="altText";const h=await n._l10nPromise.get("editor_alt_text_button_label");i.textContent=h,i.setAttribute("aria-label",h),i.tabIndex="0",i.addEventListener("contextmenu",G.noContextMenu),i.addEventListener("pointerdown",d=>d.stopPropagation()),i.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),i.addEventListener("keydown",d=>{d.target===i&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),X(this,ft,He).call(this),this.div.append(i),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(i.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,P),decorative:t(this,w)}}set altTextData({altText:i,decorative:h}){t(this,P)===i&&t(this,w)===h||(rt(this,P,i),rt(this,w,h),X(this,ft,He).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,v)),this.div.addEventListener("focusout",t(this,p));const[i,h]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*h/i).toFixed(2)}%`,this.div.style.maxHeight=`${(100*i/h).toFixed(2)}%`);const[d,C]=this.getInitialTranslation();return this.translate(d,C),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(i){const{isMac:h}=u.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&h){i.preventDefault();return}rt(this,b,!0),X(this,St,Sn).call(this,i)}moveInDOM(){var i;(i=this.parent)==null||i.moveEditorInDOM(this)}_setParentAndPosition(i,h,d){i.changeParent(this),this.x=h,this.y=d,this.fixAndSetPosition()}getRect(i,h){const d=this.parentScale,[C,I]=this.pageDimensions,[U,it]=this.pageTranslation,et=i/d,at=h/d,dt=this.x*C,gt=this.y*I,ht=this.width*C,Rt=this.height*I;switch(this.rotation){case 0:return[dt+et+U,I-gt-at-Rt+it,dt+et+ht+U,I-gt-at+it];case 90:return[dt+at+U,I-gt+et+it,dt+at+Rt+U,I-gt+et+ht+it];case 180:return[dt-et-ht+U,I-gt+at+it,dt-et+U,I-gt+at+Rt+it];case 270:return[dt-at-Rt+U,I-gt-et-ht+it,dt-at+U,I-gt-et+it];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,h){const[d,C,I,U]=i,it=I-d,et=U-C;switch(this.rotation){case 0:return[d,h-U,it,et];case 90:return[d,h-C,et,it];case 180:return[I,h-C,it,et];case 270:return[I,h-U,et,it];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,A,!0)}disableEditMode(){rt(this,A,!1)}isInEditMode(){return t(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var i,h;(i=this.div)==null||i.addEventListener("focusin",t(this,v)),(h=this.div)==null||h.addEventListener("focusout",t(this,p))}serialize(i=!1,h=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(i,h,d){const C=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:d});C.rotation=i.rotation;const[I,U]=C.pageDimensions,[it,et,at,dt]=C.getRectInCurrentCoords(i.rect,U);return C.x=it/I,C.y=et/U,C.width=at/I,C.height=dt/U,C}remove(){var i;this.div.removeEventListener("focusin",t(this,v)),this.div.removeEventListener("focusout",t(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(i=t(this,f))==null||i.remove(),rt(this,f,null),rt(this,O,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,R,An).call(this),t(this,x).classList.remove("hidden"))}select(){var i;this.makeResizable(),(i=this.div)==null||i.classList.add("selectedEditor")}unselect(){var i,h,d;(i=t(this,x))==null||i.classList.add("hidden"),(h=this.div)==null||h.classList.remove("selectedEditor"),(d=this.div)!=null&&d.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(i,h){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,m)}set isEditing(i){rt(this,m,i),this.parent&&(i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(i,h){rt(this,T,!0);const d=i/h,{style:C}=this.div;C.aspectRatio=d,C.height="auto"}static get MIN_SIZE(){return 16}};P=new WeakMap,w=new WeakMap,f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakMap,m=new WeakMap,A=new WeakMap,_=new WeakMap,o=new WeakMap,c=new WeakSet,Be=function([i,h],d,C){[d,C]=this.screenToPageTranslation(d,C),this.x+=d/i,this.y+=C/h,this.fixAndSetPosition()},y=new WeakSet,Ue=function(){const[i,h]=this.parentDimensions,{_borderLineWidth:d}=n,C=d/i,I=d/h;switch(this.rotation){case 90:return[-C,I];case 180:return[C,I];case 270:return[C,-I];default:return[-C,-I]}},F=new WeakSet,$e=function(i,h,d){switch(d){case 90:return[h,-i];case 180:return[-i,-h];case 270:return[-h,i];default:return[i,h]}},H=new WeakSet,We=function(i){switch(i){case 90:{const[h,d]=this.pageDimensions;return[0,-h/d,d/h,0]}case 180:return[-1,0,0,-1];case 270:{const[h,d]=this.pageDimensions;return[0,h/d,-d/h,0]}default:return[1,0,0,1]}},R=new WeakSet,An=function(){if(t(this,x))return;rt(this,x,document.createElement("div")),t(this,x).classList.add("resizers");const i=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||i.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const h of i){const d=document.createElement("div");t(this,x).append(d),d.classList.add("resizer",h),d.addEventListener("pointerdown",X(this,tt,vn).bind(this,h)),d.addEventListener("contextmenu",G.noContextMenu)}this.div.prepend(t(this,x))},tt=new WeakSet,vn=function(i,h){h.preventDefault();const{isMac:d}=u.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&d)return;const C=X(this,W,En).bind(this,i),I=this._isDraggable;this._isDraggable=!1;const U={passive:!0,capture:!0};window.addEventListener("pointermove",C,U);const it=this.x,et=this.y,at=this.width,dt=this.height,gt=this.parent.div.style.cursor,ht=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(h.target).cursor;const Rt=()=>{this._isDraggable=I,window.removeEventListener("pointerup",Rt),window.removeEventListener("blur",Rt),window.removeEventListener("pointermove",C,U),this.parent.div.style.cursor=gt,this.div.style.cursor=ht;const Lt=this.x,vt=this.y,Dt=this.width,mt=this.height;Lt===it&&vt===et&&Dt===at&&mt===dt||this.addCommands({cmd:()=>{this.width=Dt,this.height=mt,this.x=Lt,this.y=vt;const[nt,st]=this.parentDimensions;this.setDims(nt*Dt,st*mt),this.fixAndSetPosition()},undo:()=>{this.width=at,this.height=dt,this.x=it,this.y=et;const[nt,st]=this.parentDimensions;this.setDims(nt*at,st*dt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Rt),window.addEventListener("blur",Rt)},W=new WeakSet,En=function(i,h){const[d,C]=this.parentDimensions,I=this.x,U=this.y,it=this.width,et=this.height,at=n.MIN_SIZE/d,dt=n.MIN_SIZE/C,gt=yt=>Math.round(yt*1e4)/1e4,ht=X(this,H,We).call(this,this.rotation),Rt=(yt,At)=>[ht[0]*yt+ht[2]*At,ht[1]*yt+ht[3]*At],Lt=X(this,H,We).call(this,360-this.rotation),vt=(yt,At)=>[Lt[0]*yt+Lt[2]*At,Lt[1]*yt+Lt[3]*At];let Dt,mt,nt=!1,st=!1;switch(i){case"topLeft":nt=!0,Dt=(yt,At)=>[0,0],mt=(yt,At)=>[yt,At];break;case"topMiddle":Dt=(yt,At)=>[yt/2,0],mt=(yt,At)=>[yt/2,At];break;case"topRight":nt=!0,Dt=(yt,At)=>[yt,0],mt=(yt,At)=>[0,At];break;case"middleRight":st=!0,Dt=(yt,At)=>[yt,At/2],mt=(yt,At)=>[0,At/2];break;case"bottomRight":nt=!0,Dt=(yt,At)=>[yt,At],mt=(yt,At)=>[0,0];break;case"bottomMiddle":Dt=(yt,At)=>[yt/2,At],mt=(yt,At)=>[yt/2,0];break;case"bottomLeft":nt=!0,Dt=(yt,At)=>[0,At],mt=(yt,At)=>[yt,0];break;case"middleLeft":st=!0,Dt=(yt,At)=>[0,At/2],mt=(yt,At)=>[yt,At/2];break}const pt=Dt(it,et),Tt=mt(it,et);let wt=Rt(...Tt);const Bt=gt(I+wt[0]),Gt=gt(U+wt[1]);let Ut=1,zt=1,[Ht,$t]=this.screenToPageTranslation(h.movementX,h.movementY);if([Ht,$t]=vt(Ht/d,$t/C),nt){const yt=Math.hypot(it,et);Ut=zt=Math.max(Math.min(Math.hypot(Tt[0]-pt[0]-Ht,Tt[1]-pt[1]-$t)/yt,1/it,1/et),at/it,dt/et)}else st?Ut=Math.max(at,Math.min(1,Math.abs(Tt[0]-pt[0]-Ht)))/it:zt=Math.max(dt,Math.min(1,Math.abs(Tt[1]-pt[1]-$t)))/et;const Vt=gt(it*Ut),ut=gt(et*zt);wt=Rt(...mt(Vt,ut));const Z=Bt-wt[0],Y=Gt-wt[1];this.width=Vt,this.height=ut,this.x=Z,this.y=Y,this.setDims(d*Vt,C*ut),this.fixAndSetPosition()},ft=new WeakSet,He=async function(){var d;const i=t(this,f);if(!i)return;if(!t(this,P)&&!t(this,w)){i.classList.remove("done"),(d=t(this,O))==null||d.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(C=>{i.setAttribute("aria-label",C)});let h=t(this,O);if(!h){rt(this,O,h=document.createElement("span")),h.className="tooltip",h.setAttribute("role","tooltip");const C=h.id=`alt-text-tooltip-${this.id}`;i.setAttribute("aria-describedby",C);const I=100;i.addEventListener("mouseenter",()=>{rt(this,L,setTimeout(()=>{rt(this,L,null),t(this,O).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},I))}),i.addEventListener("mouseleave",()=>{var U;clearTimeout(t(this,L)),rt(this,L,null),(U=t(this,O))==null||U.classList.remove("show")})}i.classList.add("done"),h.innerText=t(this,w)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,P),h.parentNode||i.append(h)},St=new WeakSet,Sn=function(i){if(!this._isDraggable)return;const h=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,C;h&&(d={passive:!0,capture:!0},C=U=>{const[it,et]=this.screenToPageTranslation(U.movementX,U.movementY);this._uiManager.dragSelectedEditors(it,et)},window.addEventListener("pointermove",C,d));const I=()=>{if(window.removeEventListener("pointerup",I),window.removeEventListener("blur",I),h&&window.removeEventListener("pointermove",C,d),rt(this,b,!1),!this._uiManager.endDragSession()){const{isMac:U}=u.FeatureTest.platform;i.ctrlKey&&!U||i.shiftKey||i.metaKey&&U?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",I),window.addEventListener("blur",I)},$(n,F),ee(n,"_borderLineWidth",-1),ee(n,"_colorManager",new r.ColorManager),ee(n,"_zIndex",1),ee(n,"SMALL_EDITOR_SIZE",0);let j=n;e.AnnotationEditor=j;class ot extends j{constructor(i){super(i),this.annotationElementId=i.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(S,e,M)=>{var T,x,v,p,b,Ge,_,o,c,D,y,Tn,g,H,z,R,q,tt,Q,W,lt,ft,xt,St,k,n,a,i,h,d,C,I,U,it,et,at,dt,gt,ht,Rt,Lt,vt,Dt,mt,nt,st,pt,wn,wt,ze,Gt,Ve,zt,Te,$t,qe,ut,Xe,Y,re,At,me,Zt,Rn,Et,Cn,Ct,Ye,Nt,be,_t,Ke;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=G,e.opacityToHex=j;var r=M(1),u=M(6);function G(N,s,E){for(const B of E)s.addEventListener(B,N[B].bind(N))}function j(N){return Math.round(Math.min(255,Math.max(1,255*N))).toString(16).padStart(2,"0")}class ot{constructor(){$(this,T,0)}getId(){return`${r.AnnotationEditorPrefix}${ge(this,T)._++}`}}T=new WeakMap;const A=class A{constructor(){$(this,b);$(this,x,(0,r.getUuid)());$(this,v,0);$(this,p,null)}static get _isSVGFittingCanvas(){const s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',B=new OffscreenCanvas(1,3).getContext("2d"),V=new Image;V.src=s;const K=V.decode().then(()=>(B.drawImage(V,0,0,1,1,0,0,1,3),new Uint32Array(B.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",K)}async getFromFile(s){const{lastModified:E,name:B,size:V,type:K}=s;return X(this,b,Ge).call(this,`${E}_${B}_${V}_${K}`,s)}async getFromUrl(s){return X(this,b,Ge).call(this,s,s)}async getFromId(s){t(this,p)||rt(this,p,new Map);const E=t(this,p).get(s);return E?E.bitmap?(E.refCounter+=1,E):E.file?this.getFromFile(E.file):this.getFromUrl(E.url):null}getSvgUrl(s){const E=t(this,p).get(s);return E!=null&&E.isSvg?E.svgUrl:null}deleteId(s){t(this,p)||rt(this,p,new Map);const E=t(this,p).get(s);E&&(E.refCounter-=1,E.refCounter===0&&(E.bitmap=null))}isValidId(s){return s.startsWith(`image_${t(this,x)}_`)}};x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakSet,Ge=async function(s,E){t(this,p)||rt(this,p,new Map);let B=t(this,p).get(s);if(B===null)return null;if(B!=null&&B.bitmap)return B.refCounter+=1,B;try{B||(B={bitmap:null,id:`image_${t(this,x)}_${ge(this,v)._++}`,refCounter:0,isSvg:!1});let V;if(typeof E=="string"){B.url=E;const K=await fetch(E);if(!K.ok)throw new Error(K.statusText);V=await K.blob()}else V=B.file=E;if(V.type==="image/svg+xml"){const K=A._isSVGFittingCanvas,ct=new FileReader,bt=new Image,kt=new Promise((Pt,qt)=>{bt.onload=()=>{B.bitmap=bt,B.isSvg=!0,Pt()},ct.onload=async()=>{const Ft=B.svgUrl=ct.result;bt.src=await K?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},bt.onerror=ct.onerror=qt});ct.readAsDataURL(V),await kt}else B.bitmap=await createImageBitmap(V);B.refCounter=1}catch(V){console.error(V),B=null}return t(this,p).set(s,B),B&&t(this,p).set(B.id,B),B};let P=A;class w{constructor(s=128){$(this,_,[]);$(this,o,!1);$(this,c,void 0);$(this,D,-1);rt(this,c,s)}add({cmd:s,undo:E,mustExec:B,type:V=NaN,overwriteIfSameType:K=!1,keepUndo:ct=!1}){if(B&&s(),t(this,o))return;const bt={cmd:s,undo:E,type:V};if(t(this,D)===-1){t(this,_).length>0&&(t(this,_).length=0),rt(this,D,0),t(this,_).push(bt);return}if(K&&t(this,_)[t(this,D)].type===V){ct&&(bt.undo=t(this,_)[t(this,D)].undo),t(this,_)[t(this,D)]=bt;return}const kt=t(this,D)+1;kt===t(this,c)?t(this,_).splice(0,1):(rt(this,D,kt),kt<t(this,_).length&&t(this,_).splice(kt)),t(this,_).push(bt)}undo(){t(this,D)!==-1&&(rt(this,o,!0),t(this,_)[t(this,D)].undo(),rt(this,o,!1),rt(this,D,t(this,D)-1))}redo(){t(this,D)<t(this,_).length-1&&(rt(this,D,t(this,D)+1),rt(this,o,!0),t(this,_)[t(this,D)].cmd(),rt(this,o,!1))}hasSomethingToUndo(){return t(this,D)!==-1}hasSomethingToRedo(){return t(this,D)<t(this,_).length-1}destroy(){rt(this,_,null)}}_=new WeakMap,o=new WeakMap,c=new WeakMap,D=new WeakMap,e.CommandManager=w;class f{constructor(s){$(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:E}=r.FeatureTest.platform;for(const[B,V,K={}]of s)for(const ct of B){const bt=ct.startsWith("mac+");E&&bt?(this.callbacks.set(ct.slice(4),{callback:V,options:K}),this.allKeys.add(ct.split("+").at(-1))):!E&&!bt&&(this.callbacks.set(ct,{callback:V,options:K}),this.allKeys.add(ct.split("+").at(-1)))}}exec(s,E){if(!this.allKeys.has(E.key))return;const B=this.callbacks.get(X(this,y,Tn).call(this,E));if(!B)return;const{callback:V,options:{bubbles:K=!1,args:ct=[],checker:bt=null}}=B;bt&&!bt(s,E)||(V.bind(s,...ct)(),K||(E.stopPropagation(),E.preventDefault()))}}y=new WeakSet,Tn=function(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const E=this.buffer.join("+");return this.buffer.length=0,E},e.KeyboardManager=f;const F=class F{get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(s),(0,r.shadow)(this,"_colors",s)}convert(s){const E=(0,u.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return E;for(const[B,V]of this._colors)if(V.every((K,ct)=>K===E[ct]))return F._colorsMapping.get(B);return E}getHexCode(s){const E=this._colors.get(s);return E?r.Util.makeHexColor(...E):s}};ee(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let O=F;e.ColorManager=O;const Ot=class Ot{constructor(s,E,B,V,K,ct){$(this,pt);$(this,wt);$(this,Gt);$(this,zt);$(this,$t);$(this,ut);$(this,Y);$(this,At);$(this,Zt);$(this,Et);$(this,Ct);$(this,Nt);$(this,_t);$(this,g,null);$(this,H,new Map);$(this,z,new Map);$(this,R,null);$(this,q,null);$(this,tt,new w);$(this,Q,0);$(this,W,new Set);$(this,lt,null);$(this,ft,null);$(this,xt,new Set);$(this,St,null);$(this,k,new ot);$(this,n,!1);$(this,a,!1);$(this,i,null);$(this,h,r.AnnotationEditorType.NONE);$(this,d,new Set);$(this,C,null);$(this,I,this.blur.bind(this));$(this,U,this.focus.bind(this));$(this,it,this.copy.bind(this));$(this,et,this.cut.bind(this));$(this,at,this.paste.bind(this));$(this,dt,this.keydown.bind(this));$(this,gt,this.onEditingAction.bind(this));$(this,ht,this.onPageChanging.bind(this));$(this,Rt,this.onScaleChanging.bind(this));$(this,Lt,this.onRotationChanging.bind(this));$(this,vt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});$(this,Dt,[0,0]);$(this,mt,null);$(this,nt,null);$(this,st,null);rt(this,nt,s),rt(this,st,E),rt(this,R,B),this._eventBus=V,this._eventBus._on("editingaction",t(this,gt)),this._eventBus._on("pagechanging",t(this,ht)),this._eventBus._on("scalechanging",t(this,Rt)),this._eventBus._on("rotationchanging",t(this,Lt)),rt(this,q,K.annotationStorage),rt(this,St,K.filterFactory),rt(this,C,ct),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const s=Ot.prototype,E=K=>{const{activeElement:ct}=document;return ct&&t(K,nt).contains(ct)&&K.hasSomethingToControl()},B=this.TRANSLATE_SMALL,V=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],s.selectAll],[["ctrl+z","mac+meta+z"],s.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],s.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],s.delete],[["Escape","mac+Escape"],s.unselectAll],[["ArrowLeft","mac+ArrowLeft"],s.translateSelectedEditors,{args:[-B,0],checker:E}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s.translateSelectedEditors,{args:[-V,0],checker:E}],[["ArrowRight","mac+ArrowRight"],s.translateSelectedEditors,{args:[B,0],checker:E}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s.translateSelectedEditors,{args:[V,0],checker:E}],[["ArrowUp","mac+ArrowUp"],s.translateSelectedEditors,{args:[0,-B],checker:E}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s.translateSelectedEditors,{args:[0,-V],checker:E}],[["ArrowDown","mac+ArrowDown"],s.translateSelectedEditors,{args:[0,B],checker:E}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s.translateSelectedEditors,{args:[0,V],checker:E}]]))}destroy(){X(this,zt,Te).call(this),X(this,wt,ze).call(this),this._eventBus._off("editingaction",t(this,gt)),this._eventBus._off("pagechanging",t(this,ht)),this._eventBus._off("scalechanging",t(this,Rt)),this._eventBus._off("rotationchanging",t(this,Lt));for(const s of t(this,z).values())s.destroy();t(this,z).clear(),t(this,H).clear(),t(this,xt).clear(),rt(this,g,null),t(this,d).clear(),t(this,tt).destroy(),t(this,R).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",t(this,C)?t(this,St).addHCMFilter(t(this,C).foreground,t(this,C).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(t(this,nt)).direction)}editAltText(s){var E;(E=t(this,R))==null||E.editAltText(this,s)}onPageChanging({pageNumber:s}){rt(this,Q,s-1)}focusMainContainer(){t(this,nt).focus()}findParent(s,E){for(const B of t(this,z).values()){const{x:V,y:K,width:ct,height:bt}=B.div.getBoundingClientRect();if(s>=V&&s<=V+ct&&E>=K&&E<=K+bt)return B}return null}disableUserSelect(s=!1){t(this,st).classList.toggle("noUserSelect",s)}addShouldRescale(s){t(this,xt).add(s)}removeShouldRescale(s){t(this,xt).delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const E of t(this,xt))E.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&t(this,q)&&!t(this,q).has(s.id)&&t(this,q).setValue(s.id,s)}blur(){if(!this.hasSelection)return;const{activeElement:s}=document;for(const E of t(this,d))if(E.div.contains(s)){rt(this,i,[E,s]),E._focusEventsAllowed=!1;break}}focus(){if(!t(this,i))return;const[s,E]=t(this,i);rt(this,i,null),E.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),E.focus()}addEditListeners(){X(this,Gt,Ve).call(this),X(this,$t,qe).call(this)}removeEditListeners(){X(this,zt,Te).call(this),X(this,ut,Xe).call(this)}copy(s){var B;if(s.preventDefault(),(B=t(this,g))==null||B.commitOrRemove(),!this.hasSelection)return;const E=[];for(const V of t(this,d)){const K=V.serialize(!0);K&&E.push(K)}E.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(E))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();const{clipboardData:E}=s;for(const K of E.items)for(const ct of t(this,ft))if(ct.isHandlingMimeForPasting(K.type)){ct.paste(K,this.currentLayer);return}let B=E.getData("application/pdfjs");if(!B)return;try{B=JSON.parse(B)}catch(K){(0,r.warn)(`paste: "${K.message}".`);return}if(!Array.isArray(B))return;this.unselectAll();const V=this.currentLayer;try{const K=[];for(const kt of B){const Pt=V.deserialize(kt);if(!Pt)return;K.push(Pt)}const ct=()=>{for(const kt of K)X(this,Ct,Ye).call(this,kt);X(this,_t,Ke).call(this,K)},bt=()=>{for(const kt of K)kt.remove()};this.addCommands({cmd:ct,undo:bt,mustExec:!0})}catch(K){(0,r.warn)(`paste: "${K.message}".`)}}keydown(s){var E;(E=this.getActive())!=null&&E.shouldGetKeyboardEvents()||Ot._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}setEditingState(s){s?(X(this,pt,wn).call(this),X(this,Gt,Ve).call(this),X(this,$t,qe).call(this),X(this,Y,re).call(this,{isEditing:t(this,h)!==r.AnnotationEditorType.NONE,isEmpty:X(this,Nt,be).call(this),hasSomethingToUndo:t(this,tt).hasSomethingToUndo(),hasSomethingToRedo:t(this,tt).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,wt,ze).call(this),X(this,zt,Te).call(this),X(this,ut,Xe).call(this),X(this,Y,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(s){if(!t(this,ft)){rt(this,ft,s);for(const E of t(this,ft))X(this,At,me).call(this,E.defaultPropertiesToUpdate)}}getId(){return t(this,k).getId()}get currentLayer(){return t(this,z).get(t(this,Q))}getLayer(s){return t(this,z).get(s)}get currentPageIndex(){return t(this,Q)}addLayer(s){t(this,z).set(s.pageIndex,s),t(this,n)?s.enable():s.disable()}removeLayer(s){t(this,z).delete(s.pageIndex)}updateMode(s,E=null){if(t(this,h)!==s){if(rt(this,h,s),s===r.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,Et,Cn).call(this);return}this.setEditingState(!0),X(this,Zt,Rn).call(this),this.unselectAll();for(const B of t(this,z).values())B.updateMode(s);if(E){for(const B of t(this,H).values())if(B.annotationElementId===E){this.setSelected(B),B.enterInEditMode();break}}}}updateToolbar(s){s!==t(this,h)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,E){if(t(this,ft)){if(s===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(s);return}for(const B of t(this,d))B.updateParams(s,E);for(const B of t(this,ft))B.updateDefaultParams(s,E)}}enableWaiting(s=!1){if(t(this,a)!==s){rt(this,a,s);for(const E of t(this,z).values())s?E.disableClick():E.enableClick(),E.div.classList.toggle("waiting",s)}}getEditors(s){const E=[];for(const B of t(this,H).values())B.pageIndex===s&&E.push(B);return E}getEditor(s){return t(this,H).get(s)}addEditor(s){t(this,H).set(s.id,s)}removeEditor(s){var E;t(this,H).delete(s.id),this.unselect(s),(!s.annotationElementId||!t(this,W).has(s.annotationElementId))&&((E=t(this,q))==null||E.remove(s.id))}addDeletedAnnotationElement(s){t(this,W).add(s.annotationElementId),s.deleted=!0}isDeletedAnnotationElement(s){return t(this,W).has(s)}removeDeletedAnnotationElement(s){t(this,W).delete(s.annotationElementId),s.deleted=!1}setActiveEditor(s){t(this,g)!==s&&(rt(this,g,s),s&&X(this,At,me).call(this,s.propertiesToUpdate))}toggleSelected(s){if(t(this,d).has(s)){t(this,d).delete(s),s.unselect(),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,d).add(s),s.select(),X(this,At,me).call(this,s.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}setSelected(s){for(const E of t(this,d))E!==s&&E.unselect();t(this,d).clear(),t(this,d).add(s),s.select(),X(this,At,me).call(this,s.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}isSelected(s){return t(this,d).has(s)}unselect(s){s.unselect(),t(this,d).delete(s),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,d).size!==0}undo(){t(this,tt).undo(),X(this,Y,re).call(this,{hasSomethingToUndo:t(this,tt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,Nt,be).call(this)})}redo(){t(this,tt).redo(),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,tt).hasSomethingToRedo(),isEmpty:X(this,Nt,be).call(this)})}addCommands(s){t(this,tt).add(s),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,Nt,be).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...t(this,d)],E=()=>{for(const V of s)V.remove()},B=()=>{for(const V of s)X(this,Ct,Ye).call(this,V)};this.addCommands({cmd:E,undo:B,mustExec:!0})}commitOrRemove(){var s;(s=t(this,g))==null||s.commitOrRemove()}hasSomethingToControl(){return t(this,g)||this.hasSelection}selectAll(){for(const s of t(this,d))s.commit();X(this,_t,Ke).call(this,t(this,H).values())}unselectAll(){if(t(this,g)){t(this,g).commitOrRemove();return}if(this.hasSelection){for(const s of t(this,d))s.unselect();t(this,d).clear(),X(this,Y,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(s,E,B=!1){if(B||this.commitOrRemove(),!this.hasSelection)return;t(this,Dt)[0]+=s,t(this,Dt)[1]+=E;const[V,K]=t(this,Dt),ct=[...t(this,d)],bt=1e3;t(this,mt)&&clearTimeout(t(this,mt)),rt(this,mt,setTimeout(()=>{rt(this,mt,null),t(this,Dt)[0]=t(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const kt of ct)t(this,H).has(kt.id)&&kt.translateInPage(V,K)},undo:()=>{for(const kt of ct)t(this,H).has(kt.id)&&kt.translateInPage(-V,-K)},mustExec:!1})},bt));for(const kt of ct)kt.translateInPage(s,E)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rt(this,lt,new Map);for(const s of t(this,d))t(this,lt).set(s,{savedX:s.x,savedY:s.y,savedPageIndex:s.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,lt))return!1;this.disableUserSelect(!1);const s=t(this,lt);rt(this,lt,null);let E=!1;for(const[{x:V,y:K,pageIndex:ct},bt]of s)bt.newX=V,bt.newY=K,bt.newPageIndex=ct,E||(E=V!==bt.savedX||K!==bt.savedY||ct!==bt.savedPageIndex);if(!E)return!1;const B=(V,K,ct,bt)=>{if(t(this,H).has(V.id)){const kt=t(this,z).get(bt);kt?V._setParentAndPosition(kt,K,ct):(V.pageIndex=bt,V.x=K,V.y=ct)}};return this.addCommands({cmd:()=>{for(const[V,{newX:K,newY:ct,newPageIndex:bt}]of s)B(V,K,ct,bt)},undo:()=>{for(const[V,{savedX:K,savedY:ct,savedPageIndex:bt}]of s)B(V,K,ct,bt)},mustExec:!0}),!0}dragSelectedEditors(s,E){if(t(this,lt))for(const B of t(this,lt).keys())B.drag(s,E)}rebuild(s){if(s.parent===null){const E=this.getLayer(s.pageIndex);E?(E.changeParent(s),E.addOrRebuild(s)):(this.addEditor(s),this.addToAnnotationStorage(s),s.rebuild())}else s.parent.addOrRebuild(s)}isActive(s){return t(this,g)===s}getActive(){return t(this,g)}getMode(){return t(this,h)}get imageManager(){return(0,r.shadow)(this,"imageManager",new P)}};g=new WeakMap,H=new WeakMap,z=new WeakMap,R=new WeakMap,q=new WeakMap,tt=new WeakMap,Q=new WeakMap,W=new WeakMap,lt=new WeakMap,ft=new WeakMap,xt=new WeakMap,St=new WeakMap,k=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,h=new WeakMap,d=new WeakMap,C=new WeakMap,I=new WeakMap,U=new WeakMap,it=new WeakMap,et=new WeakMap,at=new WeakMap,dt=new WeakMap,gt=new WeakMap,ht=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,vt=new WeakMap,Dt=new WeakMap,mt=new WeakMap,nt=new WeakMap,st=new WeakMap,pt=new WeakSet,wn=function(){window.addEventListener("focus",t(this,U)),window.addEventListener("blur",t(this,I))},wt=new WeakSet,ze=function(){window.removeEventListener("focus",t(this,U)),window.removeEventListener("blur",t(this,I))},Gt=new WeakSet,Ve=function(){window.addEventListener("keydown",t(this,dt),{capture:!0})},zt=new WeakSet,Te=function(){window.removeEventListener("keydown",t(this,dt),{capture:!0})},$t=new WeakSet,qe=function(){document.addEventListener("copy",t(this,it)),document.addEventListener("cut",t(this,et)),document.addEventListener("paste",t(this,at))},ut=new WeakSet,Xe=function(){document.removeEventListener("copy",t(this,it)),document.removeEventListener("cut",t(this,et)),document.removeEventListener("paste",t(this,at))},Y=new WeakSet,re=function(s){Object.entries(s).some(([B,V])=>t(this,vt)[B]!==V)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,vt),s)})},At=new WeakSet,me=function(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})},Zt=new WeakSet,Rn=function(){if(!t(this,n)){rt(this,n,!0);for(const s of t(this,z).values())s.enable()}},Et=new WeakSet,Cn=function(){if(this.unselectAll(),t(this,n)){rt(this,n,!1);for(const s of t(this,z).values())s.disable()}},Ct=new WeakSet,Ye=function(s){const E=t(this,z).get(s.pageIndex);E?E.addOrRebuild(s):this.addEditor(s)},Nt=new WeakSet,be=function(){if(t(this,H).size===0)return!0;if(t(this,H).size===1)for(const s of t(this,H).values())return s.isEmpty();return!1},_t=new WeakSet,Ke=function(s){t(this,d).clear();for(const E of s)E.isEmpty()||(t(this,d).add(E),E.select());X(this,Y,re).call(this,{hasSelectedEditor:!0})},ee(Ot,"TRANSLATE_SMALL",1),ee(Ot,"TRANSLATE_BIG",10);let L=Ot;e.AnnotationEditorUIManager=L},(S,e,M)=>{var Q,W,lt,ft,xt,St,k,n,a,i,h,d,de,I,ue,it,Je,at,we,gt,Re,Rt,ye,vt,xe;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=D,e.getColorValues=H,e.getCurrentTransform=z,e.getCurrentTransformInverse=R,e.getFilenameFromUrl=b,e.getPdfFilenameFromUrl=m,e.getRGB=g,e.getXfaPageViewport=F,e.isDataScheme=v,e.isPdfFile=p,e.isValidFetchUrl=_,e.loadScript=c,e.noContextMenu=o,e.setLayerDimensions=q;var r=M(7),u=M(1);const G="http://www.w3.org/2000/svg",tt=class tt{};ee(tt,"CSS",96),ee(tt,"PDF",72),ee(tt,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF);let j=tt;e.PixelsPerInch=j;class ot extends r.BaseFilterFactory{constructor({docId:st,ownerDocument:pt=globalThis.document}={}){super();$(this,d);$(this,I);$(this,it);$(this,at);$(this,gt);$(this,Rt);$(this,vt);$(this,Q,void 0);$(this,W,void 0);$(this,lt,void 0);$(this,ft,void 0);$(this,xt,void 0);$(this,St,void 0);$(this,k,void 0);$(this,n,void 0);$(this,a,void 0);$(this,i,void 0);$(this,h,0);rt(this,lt,st),rt(this,ft,pt)}addFilter(st){if(!st)return"none";let pt=t(this,d,de).get(st);if(pt)return pt;let Tt,wt,Bt,Gt;if(st.length===1){const $t=st[0],Vt=new Array(256);for(let ut=0;ut<256;ut++)Vt[ut]=$t[ut]/255;Gt=Tt=wt=Bt=Vt.join(",")}else{const[$t,Vt,ut]=st,Z=new Array(256),Y=new Array(256),yt=new Array(256);for(let At=0;At<256;At++)Z[At]=$t[At]/255,Y[At]=Vt[At]/255,yt[At]=ut[At]/255;Tt=Z.join(","),wt=Y.join(","),Bt=yt.join(","),Gt=`${Tt}${wt}${Bt}`}if(pt=t(this,d,de).get(Gt),pt)return t(this,d,de).set(st,pt),pt;const Ut=`g_${t(this,lt)}_transfer_map_${ge(this,h)._++}`,zt=`url(#${Ut})`;t(this,d,de).set(st,zt),t(this,d,de).set(Gt,zt);const Ht=X(this,at,we).call(this,Ut);return X(this,Rt,ye).call(this,Tt,wt,Bt,Ht),zt}addHCMFilter(st,pt){var Vt;const Tt=`${st}-${pt}`;if(t(this,St)===Tt)return t(this,k);if(rt(this,St,Tt),rt(this,k,"none"),(Vt=t(this,xt))==null||Vt.remove(),!st||!pt)return t(this,k);const wt=X(this,vt,xe).call(this,st);st=u.Util.makeHexColor(...wt);const Bt=X(this,vt,xe).call(this,pt);if(pt=u.Util.makeHexColor(...Bt),t(this,I,ue).style.color="",st==="#000000"&&pt==="#ffffff"||st===pt)return t(this,k);const Gt=new Array(256);for(let ut=0;ut<=255;ut++){const Z=ut/255;Gt[ut]=Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4}const Ut=Gt.join(","),zt=`g_${t(this,lt)}_hcm_filter`,Ht=rt(this,n,X(this,at,we).call(this,zt));X(this,Rt,ye).call(this,Ut,Ut,Ut,Ht),X(this,it,Je).call(this,Ht);const $t=(ut,Z)=>{const Y=wt[ut]/255,yt=Bt[ut]/255,At=new Array(Z+1);for(let te=0;te<=Z;te++)At[te]=Y+te/Z*(yt-Y);return At.join(",")};return X(this,Rt,ye).call(this,$t(0,5),$t(1,5),$t(2,5),Ht),rt(this,k,`url(#${zt})`),t(this,k)}addHighlightHCMFilter(st,pt,Tt,wt){var yt;const Bt=`${st}-${pt}-${Tt}-${wt}`;if(t(this,a)===Bt)return t(this,i);if(rt(this,a,Bt),rt(this,i,"none"),(yt=t(this,n))==null||yt.remove(),!st||!pt)return t(this,i);const[Gt,Ut]=[st,pt].map(X(this,vt,xe).bind(this));let zt=Math.round(.2126*Gt[0]+.7152*Gt[1]+.0722*Gt[2]),Ht=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),[$t,Vt]=[Tt,wt].map(X(this,vt,xe).bind(this));Ht<zt&&([zt,Ht,$t,Vt]=[Ht,zt,Vt,$t]),t(this,I,ue).style.color="";const ut=(At,te,Zt)=>{const J=new Array(256),Et=(Ht-zt)/Zt,It=At/255,Ct=(te-At)/(255*Zt);let jt=0;for(let Nt=0;Nt<=Zt;Nt++){const Jt=Math.round(zt+Nt*Et),_t=It+Nt*Ct;for(let Yt=jt;Yt<=Jt;Yt++)J[Yt]=_t;jt=Jt+1}for(let Nt=jt;Nt<256;Nt++)J[Nt]=J[jt-1];return J.join(",")},Z=`g_${t(this,lt)}_hcm_highlight_filter`,Y=rt(this,n,X(this,at,we).call(this,Z));return X(this,it,Je).call(this,Y),X(this,Rt,ye).call(this,ut($t[0],Vt[0],5),ut($t[1],Vt[1],5),ut($t[2],Vt[2],5),Y),rt(this,i,`url(#${Z})`),t(this,i)}destroy(st=!1){st&&(t(this,k)||t(this,i))||(t(this,W)&&(t(this,W).parentNode.parentNode.remove(),rt(this,W,null)),t(this,Q)&&(t(this,Q).clear(),rt(this,Q,null)),rt(this,h,0))}}Q=new WeakMap,W=new WeakMap,lt=new WeakMap,ft=new WeakMap,xt=new WeakMap,St=new WeakMap,k=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,h=new WeakMap,d=new WeakSet,de=function(){return t(this,Q)||rt(this,Q,new Map)},I=new WeakSet,ue=function(){if(!t(this,W)){const st=t(this,ft).createElement("div"),{style:pt}=st;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Tt=t(this,ft).createElementNS(G,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),rt(this,W,t(this,ft).createElementNS(G,"defs")),st.append(Tt),Tt.append(t(this,W)),t(this,ft).body.append(st)}return t(this,W)},it=new WeakSet,Je=function(st){const pt=t(this,ft).createElementNS(G,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),st.append(pt)},at=new WeakSet,we=function(st){const pt=t(this,ft).createElementNS(G,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",st),t(this,I,ue).append(pt),pt},gt=new WeakSet,Re=function(st,pt,Tt){const wt=t(this,ft).createElementNS(G,pt);wt.setAttribute("type","discrete"),wt.setAttribute("tableValues",Tt),st.append(wt)},Rt=new WeakSet,ye=function(st,pt,Tt,wt){const Bt=t(this,ft).createElementNS(G,"feComponentTransfer");wt.append(Bt),X(this,gt,Re).call(this,Bt,"feFuncR",st),X(this,gt,Re).call(this,Bt,"feFuncG",pt),X(this,gt,Re).call(this,Bt,"feFuncB",Tt)},vt=new WeakSet,xe=function(st){return t(this,I,ue).style.color=st,g(getComputedStyle(t(this,I,ue)).getPropertyValue("color"))},e.DOMFilterFactory=ot;class P extends r.BaseCanvasFactory{constructor({ownerDocument:nt=globalThis.document}={}){super(),this._document=nt}_createCanvas(nt,st){const pt=this._document.createElement("canvas");return pt.width=nt,pt.height=st,pt}}e.DOMCanvasFactory=P;async function w(mt,nt=!1){if(_(mt,document.baseURI)){const st=await fetch(mt);if(!st.ok)throw new Error(st.statusText);return nt?new Uint8Array(await st.arrayBuffer()):(0,u.stringToBytes)(await st.text())}return new Promise((st,pt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",mt,!0),nt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let wt;if(nt&&Tt.response?wt=new Uint8Array(Tt.response):!nt&&Tt.responseText&&(wt=(0,u.stringToBytes)(Tt.responseText)),wt){st(wt);return}}pt(new Error(Tt.statusText))}},Tt.send(null)})}class f extends r.BaseCMapReaderFactory{_fetchData(nt,st){return w(nt,this.isCompressed).then(pt=>({cMapData:pt,compressionType:st}))}}e.DOMCMapReaderFactory=f;class O extends r.BaseStandardFontDataFactory{_fetchData(nt){return w(nt,!0)}}e.DOMStandardFontDataFactory=O;class L extends r.BaseSVGFactory{_createSVG(nt){return document.createElementNS(G,nt)}}e.DOMSVGFactory=L;class T{constructor({viewBox:nt,scale:st,rotation:pt,offsetX:Tt=0,offsetY:wt=0,dontFlip:Bt=!1}){this.viewBox=nt,this.scale=st,this.rotation=pt,this.offsetX=Tt,this.offsetY=wt;const Gt=(nt[2]+nt[0])/2,Ut=(nt[3]+nt[1])/2;let zt,Ht,$t,Vt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:zt=-1,Ht=0,$t=0,Vt=1;break;case 90:zt=0,Ht=1,$t=1,Vt=0;break;case 270:zt=0,Ht=-1,$t=-1,Vt=0;break;case 0:zt=1,Ht=0,$t=0,Vt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&($t=-$t,Vt=-Vt);let ut,Z,Y,yt;zt===0?(ut=Math.abs(Ut-nt[1])*st+Tt,Z=Math.abs(Gt-nt[0])*st+wt,Y=(nt[3]-nt[1])*st,yt=(nt[2]-nt[0])*st):(ut=Math.abs(Gt-nt[0])*st+Tt,Z=Math.abs(Ut-nt[1])*st+wt,Y=(nt[2]-nt[0])*st,yt=(nt[3]-nt[1])*st),this.transform=[zt*st,Ht*st,$t*st,Vt*st,ut-zt*st*Gt-$t*st*Ut,Z-Ht*st*Gt-Vt*st*Ut],this.width=Y,this.height=yt}get rawDims(){const{viewBox:nt}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:nt[2]-nt[0],pageHeight:nt[3]-nt[1],pageX:nt[0],pageY:nt[1]})}clone({scale:nt=this.scale,rotation:st=this.rotation,offsetX:pt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:wt=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:nt,rotation:st,offsetX:pt,offsetY:Tt,dontFlip:wt})}convertToViewportPoint(nt,st){return u.Util.applyTransform([nt,st],this.transform)}convertToViewportRectangle(nt){const st=u.Util.applyTransform([nt[0],nt[1]],this.transform),pt=u.Util.applyTransform([nt[2],nt[3]],this.transform);return[st[0],st[1],pt[0],pt[1]]}convertToPdfPoint(nt,st){return u.Util.applyInverseTransform([nt,st],this.transform)}}e.PageViewport=T;class x extends u.BaseException{constructor(nt,st=0){super(nt,"RenderingCancelledException"),this.extraDelay=st}}e.RenderingCancelledException=x;function v(mt){const nt=mt.length;let st=0;for(;st<nt&&mt[st].trim()==="";)st++;return mt.substring(st,st+5).toLowerCase()==="data:"}function p(mt){return typeof mt=="string"&&/\.pdf$/i.test(mt)}function b(mt,nt=!1){return nt||([mt]=mt.split(/[#?]/,1)),mt.substring(mt.lastIndexOf("/")+1)}function m(mt,nt="document.pdf"){if(typeof mt!="string")return nt;if(v(mt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),nt;const st=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=st.exec(mt);let wt=pt.exec(Tt[1])||pt.exec(Tt[2])||pt.exec(Tt[3]);if(wt&&(wt=wt[0],wt.includes("%")))try{wt=pt.exec(decodeURIComponent(wt))[0]}catch{}return wt||nt}class A{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(nt){nt in this.started&&(0,u.warn)(`Timer is already running for ${nt}`),this.started[nt]=Date.now()}timeEnd(nt){nt in this.started||(0,u.warn)(`Timer has not been started for ${nt}`),this.times.push({name:nt,start:this.started[nt],end:Date.now()}),delete this.started[nt]}toString(){const nt=[];let st=0;for(const{name:pt}of this.times)st=Math.max(pt.length,st);for(const{name:pt,start:Tt,end:wt}of this.times)nt.push(`${pt.padEnd(st)} ${wt-Tt}ms
`);return nt.join("")}}e.StatTimer=A;function _(mt,nt){try{const{protocol:st}=nt?new URL(mt,nt):new URL(mt);return st==="http:"||st==="https:"}catch{return!1}}function o(mt){mt.preventDefault()}function c(mt,nt=!1){return new Promise((st,pt)=>{const Tt=document.createElement("script");Tt.src=mt,Tt.onload=function(wt){nt&&Tt.remove(),st(wt)},Tt.onerror=function(){pt(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function D(mt){console.log("Deprecated API usage: "+mt)}let y;class l{static toDateObject(nt){if(!nt||typeof nt!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const st=y.exec(nt);if(!st)return null;const pt=parseInt(st[1],10);let Tt=parseInt(st[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let wt=parseInt(st[3],10);wt=wt>=1&&wt<=31?wt:1;let Bt=parseInt(st[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let Gt=parseInt(st[5],10);Gt=Gt>=0&&Gt<=59?Gt:0;let Ut=parseInt(st[6],10);Ut=Ut>=0&&Ut<=59?Ut:0;const zt=st[7]||"Z";let Ht=parseInt(st[8],10);Ht=Ht>=0&&Ht<=23?Ht:0;let $t=parseInt(st[9],10)||0;return $t=$t>=0&&$t<=59?$t:0,zt==="-"?(Bt+=Ht,Gt+=$t):zt==="+"&&(Bt-=Ht,Gt-=$t),new Date(Date.UTC(pt,Tt,wt,Bt,Gt,Ut))}}e.PDFDateString=l;function F(mt,{scale:nt=1,rotation:st=0}){const{width:pt,height:Tt}=mt.attributes.style,wt=[0,0,parseInt(pt),parseInt(Tt)];return new T({viewBox:wt,scale:nt,rotation:st})}function g(mt){if(mt.startsWith("#")){const nt=parseInt(mt.slice(1),16);return[(nt&16711680)>>16,(nt&65280)>>8,nt&255]}return mt.startsWith("rgb(")?mt.slice(4,-1).split(",").map(nt=>parseInt(nt)):mt.startsWith("rgba(")?mt.slice(5,-1).split(",").map(nt=>parseInt(nt)).slice(0,3):((0,u.warn)(`Not a valid color format: "${mt}"`),[0,0,0])}function H(mt){const nt=document.createElement("span");nt.style.visibility="hidden",document.body.append(nt);for(const st of mt.keys()){nt.style.color=st;const pt=window.getComputedStyle(nt).color;mt.set(st,g(pt))}nt.remove()}function z(mt){const{a:nt,b:st,c:pt,d:Tt,e:wt,f:Bt}=mt.getTransform();return[nt,st,pt,Tt,wt,Bt]}function R(mt){const{a:nt,b:st,c:pt,d:Tt,e:wt,f:Bt}=mt.getTransform().invertSelf();return[nt,st,pt,Tt,wt,Bt]}function q(mt,nt,st=!1,pt=!0){if(nt instanceof T){const{pageWidth:Tt,pageHeight:wt}=nt.rawDims,{style:Bt}=mt,Gt=u.FeatureTest.isCSSRoundSupported,Ut=`var(--scale-factor) * ${Tt}px`,zt=`var(--scale-factor) * ${wt}px`,Ht=Gt?`round(${Ut}, 1px)`:`calc(${Ut})`,$t=Gt?`round(${zt}, 1px)`:`calc(${zt})`;!st||nt.rotation%180===0?(Bt.width=Ht,Bt.height=$t):(Bt.width=$t,Bt.height=Ht)}pt&&mt.setAttribute("data-main-rotation",nt.rotation)}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=M(1);class u{constructor(){this.constructor===u&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,O){return"none"}addHighlightHCMFilter(f,O,L,T){return"none"}destroy(f=!1){}}e.BaseFilterFactory=u;class G{constructor(){this.constructor===G&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,O){if(f<=0||O<=0)throw new Error("Invalid canvas size");const L=this._createCanvas(f,O);return{canvas:L,context:L.getContext("2d")}}reset(f,O,L){if(!f.canvas)throw new Error("Canvas is not specified");if(O<=0||L<=0)throw new Error("Invalid canvas size");f.canvas.width=O,f.canvas.height=L}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,O){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=G;class j{constructor({baseUrl:f=null,isCompressed:O=!0}){this.constructor===j&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=O}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const O=this.baseUrl+f+(this.isCompressed?".bcmap":""),L=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(O,L).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${O}`)})}_fetchData(f,O){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=j;class ot{constructor({baseUrl:f=null}){this.constructor===ot&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const O=`${this.baseUrl}${f}`;return this._fetchData(O).catch(L=>{throw new Error(`Unable to load font data at: ${O}`)})}_fetchData(f){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=ot;class P{constructor(){this.constructor===P&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,O,L=!1){if(f<=0||O<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),L||(T.setAttribute("width",`${f}px`),T.setAttribute("height",`${O}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${f} ${O}`),T}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=P},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=M(1);const u=3285377520,G=4294901760,j=65535;class ot{constructor(w){this.h1=w?w&4294967295:u,this.h2=w?w&4294967295:u}update(w){let f,O;if(typeof w=="string"){f=new Uint8Array(w.length*2),O=0;for(let D=0,y=w.length;D<y;D++){const l=w.charCodeAt(D);l<=255?f[O++]=l:(f[O++]=l>>>8,f[O++]=l&255)}}else if((0,r.isArrayBuffer)(w))f=w.slice(),O=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const L=O>>2,T=O-L*4,x=new Uint32Array(f.buffer,0,L);let v=0,p=0,b=this.h1,m=this.h2;const A=3432918353,_=461845907,o=A&j,c=_&j;for(let D=0;D<L;D++)D&1?(v=x[D],v=v*A&G|v*o&j,v=v<<15|v>>>17,v=v*_&G|v*c&j,b^=v,b=b<<13|b>>>19,b=b*5+3864292196):(p=x[D],p=p*A&G|p*o&j,p=p<<15|p>>>17,p=p*_&G|p*c&j,m^=p,m=m<<13|m>>>19,m=m*5+3864292196);switch(v=0,T){case 3:v^=f[L*4+2]<<16;case 2:v^=f[L*4+1]<<8;case 1:v^=f[L*4],v=v*A&G|v*o&j,v=v<<15|v>>>17,v=v*_&G|v*c&j,L&1?b^=v:m^=v}this.h1=b,this.h2=m}hexdigest(){let w=this.h1,f=this.h2;return w^=f>>>1,w=w*3981806797&G|w*36045&j,f=f*4283543511&G|((f<<16|w>>>16)*2950163797&G)>>>16,w^=f>>>1,w=w*444984403&G|w*60499&j,f=f*3301882366&G|((f<<16|w>>>16)*3120437893&G)>>>16,w^=f>>>1,(w>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=ot},(S,e,M)=>{var j;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=M(1);class u{constructor({ownerDocument:P=globalThis.document,styleElement:w=null}){$(this,j,new Set);this._document=P,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(P){this.nativeFontFaces.add(P),this._document.fonts.add(P)}removeNativeFontFace(P){this.nativeFontFaces.delete(P),this._document.fonts.delete(P)}insertRule(P){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const w=this.styleElement.sheet;w.insertRule(P,w.cssRules.length)}clear(){for(const P of this.nativeFontFaces)this._document.fonts.delete(P);this.nativeFontFaces.clear(),t(this,j).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(P){if(!(!P||t(this,j).has(P.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:f,style:O}=P,L=new FontFace(w,f,O);this.addNativeFontFace(L);try{await L.load(),t(this,j).add(w)}catch{(0,r.warn)(`Cannot load system font: ${P.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(L)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(P){if(P.attached||P.missingFile&&!P.systemFontInfo)return;if(P.attached=!0,P.systemFontInfo){await this.loadSystemFont(P.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=P.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(O){throw(0,r.warn)(`Failed to load font '${f.family}': '${O}'.`),P.disableFontFace=!0,O}}return}const w=P.createFontFaceRule();if(w){if(this.insertRule(w),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const O=this._queueLoadingCallback(f);this._prepareFontLoadEvent(P,O)})}}get isFontLoadingAPISupported(){var w;const P=!!((w=this._document)!=null&&w.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",P)}get isSyncFontLoadingSupported(){let P=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(P=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",P)}_queueLoadingCallback(P){function w(){for((0,r.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;f.length>0&&f[0].done;){const L=f.shift();setTimeout(L.callback,0)}}const{loadingRequests:f}=this,O={done:!1,complete:w,callback:P};return f.push(O),O}get _loadTestFont(){const P=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",P)}_prepareFontLoadEvent(P,w){function f(g,H){return g.charCodeAt(H)<<24|g.charCodeAt(H+1)<<16|g.charCodeAt(H+2)<<8|g.charCodeAt(H+3)&255}function O(g,H,z,R){const q=g.substring(0,H),tt=g.substring(H+z);return q+R+tt}let L,T;const x=this._document.createElement("canvas");x.width=1,x.height=1;const v=x.getContext("2d");let p=0;function b(g,H){if(++p>30){(0,r.warn)("Load test font never loaded."),H();return}if(v.font="30px "+g,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){H();return}setTimeout(b.bind(null,g,H))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let A=this._loadTestFont;A=O(A,976,m.length,m);const o=16,c=1482184792;let D=f(A,o);for(L=0,T=m.length-3;L<T;L+=4)D=D-c+f(m,L)|0;L<m.length&&(D=D-c+f(m+"XXX",L)|0),A=O(A,o,4,(0,r.string32)(D));const y=`url(data:font/opentype;base64,${btoa(A)});`,l=`@font-face {font-family:"${m}";src:${y}}`;this.insertRule(l);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const g of[P.loadedName,m]){const H=this._document.createElement("span");H.textContent="Hi",H.style.fontFamily=g,F.append(H)}this._document.body.append(F),b(m,()=>{F.remove(),w.complete()})}}j=new WeakMap,e.FontLoader=u;class G{constructor(P,{isEvalSupported:w=!0,disableFontFace:f=!1,ignoreErrors:O=!1,inspectFont:L=null}){this.compiledGlyphs=Object.create(null);for(const T in P)this[T]=P[T];this.isEvalSupported=w!==!1,this.disableFontFace=f===!0,this.ignoreErrors=O===!0,this._inspectFont=L}createNativeFontFace(){var w;if(!this.data||this.disableFontFace)return null;let P;if(!this.cssFontInfo)P=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),P=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(w=this._inspectFont)==null||w.call(this,this),P}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const P=(0,r.bytesToString)(this.data),w=`url(data:${this.mimetype};base64,${btoa(P)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${w}}`;else{let L=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(L+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${L}src:${w}}`}return(O=this._inspectFont)==null||O.call(this,this,w),f}getPathGenerator(P,w){if(this.compiledGlyphs[w]!==void 0)return this.compiledGlyphs[w];let f;try{f=P.get(this.loadedName+"_path_"+w)}catch(O){if(!this.ignoreErrors)throw O;return(0,r.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[w]=function(L,T){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const O=[];for(const L of f){const T=L.args!==void 0?L.args.join(","):"";O.push("c.",L.cmd,"(",T,`);
`)}return this.compiledGlyphs[w]=new Function("c","size",O.join(""))}return this.compiledGlyphs[w]=function(O,L){for(const T of f)T.cmd==="scale"&&(T.args=[L,-L]),O[T.cmd].apply(O,T.args)}}}e.FontFaceObject=G},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=M(7);M(1);const u=function(w){return new Promise((f,O)=>{require$$5.readFile(w,(T,x)=>{if(T||!x){O(new Error(T));return}f(new Uint8Array(x))})})};class G extends r.BaseFilterFactory{}e.NodeFilterFactory=G;class j extends r.BaseCanvasFactory{_createCanvas(f,O){return require$$5.createCanvas(f,O)}}e.NodeCanvasFactory=j;class ot extends r.BaseCMapReaderFactory{_fetchData(f,O){return u(f).then(L=>({cMapData:L,compressionType:O}))}}e.NodeCMapReaderFactory=ot;class P extends r.BaseStandardFontDataFactory{_fetchData(f){return u(f)}}e.NodeStandardFontDataFactory=P},(S,e,M)=>{var W,Qe,ft,Ze;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=M(1),u=M(6),G=M(12),j=M(13);const ot=16,P=100,w=4096,f=15,O=10,L=1e3,T=16;function x(k,n){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){n.save(),this.__originalSave()},k.restore=function(){n.restore(),this.__originalRestore()},k.translate=function(i,h){n.translate(i,h),this.__originalTranslate(i,h)},k.scale=function(i,h){n.scale(i,h),this.__originalScale(i,h)},k.transform=function(i,h,d,C,I,U){n.transform(i,h,d,C,I,U),this.__originalTransform(i,h,d,C,I,U)},k.setTransform=function(i,h,d,C,I,U){n.setTransform(i,h,d,C,I,U),this.__originalSetTransform(i,h,d,C,I,U)},k.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},k.rotate=function(i){n.rotate(i),this.__originalRotate(i)},k.clip=function(i){n.clip(i),this.__originalClip(i)},k.moveTo=function(a,i){n.moveTo(a,i),this.__originalMoveTo(a,i)},k.lineTo=function(a,i){n.lineTo(a,i),this.__originalLineTo(a,i)},k.bezierCurveTo=function(a,i,h,d,C,I){n.bezierCurveTo(a,i,h,d,C,I),this.__originalBezierCurveTo(a,i,h,d,C,I)},k.rect=function(a,i,h,d){n.rect(a,i,h,d),this.__originalRect(a,i,h,d)},k.closePath=function(){n.closePath(),this.__originalClosePath()},k.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class v{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,a,i){let h;return this.cache[n]!==void 0?(h=this.cache[n],this.canvasFactory.reset(h,a,i)):(h=this.canvasFactory.create(a,i),this.cache[n]=h),h}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const a=this.cache[n];this.canvasFactory.destroy(a),delete this.cache[n]}}}function p(k,n,a,i,h,d,C,I,U,it){const[et,at,dt,gt,ht,Rt]=(0,u.getCurrentTransform)(k);if(at===0&&dt===0){const Dt=C*et+ht,mt=Math.round(Dt),nt=I*gt+Rt,st=Math.round(nt),pt=(C+U)*et+ht,Tt=Math.abs(Math.round(pt)-mt)||1,wt=(I+it)*gt+Rt,Bt=Math.abs(Math.round(wt)-st)||1;return k.setTransform(Math.sign(et),0,0,Math.sign(gt),mt,st),k.drawImage(n,a,i,h,d,0,0,Tt,Bt),k.setTransform(et,at,dt,gt,ht,Rt),[Tt,Bt]}if(et===0&&gt===0){const Dt=I*dt+ht,mt=Math.round(Dt),nt=C*at+Rt,st=Math.round(nt),pt=(I+it)*dt+ht,Tt=Math.abs(Math.round(pt)-mt)||1,wt=(C+U)*at+Rt,Bt=Math.abs(Math.round(wt)-st)||1;return k.setTransform(0,Math.sign(at),Math.sign(dt),0,mt,st),k.drawImage(n,a,i,h,d,0,0,Bt,Tt),k.setTransform(et,at,dt,gt,ht,Rt),[Bt,Tt]}k.drawImage(n,a,i,h,d,C,I,U,it);const Lt=Math.hypot(et,at),vt=Math.hypot(dt,gt);return[Lt*U,vt*it]}function b(k){const{width:n,height:a}=k;if(n>L||a>L)return null;const i=1e3,h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=n+1;let C=new Uint8Array(d*(a+1)),I,U,it;const et=n+7&-8;let at=new Uint8Array(et*a),dt=0;for(const vt of k.data){let Dt=128;for(;Dt>0;)at[dt++]=vt&Dt?0:255,Dt>>=1}let gt=0;for(dt=0,at[dt]!==0&&(C[0]=1,++gt),U=1;U<n;U++)at[dt]!==at[dt+1]&&(C[U]=at[dt]?2:1,++gt),dt++;for(at[dt]!==0&&(C[U]=2,++gt),I=1;I<a;I++){dt=I*et,it=I*d,at[dt-et]!==at[dt]&&(C[it]=at[dt]?1:8,++gt);let vt=(at[dt]?4:0)+(at[dt-et]?8:0);for(U=1;U<n;U++)vt=(vt>>2)+(at[dt+1]?4:0)+(at[dt-et+1]?8:0),h[vt]&&(C[it+U]=h[vt],++gt),dt++;if(at[dt-et]!==at[dt]&&(C[it+U]=at[dt]?2:4,++gt),gt>i)return null}for(dt=et*(a-1),it=I*d,at[dt]!==0&&(C[it]=8,++gt),U=1;U<n;U++)at[dt]!==at[dt+1]&&(C[it+U]=at[dt]?4:8,++gt),dt++;if(at[dt]!==0&&(C[it+U]=4,++gt),gt>i)return null;const ht=new Int32Array([0,d,-1,0,-d,0,0,0,1]),Rt=new Path2D;for(I=0;gt&&I<=a;I++){let vt=I*d;const Dt=vt+n;for(;vt<Dt&&!C[vt];)vt++;if(vt===Dt)continue;Rt.moveTo(vt%d,I);const mt=vt;let nt=C[vt];do{const st=ht[nt];do vt+=st;while(!C[vt]);const pt=C[vt];pt!==5&&pt!==10?(nt=pt,C[vt]=0):(nt=pt&51*nt>>4,C[vt]&=nt>>2|nt<<2),Rt.lineTo(vt%d,vt/d|0),C[vt]||--gt}while(mt!==vt);--I}return at=null,C=null,function(vt){vt.save(),vt.scale(1/n,-1/a),vt.translate(0,-a),vt.fill(Rt),vt.beginPath(),vt.restore()}}class m{constructor(n,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,a])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,a){this.x=n,this.y=a}updatePathMinMax(n,a,i){[a,i]=r.Util.applyTransform([a,i],n),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(n,a){const i=r.Util.applyTransform(a,n),h=r.Util.applyTransform(a.slice(2),n);this.minX=Math.min(this.minX,i[0],h[0]),this.minY=Math.min(this.minY,i[1],h[1]),this.maxX=Math.max(this.maxX,i[0],h[0]),this.maxY=Math.max(this.maxY,i[1],h[1])}updateScalingPathMinMax(n,a){r.Util.scaleMinMax(n,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(n,a,i,h,d,C,I,U,it,et){const at=r.Util.bezierBoundingBox(a,i,h,d,C,I,U,it);if(et){et[0]=Math.min(et[0],at[0],at[2]),et[1]=Math.max(et[1],at[0],at[2]),et[2]=Math.min(et[2],at[1],at[3]),et[3]=Math.max(et[3],at[1],at[3]);return}this.updateRectMinMax(n,at)}getPathBoundingBox(n=G.PathType.FILL,a=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(n===G.PathType.STROKE){a||(0,r.unreachable)("Stroke bounding box must include transform.");const h=r.Util.singularValueDecompose2dScale(a),d=h[0]*this.lineWidth/2,C=h[1]*this.lineWidth/2;i[0]-=d,i[1]-=C,i[2]+=d,i[3]+=C}return i}updateClipFromPath(){const n=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=G.PathType.FILL,a=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(n,a))}}function A(k,n){if(typeof ImageData<"u"&&n instanceof ImageData){k.putImageData(n,0,0);return}const a=n.height,i=n.width,h=a%T,d=(a-h)/T,C=h===0?d:d+1,I=k.createImageData(i,T);let U=0,it;const et=n.data,at=I.data;let dt,gt,ht,Rt;if(n.kind===r.ImageKind.GRAYSCALE_1BPP){const Lt=et.byteLength,vt=new Uint32Array(at.buffer,0,at.byteLength>>2),Dt=vt.length,mt=i+7>>3,nt=4294967295,st=r.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<C;dt++){for(ht=dt<d?T:h,it=0,gt=0;gt<ht;gt++){const pt=Lt-U;let Tt=0;const wt=pt>mt?i:pt*8-7,Bt=wt&-8;let Gt=0,Ut=0;for(;Tt<Bt;Tt+=8)Ut=et[U++],vt[it++]=Ut&128?nt:st,vt[it++]=Ut&64?nt:st,vt[it++]=Ut&32?nt:st,vt[it++]=Ut&16?nt:st,vt[it++]=Ut&8?nt:st,vt[it++]=Ut&4?nt:st,vt[it++]=Ut&2?nt:st,vt[it++]=Ut&1?nt:st;for(;Tt<wt;Tt++)Gt===0&&(Ut=et[U++],Gt=128),vt[it++]=Ut&Gt?nt:st,Gt>>=1}for(;it<Dt;)vt[it++]=0;k.putImageData(I,0,dt*T)}}else if(n.kind===r.ImageKind.RGBA_32BPP){for(gt=0,Rt=i*T*4,dt=0;dt<d;dt++)at.set(et.subarray(U,U+Rt)),U+=Rt,k.putImageData(I,0,gt),gt+=T;dt<C&&(Rt=i*h*4,at.set(et.subarray(U,U+Rt)),k.putImageData(I,0,gt))}else if(n.kind===r.ImageKind.RGB_24BPP)for(ht=T,Rt=i*ht,dt=0;dt<C;dt++){for(dt>=d&&(ht=h,Rt=i*ht),it=0,gt=Rt;gt--;)at[it++]=et[U++],at[it++]=et[U++],at[it++]=et[U++],at[it++]=255;k.putImageData(I,0,dt*T)}else throw new Error(`bad image kind: ${n.kind}`)}function _(k,n){if(n.bitmap){k.drawImage(n.bitmap,0,0);return}const a=n.height,i=n.width,h=a%T,d=(a-h)/T,C=h===0?d:d+1,I=k.createImageData(i,T);let U=0;const it=n.data,et=I.data;for(let at=0;at<C;at++){const dt=at<d?T:h;({srcPos:U}=(0,j.convertBlackAndWhiteToRGBA)({src:it,srcPos:U,dest:et,width:i,height:dt,nonBlackColor:0})),k.putImageData(I,0,at*T)}}function o(k,n){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of a)k[i]!==void 0&&(n[i]=k[i]);k.setLineDash!==void 0&&(n.setLineDash(k.getLineDash()),n.lineDashOffset=k.lineDashOffset)}function c(k){if(k.strokeStyle=k.fillStyle="#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0),!r.isNodeJS){const{filter:n}=k;n!=="none"&&n!==""&&(k.filter="none")}}function D(k,n,a,i){const h=k.length;for(let d=3;d<h;d+=4){const C=k[d];if(C===0)k[d-3]=n,k[d-2]=a,k[d-1]=i;else if(C<255){const I=255-C;k[d-3]=k[d-3]*C+n*I>>8,k[d-2]=k[d-2]*C+a*I>>8,k[d-1]=k[d-1]*C+i*I>>8}}}function y(k,n,a){const i=k.length,h=1/255;for(let d=3;d<i;d+=4){const C=a?a[k[d]]:k[d];n[d]=n[d]*C*h|0}}function l(k,n,a){const i=k.length;for(let h=3;h<i;h+=4){const d=k[h-3]*77+k[h-2]*152+k[h-1]*28;n[h]=a?n[h]*a[d>>8]>>8:n[h]*d>>16}}function F(k,n,a,i,h,d,C,I,U,it,et){const at=!!d,dt=at?d[0]:0,gt=at?d[1]:0,ht=at?d[2]:0,Rt=h==="Luminosity"?l:y,vt=Math.min(i,Math.ceil(1048576/a));for(let Dt=0;Dt<i;Dt+=vt){const mt=Math.min(vt,i-Dt),nt=k.getImageData(I-it,Dt+(U-et),a,mt),st=n.getImageData(I,Dt+U,a,mt);at&&D(nt.data,dt,gt,ht),Rt(nt.data,st.data,C),n.putImageData(st,I,Dt+U)}}function g(k,n,a,i){const h=i[0],d=i[1],C=i[2]-h,I=i[3]-d;C===0||I===0||(F(n.context,a,C,I,n.subtype,n.backdrop,n.transferMap,h,d,n.offsetX,n.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(a.canvas,0,0),k.restore())}function H(k,n){const a=r.Util.singularValueDecompose2dScale(k);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:a[0]<=i||a[1]<=i}const z=["butt","round","square"],R=["miter","round","bevel"],q={},tt={},St=class St{constructor(n,a,i,h,d,{optionalContentConfig:C,markedContentStack:I=null},U,it){$(this,W);$(this,ft);this.ctx=n,this.current=new m(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=i,this.canvasFactory=h,this.filterFactory=d,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=C,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=U,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=it,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,a=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):a}beginDrawing({transform:n,viewport:a,transparency:i=!1,background:h=null}){const d=this.ctx.canvas.width,C=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,d,C),this.ctx.fillStyle=I,i){const U=this.cachedCanvases.getCanvas("transparent",d,C);this.compositeCtx=this.ctx,this.transparentCanvas=U.canvas,this.ctx=U.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),c(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(n,a,i,h){const d=n.argsArray,C=n.fnArray;let I=a||0;const U=d.length;if(U===I)return I;const it=U-I>O&&typeof i=="function",et=it?Date.now()+f:0;let at=0;const dt=this.commonObjs,gt=this.objs;let ht;for(;;){if(h!==void 0&&I===h.nextBreakPoint)return h.breakIt(I,i),I;if(ht=C[I],ht!==r.OPS.dependency)this[ht].apply(this,d[I]);else for(const Rt of d[I]){const Lt=Rt.startsWith("g_")?dt:gt;if(!Lt.has(Rt))return Lt.get(Rt,i),I}if(I++,I===U)return I;if(it&&++at>O){if(Date.now()>et)return i(),I;at=0}}}endDrawing(){X(this,W,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const a of n.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);n.clear()}this._cachedBitmapsMap.clear(),X(this,ft,Ze).call(this)}_scaleImage(n,a){const i=n.width,h=n.height;let d=Math.max(Math.hypot(a[0],a[1]),1),C=Math.max(Math.hypot(a[2],a[3]),1),I=i,U=h,it="prescale1",et,at;for(;d>2&&I>1||C>2&&U>1;){let dt=I,gt=U;d>2&&I>1&&(dt=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),d/=I/dt),C>2&&U>1&&(gt=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U)/2,C/=U/gt),et=this.cachedCanvases.getCanvas(it,dt,gt),at=et.context,at.clearRect(0,0,dt,gt),at.drawImage(n,0,0,I,U,0,0,dt,gt),n=et.canvas,I=dt,U=gt,it=it==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:I,paintHeight:U}}_createMaskCanvas(n){const a=this.ctx,{width:i,height:h}=n,d=this.current.fillColor,C=this.current.patternFill,I=(0,u.getCurrentTransform)(a);let U,it,et,at;if((n.bitmap||n.data)&&n.count>1){const Tt=n.bitmap||n.data.buffer;it=JSON.stringify(C?I:[I.slice(0,4),d]),U=this._cachedBitmapsMap.get(Tt),U||(U=new Map,this._cachedBitmapsMap.set(Tt,U));const wt=U.get(it);if(wt&&!C){const Bt=Math.round(Math.min(I[0],I[2])+I[4]),Gt=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:wt,offsetX:Bt,offsetY:Gt}}et=wt}et||(at=this.cachedCanvases.getCanvas("maskCanvas",i,h),_(at.context,n));let dt=r.Util.transform(I,[1/i,0,0,-1/h,0,0]);dt=r.Util.transform(dt,[1,0,0,1,0,-h]);const gt=r.Util.applyTransform([0,0],dt),ht=r.Util.applyTransform([i,h],dt),Rt=r.Util.normalizeRect([gt[0],gt[1],ht[0],ht[1]]),Lt=Math.round(Rt[2]-Rt[0])||1,vt=Math.round(Rt[3]-Rt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",Lt,vt),mt=Dt.context,nt=Math.min(gt[0],ht[0]),st=Math.min(gt[1],ht[1]);mt.translate(-nt,-st),mt.transform(...dt),et||(et=this._scaleImage(at.canvas,(0,u.getCurrentTransformInverse)(mt)),et=et.img,U&&C&&U.set(it,et)),mt.imageSmoothingEnabled=H((0,u.getCurrentTransform)(mt),n.interpolate),p(mt,et,0,0,et.width,et.height,0,0,i,h),mt.globalCompositeOperation="source-in";const pt=r.Util.transform((0,u.getCurrentTransformInverse)(mt),[1,0,0,1,-nt,-st]);return mt.fillStyle=C?d.getPattern(a,this,pt,G.PathType.FILL):d,mt.fillRect(0,0,i,h),U&&!C&&(this.cachedCanvases.delete("fillCanvas"),U.set(it,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(nt),offsetY:Math.round(st)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=z[n]}setLineJoin(n){this.ctx.lineJoin=R[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,a){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=a)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[a,i]of n)switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,a=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(i,n,a);this.suspendedCtx=this.ctx,this.ctx=h.context;const d=this.ctx;d.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,d),x(d,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,i=this.suspendedCtx;g(i,a,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,a,i,h,d,C){this.ctx.transform(n,a,i,h,d,C),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,a,i){const h=this.ctx,d=this.current;let C=d.x,I=d.y,U,it;const et=(0,u.getCurrentTransform)(h),at=et[0]===0&&et[3]===0||et[1]===0&&et[2]===0,dt=at?i.slice(0):null;for(let gt=0,ht=0,Rt=n.length;gt<Rt;gt++)switch(n[gt]|0){case r.OPS.rectangle:C=a[ht++],I=a[ht++];const Lt=a[ht++],vt=a[ht++],Dt=C+Lt,mt=I+vt;h.moveTo(C,I),Lt===0||vt===0?h.lineTo(Dt,mt):(h.lineTo(Dt,I),h.lineTo(Dt,mt),h.lineTo(C,mt)),at||d.updateRectMinMax(et,[C,I,Dt,mt]),h.closePath();break;case r.OPS.moveTo:C=a[ht++],I=a[ht++],h.moveTo(C,I),at||d.updatePathMinMax(et,C,I);break;case r.OPS.lineTo:C=a[ht++],I=a[ht++],h.lineTo(C,I),at||d.updatePathMinMax(et,C,I);break;case r.OPS.curveTo:U=C,it=I,C=a[ht+4],I=a[ht+5],h.bezierCurveTo(a[ht],a[ht+1],a[ht+2],a[ht+3],C,I),d.updateCurvePathMinMax(et,U,it,a[ht],a[ht+1],a[ht+2],a[ht+3],C,I,dt),ht+=6;break;case r.OPS.curveTo2:U=C,it=I,h.bezierCurveTo(C,I,a[ht],a[ht+1],a[ht+2],a[ht+3]),d.updateCurvePathMinMax(et,U,it,C,I,a[ht],a[ht+1],a[ht+2],a[ht+3],dt),C=a[ht+2],I=a[ht+3],ht+=4;break;case r.OPS.curveTo3:U=C,it=I,C=a[ht+2],I=a[ht+3],h.bezierCurveTo(a[ht],a[ht+1],C,I,C,I),d.updateCurvePathMinMax(et,U,it,a[ht],a[ht+1],C,I,C,I,dt),ht+=4;break;case r.OPS.closePath:h.closePath();break}at&&d.updateScalingPathMinMax(et,dt),d.setCurrentPoint(C,I)}closePath(){this.ctx.closePath()}stroke(n=!0){const a=this.ctx,i=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(a.save(),a.strokeStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const a=this.ctx,i=this.current.fillColor,h=this.current.patternFill;let d=!1;h&&(a.save(),a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.FILL),d=!0);const C=this.current.getClippedPathBoundingBox();this.contentVisible&&C!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),d&&a.restore(),n&&this.consumePath(C)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=tt}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,a=this.ctx;if(n===void 0){a.beginPath();return}a.save(),a.beginPath();for(const i of n)a.setTransform(...i.transform),a.translate(i.x,i.y),i.addToPath(a,i.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,a){var et;const i=this.commonObjs.get(n),h=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(h.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+n),a<0?(a=-a,h.fontDirection=-1):h.fontDirection=1,this.current.font=i,this.current.fontSize=a,i.isType3Font)return;const d=i.loadedName||"sans-serif",C=((et=i.systemFontInfo)==null?void 0:et.css)||`"${d}", ${i.fallbackName}`;let I="normal";i.black?I="900":i.bold&&(I="bold");const U=i.italic?"italic":"normal";let it=a;a<ot?it=ot:a>P&&(it=P),this.current.fontSizeScale=a/it,this.ctx.font=`${U} ${I} ${it}px ${C}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,a){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=a}setLeadingMoveText(n,a){this.setLeading(-a),this.moveText(n,a)}setTextMatrix(n,a,i,h,d,C){this.current.textMatrix=[n,a,i,h,d,C],this.current.textMatrixScale=Math.hypot(n,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,a,i,h){const d=this.ctx,C=this.current,I=C.font,U=C.textRenderingMode,it=C.fontSize/C.fontSizeScale,et=U&r.TextRenderingMode.FILL_STROKE_MASK,at=!!(U&r.TextRenderingMode.ADD_TO_PATH_FLAG),dt=C.patternFill&&!I.missingFile;let gt;(I.disableFontFace||at||dt)&&(gt=I.getPathGenerator(this.commonObjs,n)),I.disableFontFace||dt?(d.save(),d.translate(a,i),d.beginPath(),gt(d,it),h&&d.setTransform(...h),(et===r.TextRenderingMode.FILL||et===r.TextRenderingMode.FILL_STROKE)&&d.fill(),(et===r.TextRenderingMode.STROKE||et===r.TextRenderingMode.FILL_STROKE)&&d.stroke(),d.restore()):((et===r.TextRenderingMode.FILL||et===r.TextRenderingMode.FILL_STROKE)&&d.fillText(n,a,i),(et===r.TextRenderingMode.STROKE||et===r.TextRenderingMode.FILL_STROKE)&&d.strokeText(n,a,i)),at&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(d),x:a,y:i,fontSize:it,addToPath:gt})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const a=n.getImageData(0,0,10,10).data;let i=!1;for(let h=3;h<a.length;h+=4)if(a[h]>0&&a[h]<255){i=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(n){const a=this.current,i=a.font;if(i.isType3Font)return this.showType3Text(n);const h=a.fontSize;if(h===0)return;const d=this.ctx,C=a.fontSizeScale,I=a.charSpacing,U=a.wordSpacing,it=a.fontDirection,et=a.textHScale*it,at=n.length,dt=i.vertical,gt=dt?1:-1,ht=i.defaultVMetrics,Rt=h*a.fontMatrix[0],Lt=a.textRenderingMode===r.TextRenderingMode.FILL&&!i.disableFontFace&&!a.patternFill;d.save(),d.transform(...a.textMatrix),d.translate(a.x,a.y+a.textRise),it>0?d.scale(et,-1):d.scale(et,1);let vt;if(a.patternFill){d.save();const pt=a.fillColor.getPattern(d,this,(0,u.getCurrentTransformInverse)(d),G.PathType.FILL);vt=(0,u.getCurrentTransform)(d),d.restore(),d.fillStyle=pt}let Dt=a.lineWidth;const mt=a.textMatrixScale;if(mt===0||Dt===0){const pt=a.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(pt===r.TextRenderingMode.STROKE||pt===r.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=mt;if(C!==1&&(d.scale(C,C),Dt/=C),d.lineWidth=Dt,i.isInvalidPDFjsFont){const pt=[];let Tt=0;for(const wt of n)pt.push(wt.unicode),Tt+=wt.width;d.fillText(pt.join(""),0,0),a.x+=Tt*Rt*et,d.restore(),this.compose();return}let nt=0,st;for(st=0;st<at;++st){const pt=n[st];if(typeof pt=="number"){nt+=gt*pt*h/1e3;continue}let Tt=!1;const wt=(pt.isSpace?U:0)+I,Bt=pt.fontChar,Gt=pt.accent;let Ut,zt,Ht=pt.width;if(dt){const Vt=pt.vmetric||ht,ut=-(pt.vmetric?Vt[1]:Ht*.5)*Rt,Z=Vt[2]*Rt;Ht=Vt?-Vt[0]:Ht,Ut=ut/C,zt=(nt+Z)/C}else Ut=nt/C,zt=0;if(i.remeasure&&Ht>0){const Vt=d.measureText(Bt).width*1e3/h*C;if(Ht<Vt&&this.isFontSubpixelAAEnabled){const ut=Ht/Vt;Tt=!0,d.save(),d.scale(ut,1),Ut/=ut}else Ht!==Vt&&(Ut+=(Ht-Vt)/2e3*h/C)}if(this.contentVisible&&(pt.isInFont||i.missingFile)){if(Lt&&!Gt)d.fillText(Bt,Ut,zt);else if(this.paintChar(Bt,Ut,zt,vt),Gt){const Vt=Ut+h*Gt.offset.x/C,ut=zt-h*Gt.offset.y/C;this.paintChar(Gt.fontChar,Vt,ut,vt)}}const $t=dt?Ht*Rt-wt*it:Ht*Rt+wt*it;nt+=$t,Tt&&d.restore()}dt?a.y-=nt:a.x+=nt*et,d.restore(),this.compose()}showType3Text(n){const a=this.ctx,i=this.current,h=i.font,d=i.fontSize,C=i.fontDirection,I=h.vertical?1:-1,U=i.charSpacing,it=i.wordSpacing,et=i.textHScale*C,at=i.fontMatrix||r.FONT_IDENTITY_MATRIX,dt=n.length,gt=i.textRenderingMode===r.TextRenderingMode.INVISIBLE;let ht,Rt,Lt,vt;if(!(gt||d===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...i.textMatrix),a.translate(i.x,i.y),a.scale(et,C),ht=0;ht<dt;++ht){if(Rt=n[ht],typeof Rt=="number"){vt=I*Rt*d/1e3,this.ctx.translate(vt,0),i.x+=vt*et;continue}const Dt=(Rt.isSpace?it:0)+U,mt=h.charProcOperatorList[Rt.operatorListId];if(!mt){(0,r.warn)(`Type3 character "${Rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Rt,this.save(),a.scale(d,d),a.transform(...at),this.executeOperatorList(mt),this.restore()),Lt=r.Util.applyTransform([Rt.width,0],at)[0]*d+Dt,a.translate(Lt,0),i.x+=Lt*et}a.restore(),this.processingType3=null}}setCharWidth(n,a){}setCharWidthAndBounds(n,a,i,h,d,C){this.ctx.rect(i,h,d-i,C-h),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let a;if(n[0]==="TilingPattern"){const i=n[1],h=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),d={createCanvasGraphics:C=>new St(C,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new G.TilingPattern(n,i,this.ctx,d,h)}else a=this._getPattern(n[1],n[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,a,i){const h=r.Util.makeHexColor(n,a,i);this.ctx.strokeStyle=h,this.current.strokeColor=h}setFillRGBColor(n,a,i){const h=r.Util.makeHexColor(n,a,i);this.ctx.fillStyle=h,this.current.fillColor=h,this.current.patternFill=!1}_getPattern(n,a=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=(0,G.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,i)),a&&(i.matrix=a),i}shadingFill(n){if(!this.contentVisible)return;const a=this.ctx;this.save();const i=this._getPattern(n);a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),G.PathType.SHADING);const h=(0,u.getCurrentTransformInverse)(a);if(h){const{width:d,height:C}=a.canvas,[I,U,it,et]=r.Util.getAxialAlignedBoundingBox([0,0,d,C],h);this.ctx.fillRect(I,U,it-I,et-U)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),a)){const i=a[2]-a[0],h=a[3]-a[1];this.ctx.rect(a[0],a[1],i,h),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;n.isolated||(0,r.info)("TODO: Support non-isolated groups."),n.knockout&&(0,r.warn)("Knockout groups not supported.");const i=(0,u.getCurrentTransform)(a);if(n.matrix&&a.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let h=r.Util.getAxialAlignedBoundingBox(n.bbox,(0,u.getCurrentTransform)(a));const d=[0,0,a.canvas.width,a.canvas.height];h=r.Util.intersect(h,d)||[0,0,0,0];const C=Math.floor(h[0]),I=Math.floor(h[1]);let U=Math.max(Math.ceil(h[2])-C,1),it=Math.max(Math.ceil(h[3])-I,1),et=1,at=1;U>w&&(et=U/w,U=w),it>w&&(at=it/w,it=w),this.current.startNewPathAndClipBox([0,0,U,it]);let dt="groupAt"+this.groupLevel;n.smask&&(dt+="_smask_"+this.smaskCounter++%2);const gt=this.cachedCanvases.getCanvas(dt,U,it),ht=gt.context;ht.scale(1/et,1/at),ht.translate(-C,-I),ht.transform(...i),n.smask?this.smaskStack.push({canvas:gt.canvas,context:ht,offsetX:C,offsetY:I,scaleX:et,scaleY:at,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(C,I),a.scale(et,at),a.save()),o(a,ht),this.ctx=ht,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const d=r.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],h);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(n,a,i,h,d){if(X(this,W,Qe).call(this),c(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const C=a[2]-a[0],I=a[3]-a[1];if(d&&this.annotationCanvasMap){i=i.slice(),i[4]-=a[0],i[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=C,a[3]=I;const[U,it]=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:et}=this,at=Math.ceil(C*this.outputScaleX*et),dt=Math.ceil(I*this.outputScaleY*et);this.annotationCanvas=this.canvasFactory.create(at,dt);const{canvas:gt,context:ht}=this.annotationCanvas;this.annotationCanvasMap.set(n,gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ht,this.ctx.save(),this.ctx.setTransform(U,0,0,-it,0,I*it),c(this.ctx)}else c(this.ctx),this.ctx.rect(a[0],a[1],C,I),this.ctx.clip(),this.endPath()}this.current=new m(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,ft,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const a=n.count;n=this.getObject(n.data,n),n.count=a;const i=this.ctx,h=this.processingType3;if(h&&(h.compiled===void 0&&(h.compiled=b(n)),h.compiled)){h.compiled(i);return}const d=this._createMaskCanvas(n),C=d.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(C,d.offsetX,d.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(n,a,i=0,h=0,d,C){if(!this.contentVisible)return;n=this.getObject(n.data,n);const I=this.ctx;I.save();const U=(0,u.getCurrentTransform)(I);I.transform(a,i,h,d,0,0);const it=this._createMaskCanvas(n);I.setTransform(1,0,0,1,it.offsetX-U[4],it.offsetY-U[5]);for(let et=0,at=C.length;et<at;et+=2){const dt=r.Util.transform(U,[a,i,h,d,C[et],C[et+1]]),[gt,ht]=r.Util.applyTransform([0,0],dt);I.drawImage(it.canvas,gt,ht)}I.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const a=this.ctx,i=this.current.fillColor,h=this.current.patternFill;for(const d of n){const{data:C,width:I,height:U,transform:it}=d,et=this.cachedCanvases.getCanvas("maskCanvas",I,U),at=et.context;at.save();const dt=this.getObject(C,d);_(at,dt),at.globalCompositeOperation="source-in",at.fillStyle=h?i.getPattern(at,this,(0,u.getCurrentTransformInverse)(a),G.PathType.FILL):i,at.fillRect(0,0,I,U),at.restore(),a.save(),a.transform(...it),a.scale(1,-1),p(a,et.canvas,0,0,I,U,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const a=this.getObject(n);if(!a){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(n,a,i,h){if(!this.contentVisible)return;const d=this.getObject(n);if(!d){(0,r.warn)("Dependent image isn't ready yet");return}const C=d.width,I=d.height,U=[];for(let it=0,et=h.length;it<et;it+=2)U.push({transform:[a,0,0,i,h[it],h[it+1]],x:0,y:0,w:C,h:I});this.paintInlineImageXObjectGroup(d,U)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:a,width:i,height:h}=n,d=this.cachedCanvases.getCanvas("inlineImage",i,h),C=d.context;return C.filter=this.current.transferMaps,C.drawImage(a,0,0),C.filter="none",d.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const a=n.width,i=n.height,h=this.ctx;if(this.save(),!r.isNodeJS){const{filter:I}=h;I!=="none"&&I!==""&&(h.filter="none")}h.scale(1/a,-1/i);let d;if(n.bitmap)d=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)d=n;else{const U=this.cachedCanvases.getCanvas("inlineImage",a,i).context;A(U,n),d=this.applyTransferMapsToCanvas(U)}const C=this._scaleImage(d,(0,u.getCurrentTransformInverse)(h));h.imageSmoothingEnabled=H((0,u.getCurrentTransform)(h),n.interpolate),p(h,C.img,0,0,C.paintWidth,C.paintHeight,0,-i,a,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,a){if(!this.contentVisible)return;const i=this.ctx;let h;if(n.bitmap)h=n.bitmap;else{const d=n.width,C=n.height,U=this.cachedCanvases.getCanvas("inlineImage",d,C).context;A(U,n),h=this.applyTransferMapsToCanvas(U)}for(const d of a)i.save(),i.transform(...d.transform),i.scale(1,-1),p(i,h,d.x,d.y,d.w,d.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,a){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,a){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(a||(this.pendingClip===tt?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,u.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const a=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[2]),h=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(i,h)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a,b:i,c:h,d}=this.ctx.getTransform();let C,I;if(i===0&&h===0){const U=Math.abs(a),it=Math.abs(d);if(U===it)if(n===0)C=I=1/U;else{const et=U*n;C=I=et<1?1/et:1}else if(n===0)C=1/U,I=1/it;else{const et=U*n,at=it*n;C=et<1?1/et:1,I=at<1?1/at:1}}else{const U=Math.abs(a*d-i*h),it=Math.hypot(a,i),et=Math.hypot(h,d);if(n===0)C=et/U,I=it/U;else{const at=n*U;C=et>at?et/at:1,I=it>at?it/at:1}}this._cachedScaleForStroking[0]=C,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:a}=this,{lineWidth:i}=this.current,[h,d]=this.getScaleForStroking();if(a.lineWidth=i||1,h===1&&d===1){a.stroke();return}const C=a.getLineDash();if(n&&a.save(),a.scale(h,d),C.length>0){const I=Math.max(h,d);a.setLineDash(C.map(U=>U/I)),a.lineDashOffset/=I}a.stroke(),n&&a.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};W=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ft=new WeakSet,Ze=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const a=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let Q=St;e.CanvasGraphics=Q;for(const k in r.OPS)Q.prototype[k]!==void 0&&(Q.prototype[r.OPS[k]]=Q.prototype[k])},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=T;var r=M(1),u=M(6);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=G;function j(b,m){if(!m)return;const A=m[2]-m[0],_=m[3]-m[1],o=new Path2D;o.rect(m[0],m[1],A,_),b.clip(o)}class ot{constructor(){this.constructor===ot&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class P extends ot{constructor(m){super(),this._type=m[1],this._bbox=m[2],this._colorStops=m[3],this._p0=m[4],this._p1=m[5],this._r0=m[6],this._r1=m[7],this.matrix=null}_createGradient(m){let A;this._type==="axial"?A=m.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(A=m.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _ of this._colorStops)A.addColorStop(_[0],_[1]);return A}getPattern(m,A,_,o){let c;if(o===G.STROKE||o===G.FILL){const D=A.current.getClippedPathBoundingBox(o,(0,u.getCurrentTransform)(m))||[0,0,0,0],y=Math.ceil(D[2]-D[0])||1,l=Math.ceil(D[3]-D[1])||1,F=A.cachedCanvases.getCanvas("pattern",y,l,!0),g=F.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-D[0],-D[1]),_=r.Util.transform(_,[1,0,0,1,D[0],D[1]]),g.transform(...A.baseTransform),this.matrix&&g.transform(...this.matrix),j(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),c=m.createPattern(F.canvas,"no-repeat");const H=new DOMMatrix(_);c.setTransform(H)}else j(m,this._bbox),c=this._createGradient(m);return c}}function w(b,m,A,_,o,c,D,y){const l=m.coords,F=m.colors,g=b.data,H=b.width*4;let z;l[A+1]>l[_+1]&&(z=A,A=_,_=z,z=c,c=D,D=z),l[_+1]>l[o+1]&&(z=_,_=o,o=z,z=D,D=y,y=z),l[A+1]>l[_+1]&&(z=A,A=_,_=z,z=c,c=D,D=z);const R=(l[A]+m.offsetX)*m.scaleX,q=(l[A+1]+m.offsetY)*m.scaleY,tt=(l[_]+m.offsetX)*m.scaleX,Q=(l[_+1]+m.offsetY)*m.scaleY,W=(l[o]+m.offsetX)*m.scaleX,lt=(l[o+1]+m.offsetY)*m.scaleY;if(q>=lt)return;const ft=F[c],xt=F[c+1],St=F[c+2],k=F[D],n=F[D+1],a=F[D+2],i=F[y],h=F[y+1],d=F[y+2],C=Math.round(q),I=Math.round(lt);let U,it,et,at,dt,gt,ht,Rt;for(let Lt=C;Lt<=I;Lt++){if(Lt<Q){const st=Lt<q?0:(q-Lt)/(q-Q);U=R-(R-tt)*st,it=ft-(ft-k)*st,et=xt-(xt-n)*st,at=St-(St-a)*st}else{let st;Lt>lt?st=1:Q===lt?st=0:st=(Q-Lt)/(Q-lt),U=tt-(tt-W)*st,it=k-(k-i)*st,et=n-(n-h)*st,at=a-(a-d)*st}let vt;Lt<q?vt=0:Lt>lt?vt=1:vt=(q-Lt)/(q-lt),dt=R-(R-W)*vt,gt=ft-(ft-i)*vt,ht=xt-(xt-h)*vt,Rt=St-(St-d)*vt;const Dt=Math.round(Math.min(U,dt)),mt=Math.round(Math.max(U,dt));let nt=H*Lt+Dt*4;for(let st=Dt;st<=mt;st++)vt=(U-st)/(U-dt),vt<0?vt=0:vt>1&&(vt=1),g[nt++]=it-(it-gt)*vt|0,g[nt++]=et-(et-ht)*vt|0,g[nt++]=at-(at-Rt)*vt|0,g[nt++]=255}}function f(b,m,A){const _=m.coords,o=m.colors;let c,D;switch(m.type){case"lattice":const y=m.verticesPerRow,l=Math.floor(_.length/y)-1,F=y-1;for(c=0;c<l;c++){let g=c*y;for(let H=0;H<F;H++,g++)w(b,A,_[g],_[g+1],_[g+y],o[g],o[g+1],o[g+y]),w(b,A,_[g+y+1],_[g+1],_[g+y],o[g+y+1],o[g+1],o[g+y])}break;case"triangles":for(c=0,D=_.length;c<D;c+=3)w(b,A,_[c],_[c+1],_[c+2],o[c],o[c+1],o[c+2]);break;default:throw new Error("illegal figure")}}class O extends ot{constructor(m){super(),this._coords=m[2],this._colors=m[3],this._figures=m[4],this._bounds=m[5],this._bbox=m[7],this._background=m[8],this.matrix=null}_createMeshCanvas(m,A,_){const y=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-y,g=Math.ceil(this._bounds[3])-l,H=Math.min(Math.ceil(Math.abs(F*m[0]*1.1)),3e3),z=Math.min(Math.ceil(Math.abs(g*m[1]*1.1)),3e3),R=F/H,q=g/z,tt={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-l,scaleX:1/R,scaleY:1/q},Q=H+2*2,W=z+2*2,lt=_.getCanvas("mesh",Q,W,!1),ft=lt.context,xt=ft.createImageData(H,z);if(A){const k=xt.data;for(let n=0,a=k.length;n<a;n+=4)k[n]=A[0],k[n+1]=A[1],k[n+2]=A[2],k[n+3]=255}for(const k of this._figures)f(xt,k,tt);return ft.putImageData(xt,2,2),{canvas:lt.canvas,offsetX:y-2*R,offsetY:l-2*q,scaleX:R,scaleY:q}}getPattern(m,A,_,o){j(m,this._bbox);let c;if(o===G.SHADING)c=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(m));else if(c=r.Util.singularValueDecompose2dScale(A.baseTransform),this.matrix){const y=r.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*y[0],c[1]*y[1]]}const D=this._createMeshCanvas(c,o===G.SHADING?null:this._background,A.cachedCanvases);return o!==G.SHADING&&(m.setTransform(...A.baseTransform),this.matrix&&m.transform(...this.matrix)),m.translate(D.offsetX,D.offsetY),m.scale(D.scaleX,D.scaleY),m.createPattern(D.canvas,"no-repeat")}}class L extends ot{getPattern(){return"hotpink"}}function T(b){switch(b[0]){case"RadialAxial":return new P(b);case"Mesh":return new O(b);case"Dummy":return new L}throw new Error(`Unknown IR type: ${b[0]}`)}const x={COLORED:1,UNCOLORED:2},p=class p{constructor(m,A,_,o,c){this.operatorList=m[2],this.matrix=m[3]||[1,0,0,1,0,0],this.bbox=m[4],this.xstep=m[5],this.ystep=m[6],this.paintType=m[7],this.tilingType=m[8],this.color=A,this.ctx=_,this.canvasGraphicsFactory=o,this.baseTransform=c}createPatternCanvas(m){const A=this.operatorList,_=this.bbox,o=this.xstep,c=this.ystep,D=this.paintType,y=this.tilingType,l=this.color,F=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+y);const g=_[0],H=_[1],z=_[2],R=_[3],q=r.Util.singularValueDecompose2dScale(this.matrix),tt=r.Util.singularValueDecompose2dScale(this.baseTransform),Q=[q[0]*tt[0],q[1]*tt[1]],W=this.getSizeAndScale(o,this.ctx.canvas.width,Q[0]),lt=this.getSizeAndScale(c,this.ctx.canvas.height,Q[1]),ft=m.cachedCanvases.getCanvas("pattern",W.size,lt.size,!0),xt=ft.context,St=F.createCanvasGraphics(xt);St.groupLevel=m.groupLevel,this.setFillAndStrokeStyleToContext(St,D,l);let k=g,n=H,a=z,i=R;return g<0&&(k=0,a+=Math.abs(g)),H<0&&(n=0,i+=Math.abs(H)),xt.translate(-(W.scale*k),-(lt.scale*n)),St.transform(W.scale,0,0,lt.scale,0,0),xt.save(),this.clipBbox(St,k,n,a,i),St.baseTransform=(0,u.getCurrentTransform)(St.ctx),St.executeOperatorList(A),St.endDrawing(),{canvas:ft.canvas,scaleX:W.scale,scaleY:lt.scale,offsetX:k,offsetY:n}}getSizeAndScale(m,A,_){m=Math.abs(m);const o=Math.max(p.MAX_PATTERN_SIZE,A);let c=Math.ceil(m*_);return c>=o?c=o:_=c/m,{scale:_,size:c}}clipBbox(m,A,_,o,c){const D=o-A,y=c-_;m.ctx.rect(A,_,D,y),m.current.updateRectMinMax((0,u.getCurrentTransform)(m.ctx),[A,_,o,c]),m.clip(),m.endPath()}setFillAndStrokeStyleToContext(m,A,_){const o=m.ctx,c=m.current;switch(A){case x.COLORED:const D=this.ctx;o.fillStyle=D.fillStyle,o.strokeStyle=D.strokeStyle,c.fillColor=D.fillStyle,c.strokeColor=D.strokeStyle;break;case x.UNCOLORED:const y=r.Util.makeHexColor(_[0],_[1],_[2]);o.fillStyle=y,o.strokeStyle=y,c.fillColor=y,c.strokeColor=y;break;default:throw new r.FormatError(`Unsupported paint type: ${A}`)}}getPattern(m,A,_,o){let c=_;o!==G.SHADING&&(c=r.Util.transform(c,A.baseTransform),this.matrix&&(c=r.Util.transform(c,this.matrix)));const D=this.createPatternCanvas(A);let y=new DOMMatrix(c);y=y.translate(D.offsetX,D.offsetY),y=y.scale(1/D.scaleX,1/D.scaleY);const l=m.createPattern(D.canvas,"repeat");return l.setTransform(y),l}};ee(p,"MAX_PATTERN_SIZE",3e3);let v=p;e.TilingPattern=v},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=G,e.convertToRGBA=u,e.grayToRGBA=ot;var r=M(1);function u(P){switch(P.kind){case r.ImageKind.GRAYSCALE_1BPP:return G(P);case r.ImageKind.RGB_24BPP:return j(P)}return null}function G({src:P,srcPos:w=0,dest:f,width:O,height:L,nonBlackColor:T=4294967295,inverseDecode:x=!1}){const v=r.FeatureTest.isLittleEndian?4278190080:255,[p,b]=x?[T,v]:[v,T],m=O>>3,A=O&7,_=P.length;f=new Uint32Array(f.buffer);let o=0;for(let c=0;c<L;c++){for(const y=w+m;w<y;w++){const l=w<_?P[w]:255;f[o++]=l&128?b:p,f[o++]=l&64?b:p,f[o++]=l&32?b:p,f[o++]=l&16?b:p,f[o++]=l&8?b:p,f[o++]=l&4?b:p,f[o++]=l&2?b:p,f[o++]=l&1?b:p}if(A===0)continue;const D=w<_?P[w++]:255;for(let y=0;y<A;y++)f[o++]=D&1<<7-y?b:p}return{srcPos:w,destPos:o}}function j({src:P,srcPos:w=0,dest:f,destPos:O=0,width:L,height:T}){let x=0;const v=P.length>>2,p=new Uint32Array(P.buffer,w,v);if(r.FeatureTest.isLittleEndian){for(;x<v-2;x+=3,O+=4){const b=p[x],m=p[x+1],A=p[x+2];f[O]=b|4278190080,f[O+1]=b>>>24|m<<8|4278190080,f[O+2]=m>>>16|A<<16|4278190080,f[O+3]=A>>>8|4278190080}for(let b=x*4,m=P.length;b<m;b+=3)f[O++]=P[b]|P[b+1]<<8|P[b+2]<<16|4278190080}else{for(;x<v-2;x+=3,O+=4){const b=p[x],m=p[x+1],A=p[x+2];f[O]=b|255,f[O+1]=b<<24|m>>>8|255,f[O+2]=m<<16|A>>>16|255,f[O+3]=A<<8|255}for(let b=x*4,m=P.length;b<m;b+=3)f[O++]=P[b]<<24|P[b+1]<<16|P[b+2]<<8|255}return{srcPos:w,destPos:O}}function ot(P,w){if(r.FeatureTest.isLittleEndian)for(let f=0,O=P.length;f<O;f++)w[f]=P[f]*65793|4278190080;else for(let f=0,O=P.length;f<O;f++)w[f]=P[f]*16843008|255}},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const M=Object.create(null);e.GlobalWorkerOptions=M,M.workerPort=null,M.workerSrc=""},(S,e,M)=>{var P,Pn,f,kn,L,Ce;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=M(1);const u={UNKNOWN:0,DATA:1,ERROR:2},G={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function j(x){switch(x instanceof Error||typeof x=="object"&&x!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),x.name){case"AbortException":return new r.AbortException(x.message);case"MissingPDFException":return new r.MissingPDFException(x.message);case"PasswordException":return new r.PasswordException(x.message,x.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(x.message,x.status);case"UnknownErrorException":return new r.UnknownErrorException(x.message,x.details);default:return new r.UnknownErrorException(x.message,x.toString())}}class ot{constructor(v,p,b){$(this,P);$(this,f);$(this,L);this.sourceName=v,this.targetName=p,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=m=>{const A=m.data;if(A.targetName!==this.sourceName)return;if(A.stream){X(this,f,kn).call(this,A);return}if(A.callback){const o=A.callbackId,c=this.callbackCapabilities[o];if(!c)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],A.callback===u.DATA)c.resolve(A.data);else if(A.callback===u.ERROR)c.reject(j(A.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[A.action];if(!_)throw new Error(`Unknown action from worker: ${A.action}`);if(A.callbackId){const o=this.sourceName,c=A.sourceName;new Promise(function(D){D(_(A.data))}).then(function(D){b.postMessage({sourceName:o,targetName:c,callback:u.DATA,callbackId:A.callbackId,data:D})},function(D){b.postMessage({sourceName:o,targetName:c,callback:u.ERROR,callbackId:A.callbackId,reason:j(D)})});return}if(A.streamId){X(this,P,Pn).call(this,A);return}_(A.data)},b.addEventListener("message",this._onComObjOnMessage)}on(v,p){const b=this.actionHandler;if(b[v])throw new Error(`There is already an actionName called "${v}"`);b[v]=p}send(v,p,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:p},b)}sendWithPromise(v,p,b){const m=this.callbackId++,A=new r.PromiseCapability;this.callbackCapabilities[m]=A;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:m,data:p},b)}catch(_){A.reject(_)}return A.promise}sendWithStream(v,p,b,m){const A=this.streamId++,_=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:D=>{const y=new r.PromiseCapability;return this.streamControllers[A]={controller:D,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:_,targetName:o,action:v,streamId:A,data:p,desiredSize:D.desiredSize},m),y.promise},pull:D=>{const y=new r.PromiseCapability;return this.streamControllers[A].pullCall=y,c.postMessage({sourceName:_,targetName:o,stream:G.PULL,streamId:A,desiredSize:D.desiredSize}),y.promise},cancel:D=>{(0,r.assert)(D instanceof Error,"cancel must have a valid reason");const y=new r.PromiseCapability;return this.streamControllers[A].cancelCall=y,this.streamControllers[A].isClosed=!0,c.postMessage({sourceName:_,targetName:o,stream:G.CANCEL,streamId:A,reason:j(D)}),y.promise}},b)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}P=new WeakSet,Pn=function(v){const p=v.streamId,b=this.sourceName,m=v.sourceName,A=this.comObj,_=this,o=this.actionHandler[v.action],c={enqueue(D,y=1,l){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=y,F>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),A.postMessage({sourceName:b,targetName:m,stream:G.ENQUEUE,streamId:p,chunk:D},l)},close(){this.isCancelled||(this.isCancelled=!0,A.postMessage({sourceName:b,targetName:m,stream:G.CLOSE,streamId:p}),delete _.streamSinks[p])},error(D){(0,r.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,A.postMessage({sourceName:b,targetName:m,stream:G.ERROR,streamId:p,reason:j(D)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[p]=c,new Promise(function(D){D(o(v.data,c))}).then(function(){A.postMessage({sourceName:b,targetName:m,stream:G.START_COMPLETE,streamId:p,success:!0})},function(D){A.postMessage({sourceName:b,targetName:m,stream:G.START_COMPLETE,streamId:p,reason:j(D)})})},f=new WeakSet,kn=function(v){const p=v.streamId,b=this.sourceName,m=v.sourceName,A=this.comObj,_=this.streamControllers[p],o=this.streamSinks[p];switch(v.stream){case G.START_COMPLETE:v.success?_.startCall.resolve():_.startCall.reject(j(v.reason));break;case G.PULL_COMPLETE:v.success?_.pullCall.resolve():_.pullCall.reject(j(v.reason));break;case G.PULL:if(!o){A.postMessage({sourceName:b,targetName:m,stream:G.PULL_COMPLETE,streamId:p,success:!0});break}o.desiredSize<=0&&v.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=v.desiredSize,new Promise(function(c){var D;c((D=o.onPull)==null?void 0:D.call(o))}).then(function(){A.postMessage({sourceName:b,targetName:m,stream:G.PULL_COMPLETE,streamId:p,success:!0})},function(c){A.postMessage({sourceName:b,targetName:m,stream:G.PULL_COMPLETE,streamId:p,reason:j(c)})});break;case G.ENQUEUE:if((0,r.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(v.chunk);break;case G.CLOSE:if((0,r.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),X(this,L,Ce).call(this,_,p);break;case G.ERROR:(0,r.assert)(_,"error should have stream controller"),_.controller.error(j(v.reason)),X(this,L,Ce).call(this,_,p);break;case G.CANCEL_COMPLETE:v.success?_.cancelCall.resolve():_.cancelCall.reject(j(v.reason)),X(this,L,Ce).call(this,_,p);break;case G.CANCEL:if(!o)break;new Promise(function(c){var D;c((D=o.onCancel)==null?void 0:D.call(o,j(v.reason)))}).then(function(){A.postMessage({sourceName:b,targetName:m,stream:G.CANCEL_COMPLETE,streamId:p,success:!0})},function(c){A.postMessage({sourceName:b,targetName:m,stream:G.CANCEL_COMPLETE,streamId:p,reason:j(c)})}),o.sinkCapability.reject(j(v.reason)),o.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},L=new WeakSet,Ce=async function(v,p){var b,m,A;await Promise.allSettled([(b=v.startCall)==null?void 0:b.promise,(m=v.pullCall)==null?void 0:m.promise,(A=v.cancelCall)==null?void 0:A.promise]),delete this.streamControllers[p]},e.MessageHandler=ot},(S,e,M)=>{var G,j;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=M(1);class u{constructor({parsedData:P,rawData:w}){$(this,G,void 0);$(this,j,void 0);rt(this,G,P),rt(this,j,w)}getRaw(){return t(this,j)}get(P){return t(this,G).get(P)??null}getAll(){return(0,r.objectFromMap)(t(this,G))}has(P){return t(this,G).has(P)}}G=new WeakMap,j=new WeakMap,e.Metadata=u},(S,e,M)=>{var P,w,f,O,L,T,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=M(1),u=M(8);const G=Symbol("INTERNAL");class j{constructor(p,b){$(this,P,!0);this.name=p,this.intent=b}get visible(){return t(this,P)}_setVisible(p,b){p!==G&&(0,r.unreachable)("Internal method `_setVisible` called."),rt(this,P,b)}}P=new WeakMap;class ot{constructor(p){$(this,T);$(this,w,null);$(this,f,new Map);$(this,O,null);$(this,L,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,rt(this,L,p.order);for(const b of p.groups)t(this,f).set(b.id,new j(b.name,b.intent));if(p.baseState==="OFF")for(const b of t(this,f).values())b._setVisible(G,!1);for(const b of p.on)t(this,f).get(b)._setVisible(G,!0);for(const b of p.off)t(this,f).get(b)._setVisible(G,!1);rt(this,O,this.getHash())}}isVisible(p){if(t(this,f).size===0)return!0;if(!p)return(0,r.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return t(this,f).has(p.id)?t(this,f).get(p.id).visible:((0,r.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return X(this,T,tn).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const b of p.ids){if(!t(this,f).has(b))return(0,r.warn)(`Optional content group not found: ${b}`),!0;if(t(this,f).get(b).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const b of p.ids){if(!t(this,f).has(b))return(0,r.warn)(`Optional content group not found: ${b}`),!0;if(!t(this,f).get(b).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const b of p.ids){if(!t(this,f).has(b))return(0,r.warn)(`Optional content group not found: ${b}`),!0;if(!t(this,f).get(b).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const b of p.ids){if(!t(this,f).has(b))return(0,r.warn)(`Optional content group not found: ${b}`),!0;if(t(this,f).get(b).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,r.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,b=!0){if(!t(this,f).has(p)){(0,r.warn)(`Optional content group not found: ${p}`);return}t(this,f).get(p)._setVisible(G,!!b),rt(this,w,null)}get hasInitialVisibility(){return t(this,O)===null||this.getHash()===t(this,O)}getOrder(){return t(this,f).size?t(this,L)?t(this,L).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,r.objectFromMap)(t(this,f)):null}getGroup(p){return t(this,f).get(p)||null}getHash(){if(t(this,w)!==null)return t(this,w);const p=new u.MurmurHash3_64;for(const[b,m]of t(this,f))p.update(`${b}:${m.visible}`);return rt(this,w,p.hexdigest())}}w=new WeakMap,f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakSet,tn=function(p){const b=p.length;if(b<2)return!0;const m=p[0];for(let A=1;A<b;A++){const _=p[A];let o;if(Array.isArray(_))o=X(this,T,tn).call(this,_);else if(t(this,f).has(_))o=t(this,f).get(_).visible;else return(0,r.warn)(`Optional content group not found: ${_}`),!0;switch(m){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return m==="And"},e.OptionalContentConfig=ot},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=M(1),u=M(6);class G{constructor({length:w,initialData:f,progressiveDone:O=!1,contentDispositionFilename:L=null,disableRange:T=!1,disableStream:x=!1},v){if((0,r.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=L,(f==null?void 0:f.length)>0){const p=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!x,this._isRangeSupported=!T,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,b)=>{this._onReceiveData({begin:p,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((p,b)=>{this._onProgress({loaded:p,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:w,chunk:f}){const O=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(w===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const L=this._rangeReaders.some(function(T){return T._begin!==w?!1:(T._enqueue(O),!0)});(0,r.assert)(L,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}_onProgress(w){var f,O,L,T;w.total===void 0?(O=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||O.call(f,{loaded:w.loaded}):(T=(L=this._fullRequestReader)==null?void 0:L.onProgress)==null||T.call(L,{loaded:w.loaded,total:w.total})}_onProgressiveDone(){var w;(w=this._fullRequestReader)==null||w.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(w){const f=this._rangeReaders.indexOf(w);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const w=this._queuedChunks;return this._queuedChunks=null,new j(this,w,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(w,f){if(f<=this._progressiveDataLength)return null;const O=new ot(this,w,f);return this._pdfDataRangeTransport.requestDataRange(w,f),this._rangeReaders.push(O),O}cancelAllRequests(w){var f;(f=this._fullRequestReader)==null||f.cancel(w);for(const O of this._rangeReaders.slice(0))O.cancel(w);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=G;class j{constructor(w,f,O=!1,L=null){this._stream=w,this._done=O||!1,this._filename=(0,u.isPdfFile)(L)?L:null,this._queuedChunks=f||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),w._fullRequestReader=this,this.onProgress=null}_enqueue(w){this._done||(this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunks.push(w),this._loaded+=w.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=new r.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ot{constructor(w,f,O){this._stream=w,this._begin=f,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(w){if(!this._done){if(this._requests.length===0)this._queuedChunk=w;else{this._requests.shift().resolve({value:w,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const w=new r.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=M(1),u=M(20);function G(O,L,T){return{method:"GET",headers:O,signal:T.signal,mode:"cors",credentials:L?"include":"same-origin",redirect:"follow"}}function j(O){const L=new Headers;for(const T in O){const x=O[T];x!==void 0&&L.append(T,x)}return L}function ot(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,r.warn)(`getArrayBuffer - unexpected data format: ${O}`),new Uint8Array(O).buffer)}class P{constructor(L){this.source=L,this.isHttp=/^https?:/i.test(L.url),this.httpHeaders=this.isHttp&&L.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var L;return((L=this._fullRequestReader)==null?void 0:L._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(L,T){if(T<=this._progressiveDataLength)return null;const x=new f(this,L,T);return this._rangeRequestReaders.push(x),x}cancelAllRequests(L){var T;(T=this._fullRequestReader)==null||T.cancel(L);for(const x of this._rangeRequestReaders.slice(0))x.cancel(L)}}e.PDFFetchStream=P;class w{constructor(L){this._stream=L,this._reader=null,this._loaded=0,this._filename=null;const T=L.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new r.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=j(this._stream.httpHeaders);const x=T.url;fetch(x,G(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,u.validateResponseStatus)(v.status))throw(0,u.createResponseStatusError)(v.status,x);this._reader=v.body.getReader(),this._headersCapability.resolve();const p=A=>v.headers.get(A),{allowRangeRequests:b,suggestedLength:m}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=m||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._headersCapability.promise;const{value:L,done:T}=await this._reader.read();return T?{value:L,done:T}:(this._loaded+=L.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ot(L),done:!1})}cancel(L){var T;(T=this._reader)==null||T.cancel(L),this._abortController.abort()}}class f{constructor(L,T,x){this._stream=L,this._reader=null,this._loaded=0;const v=L.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=j(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${x-1}`);const p=v.url;fetch(p,G(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,u.validateResponseStatus)(b.status))throw(0,u.createResponseStatusError)(b.status,p);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._readCapability.promise;const{value:L,done:T}=await this._reader.read();return T?{value:L,done:T}:(this._loaded+=L.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:ot(L),done:!1})}cancel(L){var T;(T=this._reader)==null||T.cancel(L),this._abortController.abort()}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=P,e.extractFilenameFromHeader=ot,e.validateRangeRequestCapabilities=j,e.validateResponseStatus=w;var r=M(1),u=M(21),G=M(6);function j({getResponseHeader:f,isHttp:O,rangeChunkSize:L,disableRange:T}){const x={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(f("Content-Length"),10);return!Number.isInteger(v)||(x.suggestedLength=v,v<=2*L)||T||!O||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(x.allowRangeRequests=!0),x}function ot(f){const O=f("Content-Disposition");if(O){let L=(0,u.getFilenameFromContentDispositionHeader)(O);if(L.includes("%"))try{L=decodeURIComponent(L)}catch{}if((0,G.isPdfFile)(L))return L}return null}function P(f,O){return f===404||f===0&&O.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+O+'".'):new r.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${O}".`,f)}function w(f){return f===200||f===206}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=u;var r=M(1);function u(G){let j=!0,ot=P("filename\\*","i").exec(G);if(ot){ot=ot[1];let v=L(ot);return v=unescape(v),v=T(v),v=x(v),f(v)}if(ot=O(G),ot){const v=x(ot);return f(v)}if(ot=P("filename","i").exec(G),ot){ot=ot[1];let v=L(ot);return v=x(v),f(v)}function P(v,p){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function w(v,p){if(v){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(v,{fatal:!0}),m=(0,r.stringToBytes)(p);p=b.decode(m),j=!1}catch{}}return p}function f(v){return j&&/[\x80-\xff]/.test(v)&&(v=w("utf-8",v),j&&(v=w("iso-8859-1",v))),v}function O(v){const p=[];let b;const m=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=m.exec(v))!==null;){let[,_,o,c]=b;if(_=parseInt(_,10),_ in p){if(_===0)break;continue}p[_]=[o,c]}const A=[];for(let _=0;_<p.length&&_ in p;++_){let[o,c]=p[_];c=L(c),o&&(c=unescape(c),_===0&&(c=T(c))),A.push(c)}return A.join("")}function L(v){if(v.startsWith('"')){const p=v.slice(1).split('\\"');for(let b=0;b<p.length;++b){const m=p[b].indexOf('"');m!==-1&&(p[b]=p[b].slice(0,m),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}v=p.join('"')}return v}function T(v){const p=v.indexOf("'");if(p===-1)return v;const b=v.slice(0,p),A=v.slice(p+1).replace(/^[^']*'/,"");return w(b,A)}function x(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,m,A){if(m==="q"||m==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,o){return String.fromCharCode(parseInt(o,16))}),w(b,A);try{A=atob(A)}catch{}return w(b,A)})}return""}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=M(1),u=M(20);const G=200,j=206;function ot(L){const T=L.response;return typeof T!="string"?T:(0,r.stringToBytes)(T).buffer}class P{constructor(T,x={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&x.httpHeaders||Object.create(null),this.withCredentials=x.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,x,v){const p={begin:T,end:x};for(const b in v)p[b]=v[b];return this.request(p)}requestFull(T){return this.request(T)}request(T){const x=new XMLHttpRequest,v=this.currXhrId++,p=this.pendingRequests[v]={xhr:x};x.open("GET",this.url),x.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const m=this.httpHeaders[b];m!==void 0&&x.setRequestHeader(b,m)}return this.isHttp&&"begin"in T&&"end"in T?(x.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),p.expectedStatus=j):p.expectedStatus=G,x.responseType="arraybuffer",T.onError&&(x.onerror=function(b){T.onError(x.status)}),x.onreadystatechange=this.onStateChange.bind(this,v),x.onprogress=this.onProgress.bind(this,v),p.onHeadersReceived=T.onHeadersReceived,p.onDone=T.onDone,p.onError=T.onError,p.onProgress=T.onProgress,x.send(null),v}onProgress(T,x){var p;const v=this.pendingRequests[T];v&&((p=v.onProgress)==null||p.call(v,x))}onStateChange(T,x){var _,o,c;const v=this.pendingRequests[T];if(!v)return;const p=v.xhr;if(p.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),p.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],p.status===0&&this.isHttp){(_=v.onError)==null||_.call(v,p.status);return}const b=p.status||G;if(!(b===G&&v.expectedStatus===j)&&b!==v.expectedStatus){(o=v.onError)==null||o.call(v,p.status);return}const A=ot(p);if(b===j){const D=p.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);v.onDone({begin:parseInt(y[1],10),chunk:A})}else A?v.onDone({begin:0,chunk:A}):(c=v.onError)==null||c.call(v,p.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const x=this.pendingRequests[T].xhr;delete this.pendingRequests[T],x.abort()}}class w{constructor(T){this._source=T,this._manager=new P(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const x=this._rangeRequestReaders.indexOf(T);x>=0&&this._rangeRequestReaders.splice(x,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(T,x){const v=new O(this._manager,T,x);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(T){var x;(x=this._fullRequestReader)==null||x.cancel(T);for(const v of this._rangeRequestReaders.slice(0))v.cancel(T)}}e.PDFNetworkStream=w;class f{constructor(T,x){this._manager=T;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._fullRequestId=T.requestFull(v),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=x.disableRange||!1,this._contentLength=x.length,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,x=this._manager.getRequestXhr(T),v=m=>x.getResponseHeader(m),{allowRangeRequests:p,suggestedLength:b}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,u.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var x;(x=this.onProgress)==null||x.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new r.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(T,x,v){this._manager=T;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(x,v,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const x=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunk=x,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,u.createResponseStatusError)(T,this._url);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var x;this.isStreamingSupported||(x=this.onProgress)==null||x.call(this,{loaded:T.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new r.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=M(1),u=M(20);const G=/^file:\/\/\/[a-zA-Z]:\//;function j(v){const p=require$$5,b=p.parse(v);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(v)?p.parse(`file:///${v}`):(b.host||(b.protocol="file:"),b)}class ot{constructor(p){this.source=p,this.url=j(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new O(this),this._fullRequestReader}getRangeReader(p,b){if(b<=this._progressiveDataLength)return null;const m=this.isFsUrl?new x(this,p,b):new L(this,p,b);return this._rangeRequestReaders.push(m),m}cancelAllRequests(p){var b;(b=this._fullRequestReader)==null||b.cancel(p);for(const m of this._rangeRequestReaders.slice(0))m.cancel(p)}}e.PDFNodeStream=ot;class P{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=p.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=p.length,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",b=>{this._error(b)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const b=p.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=p.length,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",b=>{this._error(b)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(v,p){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:p}}class O extends P{constructor(p){super(p);const b=m=>{if(m.statusCode===404){const c=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(m);const A=c=>this._readableStream.headers[c.toLowerCase()],{allowRangeRequests:_,suggestedLength:o}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=o||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(A)};if(this._request=null,this._url.protocol==="http:"){const m=require$$5;this._request=m.request(f(this._url,p.httpHeaders),b)}else{const m=require$$5;this._request=m.request(f(this._url,p.httpHeaders),b)}this._request.on("error",m=>{this._storedError=m,this._headersCapability.reject(m)}),this._request.end()}}class L extends w{constructor(p,b,m){super(p),this._httpHeaders={};for(const _ in p.httpHeaders){const o=p.httpHeaders[_];o!==void 0&&(this._httpHeaders[_]=o)}this._httpHeaders.Range=`bytes=${b}-${m-1}`;const A=_=>{if(_.statusCode===404){const o=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(_)};if(this._request=null,this._url.protocol==="http:"){const _=require$$5;this._request=_.request(f(this._url,this._httpHeaders),A)}else{const _=require$$5;this._request=_.request(f(this._url,this._httpHeaders),A)}this._request.on("error",_=>{this._storedError=_}),this._request.end()}}class T extends P{constructor(p){super(p);let b=decodeURIComponent(this._url.path);G.test(this._url.href)&&(b=b.replace(/^\//,""));const m=require$$5;m.lstat(b,(A,_)=>{if(A){A.code==="ENOENT"&&(A=new r.MissingPDFException(`Missing PDF "${b}".`)),this._storedError=A,this._headersCapability.reject(A);return}this._contentLength=_.size,this._setReadableStream(m.createReadStream(b)),this._headersCapability.resolve()})}}class x extends w{constructor(p,b,m){super(p);let A=decodeURIComponent(this._url.path);G.test(this._url.href)&&(A=A.replace(/^\//,""));const _=require$$5;this._setReadableStream(_.createReadStream(A,{start:b,end:m-1}))}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=M(6),u=M(1);const G={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},j="http://www.w3.org/XML/1998/namespace",ot="http://www.w3.org/1999/xlink",P=["butt","round","square"],w=["miter","round","bevel"],f=function(_,o="",c=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!c)return URL.createObjectURL(new Blob([_],{type:o}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${o};base64,`;for(let l=0,F=_.length;l<F;l+=3){const g=_[l]&255,H=_[l+1]&255,z=_[l+2]&255,R=g>>2,q=(g&3)<<4|H>>4,tt=l+1<F?(H&15)<<2|z>>6:64,Q=l+2<F?z&63:64;y+=D[R]+D[q]+D[tt]+D[Q]}return y},O=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,c=new Int32Array(256);for(let z=0;z<256;z++){let R=z;for(let q=0;q<8;q++)R=R&1?3988292384^R>>1&2147483647:R>>1&2147483647;c[z]=R}function D(z,R,q){let tt=-1;for(let Q=R;Q<q;Q++){const W=(tt^z[Q])&255,lt=c[W];tt=tt>>>8^lt}return tt^-1}function y(z,R,q,tt){let Q=tt;const W=R.length;q[Q]=W>>24&255,q[Q+1]=W>>16&255,q[Q+2]=W>>8&255,q[Q+3]=W&255,Q+=4,q[Q]=z.charCodeAt(0)&255,q[Q+1]=z.charCodeAt(1)&255,q[Q+2]=z.charCodeAt(2)&255,q[Q+3]=z.charCodeAt(3)&255,Q+=4,q.set(R,Q),Q+=R.length;const lt=D(q,tt+4,Q);q[Q]=lt>>24&255,q[Q+1]=lt>>16&255,q[Q+2]=lt>>8&255,q[Q+3]=lt&255}function l(z,R,q){let tt=1,Q=0;for(let W=R;W<q;++W)tt=(tt+(z[W]&255))%65521,Q=(Q+tt)%65521;return Q<<16|tt}function F(z){if(!u.isNodeJS)return g(z);try{const R=parseInt(process.versions.node)>=8?z:Buffer.from(z),q=require$$5.deflateSync(R,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(R){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+R)}return g(z)}function g(z){let R=z.length;const q=65535,tt=Math.ceil(R/q),Q=new Uint8Array(2+R+tt*5+4);let W=0;Q[W++]=120,Q[W++]=156;let lt=0;for(;R>q;)Q[W++]=0,Q[W++]=255,Q[W++]=255,Q[W++]=0,Q[W++]=0,Q.set(z.subarray(lt,lt+q),W),W+=q,lt+=q,R-=q;Q[W++]=1,Q[W++]=R&255,Q[W++]=R>>8&255,Q[W++]=~R&65535&255,Q[W++]=(~R&65535)>>8&255,Q.set(z.subarray(lt),W),W+=z.length-lt;const ft=l(z,0,z.length);return Q[W++]=ft>>24&255,Q[W++]=ft>>16&255,Q[W++]=ft>>8&255,Q[W++]=ft&255,Q}function H(z,R,q,tt){const Q=z.width,W=z.height;let lt,ft,xt;const St=z.data;switch(R){case u.ImageKind.GRAYSCALE_1BPP:ft=0,lt=1,xt=Q+7>>3;break;case u.ImageKind.RGB_24BPP:ft=2,lt=8,xt=Q*3;break;case u.ImageKind.RGBA_32BPP:ft=6,lt=8,xt=Q*4;break;default:throw new Error("invalid format")}const k=new Uint8Array((1+xt)*W);let n=0,a=0;for(let U=0;U<W;++U)k[n++]=0,k.set(St.subarray(a,a+xt),n),a+=xt,n+=xt;if(R===u.ImageKind.GRAYSCALE_1BPP&&tt){n=0;for(let U=0;U<W;U++){n++;for(let it=0;it<xt;it++)k[n++]^=255}}const i=new Uint8Array([Q>>24&255,Q>>16&255,Q>>8&255,Q&255,W>>24&255,W>>16&255,W>>8&255,W&255,lt,ft,0,0,0]),h=F(k),d=_.length+o*3+i.length+h.length,C=new Uint8Array(d);let I=0;return C.set(_,I),I+=_.length,y("IHDR",i,C,I),I+=o+i.length,y("IDATA",h,C,I),I+=o+h.length,y("IEND",new Uint8Array(0),C,I),f(C,"image/png",q)}return function(R,q,tt){const Q=R.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:R.kind;return H(R,Q,q,tt)}}();class L{constructor(){this.fontSizeScale=1,this.fontWeight=G.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=G.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,c){this.x=o,this.y=c}}function T(_){let o=[];const c=[];for(const D of _){if(D.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),c.push(o),o=o.at(-1).items;continue}D.fn==="restore"?o=c.pop():o.push(D)}return o}function x(_){if(Number.isInteger(_))return _.toString();const o=_.toFixed(10);let c=o.length-1;if(o[c]!=="0")return o;do c--;while(o[c]==="0");return o.substring(0,o[c]==="."?c:c+1)}function v(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${x(_[0])} ${x(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2]){const o=Math.acos(_[0])*180/Math.PI;return`rotate(${x(o)})`}}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${x(_[4])} ${x(_[5])})`;return`matrix(${x(_[0])} ${x(_[1])} ${x(_[2])} ${x(_[3])} ${x(_[4])} ${x(_[5])})`}let p=0,b=0,m=0;class A{constructor(o,c,D=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new L,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=c,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const y in u.OPS)this._operatorIdMapping[u.OPS[y]]=y}getObject(o,c=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):c}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const c=o.fnArray,D=o.argsArray;for(let y=0,l=c.length;y<l;y++)if(c[y]===u.OPS.dependency)for(const F of D[y]){const g=F.startsWith("g_")?this.commonObjs:this.objs,H=new Promise(z=>{g.get(F,z)});this.current.dependencies.push(H)}return Promise.all(this.current.dependencies)}transform(o,c,D,y,l,F){const g=[o,c,D,y,l,F];this.transformMatrix=u.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(o,c){this.viewport=c;const D=this._initialize(c);return this.loadDependencies(o).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),D))}convertOpList(o){const c=this._operatorIdMapping,D=o.argsArray,y=o.fnArray,l=[];for(let F=0,g=y.length;F<g;F++){const H=y[F];l.push({fnId:H,fn:c[H],args:D[F]})}return T(l)}executeOpTree(o){for(const c of o){const D=c.fn,y=c.fnId,l=c.args;switch(y|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(l);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case u.OPS.setFont:this.setFont(l);break;case u.OPS.showText:this.showText(l[0]);break;case u.OPS.showSpacedText:this.showText(l[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(l[0],l[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case u.OPS.setHScale:this.setHScale(l[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.setTextRise:this.setTextRise(l[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case u.OPS.setLineWidth:this.setLineWidth(l[0]);break;case u.OPS.setLineJoin:this.setLineJoin(l[0]);break;case u.OPS.setLineCap:this.setLineCap(l[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case u.OPS.setFillColorN:this.setFillColorN(l);break;case u.OPS.shadingFill:this.shadingFill(l[0]);break;case u.OPS.setDash:this.setDash(l[0],l[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case u.OPS.setFlatness:this.setFlatness(l[0]);break;case u.OPS.setGState:this.setGState(l[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.constructPath:this.constructPath(l[0],l[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(c.items);break;default:(0,u.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,c,D,y,l,F){const g=this.current;g.textMatrix=g.lineMatrix=[o,c,D,y,l,F],g.textMatrixScale=Math.hypot(o,c),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${x(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",x(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=u.IDENTITY_MATRIX,o.lineMatrix=u.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,c){const D=this.current;D.x=D.lineX+=o,D.y=D.lineY+=c,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${x(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",x(-D.y))}showText(o){const c=this.current,D=c.font,y=c.fontSize;if(y===0)return;const l=c.fontSizeScale,F=c.charSpacing,g=c.wordSpacing,H=c.fontDirection,z=c.textHScale*H,R=D.vertical,q=R?1:-1,tt=D.defaultVMetrics,Q=y*c.fontMatrix[0];let W=0;for(const xt of o){if(xt===null){W+=H*g;continue}else if(typeof xt=="number"){W+=q*xt*y/1e3;continue}const St=(xt.isSpace?g:0)+F,k=xt.fontChar;let n,a,i=xt.width;if(R){let d;const C=xt.vmetric||tt;d=xt.vmetric?C[1]:i*.5,d=-d*Q;const I=C[2]*Q;i=C?-C[0]:i,n=d/l,a=(W+I)/l}else n=W/l,a=0;(xt.isInFont||D.missingFile)&&(c.xcoords.push(c.x+n),R&&c.ycoords.push(-c.y+a),c.tspan.textContent+=k);const h=R?i*Q-St*H:i*Q+St*H;W+=h}c.tspan.setAttributeNS(null,"x",c.xcoords.map(x).join(" ")),R?c.tspan.setAttributeNS(null,"y",c.ycoords.map(x).join(" ")):c.tspan.setAttributeNS(null,"y",x(-c.y)),R?c.y-=W:c.x+=W*z,c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${x(c.fontSize)}px`),c.fontStyle!==G.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle),c.fontWeight!==G.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);const lt=c.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(lt===u.TextRenderingMode.FILL||lt===u.TextRenderingMode.FILL_STROKE?(c.fillColor!==G.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor),c.fillAlpha<1&&c.tspan.setAttributeNS(null,"fill-opacity",c.fillAlpha)):c.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?c.tspan.setAttributeNS(null,"fill","transparent"):c.tspan.setAttributeNS(null,"fill","none"),lt===u.TextRenderingMode.STROKE||lt===u.TextRenderingMode.FILL_STROKE){const xt=1/(c.textMatrixScale||1);this._setStrokeAttributes(c.tspan,xt)}let ft=c.textMatrix;c.textRise!==0&&(ft=ft.slice(),ft[5]+=c.textRise),c.txtElement.setAttributeNS(null,"transform",`${v(ft)} scale(${x(z)}, -1)`),c.txtElement.setAttributeNS(j,"xml:space","preserve"),c.txtElement.append(c.tspan),c.txtgrp.append(c.txtElement),this._ensureTransformGroup().append(c.txtElement)}setLeadingMoveText(o,c){this.setLeading(-c),this.moveText(o,c)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const c=f(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${c}); }
`}setFont(o){const c=this.current,D=this.commonObjs.get(o[0]);let y=o[1];c.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),c.fontMatrix=D.fontMatrix||u.FONT_IDENTITY_MATRIX;let l="normal";D.black?l="900":D.bold&&(l="bold");const F=D.italic?"italic":"normal";y<0?(y=-y,c.fontDirection=-1):c.fontDirection=1,c.fontSize=y,c.fontFamily=D.loadedName,c.fontWeight=l,c.fontStyle=F,c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"y",x(-c.y)),c.xcoords=[],c.ycoords=[]}endText(){var c;const o=this.current;o.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((c=o.txtElement)!=null&&c.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=P[o]}setLineJoin(o){this.current.lineJoin=w[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,c,D){this.current.strokeColor=u.Util.makeHexColor(o,c,D)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,c,D){this.current.fillColor=u.Util.makeHexColor(o,c,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:c,height:D}=this.viewport,y=u.Util.inverseTransform(this.transformMatrix),[l,F,g,H]=u.Util.getAxialAlignedBoundingBox([0,0,c,D],y),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",l),z.setAttributeNS(null,"y",F),z.setAttributeNS(null,"width",g-l),z.setAttributeNS(null,"height",H-F),z.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(z)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const c=o[1],D=o[2],y=o[3]||u.IDENTITY_MATRIX,[l,F,g,H]=o[4],z=o[5],R=o[6],q=o[7],tt=`shading${m++}`,[Q,W,lt,ft]=u.Util.normalizeRect([...u.Util.applyTransform([l,F],y),...u.Util.applyTransform([g,H],y)]),[xt,St]=u.Util.singularValueDecompose2dScale(y),k=z*xt,n=R*St,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",tt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",k),a.setAttributeNS(null,"height",n),a.setAttributeNS(null,"x",`${Q}`),a.setAttributeNS(null,"y",`${W}`);const i=this.svg,h=this.transformMatrix,d=this.current.fillColor,C=this.current.strokeColor,I=this.svgFactory.create(lt-Q,ft-W);if(this.svg=I,this.transformMatrix=y,q===2){const U=u.Util.makeHexColor(...c);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(D)),this.svg=i,this.transformMatrix=h,this.current.fillColor=d,this.current.strokeColor=C,a.append(I.childNodes[0]),this.defs.append(a),`url(#${tt})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const c=`shading${m++}`,D=o[3];let y;switch(o[1]){case"axial":const l=o[4],F=o[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",c),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",l[0]),y.setAttributeNS(null,"y1",l[1]),y.setAttributeNS(null,"x2",F[0]),y.setAttributeNS(null,"y2",F[1]);break;case"radial":const g=o[4],H=o[5],z=o[6],R=o[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",c),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",H[0]),y.setAttributeNS(null,"cy",H[1]),y.setAttributeNS(null,"r",R),y.setAttributeNS(null,"fx",g[0]),y.setAttributeNS(null,"fy",g[1]),y.setAttributeNS(null,"fr",z);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const l of D){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",l[0]),F.setAttributeNS(null,"stop-color",l[1]),y.append(F)}return this.defs.append(y),`url(#${c})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,c){this.current.dashArray=o,this.current.dashPhase=c}constructPath(o,c){const D=this.current;let y=D.x,l=D.y,F=[],g=0;for(const H of o)switch(H|0){case u.OPS.rectangle:y=c[g++],l=c[g++];const z=c[g++],R=c[g++],q=y+z,tt=l+R;F.push("M",x(y),x(l),"L",x(q),x(l),"L",x(q),x(tt),"L",x(y),x(tt),"Z");break;case u.OPS.moveTo:y=c[g++],l=c[g++],F.push("M",x(y),x(l));break;case u.OPS.lineTo:y=c[g++],l=c[g++],F.push("L",x(y),x(l));break;case u.OPS.curveTo:y=c[g+4],l=c[g+5],F.push("C",x(c[g]),x(c[g+1]),x(c[g+2]),x(c[g+3]),x(y),x(l)),g+=6;break;case u.OPS.curveTo2:F.push("C",x(y),x(l),x(c[g]),x(c[g+1]),x(c[g+2]),x(c[g+3])),y=c[g+2],l=c[g+3],g+=4;break;case u.OPS.curveTo3:y=c[g+2],l=c[g+3],F.push("C",x(c[g]),x(c[g+1]),x(y),x(l),x(y),x(l)),g+=4;break;case u.OPS.closePath:F.push("Z");break}F=F.join(" "),D.path&&o.length>0&&o[0]!==u.OPS.rectangle&&o[0]!==u.OPS.moveTo?F=D.path.getAttributeNS(null,"d")+F:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",F),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(y,l)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const c=`clippath${p++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",c),D.setAttributeNS(null,"transform",v(this.transformMatrix));const y=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(y),this.defs.append(D),o.activeClipUrl){o.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;D.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${c})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const c=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",c)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[c,D]of o)switch(c){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,u.warn)(`Unimplemented graphic state operator ${c}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,c=1){const D=this.current;let y=D.dashArray;c!==1&&y.length>0&&(y=y.map(function(l){return c*l})),o.setAttributeNS(null,"stroke",D.strokeColor),o.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",x(D.miterLimit)),o.setAttributeNS(null,"stroke-linecap",D.lineCap),o.setAttributeNS(null,"stroke-linejoin",D.lineJoin),o.setAttributeNS(null,"stroke-width",x(c*D.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",y.map(x).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",x(c*D.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const c=this.getObject(o);if(!c){(0,u.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(c)}paintInlineImageXObject(o,c){const D=o.width,y=o.height,l=O(o,this.forceDataSchema,!!c),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",x(D)),F.setAttributeNS(null,"height",x(y)),this.current.element=F,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(ot,"xlink:href",l),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",x(-y)),g.setAttributeNS(null,"width",x(D)+"px"),g.setAttributeNS(null,"height",x(y)+"px"),g.setAttributeNS(null,"transform",`scale(${x(1/D)} ${x(-1/y)})`),c?c.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(o){const c=this.getObject(o.data,o);if(c.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,y=c.width,l=c.height,F=D.fillColor;D.maskId=`mask${b++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",D.maskId);const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",x(y)),H.setAttributeNS(null,"height",x(l)),H.setAttributeNS(null,"fill",F),H.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(H),this.paintInlineImageXObject(c,g)}paintFormXObjectBegin(o,c){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),c){const D=c[2]-c[0],y=c[3]-c[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",c[0]),l.setAttributeNS(null,"y",c[1]),l.setAttributeNS(null,"width",x(D)),l.setAttributeNS(null,"height",x(y)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const c=this.svgFactory.create(o.width,o.height),D=this.svgFactory.createElement("svg:defs");c.append(D),this.defs=D;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",v(o.transform)),c.append(y),this.svg=y,c}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=A},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class M{static textContent(u){const G=[],j={items:G,styles:Object.create(null)};function ot(P){var O;if(!P)return;let w=null;const f=P.name;if(f==="#text")w=P.value;else if(M.shouldBuildText(f))(O=P==null?void 0:P.attributes)!=null&&O.textContent?w=P.attributes.textContent:P.value&&(w=P.value);else return;if(w!==null&&G.push({str:w}),!!P.children)for(const L of P.children)ot(L)}return ot(u),j}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}e.XfaText=M},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=v,e.updateTextLayer=p;var r=M(1),u=M(6);const G=1e5,j=30,ot=.8,P=new Map;function w(b,m){let A;if(m&&r.FeatureTest.isOffscreenCanvasSupported)A=new OffscreenCanvas(b,b).getContext("2d",{alpha:!1});else{const _=document.createElement("canvas");_.width=_.height=b,A=_.getContext("2d",{alpha:!1})}return A}function f(b,m){const A=P.get(b);if(A)return A;const _=w(j,m);_.font=`${j}px ${b}`;const o=_.measureText("");let c=o.fontBoundingBoxAscent,D=Math.abs(o.fontBoundingBoxDescent);if(c){const l=c/(c+D);return P.set(b,l),_.canvas.width=_.canvas.height=0,l}_.strokeStyle="red",_.clearRect(0,0,j,j),_.strokeText("g",0,0);let y=_.getImageData(0,0,j,j).data;D=0;for(let l=y.length-1-3;l>=0;l-=4)if(y[l]>0){D=Math.ceil(l/4/j);break}_.clearRect(0,0,j,j),_.strokeText("A",0,j),y=_.getImageData(0,0,j,j).data,c=0;for(let l=0,F=y.length;l<F;l+=4)if(y[l]>0){c=j-Math.floor(l/4/j);break}if(_.canvas.width=_.canvas.height=0,c){const l=c/(c+D);return P.set(b,l),l}return P.set(b,ot),ot}function O(b,m,A){const _=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,fontSize:0};b._textDivs.push(_);const c=r.Util.transform(b._transform,m.transform);let D=Math.atan2(c[1],c[0]);const y=A[m.fontName];y.vertical&&(D+=Math.PI/2);const l=Math.hypot(c[2],c[3]),F=l*f(y.fontFamily,b._isOffscreenCanvasSupported);let g,H;D===0?(g=c[4],H=c[5]-F):(g=c[4]+F*Math.sin(D),H=c[5]-F*Math.cos(D));const z="calc(var(--scale-factor)*",R=_.style;b._container===b._rootContainer?(R.left=`${(100*g/b._pageWidth).toFixed(2)}%`,R.top=`${(100*H/b._pageHeight).toFixed(2)}%`):(R.left=`${z}${g.toFixed(2)}px)`,R.top=`${z}${H.toFixed(2)}px)`),R.fontSize=`${z}${l.toFixed(2)}px)`,R.fontFamily=y.fontFamily,o.fontSize=l,_.setAttribute("role","presentation"),_.textContent=m.str,_.dir=m.dir,b._fontInspectorEnabled&&(_.dataset.fontName=m.fontName),D!==0&&(o.angle=D*(180/Math.PI));let q=!1;if(m.str.length>1)q=!0;else if(m.str!==" "&&m.transform[0]!==m.transform[3]){const tt=Math.abs(m.transform[0]),Q=Math.abs(m.transform[3]);tt!==Q&&Math.max(tt,Q)/Math.min(tt,Q)>1.5&&(q=!0)}q&&(o.canvasWidth=y.vertical?m.height:m.width),b._textDivProperties.set(_,o),b._isReadableStream&&b._layoutText(_)}function L(b){const{div:m,scale:A,properties:_,ctx:o,prevFontSize:c,prevFontFamily:D}=b,{style:y}=m;let l="";if(_.canvasWidth!==0&&_.hasText){const{fontFamily:F}=y,{canvasWidth:g,fontSize:H}=_;(c!==H||D!==F)&&(o.font=`${H*A}px ${F}`,b.prevFontSize=H,b.prevFontFamily=F);const{width:z}=o.measureText(m.textContent);z>0&&(l=`scaleX(${g*A/z})`)}_.angle!==0&&(l=`rotate(${_.angle}deg) ${l}`),l.length>0&&(y.transform=l)}function T(b){if(b._canceled)return;const m=b._textDivs,A=b._capability;if(m.length>G){A.resolve();return}if(!b._isReadableStream)for(const o of m)b._layoutText(o);A.resolve()}class x{constructor({textContentSource:m,container:A,viewport:_,textDivs:o,textDivProperties:c,textContentItemsStr:D,isOffscreenCanvasSupported:y}){var z;this._textContentSource=m,this._isReadableStream=m instanceof ReadableStream,this._container=this._rootContainer=A,this._textDivs=o||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!((z=globalThis.FontInspector)!=null&&z.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w(0,y)};const{pageWidth:l,pageHeight:F,pageX:g,pageY:H}=_.rawDims;this._transform=[1,0,0,-1,-g,H+F],this._pageWidth=l,this._pageHeight=F,(0,u.setLayerDimensions)(A,_),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(m,A){for(const _ of m){if(_.str===void 0){if(_.type==="beginMarkedContentProps"||_.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),_.id!==null&&this._container.setAttribute("id",`${_.id}`),o.append(this._container)}else _.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(_.str),O(this,_,A)}}_layoutText(m){const A=this._layoutTextParams.properties=this._textDivProperties.get(m);if(this._layoutTextParams.div=m,L(this._layoutTextParams),A.hasText&&this._container.append(m),A.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(){const m=new r.PromiseCapability;let A=Object.create(null);if(this._isReadableStream){const _=()=>{this._reader.read().then(({value:o,done:c})=>{if(c){m.resolve();return}Object.assign(A,o.styles),this._processItems(o.items,A),_()},m.reject)};this._reader=this._textContentSource.getReader(),_()}else if(this._textContentSource){const{items:_,styles:o}=this._textContentSource;this._processItems(_,o),m.resolve()}else throw new Error('No "textContentSource" parameter specified.');m.promise.then(()=>{A=null,T(this)},this._capability.reject)}}e.TextLayerRenderTask=x;function v(b){!b.textContentSource&&(b.textContent||b.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),b.textContentSource=b.textContent||b.textContentStream);const{container:m,viewport:A}=b,_=getComputedStyle(m),o=_.getPropertyValue("visibility"),c=parseFloat(_.getPropertyValue("--scale-factor"));o==="visible"&&(!c||Math.abs(c-A.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new x(b);return D._render(),D}function p({container:b,viewport:m,textDivs:A,textDivProperties:_,isOffscreenCanvasSupported:o,mustRotate:c=!0,mustRescale:D=!0}){if(c&&(0,u.setLayerDimensions)(b,{rotation:m.rotation}),D){const y=w(0,o),F={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const g of A)F.properties=_.get(g),F.div=g,L(F)}}},(S,e,M)=>{var f,O,L,T,x,v,p,b,m,A,_,en,c,Pe,y,nn,F,sn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=M(1),u=M(4),G=M(28),j=M(33),ot=M(6),P=M(34);const H=class H{constructor({uiManager:R,pageIndex:q,div:tt,accessibilityManager:Q,annotationLayer:W,viewport:lt,l10n:ft}){$(this,_);$(this,c);$(this,y);$(this,F);$(this,f,void 0);$(this,O,!1);$(this,L,null);$(this,T,this.pointerup.bind(this));$(this,x,this.pointerdown.bind(this));$(this,v,new Map);$(this,p,!1);$(this,b,!1);$(this,m,!1);$(this,A,void 0);const xt=[G.FreeTextEditor,j.InkEditor,P.StampEditor];if(!H._initialized){H._initialized=!0;for(const St of xt)St.initialize(ft)}R.registerEditorTypes(xt),rt(this,A,R),this.pageIndex=q,this.div=tt,rt(this,f,Q),rt(this,L,W),this.viewport=lt,t(this,A).addLayer(this)}get isEmpty(){return t(this,v).size===0}updateToolbar(R){t(this,A).updateToolbar(R)}updateMode(R=t(this,A).getMode()){X(this,F,sn).call(this),R===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),R!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",R===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",R===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",R===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(R){if(!R&&t(this,A).getMode()!==r.AnnotationEditorType.INK)return;if(!R){for(const tt of t(this,v).values())if(tt.isEmpty()){tt.setInBackground();return}}X(this,c,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(R){t(this,A).setEditingState(R)}addCommands(R){t(this,A).addCommands(R)}enable(){this.div.style.pointerEvents="auto";const R=new Set;for(const tt of t(this,v).values())tt.enableEditing(),tt.annotationElementId&&R.add(tt.annotationElementId);if(!t(this,L))return;const q=t(this,L).getEditableAnnotations();for(const tt of q){if(tt.hide(),t(this,A).isDeletedAnnotationElement(tt.data.id)||R.has(tt.data.id))continue;const Q=this.deserialize(tt);Q&&(this.addOrRebuild(Q),Q.enableEditing())}}disable(){var q;rt(this,m,!0),this.div.style.pointerEvents="none";const R=new Set;for(const tt of t(this,v).values()){if(tt.disableEditing(),!tt.annotationElementId||tt.serialize()!==null){R.add(tt.annotationElementId);continue}(q=this.getEditableAnnotation(tt.annotationElementId))==null||q.show(),tt.remove()}if(t(this,L)){const tt=t(this,L).getEditableAnnotations();for(const Q of tt){const{id:W}=Q.data;R.has(W)||t(this,A).isDeletedAnnotationElement(W)||Q.show()}}X(this,F,sn).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,m,!1)}getEditableAnnotation(R){var q;return((q=t(this,L))==null?void 0:q.getEditableAnnotation(R))||null}setActiveEditor(R){t(this,A).getActive()!==R&&t(this,A).setActiveEditor(R)}enableClick(){this.div.addEventListener("pointerdown",t(this,x)),this.div.addEventListener("pointerup",t(this,T))}disableClick(){this.div.removeEventListener("pointerdown",t(this,x)),this.div.removeEventListener("pointerup",t(this,T))}attach(R){t(this,v).set(R.id,R);const{annotationElementId:q}=R;q&&t(this,A).isDeletedAnnotationElement(q)&&t(this,A).removeDeletedAnnotationElement(R)}detach(R){var q;t(this,v).delete(R.id),(q=t(this,f))==null||q.removePointerInTextLayer(R.contentDiv),!t(this,m)&&R.annotationElementId&&t(this,A).addDeletedAnnotationElement(R)}remove(R){this.detach(R),t(this,A).removeEditor(R),R.div.contains(document.activeElement)&&setTimeout(()=>{t(this,A).focusMainContainer()},0),R.div.remove(),R.isAttachedToDOM=!1,t(this,b)||this.addInkEditorIfNeeded(!1)}changeParent(R){var q;R.parent!==this&&(R.annotationElementId&&(t(this,A).addDeletedAnnotationElement(R.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(R),R.annotationElementId=null),this.attach(R),(q=R.parent)==null||q.detach(R),R.setParent(this),R.div&&R.isAttachedToDOM&&(R.div.remove(),this.div.append(R.div)))}add(R){if(this.changeParent(R),t(this,A).addEditor(R),this.attach(R),!R.isAttachedToDOM){const q=R.render();this.div.append(q),R.isAttachedToDOM=!0}R.fixAndSetPosition(),R.onceAdded(),t(this,A).addToAnnotationStorage(R)}moveEditorInDOM(R){var tt;if(!R.isAttachedToDOM)return;const{activeElement:q}=document;R.div.contains(q)&&(R._focusEventsAllowed=!1,setTimeout(()=>{R.div.contains(document.activeElement)?R._focusEventsAllowed=!0:(R.div.addEventListener("focusin",()=>{R._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),R._structTreeParentId=(tt=t(this,f))==null?void 0:tt.moveElementInDOM(this.div,R.div,R.contentDiv,!0)}addOrRebuild(R){R.needsToBeRebuilt()?R.rebuild():this.add(R)}addUndoableEditor(R){const q=()=>R._uiManager.rebuild(R),tt=()=>{R.remove()};this.addCommands({cmd:q,undo:tt,mustExec:!1})}getNextId(){return t(this,A).getId()}pasteEditor(R,q){t(this,A).updateToolbar(R),t(this,A).updateMode(R);const{offsetX:tt,offsetY:Q}=X(this,y,nn).call(this),W=this.getNextId(),lt=X(this,_,en).call(this,{parent:this,id:W,x:tt,y:Q,uiManager:t(this,A),isCentered:!0,...q});lt&&this.add(lt)}deserialize(R){switch(R.annotationType??R.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return G.FreeTextEditor.deserialize(R,this,t(this,A));case r.AnnotationEditorType.INK:return j.InkEditor.deserialize(R,this,t(this,A));case r.AnnotationEditorType.STAMP:return P.StampEditor.deserialize(R,this,t(this,A))}return null}addNewEditor(){X(this,c,Pe).call(this,X(this,y,nn).call(this),!0)}setSelected(R){t(this,A).setSelected(R)}toggleSelected(R){t(this,A).toggleSelected(R)}isSelected(R){return t(this,A).isSelected(R)}unselect(R){t(this,A).unselect(R)}pointerup(R){const{isMac:q}=r.FeatureTest.platform;if(!(R.button!==0||R.ctrlKey&&q)&&R.target===this.div&&t(this,p)){if(rt(this,p,!1),!t(this,O)){rt(this,O,!0);return}if(t(this,A).getMode()===r.AnnotationEditorType.STAMP){t(this,A).unselectAll();return}X(this,c,Pe).call(this,R,!1)}}pointerdown(R){if(t(this,p)){rt(this,p,!1);return}const{isMac:q}=r.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&q||R.target!==this.div)return;rt(this,p,!0);const tt=t(this,A).getActive();rt(this,O,!tt||tt.isEmpty())}findNewParent(R,q,tt){const Q=t(this,A).findParent(q,tt);return Q===null||Q===this?!1:(Q.changeParent(R),!0)}destroy(){var R,q;((R=t(this,A).getActive())==null?void 0:R.parent)===this&&(t(this,A).commitOrRemove(),t(this,A).setActiveEditor(null));for(const tt of t(this,v).values())(q=t(this,f))==null||q.removePointerInTextLayer(tt.contentDiv),tt.setParent(null),tt.isAttachedToDOM=!1,tt.div.remove();this.div=null,t(this,v).clear(),t(this,A).removeLayer(this)}render({viewport:R}){this.viewport=R,(0,ot.setLayerDimensions)(this.div,R);for(const q of t(this,A).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:R}){t(this,A).commitOrRemove(),this.viewport=R,(0,ot.setLayerDimensions)(this.div,{rotation:R.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:R,pageHeight:q}=this.viewport.rawDims;return[R,q]}};f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakMap,m=new WeakMap,A=new WeakMap,_=new WeakSet,en=function(R){switch(t(this,A).getMode()){case r.AnnotationEditorType.FREETEXT:return new G.FreeTextEditor(R);case r.AnnotationEditorType.INK:return new j.InkEditor(R);case r.AnnotationEditorType.STAMP:return new P.StampEditor(R)}return null},c=new WeakSet,Pe=function(R,q){const tt=this.getNextId(),Q=X(this,_,en).call(this,{parent:this,id:tt,x:R.offsetX,y:R.offsetY,uiManager:t(this,A),isCentered:q});return Q&&this.add(Q),Q},y=new WeakSet,nn=function(){const{x:R,y:q,width:tt,height:Q}=this.div.getBoundingClientRect(),W=Math.max(0,R),lt=Math.max(0,q),ft=Math.min(window.innerWidth,R+tt),xt=Math.min(window.innerHeight,q+Q),St=(W+ft)/2-R,k=(lt+xt)/2-q,[n,a]=this.viewport.rotation%180===0?[St,k]:[k,St];return{offsetX:n,offsetY:a}},F=new WeakSet,sn=function(){rt(this,b,!0);for(const R of t(this,v).values())R.isEmpty()&&R.remove();rt(this,b,!1)},ee(H,"_initialized",!1);let w=H;e.AnnotationEditorLayer=w},(S,e,M)=>{var P,w,f,O,L,T,x,v,p,b,Fn,A,Mn,o,Dn,D,_e,l,rn,g,Ln,z,an;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=M(1),u=M(5),G=M(4),j=M(29);const q=class q extends G.AnnotationEditor{constructor(W){super({...W,name:"freeTextEditor"});$(this,b);$(this,A);$(this,o);$(this,D);$(this,l);$(this,g);$(this,z);$(this,P,this.editorDivBlur.bind(this));$(this,w,this.editorDivFocus.bind(this));$(this,f,this.editorDivInput.bind(this));$(this,O,this.editorDivKeydown.bind(this));$(this,L,void 0);$(this,T,"");$(this,x,`${this.id}-editor`);$(this,v,void 0);$(this,p,null);rt(this,L,W.color||q._defaultColor||G.AnnotationEditor._defaultLineColor),rt(this,v,W.fontSize||q._defaultFontSize)}static get _keyboardManager(){const W=q.prototype,lt=St=>St.isEmpty(),ft=u.AnnotationEditorUIManager.TRANSLATE_SMALL,xt=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],W.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],W.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],W._translateEmpty,{args:[-ft,0],checker:lt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],W._translateEmpty,{args:[-xt,0],checker:lt}],[["ArrowRight","mac+ArrowRight"],W._translateEmpty,{args:[ft,0],checker:lt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],W._translateEmpty,{args:[xt,0],checker:lt}],[["ArrowUp","mac+ArrowUp"],W._translateEmpty,{args:[0,-ft],checker:lt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],W._translateEmpty,{args:[0,-xt],checker:lt}],[["ArrowDown","mac+ArrowDown"],W._translateEmpty,{args:[0,ft],checker:lt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],W._translateEmpty,{args:[0,xt],checker:lt}]]))}static initialize(W){G.AnnotationEditor.initialize(W,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const lt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(lt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(W,lt){switch(W){case r.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=lt;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=lt;break}}updateParams(W,lt){switch(W){case r.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,b,Fn).call(this,lt);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,A,Mn).call(this,lt);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||G.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,v)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,L)]]}_translateEmpty(W,lt){this._uiManager.translateSelectedEditors(W,lt,!0)}getInitialTranslation(){const W=this.parentScale;return[-q._internalPadding*W,-(q._internalPadding+t(this,v))*W]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,O)),this.editorDiv.addEventListener("focus",t(this,w)),this.editorDiv.addEventListener("blur",t(this,P)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,x)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,O)),this.editorDiv.removeEventListener("focus",t(this,w)),this.editorDiv.removeEventListener("blur",t(this,P)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(W){this._focusEventsAllowed&&(super.focusin(W),W.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var W;if(this.width){X(this,z,an).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(W=this._initialOptions)!=null&&W.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const W=t(this,T),lt=rt(this,T,X(this,o,Dn).call(this).trimEnd());if(W===lt)return;const ft=xt=>{if(rt(this,T,xt),!xt){this.remove();return}X(this,l,rn).call(this),this._uiManager.rebuild(this),X(this,D,_e).call(this)};this.addCommands({cmd:()=>{ft(lt)},undo:()=>{ft(W)},mustExec:!1}),X(this,D,_e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(W){this.enterInEditMode()}keydown(W){W.target===this.div&&W.key==="Enter"&&(this.enterInEditMode(),W.preventDefault())}editorDivKeydown(W){q._keyboardManager.exec(this,W)}editorDivFocus(W){this.isEditing=!0}editorDivBlur(W){this.isEditing=!1}editorDivInput(W){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let W,lt;this.width&&(W=this.x,lt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,x)),this.enableEditing(),G.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(xt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("aria-label",xt)}),G.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(xt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("default-content",xt)}),this.editorDiv.contentEditable=!0;const{style:ft}=this.editorDiv;if(ft.fontSize=`calc(${t(this,v)}px * var(--scale-factor))`,ft.color=t(this,L),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[xt,St]=this.parentDimensions;if(this.annotationElementId){const{position:k}=t(this,p);let[n,a]=this.getInitialTranslation();[n,a]=this.pageTranslationToScreen(n,a);const[i,h]=this.pageDimensions,[d,C]=this.pageTranslation;let I,U;switch(this.rotation){case 0:I=W+(k[0]-d)/i,U=lt+this.height-(k[1]-C)/h;break;case 90:I=W+(k[0]-d)/i,U=lt-(k[1]-C)/h,[n,a]=[a,-n];break;case 180:I=W-this.width+(k[0]-d)/i,U=lt-(k[1]-C)/h,[n,a]=[-n,-a];break;case 270:I=W+(k[0]-d-this.height*h)/i,U=lt+(k[1]-C-this.width*i)/h,[n,a]=[-a,n];break}this.setAt(I*xt,U*St,n,a)}else this.setAt(W*xt,lt*St,this.width*xt,this.height*St);X(this,l,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(W,lt,ft){let xt=null;if(W instanceof j.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:k,fontColor:n},rect:a,rotation:i,id:h},textContent:d,textPosition:C,parent:{page:{pageNumber:I}}}=W;if(!d||d.length===0)return null;xt=W={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:k,value:d.join(`
`),position:C,pageIndex:I-1,rect:a,rotation:i,id:h,deleted:!1}}const St=super.deserialize(W,lt,ft);return rt(St,v,W.fontSize),rt(St,L,r.Util.makeHexColor(...W.color)),rt(St,T,W.value),St.annotationElementId=W.id||null,rt(St,p,xt),St}serialize(W=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const lt=q._internalPadding*this.parentScale,ft=this.getRect(lt,lt),xt=G.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,L)),St={annotationType:r.AnnotationEditorType.FREETEXT,color:xt,fontSize:t(this,v),value:t(this,T),pageIndex:this.pageIndex,rect:ft,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return W?St:this.annotationElementId&&!X(this,g,Ln).call(this,St)?null:(St.id=this.annotationElementId,St)}};P=new WeakMap,w=new WeakMap,f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakSet,Fn=function(W){const lt=xt=>{this.editorDiv.style.fontSize=`calc(${xt}px * var(--scale-factor))`,this.translate(0,-(xt-t(this,v))*this.parentScale),rt(this,v,xt),X(this,D,_e).call(this)},ft=t(this,v);this.addCommands({cmd:()=>{lt(W)},undo:()=>{lt(ft)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},A=new WeakSet,Mn=function(W){const lt=t(this,L);this.addCommands({cmd:()=>{rt(this,L,this.editorDiv.style.color=W)},undo:()=>{rt(this,L,this.editorDiv.style.color=lt)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Dn=function(){const W=this.editorDiv.getElementsByTagName("div");if(W.length===0)return this.editorDiv.innerText;const lt=[];for(const ft of W)lt.push(ft.innerText.replace(/\r\n?|\n/,""));return lt.join(`
`)},D=new WeakSet,_e=function(){const[W,lt]=this.parentDimensions;let ft;if(this.isAttachedToDOM)ft=this.div.getBoundingClientRect();else{const{currentLayer:xt,div:St}=this,k=St.style.display;St.style.display="hidden",xt.div.append(this.div),ft=St.getBoundingClientRect(),St.remove(),St.style.display=k}this.rotation%180===this.parentRotation%180?(this.width=ft.width/W,this.height=ft.height/lt):(this.width=ft.height/W,this.height=ft.width/lt),this.fixAndSetPosition()},l=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!t(this,T))for(const W of t(this,T).split(`
`)){const lt=document.createElement("div");lt.append(W?document.createTextNode(W):document.createElement("br")),this.editorDiv.append(lt)}},g=new WeakSet,Ln=function(W){const{value:lt,fontSize:ft,color:xt,rect:St,pageIndex:k}=t(this,p);return W.value!==lt||W.fontSize!==ft||W.rect.some((n,a)=>Math.abs(n-St[a])>=1)||W.color.some((n,a)=>n!==xt[a])||W.pageIndex!==k},z=new WeakSet,an=function(W=!1){if(!this.annotationElementId)return;if(X(this,D,_e).call(this),!W&&(this.width===0||this.height===0)){setTimeout(()=>X(this,z,an).call(this,!0),0);return}const lt=q._internalPadding*this.parentScale;t(this,p).rect=this.getRect(lt,lt)},ee(q,"_freeTextDefaultContent",""),ee(q,"_internalPadding",0),ee(q,"_defaultColor",null),ee(q,"_defaultFontSize",10),ee(q,"_type","freetext");let ot=q;e.FreeTextEditor=ot},(S,e,M)=>{var a,h,ce,C,On,U,it,et,at,dt,gt,ht,Rt,Lt,vt,Dt,mt,nt,st,pt,Tt,wt,Bt,In,Ut,ke,Ht,on,Vt,ln,Z,Y,yt,At,te,Zt,J,cn,It,Ct,jt,Nt,jn,_t,hn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=M(1),u=M(6),G=M(3),j=M(30),ot=M(31),P=M(32);const w=1e3,f=9,O=new WeakSet;function L(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class T{static create(N){switch(N.data.annotationType){case r.AnnotationType.LINK:return new v(N);case r.AnnotationType.TEXT:return new p(N);case r.AnnotationType.WIDGET:switch(N.data.fieldType){case"Tx":return new m(N);case"Btn":return N.data.radioButton?new o(N):N.data.checkBox?new _(N):new c(N);case"Ch":return new D(N);case"Sig":return new A(N)}return new b(N);case r.AnnotationType.POPUP:return new y(N);case r.AnnotationType.FREETEXT:return new F(N);case r.AnnotationType.LINE:return new g(N);case r.AnnotationType.SQUARE:return new H(N);case r.AnnotationType.CIRCLE:return new z(N);case r.AnnotationType.POLYLINE:return new R(N);case r.AnnotationType.CARET:return new tt(N);case r.AnnotationType.INK:return new Q(N);case r.AnnotationType.POLYGON:return new q(N);case r.AnnotationType.HIGHLIGHT:return new W(N);case r.AnnotationType.UNDERLINE:return new lt(N);case r.AnnotationType.SQUIGGLY:return new ft(N);case r.AnnotationType.STRIKEOUT:return new xt(N);case r.AnnotationType.STAMP:return new St(N);case r.AnnotationType.FILEATTACHMENT:return new k(N);default:return new x(N)}}}const i=class i{constructor(N,{isRenderable:s=!1,ignoreBorder:E=!1,createQuadrilaterals:B=!1}={}){$(this,a,!1);this.isRenderable=s,this.data=N.data,this.layer=N.layer,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderForms=N.renderForms,this.svgFactory=N.svgFactory,this.annotationStorage=N.annotationStorage,this.enableScripting=N.enableScripting,this.hasJSActions=N.hasJSActions,this._fieldObjects=N.fieldObjects,this.parent=N.parent,s&&(this.container=this._createContainer(E)),B&&this._createQuadrilaterals()}static _hasPopupData({titleObj:N,contentsObj:s,richText:E}){return!!(N!=null&&N.str||s!=null&&s.str||E!=null&&E.str)}get hasPopupData(){return i._hasPopupData(this.data)}_createContainer(N){const{data:s,parent:{page:E,viewport:B}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",s.id),this instanceof b||(V.tabIndex=w),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),s.noRotate&&V.classList.add("norotate");const{pageWidth:K,pageHeight:ct,pageX:bt,pageY:kt}=B.rawDims;if(!s.rect||this instanceof y){const{rotation:Wt}=s;return!s.hasOwnCanvas&&Wt!==0&&this.setRotation(Wt,V),V}const{width:Pt,height:qt}=L(s.rect),Ft=r.Util.normalizeRect([s.rect[0],E.view[3]-s.rect[1]+E.view[1],s.rect[2],E.view[3]-s.rect[3]+E.view[1]]);if(!N&&s.borderStyle.width>0){V.style.borderWidth=`${s.borderStyle.width}px`;const Wt=s.borderStyle.horizontalCornerRadius,Xt=s.borderStyle.verticalCornerRadius;if(Wt>0||Xt>0){const Qt=`calc(${Wt}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;V.style.borderRadius=Qt}else if(this instanceof o){const Qt=`calc(${Pt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;V.style.borderRadius=Qt}switch(s.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const Kt=s.borderColor||null;Kt?(rt(this,a,!0),V.style.borderColor=r.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(Ft[0]-bt)/K}%`,V.style.top=`${100*(Ft[1]-kt)/ct}%`;const{rotation:Mt}=s;return s.hasOwnCanvas||Mt===0?(V.style.width=`${100*Pt/K}%`,V.style.height=`${100*qt/ct}%`):this.setRotation(Mt,V),V}setRotation(N,s=this.container){if(!this.data.rect)return;const{pageWidth:E,pageHeight:B}=this.parent.viewport.rawDims,{width:V,height:K}=L(this.data.rect);let ct,bt;N%180===0?(ct=100*V/E,bt=100*K/B):(ct=100*K/E,bt=100*V/B),s.style.width=`${ct}%`,s.style.height=`${bt}%`,s.setAttribute("data-main-rotation",(360-N)%360)}get _commonActions(){const N=(s,E,B)=>{const V=B.detail[s],K=V[0],ct=V.slice(1);B.target.style[E]=j.ColorConverters[`${K}_HTML`](ct),this.annotationStorage.setValue(this.data.id,{[E]:j.ColorConverters[`${K}_rgb`](ct)})};return(0,r.shadow)(this,"_commonActions",{display:s=>{const{display:E}=s.detail,B=E%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:E===1||E===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:E}=s.detail;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:E,noView:E})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{N("bgColor","backgroundColor",s)},fillColor:s=>{N("fillColor","backgroundColor",s)},fgColor:s=>{N("fgColor","color",s)},textColor:s=>{N("textColor","color",s)},borderColor:s=>{N("borderColor","borderColor",s)},strokeColor:s=>{N("strokeColor","borderColor",s)},rotation:s=>{const E=s.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(N,s){const E=this._commonActions;for(const B of Object.keys(s.detail)){const V=N[B]||E[B];V==null||V(s)}}_setDefaultPropertiesFromJS(N){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const E=this._commonActions;for(const[B,V]of Object.entries(s)){const K=E[B];if(K){const ct={detail:{[B]:V},target:N};K(ct),delete s[B]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:N}=this.data;if(!N)return;const[s,E,B,V]=this.data.rect;if(N.length===1){const[,{x:Xt,y:Kt},{x:Qt,y:se}]=N[0];if(B===Xt&&V===Kt&&s===Qt&&E===se)return}const{style:K}=this.container;let ct;if(t(this,a)){const{borderColor:Xt,borderWidth:Kt}=K;K.borderWidth=0,ct=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Xt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const bt=B-s,kt=V-E,{svgFactory:Pt}=this,qt=Pt.createElement("svg");qt.classList.add("quadrilateralsContainer"),qt.setAttribute("width",0),qt.setAttribute("height",0);const Ft=Pt.createElement("defs");qt.append(Ft);const Mt=Pt.createElement("clipPath"),Wt=`clippath_${this.data.id}`;Mt.setAttribute("id",Wt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Mt);for(const[,{x:Xt,y:Kt},{x:Qt,y:se}]of N){const ne=Pt.createElement("rect"),ie=(Qt-s)/bt,oe=(V-Kt)/kt,le=(Xt-Qt)/bt,xn=(Kt-se)/kt;ne.setAttribute("x",ie),ne.setAttribute("y",oe),ne.setAttribute("width",le),ne.setAttribute("height",xn),Mt.append(ne),ct==null||ct.push(`<rect vector-effect="non-scaling-stroke" x="${ie}" y="${oe}" width="${le}" height="${xn}"/>`)}t(this,a)&&(ct.push("</g></svg>')"),K.backgroundImage=ct.join("")),this.container.append(qt),this.container.style.clipPath=`url(#${Wt})`}_createPopup(){const{container:N,data:s}=this;N.setAttribute("aria-haspopup","dialog");const E=new y({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]});this.parent.div.append(E.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(N,s=null){const E=[];if(this._fieldObjects){const B=this._fieldObjects[N];if(B)for(const{page:V,id:K,exportValues:ct}of B){if(V===-1||K===s)continue;const bt=typeof ct=="string"?ct:null,kt=document.querySelector(`[data-element-id="${K}"]`);if(kt&&!O.has(kt)){(0,r.warn)(`_getElementsByName - element not allowed: ${K}`);continue}E.push({id:K,exportValue:bt,domElement:kt})}return E}for(const B of document.getElementsByName(N)){const{exportValue:V}=B,K=B.getAttribute("data-element-id");K!==s&&O.has(B)&&E.push({id:K,exportValue:V,domElement:B})}return E}show(){var N;this.container&&(this.container.hidden=!1),(N=this.popup)==null||N.maybeShow()}hide(){var N;this.container&&(this.container.hidden=!0),(N=this.popup)==null||N.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const N=this.getElementsToTriggerPopup();if(Array.isArray(N))for(const s of N)s.classList.add("highlightArea");else N.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:N,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var E;(E=this.linkService.eventBus)==null||E.dispatch("switchannotationeditormode",{source:this,mode:N,editId:s})})}};a=new WeakMap;let x=i;class v extends x{constructor(s,E=null){super(s,{isRenderable:!0,ignoreBorder:!!(E!=null&&E.ignoreBorder),createQuadrilaterals:!0});$(this,h);$(this,C);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:E}=this,B=document.createElement("a");B.setAttribute("data-element-id",s.id);let V=!1;return s.url?(E.addLinkAttributes(B,s.url,s.newWindow),V=!0):s.action?(this._bindNamedAction(B,s.action),V=!0):s.attachment?(this._bindAttachment(B,s.attachment),V=!0):s.setOCGState?(X(this,C,On).call(this,B,s.setOCGState),V=!0):s.dest?(this._bindLink(B,s.dest),V=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,s),V=!0),s.resetForm?(this._bindResetFormAction(B,s.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(B,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(B),this.container}_bindLink(s,E){s.href=this.linkService.getDestinationHash(E),s.onclick=()=>(E&&this.linkService.goToDestination(E),!1),(E||E==="")&&X(this,h,ce).call(this)}_bindNamedAction(s,E){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(E),!1),X(this,h,ce).call(this)}_bindAttachment(s,E){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>{var B;return(B=this.downloadManager)==null||B.openOrDownloadData(this.container,E.content,E.filename),!1},X(this,h,ce).call(this)}_bindJSAction(s,E){s.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(E.actions)){const K=B.get(V);K&&(s[K]=()=>{var ct;return(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:E.id,name:V}}),!1})}s.onclick||(s.onclick=()=>!1),X(this,h,ce).call(this)}_bindResetFormAction(s,E){const B=s.onclick;if(B||(s.href=this.linkService.getAnchorUrl("")),X(this,h,ce).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),B||(s.onclick=()=>!1);return}s.onclick=()=>{var qt;B==null||B();const{fields:V,refs:K,include:ct}=E,bt=[];if(V.length!==0||K.length!==0){const Ft=new Set(K);for(const Mt of V){const Wt=this._fieldObjects[Mt]||[];for(const{id:Xt}of Wt)Ft.add(Xt)}for(const Mt of Object.values(this._fieldObjects))for(const Wt of Mt)Ft.has(Wt.id)===ct&&bt.push(Wt)}else for(const Ft of Object.values(this._fieldObjects))bt.push(...Ft);const kt=this.annotationStorage,Pt=[];for(const Ft of bt){const{id:Mt}=Ft;switch(Pt.push(Mt),Ft.type){case"text":{const Xt=Ft.defaultValue||"";kt.setValue(Mt,{value:Xt});break}case"checkbox":case"radiobutton":{const Xt=Ft.defaultValue===Ft.exportValues;kt.setValue(Mt,{value:Xt});break}case"combobox":case"listbox":{const Xt=Ft.defaultValue||"";kt.setValue(Mt,{value:Xt});break}default:continue}const Wt=document.querySelector(`[data-element-id="${Mt}"]`);if(Wt){if(!O.has(Wt)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Wt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Pt,name:"ResetForm"}})),!1}}}h=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},C=new WeakSet,On=function(s,E){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(E),!1),X(this,h,ce).call(this)};class p extends x{constructor(N){super(N,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const N=document.createElement("img");return N.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",N.alt="[{{type}} Annotation]",N.dataset.l10nId="text_annotation_type",N.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(N),this.container}}class b extends x{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(N){var s;this.data.hasOwnCanvas&&(((s=N.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(N.previousSibling.hidden=!0),N.hidden=!1)}_getKeyModifier(N){const{isWin:s,isMac:E}=r.FeatureTest.platform;return s&&N.ctrlKey||E&&N.metaKey}_setEventListener(N,s,E,B,V){E.includes("mouse")?N.addEventListener(E,K=>{var ct;(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:V(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):N.addEventListener(E,K=>{var ct;if(E==="blur"){if(!s.focused||!K.relatedTarget)return;s.focused=!1}else if(E==="focus"){if(s.focused)return;s.focused=!0}V&&((ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:V(K)}}))})}_setEventListeners(N,s,E,B){var V,K,ct;for(const[bt,kt]of E)(kt==="Action"||(V=this.data.actions)!=null&&V[kt])&&((kt==="Focus"||kt==="Blur")&&(s||(s={focused:!1})),this._setEventListener(N,s,bt,kt,B),kt==="Focus"&&!((K=this.data.actions)!=null&&K.Blur)?this._setEventListener(N,s,"blur","Blur",null):kt==="Blur"&&!((ct=this.data.actions)!=null&&ct.Focus)&&this._setEventListener(N,s,"focus","Focus",null))}_setBackgroundColor(N){const s=this.data.backgroundColor||null;N.style.backgroundColor=s===null?"transparent":r.Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(N){const s=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||f,V=N.style;let K;const ct=2,bt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ct),Pt=Math.round(kt/(r.LINE_FACTOR*B))||1,qt=kt/Pt;K=Math.min(B,bt(qt/r.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ct);K=Math.min(B,bt(kt/r.LINE_FACTOR))}V.fontSize=`calc(${K}px * var(--scale-factor))`,V.color=r.Util.makeHexColor(E[0],E[1],E[2]),this.data.textAlignment!==null&&(V.textAlign=s[this.data.textAlignment])}_setRequired(N,s){s?N.setAttribute("required",!0):N.removeAttribute("required"),N.setAttribute("aria-required",s)}}class m extends b{constructor(N){const s=N.renderForms||!N.data.hasAppearance&&!!N.data.fieldValue;super(N,{isRenderable:s})}setPropertyOnSiblings(N,s,E,B){const V=this.annotationStorage;for(const K of this._getElementsByName(N.name,N.id))K.domElement&&(K.domElement[s]=E),V.setValue(K.id,{[B]:E})}render(){var B,V;const N=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let E=null;if(this.renderForms){const K=N.getValue(s,{value:this.data.fieldValue});let ct=K.value||"";const bt=N.getValue(s,{charLimit:this.data.maxLen}).charLimit;bt&&ct.length>bt&&(ct=ct.slice(0,bt));let kt=K.formattedValue||((B=this.data.textContent)==null?void 0:B.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Pt={userValue:ct,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=kt??ct,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",kt??ct),this.data.doNotScroll&&(E.style.overflowX="hidden")),this.data.hasOwnCanvas&&(E.hidden=!0),O.add(E),E.setAttribute("data-element-id",s),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.tabIndex=w,this._setRequired(E,this.data.required),bt&&(E.maxLength=bt),E.addEventListener("input",Ft=>{N.setValue(s,{value:Ft.target.value}),this.setPropertyOnSiblings(E,"value",Ft.target.value,"value"),Pt.formattedValue=null}),E.addEventListener("resetform",Ft=>{const Mt=this.data.defaultFieldValue??"";E.value=Pt.userValue=Mt,Pt.formattedValue=null});let qt=Ft=>{const{formattedValue:Mt}=Pt;Mt!=null&&(Ft.target.value=Mt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",Mt=>{if(Pt.focused)return;const{target:Wt}=Mt;Pt.userValue&&(Wt.value=Pt.userValue),Pt.lastCommittedValue=Wt.value,Pt.commitKey=1,Pt.focused=!0}),E.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Wt={value(Xt){Pt.userValue=Xt.detail.value??"",N.setValue(s,{value:Pt.userValue.toString()}),Xt.target.value=Pt.userValue},formattedValue(Xt){const{formattedValue:Kt}=Xt.detail;Pt.formattedValue=Kt,Kt!=null&&Xt.target!==document.activeElement&&(Xt.target.value=Kt),N.setValue(s,{formattedValue:Kt})},selRange(Xt){Xt.target.setSelectionRange(...Xt.detail.selRange)},charLimit:Xt=>{var ne;const{charLimit:Kt}=Xt.detail,{target:Qt}=Xt;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let se=Pt.userValue;!se||se.length<=Kt||(se=se.slice(0,Kt),Qt.value=Pt.userValue=se,N.setValue(s,{value:se}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Wt,Mt)}),E.addEventListener("keydown",Mt=>{var Kt;Pt.commitKey=1;let Wt=-1;if(Mt.key==="Escape"?Wt=0:Mt.key==="Enter"&&!this.data.multiLine?Wt=2:Mt.key==="Tab"&&(Pt.commitKey=3),Wt===-1)return;const{value:Xt}=Mt.target;Pt.lastCommittedValue!==Xt&&(Pt.lastCommittedValue=Xt,Pt.userValue=Xt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Xt,willCommit:!0,commitKey:Wt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Ft=qt;qt=null,E.addEventListener("blur",Mt=>{var Xt;if(!Pt.focused||!Mt.relatedTarget)return;Pt.focused=!1;const{value:Wt}=Mt.target;Pt.userValue=Wt,Pt.lastCommittedValue!==Wt&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Wt,willCommit:!0,commitKey:Pt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Ft(Mt)}),(V=this.data.actions)!=null&&V.Keystroke&&E.addEventListener("beforeinput",Mt=>{var oe;Pt.lastCommittedValue=null;const{data:Wt,target:Xt}=Mt,{value:Kt,selectionStart:Qt,selectionEnd:se}=Xt;let ne=Qt,ie=se;switch(Mt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ne-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(ie+=le[0].length);break}case"deleteContentBackward":Qt===se&&(ne-=1);break;case"deleteContentForward":Qt===se&&(ie+=1);break}Mt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Kt,change:Wt||"",willCommit:!1,selStart:ne,selEnd:ie}})}),this._setEventListeners(E,Pt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(qt&&E.addEventListener("blur",qt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/bt;E.classList.add("comb"),E.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class A extends b{constructor(N){super(N,{isRenderable:!!N.data.hasOwnCanvas})}}class _ extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){const N=this.annotationStorage,s=this.data,E=s.id;let B=N.getValue(E,{value:s.exportValue===s.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",N.setValue(E,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return O.add(V),V.setAttribute("data-element-id",E),V.disabled=s.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=s.fieldName,B&&V.setAttribute("checked",!0),V.setAttribute("exportValue",s.exportValue),V.tabIndex=w,V.addEventListener("change",K=>{const{name:ct,checked:bt}=K.target;for(const kt of this._getElementsByName(ct,E)){const Pt=bt&&kt.exportValue===s.exportValue;kt.domElement&&(kt.domElement.checked=Pt),N.setValue(kt.id,{value:Pt})}N.setValue(E,{value:bt})}),V.addEventListener("resetform",K=>{const ct=s.defaultFieldValue||"Off";K.target.checked=ct===s.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",K=>{const ct={value(bt){bt.target.checked=bt.detail.value!=="Off",N.setValue(E,{value:bt.target.checked})}};this._dispatchEventFromSandbox(ct,K)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class o extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const N=this.annotationStorage,s=this.data,E=s.id;let B=N.getValue(E,{value:s.fieldValue===s.buttonValue}).value;typeof B=="string"&&(B=B!==s.buttonValue,N.setValue(E,{value:B}));const V=document.createElement("input");if(O.add(V),V.setAttribute("data-element-id",E),V.disabled=s.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=s.fieldName,B&&V.setAttribute("checked",!0),V.tabIndex=w,V.addEventListener("change",K=>{const{name:ct,checked:bt}=K.target;for(const kt of this._getElementsByName(ct,E))N.setValue(kt.id,{value:!1});N.setValue(E,{value:bt})}),V.addEventListener("resetform",K=>{const ct=s.defaultFieldValue;K.target.checked=ct!=null&&ct===s.buttonValue}),this.enableScripting&&this.hasJSActions){const K=s.buttonValue;V.addEventListener("updatefromsandbox",ct=>{const bt={value:kt=>{const Pt=K===kt.detail.value;for(const qt of this._getElementsByName(kt.target.name)){const Ft=Pt&&qt.id===E;qt.domElement&&(qt.domElement.checked=Ft),N.setValue(qt.id,{value:Ft})}}};this._dispatchEventFromSandbox(bt,ct)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ct=>ct.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class c extends v{constructor(N){super(N,{ignoreBorder:N.data.hasAppearance})}render(){const N=super.render();N.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(N.title=this.data.alternativeText);const s=N.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),N}}class D extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const N=this.annotationStorage,s=this.data.id,E=N.getValue(s,{value:this.data.fieldValue}),B=document.createElement("select");O.add(B),B.setAttribute("data-element-id",s),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=w;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",Pt=>{const qt=this.data.defaultFieldValue;for(const Ft of B.options)Ft.selected=Ft.value===qt});for(const Pt of this.data.options){const qt=document.createElement("option");qt.textContent=Pt.displayValue,qt.value=Pt.exportValue,E.value.includes(Pt.exportValue)&&(qt.setAttribute("selected",!0),V=!1),B.append(qt)}let K=null;if(V){const Pt=document.createElement("option");Pt.value=" ",Pt.setAttribute("hidden",!0),Pt.setAttribute("selected",!0),B.prepend(Pt),K=()=>{Pt.remove(),B.removeEventListener("input",K),K=null},B.addEventListener("input",K)}const ct=Pt=>{const qt=Pt?"value":"textContent",{options:Ft,multiple:Mt}=B;return Mt?Array.prototype.filter.call(Ft,Wt=>Wt.selected).map(Wt=>Wt[qt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][qt]};let bt=ct(!1);const kt=Pt=>{const qt=Pt.target.options;return Array.prototype.map.call(qt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",Pt=>{const qt={value(Ft){K==null||K();const Mt=Ft.detail.value,Wt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Xt of B.options)Xt.selected=Wt.has(Xt.value);N.setValue(s,{value:ct(!0)}),bt=ct(!1)},multipleSelection(Ft){B.multiple=!0},remove(Ft){const Mt=B.options,Wt=Ft.detail.remove;Mt[Wt].selected=!1,B.remove(Wt),Mt.length>0&&Array.prototype.findIndex.call(Mt,Kt=>Kt.selected)===-1&&(Mt[0].selected=!0),N.setValue(s,{value:ct(!0),items:kt(Ft)}),bt=ct(!1)},clear(Ft){for(;B.length!==0;)B.remove(0);N.setValue(s,{value:null,items:[]}),bt=ct(!1)},insert(Ft){const{index:Mt,displayValue:Wt,exportValue:Xt}=Ft.detail.insert,Kt=B.children[Mt],Qt=document.createElement("option");Qt.textContent=Wt,Qt.value=Xt,Kt?Kt.before(Qt):B.append(Qt),N.setValue(s,{value:ct(!0),items:kt(Ft)}),bt=ct(!1)},items(Ft){const{items:Mt}=Ft.detail;for(;B.length!==0;)B.remove(0);for(const Wt of Mt){const{displayValue:Xt,exportValue:Kt}=Wt,Qt=document.createElement("option");Qt.textContent=Xt,Qt.value=Kt,B.append(Qt)}B.options.length>0&&(B.options[0].selected=!0),N.setValue(s,{value:ct(!0),items:kt(Ft)}),bt=ct(!1)},indices(Ft){const Mt=new Set(Ft.detail.indices);for(const Wt of Ft.target.options)Wt.selected=Mt.has(Wt.index);N.setValue(s,{value:ct(!0)}),bt=ct(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(qt,Pt)}),B.addEventListener("input",Pt=>{var Ft;const qt=ct(!0);N.setValue(s,{value:qt}),Pt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:bt,changeEx:qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Pt=>Pt.target.value)):B.addEventListener("input",function(Pt){N.setValue(s,{value:ct(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class y extends x{constructor(N){const{data:s,elements:E}=N;super(N,{isRenderable:x._hasPopupData(s)}),this.elements=E}render(){this.container.classList.add("popupAnnotation");const N=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const E of this.elements)E.popup=N,s.push(E.data.id),E.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(E=>`${r.AnnotationPrefix}${E}`).join(",")),this.container}}class l{constructor({container:N,color:s,elements:E,titleObj:B,modificationDate:V,contentsObj:K,richText:ct,parent:bt,rect:kt,parentRect:Pt,open:qt}){$(this,Bt);$(this,Ut);$(this,Ht);$(this,Vt);$(this,U,null);$(this,it,X(this,Bt,In).bind(this));$(this,et,X(this,Vt,ln).bind(this));$(this,at,X(this,Ht,on).bind(this));$(this,dt,X(this,Ut,ke).bind(this));$(this,gt,null);$(this,ht,null);$(this,Rt,null);$(this,Lt,null);$(this,vt,null);$(this,Dt,null);$(this,mt,!1);$(this,nt,null);$(this,st,null);$(this,pt,null);$(this,Tt,null);$(this,wt,!1);var Mt;rt(this,ht,N),rt(this,Tt,B),rt(this,Rt,K),rt(this,pt,ct),rt(this,vt,bt),rt(this,gt,s),rt(this,st,kt),rt(this,Dt,Pt),rt(this,Lt,E);const Ft=u.PDFDateString.toDateObject(V);Ft&&rt(this,U,bt.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=E.flatMap(Wt=>Wt.getElementsToTriggerPopup());for(const Wt of this.trigger)Wt.addEventListener("click",t(this,dt)),Wt.addEventListener("mouseenter",t(this,at)),Wt.addEventListener("mouseleave",t(this,et)),Wt.classList.add("popupTriggerArea");for(const Wt of E)(Mt=Wt.container)==null||Mt.addEventListener("keydown",t(this,it));t(this,ht).hidden=!0,qt&&X(this,Ut,ke).call(this)}render(){if(t(this,nt))return;const{page:{view:N},viewport:{rawDims:{pageWidth:s,pageHeight:E,pageX:B,pageY:V}}}=t(this,vt),K=rt(this,nt,document.createElement("div"));if(K.className="popup",t(this,gt)){const ne=K.style.outlineColor=r.Util.makeHexColor(...t(this,gt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?K.style.backgroundColor=`color-mix(in srgb, ${ne} 30%, white)`:K.style.backgroundColor=r.Util.makeHexColor(...t(this,gt).map(oe=>Math.floor(.7*(255-oe)+oe)))}const ct=document.createElement("span");ct.className="header";const bt=document.createElement("h1");if(ct.append(bt),{dir:bt.dir,str:bt.textContent}=t(this,Tt),K.append(ct),t(this,U)){const ne=document.createElement("span");ne.classList.add("popupDate"),t(this,U).then(ie=>{ne.textContent=ie}),ct.append(ne)}const kt=t(this,Rt),Pt=t(this,pt);if(Pt!=null&&Pt.str&&(!(kt!=null&&kt.str)||kt.str===Pt.str))P.XfaLayer.render({xfaHtml:Pt.html,intent:"richText",div:K}),K.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(kt);K.append(ne)}let qt=!!t(this,Dt),Ft=qt?t(this,Dt):t(this,st);for(const ne of t(this,Lt))if(!Ft||r.Util.intersect(ne.data.rect,Ft)!==null){Ft=ne.data.rect,qt=!0;break}const Mt=r.Util.normalizeRect([Ft[0],N[3]-Ft[1]+N[1],Ft[2],N[3]-Ft[3]+N[1]]),Wt=5,Xt=qt?Ft[2]-Ft[0]+Wt:0,Kt=Mt[0]+Xt,Qt=Mt[1],{style:se}=t(this,ht);se.left=`${100*(Kt-B)/s}%`,se.top=`${100*(Qt-V)/E}%`,t(this,ht).append(K)}_formatContents({str:N,dir:s}){const E=document.createElement("p");E.classList.add("popupContent"),E.dir=s;const B=N.split(/(?:\r\n?|\n)/);for(let V=0,K=B.length;V<K;++V){const ct=B[V];E.append(document.createTextNode(ct)),V<K-1&&E.append(document.createElement("br"))}return E}forceHide(){rt(this,wt,this.isVisible),t(this,wt)&&(t(this,ht).hidden=!0)}maybeShow(){t(this,wt)&&(rt(this,wt,!1),t(this,ht).hidden=!1)}get isVisible(){return t(this,ht).hidden===!1}}U=new WeakMap,it=new WeakMap,et=new WeakMap,at=new WeakMap,dt=new WeakMap,gt=new WeakMap,ht=new WeakMap,Rt=new WeakMap,Lt=new WeakMap,vt=new WeakMap,Dt=new WeakMap,mt=new WeakMap,nt=new WeakMap,st=new WeakMap,pt=new WeakMap,Tt=new WeakMap,wt=new WeakMap,Bt=new WeakSet,In=function(N){N.altKey||N.shiftKey||N.ctrlKey||N.metaKey||(N.key==="Enter"||N.key==="Escape"&&t(this,mt))&&X(this,Ut,ke).call(this)},Ut=new WeakSet,ke=function(){rt(this,mt,!t(this,mt)),t(this,mt)?(X(this,Ht,on).call(this),t(this,ht).addEventListener("click",t(this,dt)),t(this,ht).addEventListener("keydown",t(this,it))):(X(this,Vt,ln).call(this),t(this,ht).removeEventListener("click",t(this,dt)),t(this,ht).removeEventListener("keydown",t(this,it)))},Ht=new WeakSet,on=function(){t(this,nt)||this.render(),this.isVisible?t(this,mt)&&t(this,ht).classList.add("focused"):(t(this,ht).hidden=!1,t(this,ht).style.zIndex=parseInt(t(this,ht).style.zIndex)+1e3)},Vt=new WeakSet,ln=function(){t(this,ht).classList.remove("focused"),!(t(this,mt)||!this.isVisible)&&(t(this,ht).hidden=!0,t(this,ht).style.zIndex=parseInt(t(this,ht).style.zIndex)-1e3)};class F extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0}),this.textContent=N.data.textContent,this.textPosition=N.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const N=document.createElement("div");N.classList.add("annotationTextContent"),N.setAttribute("role","comment");for(const s of this.textContent){const E=document.createElement("span");E.textContent=s,N.append(E)}this.container.append(N)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=F;class g extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,Z,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:E,height:B}=L(s.rect),V=this.svgFactory.create(E,B,!0),K=rt(this,Z,this.svgFactory.createElement("svg:line"));return K.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),K.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),K.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),K.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),K.setAttribute("stroke-width",s.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),V.append(K),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Z)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z=new WeakMap;class H extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:E,height:B}=L(s.rect),V=this.svgFactory.create(E,B,!0),K=s.borderStyle.width,ct=rt(this,Y,this.svgFactory.createElement("svg:rect"));return ct.setAttribute("x",K/2),ct.setAttribute("y",K/2),ct.setAttribute("width",E-K),ct.setAttribute("height",B-K),ct.setAttribute("stroke-width",K||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class z extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,yt,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:E,height:B}=L(s.rect),V=this.svgFactory.create(E,B,!0),K=s.borderStyle.width,ct=rt(this,yt,this.svgFactory.createElement("svg:ellipse"));return ct.setAttribute("cx",E/2),ct.setAttribute("cy",B/2),ct.setAttribute("rx",E/2-K/2),ct.setAttribute("ry",B/2-K/2),ct.setAttribute("stroke-width",K||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}yt=new WeakMap;class R extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,At,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:E,height:B}=L(s.rect),V=this.svgFactory.create(E,B,!0);let K=[];for(const bt of s.vertices){const kt=bt.x-s.rect[0],Pt=s.rect[3]-bt.y;K.push(kt+","+Pt)}K=K.join(" ");const ct=rt(this,At,this.svgFactory.createElement(this.svgElementName));return ct.setAttribute("points",K),ct.setAttribute("stroke-width",s.borderStyle.width||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class q extends R{constructor(N){super(N),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tt extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Q extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:E,height:B}=L(s.rect),V=this.svgFactory.create(E,B,!0);for(const K of s.inkLists){let ct=[];for(const kt of K){const Pt=kt.x-s.rect[0],qt=s.rect[3]-kt.y;ct.push(`${Pt},${qt}`)}ct=ct.join(" ");const bt=this.svgFactory.createElement(this.svgElementName);t(this,te).push(bt),bt.setAttribute("points",ct),bt.setAttribute("stroke-width",s.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),!s.popupRef&&this.hasPopupData&&this._createPopup(),V.append(bt)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,e.InkAnnotationElement=Q;class W extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class lt extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ft extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xt extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class St extends x{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=St;class k extends x{constructor(s){var V;super(s,{isRenderable:!0});$(this,J);$(this,Zt,null);const{filename:E,content:B}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(E,!0),this.content=B,(V=this.linkService.eventBus)==null||V.dispatch("fileattachmentannotation",{source:this,filename:E,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:E}=this;let B;E.hasAppearance||E.fillAlpha===0?B=document.createElement("div"):(B=document.createElement("img"),B.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(E.name)?"paperclip":"pushpin"}.svg`,E.fillAlpha&&E.fillAlpha<1&&(B.style=`filter: opacity(${Math.round(E.fillAlpha*100)}%);`)),B.addEventListener("dblclick",X(this,J,cn).bind(this)),rt(this,Zt,B);const{isMac:V}=r.FeatureTest.platform;return s.addEventListener("keydown",K=>{K.key==="Enter"&&(V?K.metaKey:K.ctrlKey)&&X(this,J,cn).call(this)}),!E.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),s.append(B),s}getElementsToTriggerPopup(){return t(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,J=new WeakSet,cn=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:N,accessibilityManager:s,annotationCanvasMap:E,l10n:B,page:V,viewport:K}){$(this,Nt);$(this,_t);$(this,It,null);$(this,Ct,null);$(this,jt,new Map);this.div=N,rt(this,It,s),rt(this,Ct,E),this.l10n=B,this.page=V,this.viewport=K,this.zIndex=0,this.l10n||(this.l10n=ot.NullL10n)}async render(N){const{annotations:s}=N,E=this.div;(0,u.setLayerDimensions)(E,this.viewport);const B=new Map,V={data:null,layer:E,linkService:N.linkService,downloadManager:N.downloadManager,imageResourcesPath:N.imageResourcesPath||"",renderForms:N.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:N.annotationStorage||new G.AnnotationStorage,enableScripting:N.enableScripting===!0,hasJSActions:N.hasJSActions,fieldObjects:N.fieldObjects,parent:this,elements:null};for(const K of s){if(K.noHTML)continue;const ct=K.annotationType===r.AnnotationType.POPUP;if(ct){const Pt=B.get(K.id);if(!Pt)continue;V.elements=Pt}else{const{width:Pt,height:qt}=L(K.rect);if(Pt<=0||qt<=0)continue}V.data=K;const bt=T.create(V);if(!bt.isRenderable)continue;if(!ct&&K.popupRef){const Pt=B.get(K.popupRef);Pt?Pt.push(bt):B.set(K.popupRef,[bt])}bt.annotationEditorType>0&&t(this,jt).set(bt.data.id,bt);const kt=bt.render();K.hidden&&(kt.style.visibility="hidden"),X(this,Nt,jn).call(this,kt,K.id)}X(this,_t,hn).call(this),await this.l10n.translate(E)}update({viewport:N}){const s=this.div;this.viewport=N,(0,u.setLayerDimensions)(s,{rotation:N.rotation}),X(this,_t,hn).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(t(this,jt).values())}getEditableAnnotation(N){return t(this,jt).get(N)}}It=new WeakMap,Ct=new WeakMap,jt=new WeakMap,Nt=new WeakSet,jn=function(N,s){var B;const E=N.firstChild||N;E.id=`${r.AnnotationPrefix}${s}`,this.div.append(N),(B=t(this,It))==null||B.moveElementInDOM(this.div,N,E,!1)},_t=new WeakSet,hn=function(){if(!t(this,Ct))return;const N=this.div;for(const[s,E]of t(this,Ct)){const B=N.querySelector(`[data-annotation-id="${s}"]`);if(!B)continue;const{firstChild:V}=B;V?V.nodeName==="CANVAS"?V.replaceWith(E):V.before(E):B.append(E)}t(this,Ct).clear()},e.AnnotationLayer=n},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function M(G){return Math.floor(Math.max(0,Math.min(1,G))*255).toString(16).padStart(2,"0")}function r(G){return Math.max(0,Math.min(255,255*G))}class u{static CMYK_G([j,ot,P,w]){return["G",1-Math.min(1,.3*j+.59*P+.11*ot+w)]}static G_CMYK([j]){return["CMYK",0,0,0,1-j]}static G_RGB([j]){return["RGB",j,j,j]}static G_rgb([j]){return j=r(j),[j,j,j]}static G_HTML([j]){const ot=M(j);return`#${ot}${ot}${ot}`}static RGB_G([j,ot,P]){return["G",.3*j+.59*ot+.11*P]}static RGB_rgb(j){return j.map(r)}static RGB_HTML(j){return`#${j.map(M).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([j,ot,P,w]){return["RGB",1-Math.min(1,j+w),1-Math.min(1,P+w),1-Math.min(1,ot+w)]}static CMYK_rgb([j,ot,P,w]){return[r(1-Math.min(1,j+w)),r(1-Math.min(1,P+w)),r(1-Math.min(1,ot+w))]}static CMYK_HTML(j){const ot=this.CMYK_RGB(j).slice(1);return this.RGB_HTML(ot)}static RGB_CMYK([j,ot,P]){const w=1-j,f=1-ot,O=1-P,L=Math.min(w,f,O);return["CMYK",w,f,O,L]}}e.ColorConverters=u},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};M.print_progress_percent="{{progress}}%";function r(j,ot){switch(j){case"find_match_count":j=`find_match_count[${ot.total===1?"one":"other"}]`;break;case"find_match_count_limit":j=`find_match_count_limit[${ot.limit===1?"one":"other"}]`;break}return M[j]||""}function u(j,ot){return ot?j.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(P,w)=>w in ot?ot[w]:"{{"+w+"}}"):j}const G={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(j,ot=null,P=r(j,ot)){return u(P,ot)},async translate(j){}};e.NullL10n=G},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=M(25);class u{static setupStorage(j,ot,P,w,f){const O=w.getValue(ot,{value:null});switch(P.name){case"textarea":if(O.value!==null&&(j.textContent=O.value),f==="print")break;j.addEventListener("input",L=>{w.setValue(ot,{value:L.target.value})});break;case"input":if(P.attributes.type==="radio"||P.attributes.type==="checkbox"){if(O.value===P.attributes.xfaOn?j.setAttribute("checked",!0):O.value===P.attributes.xfaOff&&j.removeAttribute("checked"),f==="print")break;j.addEventListener("change",L=>{w.setValue(ot,{value:L.target.checked?L.target.getAttribute("xfaOn"):L.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&j.setAttribute("value",O.value),f==="print")break;j.addEventListener("input",L=>{w.setValue(ot,{value:L.target.value})})}break;case"select":if(O.value!==null){j.setAttribute("value",O.value);for(const L of P.children)L.attributes.value===O.value?L.attributes.selected=!0:L.attributes.hasOwnProperty("selected")&&delete L.attributes.selected}j.addEventListener("input",L=>{const T=L.target.options,x=T.selectedIndex===-1?"":T[T.selectedIndex].value;w.setValue(ot,{value:x})});break}}static setAttributes({html:j,element:ot,storage:P=null,intent:w,linkService:f}){const{attributes:O}=ot,L=j instanceof HTMLAnchorElement;O.type==="radio"&&(O.name=`${O.name}-${w}`);for(const[T,x]of Object.entries(O))if(x!=null)switch(T){case"class":x.length&&j.setAttribute(T,x.join(" "));break;case"dataId":break;case"id":j.setAttribute("data-element-id",x);break;case"style":Object.assign(j.style,x);break;case"textContent":j.textContent=x;break;default:(!L||T!=="href"&&T!=="newWindow")&&j.setAttribute(T,x)}L&&f.addLinkAttributes(j,O.href,O.newWindow),P&&O.dataId&&this.setupStorage(j,O.dataId,ot,P)}static render(j){var v;const ot=j.annotationStorage,P=j.linkService,w=j.xfaHtml,f=j.intent||"display",O=document.createElement(w.name);w.attributes&&this.setAttributes({html:O,element:w,intent:f,linkService:P});const L=[[w,-1,O]],T=j.div;if(T.append(O),j.viewport){const p=`matrix(${j.viewport.transform.join(",")})`;T.style.transform=p}f!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const x=[];for(;L.length>0;){const[p,b,m]=L.at(-1);if(b+1===p.children.length){L.pop();continue}const A=p.children[++L.at(-1)[1]];if(A===null)continue;const{name:_}=A;if(_==="#text"){const c=document.createTextNode(A.value);x.push(c),m.append(c);continue}const o=(v=A==null?void 0:A.attributes)!=null&&v.xmlns?document.createElementNS(A.attributes.xmlns,_):document.createElement(_);if(m.append(o),A.attributes&&this.setAttributes({html:o,element:A,storage:ot,intent:f,linkService:P}),A.children&&A.children.length>0)L.push([A,-1,o]);else if(A.value){const c=document.createTextNode(A.value);r.XfaText.shouldBuildText(_)&&x.push(c),o.append(c)}}for(const p of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:x}}static update(j){const ot=`matrix(${j.viewport.transform.join(",")})`;j.div.style.transform=ot,j.div.hidden=!1}}e.XfaLayer=u},(S,e,M)=>{var w,f,O,L,T,x,v,p,b,m,A,_,o,c,D,Nn,l,Bn,g,Un,z,$n,q,dn,Q,Wn,lt,un,xt,Hn,k,Gn,a,zn,h,Vn,C,qn,U,ae,et,pn,dt,Fe,ht,Me,Lt,pe,Dt,fn,nt,De,pt,Xn,wt,gn,Gt,Yn,zt,Kn,$t,mn,ut,Le,Y,fe;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=M(1),u=M(4),G=M(29),j=M(6),ot=M(5);const At=class At extends u.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"});$(this,D);$(this,l);$(this,g);$(this,z);$(this,q);$(this,Q);$(this,lt);$(this,xt);$(this,k);$(this,a);$(this,h);$(this,C);$(this,U);$(this,et);$(this,dt);$(this,ht);$(this,Lt);$(this,Dt);$(this,nt);$(this,zt);$(this,$t);$(this,ut);$(this,Y);$(this,w,0);$(this,f,0);$(this,O,this.canvasPointermove.bind(this));$(this,L,this.canvasPointerleave.bind(this));$(this,T,this.canvasPointerup.bind(this));$(this,x,this.canvasPointerdown.bind(this));$(this,v,new Path2D);$(this,p,!1);$(this,b,!1);$(this,m,!1);$(this,A,null);$(this,_,0);$(this,o,0);$(this,c,null);this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(J){u.AnnotationEditor.initialize(J,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(J,Et){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:At._defaultThickness=Et;break;case r.AnnotationEditorParamsType.INK_COLOR:At._defaultColor=Et;break;case r.AnnotationEditorParamsType.INK_OPACITY:At._defaultOpacity=Et/100;break}}updateParams(J,Et){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:X(this,D,Nn).call(this,Et);break;case r.AnnotationEditorParamsType.INK_COLOR:X(this,l,Bn).call(this,Et);break;case r.AnnotationEditorParamsType.INK_OPACITY:X(this,g,Un).call(this,Et);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,At._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,At._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(At._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||At._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||At._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??At._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,dt,Fe).call(this),X(this,ht,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,Lt,pe).call(this)),X(this,Y,fe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,A).disconnect(),rt(this,A,null),super.remove())}setParent(J){!this.parent&&J?this._uiManager.removeShouldRescale(this):this.parent&&J===null&&this._uiManager.addShouldRescale(this),super.setParent(J)}onScaleChanging(){const[J,Et]=this.parentDimensions,It=this.width*J,Ct=this.height*Et;this.setDimensions(It,Ct)}enableEditMode(){t(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,x)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,x)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,p,!0),this.div.classList.add("disabled"),X(this,Y,fe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(J){this._focusEventsAllowed&&(super.focusin(J),this.enableEditMode())}canvasPointerdown(J){J.button!==0||!this.isInEditMode()||t(this,p)||(this.setInForeground(),J.preventDefault(),J.type!=="mouse"&&this.div.focus(),X(this,Q,Wn).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.preventDefault(),X(this,lt,un).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){J.preventDefault(),X(this,et,pn).call(this,J)}canvasPointerleave(J){X(this,et,pn).call(this,J)}get isResizable(){return!this.isEmpty()&&t(this,p)}render(){if(this.div)return this.div;let J,Et;this.width&&(J=this.x,Et=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var _t;return(_t=this.div)==null?void 0:_t.setAttribute("aria-label",Jt)});const[It,Ct,jt,Nt]=X(this,z,$n).call(this);if(this.setAt(It,Ct,0,0),this.setDims(jt,Nt),X(this,dt,Fe).call(this),this.width){const[Jt,_t]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*_t),this.setAt(J*Jt,Et*_t,this.width*Jt,this.height*_t),rt(this,m,!0),X(this,Lt,pe).call(this),this.setDims(this.width*Jt,this.height*_t),X(this,U,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,ht,Me).call(this),this.div}setDimensions(J,Et){const It=Math.round(J),Ct=Math.round(Et);if(t(this,_)===It&&t(this,o)===Ct)return;rt(this,_,It),rt(this,o,Ct),this.canvas.style.visibility="hidden";const[jt,Nt]=this.parentDimensions;this.width=J/jt,this.height=Et/Nt,this.fixAndSetPosition(),t(this,p)&&X(this,Dt,fn).call(this,J,Et),X(this,Lt,pe).call(this),X(this,U,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(J,Et,It){var V,K,ct;if(J instanceof G.InkAnnotationElement)return null;const Ct=super.deserialize(J,Et,It);Ct.thickness=J.thickness,Ct.color=r.Util.makeHexColor(...J.color),Ct.opacity=J.opacity;const[jt,Nt]=Ct.pageDimensions,Jt=Ct.width*jt,_t=Ct.height*Nt,Yt=Ct.parentScale,Ot=J.thickness/2;rt(Ct,p,!0),rt(Ct,_,Math.round(Jt)),rt(Ct,o,Math.round(_t));const{paths:N,rect:s,rotation:E}=J;for(let{bezier:bt}of N){bt=X(V=At,Gt,Yn).call(V,bt,s,E);const kt=[];Ct.paths.push(kt);let Pt=Yt*(bt[0]-Ot),qt=Yt*(bt[1]-Ot);for(let Mt=2,Wt=bt.length;Mt<Wt;Mt+=6){const Xt=Yt*(bt[Mt]-Ot),Kt=Yt*(bt[Mt+1]-Ot),Qt=Yt*(bt[Mt+2]-Ot),se=Yt*(bt[Mt+3]-Ot),ne=Yt*(bt[Mt+4]-Ot),ie=Yt*(bt[Mt+5]-Ot);kt.push([[Pt,qt],[Xt,Kt],[Qt,se],[ne,ie]]),Pt=ne,qt=ie}const Ft=X(this,pt,Xn).call(this,kt);Ct.bezierPath2D.push(Ft)}const B=X(K=Ct,$t,mn).call(K);return rt(Ct,f,Math.max(u.AnnotationEditor.MIN_SIZE,B[2]-B[0])),rt(Ct,w,Math.max(u.AnnotationEditor.MIN_SIZE,B[3]-B[1])),X(ct=Ct,Dt,fn).call(ct,Jt,_t),Ct}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),Et=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:Et,thickness:this.thickness,opacity:this.opacity,paths:X(this,zt,Kn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,J),pageIndex:this.pageIndex,rect:J,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};w=new WeakMap,f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakMap,m=new WeakMap,A=new WeakMap,_=new WeakMap,o=new WeakMap,c=new WeakMap,D=new WeakSet,Nn=function(J){const Et=this.thickness;this.addCommands({cmd:()=>{this.thickness=J,X(this,Y,fe).call(this)},undo:()=>{this.thickness=Et,X(this,Y,fe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Bn=function(J){const Et=this.color;this.addCommands({cmd:()=>{this.color=J,X(this,U,ae).call(this)},undo:()=>{this.color=Et,X(this,U,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Un=function(J){J/=100;const Et=this.opacity;this.addCommands({cmd:()=>{this.opacity=J,X(this,U,ae).call(this)},undo:()=>{this.opacity=Et,X(this,U,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,$n=function(){const{parentRotation:J,parentDimensions:[Et,It]}=this;switch(J){case 90:return[0,It,It,Et];case 180:return[Et,It,Et,It];case 270:return[Et,0,It,Et];default:return[0,0,Et,It]}},q=new WeakSet,dn=function(){const{ctx:J,color:Et,opacity:It,thickness:Ct,parentScale:jt,scaleFactor:Nt}=this;J.lineWidth=Ct*jt/Nt,J.lineCap="round",J.lineJoin="round",J.miterLimit=10,J.strokeStyle=`${Et}${(0,ot.opacityToHex)(It)}`},Q=new WeakSet,Wn=function(J,Et){this.canvas.addEventListener("contextmenu",j.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,L)),this.canvas.addEventListener("pointermove",t(this,O)),this.canvas.addEventListener("pointerup",t(this,T)),this.canvas.removeEventListener("pointerdown",t(this,x)),this.isEditing=!0,t(this,m)||(rt(this,m,!0),X(this,Lt,pe).call(this),this.thickness||(this.thickness=At._defaultThickness),this.color||(this.color=At._defaultColor||u.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=At._defaultOpacity)),this.currentPath.push([J,Et]),rt(this,b,!1),X(this,q,dn).call(this),rt(this,c,()=>{X(this,a,zn).call(this),t(this,c)&&window.requestAnimationFrame(t(this,c))}),window.requestAnimationFrame(t(this,c))},lt=new WeakSet,un=function(J,Et){const[It,Ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&J===It&&Et===Ct)return;const jt=this.currentPath;let Nt=t(this,v);if(jt.push([J,Et]),rt(this,b,!0),jt.length<=2){Nt.moveTo(...jt[0]),Nt.lineTo(J,Et);return}jt.length===3&&(rt(this,v,Nt=new Path2D),Nt.moveTo(...jt[0])),X(this,h,Vn).call(this,Nt,...jt.at(-3),...jt.at(-2),J,Et)},xt=new WeakSet,Hn=function(){if(this.currentPath.length===0)return;const J=this.currentPath.at(-1);t(this,v).lineTo(...J)},k=new WeakSet,Gn=function(J,Et){rt(this,c,null),J=Math.min(Math.max(J,0),this.canvas.width),Et=Math.min(Math.max(Et,0),this.canvas.height),X(this,lt,un).call(this,J,Et),X(this,xt,Hn).call(this);let It;if(this.currentPath.length!==1)It=X(this,C,qn).call(this);else{const _t=[J,Et];It=[[_t,_t.slice(),_t.slice(),_t]]}const Ct=t(this,v),jt=this.currentPath;this.currentPath=[],rt(this,v,new Path2D);const Nt=()=>{this.allRawPaths.push(jt),this.paths.push(It),this.bezierPath2D.push(Ct),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,dt,Fe).call(this),X(this,ht,Me).call(this)),X(this,Y,fe).call(this))};this.addCommands({cmd:Nt,undo:Jt,mustExec:!0})},a=new WeakSet,zn=function(){if(!t(this,b))return;rt(this,b,!1);const J=Math.ceil(this.thickness*this.parentScale),Et=this.currentPath.slice(-3),It=Et.map(Nt=>Nt[0]),Ct=Et.map(Nt=>Nt[1]);Math.min(...It)-J,Math.max(...It)+J,Math.min(...Ct)-J,Math.max(...Ct)+J;const{ctx:jt}=this;jt.save(),jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Nt of this.bezierPath2D)jt.stroke(Nt);jt.stroke(t(this,v)),jt.restore()},h=new WeakSet,Vn=function(J,Et,It,Ct,jt,Nt,Jt){const _t=(Et+Ct)/2,Yt=(It+jt)/2,Ot=(Ct+Nt)/2,N=(jt+Jt)/2;J.bezierCurveTo(_t+2*(Ct-_t)/3,Yt+2*(jt-Yt)/3,Ot+2*(Ct-Ot)/3,N+2*(jt-N)/3,Ot,N)},C=new WeakSet,qn=function(){const J=this.currentPath;if(J.length<=2)return[[J[0],J[0],J.at(-1),J.at(-1)]];const Et=[];let It,[Ct,jt]=J[0];for(It=1;It<J.length-2;It++){const[s,E]=J[It],[B,V]=J[It+1],K=(s+B)/2,ct=(E+V)/2,bt=[Ct+2*(s-Ct)/3,jt+2*(E-jt)/3],kt=[K+2*(s-K)/3,ct+2*(E-ct)/3];Et.push([[Ct,jt],bt,kt,[K,ct]]),[Ct,jt]=[K,ct]}const[Nt,Jt]=J[It],[_t,Yt]=J[It+1],Ot=[Ct+2*(Nt-Ct)/3,jt+2*(Jt-jt)/3],N=[_t+2*(Nt-_t)/3,Yt+2*(Jt-Yt)/3];return Et.push([[Ct,jt],Ot,N,[_t,Yt]]),Et},U=new WeakSet,ae=function(){if(this.isEmpty()){X(this,nt,De).call(this);return}X(this,q,dn).call(this);const{canvas:J,ctx:Et}=this;Et.setTransform(1,0,0,1,0,0),Et.clearRect(0,0,J.width,J.height),X(this,nt,De).call(this);for(const It of this.bezierPath2D)Et.stroke(It)},et=new WeakSet,pn=function(J){this.canvas.removeEventListener("pointerleave",t(this,L)),this.canvas.removeEventListener("pointermove",t(this,O)),this.canvas.removeEventListener("pointerup",t(this,T)),this.canvas.addEventListener("pointerdown",t(this,x)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",j.noContextMenu)},10),X(this,k,Gn).call(this,J.offsetX,J.offsetY),this.addToAnnotationStorage(),this.setInBackground()},dt=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(J=>{var Et;return(Et=this.canvas)==null?void 0:Et.setAttribute("aria-label",J)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ht=new WeakSet,Me=function(){rt(this,A,new ResizeObserver(J=>{const Et=J[0].contentRect;Et.width&&Et.height&&this.setDimensions(Et.width,Et.height)})),t(this,A).observe(this.div)},Lt=new WeakSet,pe=function(){if(!t(this,m))return;const[J,Et]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*J),this.canvas.height=Math.ceil(this.height*Et),X(this,nt,De).call(this)},Dt=new WeakSet,fn=function(J,Et){const It=X(this,ut,Le).call(this),Ct=(J-It)/t(this,f),jt=(Et-It)/t(this,w);this.scaleFactor=Math.min(Ct,jt)},nt=new WeakSet,De=function(){const J=X(this,ut,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+J,this.translationY*this.scaleFactor+J)},pt=new WeakSet,Xn=function(J){const Et=new Path2D;for(let It=0,Ct=J.length;It<Ct;It++){const[jt,Nt,Jt,_t]=J[It];It===0&&Et.moveTo(...jt),Et.bezierCurveTo(Nt[0],Nt[1],Jt[0],Jt[1],_t[0],_t[1])}return Et},wt=new WeakSet,gn=function(J,Et,It){const[Ct,jt,Nt,Jt]=Et;switch(It){case 0:for(let _t=0,Yt=J.length;_t<Yt;_t+=2)J[_t]+=Ct,J[_t+1]=Jt-J[_t+1];break;case 90:for(let _t=0,Yt=J.length;_t<Yt;_t+=2){const Ot=J[_t];J[_t]=J[_t+1]+Ct,J[_t+1]=Ot+jt}break;case 180:for(let _t=0,Yt=J.length;_t<Yt;_t+=2)J[_t]=Nt-J[_t],J[_t+1]+=jt;break;case 270:for(let _t=0,Yt=J.length;_t<Yt;_t+=2){const Ot=J[_t];J[_t]=Nt-J[_t+1],J[_t+1]=Jt-Ot}break;default:throw new Error("Invalid rotation")}return J},Gt=new WeakSet,Yn=function(J,Et,It){const[Ct,jt,Nt,Jt]=Et;switch(It){case 0:for(let _t=0,Yt=J.length;_t<Yt;_t+=2)J[_t]-=Ct,J[_t+1]=Jt-J[_t+1];break;case 90:for(let _t=0,Yt=J.length;_t<Yt;_t+=2){const Ot=J[_t];J[_t]=J[_t+1]-jt,J[_t+1]=Ot-Ct}break;case 180:for(let _t=0,Yt=J.length;_t<Yt;_t+=2)J[_t]=Nt-J[_t],J[_t+1]-=jt;break;case 270:for(let _t=0,Yt=J.length;_t<Yt;_t+=2){const Ot=J[_t];J[_t]=Jt-J[_t+1],J[_t+1]=Nt-Ot}break;default:throw new Error("Invalid rotation")}return J},zt=new WeakSet,Kn=function(J,Et,It,Ct){var Yt,Ot;const jt=[],Nt=this.thickness/2,Jt=J*Et+Nt,_t=J*It+Nt;for(const N of this.paths){const s=[],E=[];for(let B=0,V=N.length;B<V;B++){const[K,ct,bt,kt]=N[B],Pt=J*K[0]+Jt,qt=J*K[1]+_t,Ft=J*ct[0]+Jt,Mt=J*ct[1]+_t,Wt=J*bt[0]+Jt,Xt=J*bt[1]+_t,Kt=J*kt[0]+Jt,Qt=J*kt[1]+_t;B===0&&(s.push(Pt,qt),E.push(Pt,qt)),s.push(Ft,Mt,Wt,Xt,Kt,Qt),E.push(Ft,Mt),B===V-1&&E.push(Kt,Qt)}jt.push({bezier:X(Yt=At,wt,gn).call(Yt,s,Ct,this.rotation),points:X(Ot=At,wt,gn).call(Ot,E,Ct,this.rotation)})}return jt},$t=new WeakSet,mn=function(){let J=1/0,Et=-1/0,It=1/0,Ct=-1/0;for(const jt of this.paths)for(const[Nt,Jt,_t,Yt]of jt){const Ot=r.Util.bezierBoundingBox(...Nt,...Jt,..._t,...Yt);J=Math.min(J,Ot[0]),It=Math.min(It,Ot[1]),Et=Math.max(Et,Ot[2]),Ct=Math.max(Ct,Ot[3])}return[J,It,Et,Ct]},ut=new WeakSet,Le=function(){return t(this,p)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,fe=function(J=!1){if(this.isEmpty())return;if(!t(this,p)){X(this,U,ae).call(this);return}const Et=X(this,$t,mn).call(this),It=X(this,ut,Le).call(this);rt(this,f,Math.max(u.AnnotationEditor.MIN_SIZE,Et[2]-Et[0])),rt(this,w,Math.max(u.AnnotationEditor.MIN_SIZE,Et[3]-Et[1]));const Ct=Math.ceil(It+t(this,f)*this.scaleFactor),jt=Math.ceil(It+t(this,w)*this.scaleFactor),[Nt,Jt]=this.parentDimensions;this.width=Ct/Nt,this.height=jt/Jt,this.setAspectRatio(Ct,jt);const _t=this.translationX,Yt=this.translationY;this.translationX=-Et[0],this.translationY=-Et[1],X(this,Lt,pe).call(this),X(this,U,ae).call(this),rt(this,_,Ct),rt(this,o,jt),this.setDims(Ct,jt);const Ot=J?It/this.scaleFactor/2:0;this.translate(_t-this.translationX-Ot,Yt-this.translationY-Ot)},$(At,pt),$(At,wt),$(At,Gt),ee(At,"_defaultColor",null),ee(At,"_defaultOpacity",1),ee(At,"_defaultThickness",1),ee(At,"_type","ink");let P=At;e.InkEditor=P},(S,e,M)=>{var P,w,f,O,L,T,x,v,p,b,m,Ae,_,ve,c,Oe,y,bn,F,Jn,H,Qn,R,yn,tt,Ie,W,Zn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=M(1),u=M(4),G=M(6),j=M(29);const ft=class ft extends u.AnnotationEditor{constructor(k){super({...k,name:"stampEditor"});$(this,m);$(this,_);$(this,c);$(this,y);$(this,F);$(this,H);$(this,R);$(this,tt);$(this,W);$(this,P,null);$(this,w,null);$(this,f,null);$(this,O,null);$(this,L,null);$(this,T,null);$(this,x,null);$(this,v,null);$(this,p,!1);$(this,b,!1);rt(this,O,k.bitmapUrl),rt(this,L,k.bitmapFile)}static initialize(k){u.AnnotationEditor.initialize(k)}static get supportedTypes(){const k=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",k.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(k){return this.supportedTypes.includes(k)}static paste(k,n){n.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:k.getAsFile()})}remove(){var k,n;t(this,w)&&(rt(this,P,null),this._uiManager.imageManager.deleteId(t(this,w)),(k=t(this,T))==null||k.remove(),rt(this,T,null),(n=t(this,x))==null||n.disconnect(),rt(this,x,null)),super.remove()}rebuild(){if(!this.parent){t(this,w)&&X(this,c,Oe).call(this);return}super.rebuild(),this.div!==null&&(t(this,w)&&X(this,c,Oe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,P)||t(this,O)||t(this,L))}get isResizable(){return!0}render(){if(this.div)return this.div;let k,n;if(this.width&&(k=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,P)?X(this,y,bn).call(this):X(this,c,Oe).call(this),this.width){const[a,i]=this.parentDimensions;this.setAt(k*a,n*i,this.width*a,this.height*i)}return this.div}static deserialize(k,n,a){if(k instanceof j.StampAnnotationElement)return null;const i=super.deserialize(k,n,a),{rect:h,bitmapUrl:d,bitmapId:C,isSvg:I,accessibilityData:U}=k;C&&a.imageManager.isValidId(C)?rt(i,w,C):rt(i,O,d),rt(i,p,I);const[it,et]=i.pageDimensions;return i.width=(h[2]-h[0])/it,i.height=(h[3]-h[1])/et,U&&(i.altTextData=U),i}serialize(k=!1,n=null){if(this.isEmpty())return null;const a={annotationType:r.AnnotationEditorType.STAMP,bitmapId:t(this,w),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,p),structTreeParentId:this._structTreeParentId};if(k)return a.bitmapUrl=X(this,tt,Ie).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:i,altText:h}=this.altTextData;if(!i&&h&&(a.accessibilityData={type:"Figure",alt:h}),n===null)return a;n.stamps||(n.stamps=new Map);const d=t(this,p)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(t(this,w)))n.stamps.set(t(this,w),{area:d,serialized:a}),a.bitmap=X(this,tt,Ie).call(this,!1);else if(t(this,p)){const C=n.stamps.get(t(this,w));d>C.area&&(C.area=d,C.serialized.bitmap.close(),C.serialized.bitmap=X(this,tt,Ie).call(this,!1))}return a}};P=new WeakMap,w=new WeakMap,f=new WeakMap,O=new WeakMap,L=new WeakMap,T=new WeakMap,x=new WeakMap,v=new WeakMap,p=new WeakMap,b=new WeakMap,m=new WeakSet,Ae=function(k,n=!1){if(!k){this.remove();return}rt(this,P,k.bitmap),n||(rt(this,w,k.id),rt(this,p,k.isSvg)),X(this,y,bn).call(this)},_=new WeakSet,ve=function(){rt(this,f,null),this._uiManager.enableWaiting(!1),t(this,T)&&this.div.focus()},c=new WeakSet,Oe=function(){if(t(this,w)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,w)).then(n=>X(this,m,Ae).call(this,n,!0)).finally(()=>X(this,_,ve).call(this));return}if(t(this,O)){const n=t(this,O);rt(this,O,null),this._uiManager.enableWaiting(!0),rt(this,f,this._uiManager.imageManager.getFromUrl(n).then(a=>X(this,m,Ae).call(this,a)).finally(()=>X(this,_,ve).call(this)));return}if(t(this,L)){const n=t(this,L);rt(this,L,null),this._uiManager.enableWaiting(!0),rt(this,f,this._uiManager.imageManager.getFromFile(n).then(a=>X(this,m,Ae).call(this,a)).finally(()=>X(this,_,ve).call(this)));return}const k=document.createElement("input");k.type="file",k.accept=ft.supportedTypesStr,rt(this,f,new Promise(n=>{k.addEventListener("change",async()=>{if(!k.files||k.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(k.files[0]);X(this,m,Ae).call(this,a)}n()}),k.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>X(this,_,ve).call(this))),k.click()},y=new WeakSet,bn=function(){const{div:k}=this;let{width:n,height:a}=t(this,P);const[i,h]=this.pageDimensions,d=.75;if(this.width)n=this.width*i,a=this.height*h;else if(n>d*i||a>d*h){const it=Math.min(d*i/n,d*h/a);n*=it,a*=it}const[C,I]=this.parentDimensions;this.setDims(n*C/i,a*I/h),this._uiManager.enableWaiting(!1);const U=rt(this,T,document.createElement("canvas"));k.append(U),k.hidden=!1,X(this,R,yn).call(this,n,a),X(this,W,Zn).call(this),t(this,b)||(this.parent.addUndoableEditor(this),rt(this,b,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,Jn=function(k,n){var d;const[a,i]=this.parentDimensions;this.width=k/a,this.height=n/i,this.setDims(k,n),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,v)!==null&&clearTimeout(t(this,v)),rt(this,v,setTimeout(()=>{rt(this,v,null),X(this,R,yn).call(this,k,n)},200))},H=new WeakSet,Qn=function(k,n){const{width:a,height:i}=t(this,P);let h=a,d=i,C=t(this,P);for(;h>2*k||d>2*n;){const I=h,U=d;h>2*k&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const it=new OffscreenCanvas(h,d);it.getContext("2d").drawImage(C,0,0,I,U,0,0,h,d),C=it.transferToImageBitmap()}return C},R=new WeakSet,yn=function(k,n){k=Math.ceil(k),n=Math.ceil(n);const a=t(this,T);if(!a||a.width===k&&a.height===n)return;a.width=k,a.height=n;const i=t(this,p)?t(this,P):X(this,H,Qn).call(this,k,n),h=a.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(i,0,0,i.width,i.height,0,0,k,n)},tt=new WeakSet,Ie=function(k){if(k){if(t(this,p)){const i=this._uiManager.imageManager.getSvgUrl(t(this,w));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,P),n.getContext("2d").drawImage(t(this,P),0,0),n.toDataURL()}if(t(this,p)){const[n,a]=this.pageDimensions,i=Math.round(this.width*n*G.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*a*G.PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(i,h);return d.getContext("2d").drawImage(t(this,P),0,0,t(this,P).width,t(this,P).height,0,0,i,h),d.transferToImageBitmap()}return structuredClone(t(this,P))},W=new WeakSet,Zn=function(){rt(this,x,new ResizeObserver(k=>{const n=k[0].contentRect;n.width&&n.height&&X(this,F,Jn).call(this,n.width,n.height)})),t(this,x).observe(this.div)},ee(ft,"_type","stamp");let ot=ft;e.StampEditor=ot}],__webpack_module_cache__={};function __w_pdfjs_require__(S){var e=__webpack_module_cache__[S];if(e!==void 0)return e.exports;var M=__webpack_module_cache__[S]={exports:{}};return __webpack_modules__[S](M,M.exports,__w_pdfjs_require__),M.exports}var __webpack_exports__={};return(()=>{var S=__webpack_exports__;Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(S,"AnnotationEditorLayer",{enumerable:!0,get:function(){return G.AnnotationEditorLayer}}),Object.defineProperty(S,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(S,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(S,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return j.AnnotationEditorUIManager}}),Object.defineProperty(S,"AnnotationLayer",{enumerable:!0,get:function(){return ot.AnnotationLayer}}),Object.defineProperty(S,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(S,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(S,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(S,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(S,"GlobalWorkerOptions",{enumerable:!0,get:function(){return P.GlobalWorkerOptions}}),Object.defineProperty(S,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(S,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(S,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(S,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(S,"PDFDataRangeTransport",{enumerable:!0,get:function(){return M.PDFDataRangeTransport}}),Object.defineProperty(S,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(S,"PDFWorker",{enumerable:!0,get:function(){return M.PDFWorker}}),Object.defineProperty(S,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(S,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(S,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(S,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(S,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(S,"SVGGraphics",{enumerable:!0,get:function(){return M.SVGGraphics}}),Object.defineProperty(S,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(S,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(S,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(S,"XfaLayer",{enumerable:!0,get:function(){return w.XfaLayer}}),Object.defineProperty(S,"build",{enumerable:!0,get:function(){return M.build}}),Object.defineProperty(S,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(S,"getDocument",{enumerable:!0,get:function(){return M.getDocument}}),Object.defineProperty(S,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(S,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(S,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(S,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(S,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(S,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(S,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(S,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(S,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(S,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(S,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(S,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(S,"version",{enumerable:!0,get:function(){return M.version}});var e=__w_pdfjs_require__(1),M=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),G=__w_pdfjs_require__(27),j=__w_pdfjs_require__(5),ot=__w_pdfjs_require__(29),P=__w_pdfjs_require__(14),w=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(S,e,M){if(M||arguments.length===2)for(var r=0,u=e.length,G;r<u;r++)(G||!(r in e))&&(G||(G=Array.prototype.slice.call(e,0,r)),G[r]=e[r]);return S.concat(G||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(S,e){var M={};return allEvents.forEach(function(r){var u=S[r];u&&(e?M[r]=function(G){return u(G,e(r))}:M[r]=u)}),M}function makeCancellablePromise(S){var e=!1,M=new Promise(function(r,u){S.then(function(G){return!e&&r(G)}).catch(function(G){return!e&&u(G)})});return{promise:M,cancel:function(){e=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(S,e){if(!S){if(isProduction)throw new Error(prefix);var M=typeof e=="function"?e():e,r=M?"".concat(prefix,": ").concat(M):prefix;throw new Error(r)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(S,e,M){for(M of S.keys())if(dequal(M,e))return M}function dequal(S,e){var M,r,u;if(S===e)return!0;if(S&&e&&(M=S.constructor)===e.constructor){if(M===Date)return S.getTime()===e.getTime();if(M===RegExp)return S.toString()===e.toString();if(M===Array){if((r=S.length)===e.length)for(;r--&&dequal(S[r],e[r]););return r===-1}if(M===Set){if(S.size!==e.size)return!1;for(r of S)if(u=r,u&&typeof u=="object"&&(u=find(e,u),!u)||!e.has(u))return!1;return!0}if(M===Map){if(S.size!==e.size)return!1;for(r of S)if(u=r[0],u&&typeof u=="object"&&(u=find(e,u),!u)||!dequal(r[1],e.get(u)))return!1;return!0}if(M===ArrayBuffer)S=new Uint8Array(S),e=new Uint8Array(e);else if(M===DataView){if((r=S.byteLength)===e.byteLength)for(;r--&&S.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(S)){if((r=S.byteLength)===e.byteLength)for(;r--&&S[r]===e[r];);return r===-1}if(!M||typeof S=="object"){r=0;for(M in S)if(has.call(S,M)&&++r&&!has.call(e,M)||!(M in e)||!dequal(S[M],e[M]))return!1;return Object.keys(e).length===r}}return S!==S&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:S,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},S)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(M=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(M):Array.isArray(e)?M(e):e.then(M)}).then(M=>{invariant(Array.isArray(M),`"${M}" is not a valid destination array.`);const r=M[0];new Promise(u=>{invariant(this.pdfDocument,"PDF document not loaded."),r instanceof Object?this.pdfDocument.getPageIndex(r).then(G=>{u(G)}).catch(()=>{invariant(!1,`"${r}" is not a valid page reference.`)}):typeof r=="number"?u(r):invariant(!1,`"${r}" is not a valid destination reference.`)}).then(u=>{const G=u+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(G>=1&&G<=this.pagesCount,`"${G}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:M,pageIndex:u,pageNumber:G})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const M=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:M,pageNumber:e})}addLinkAttributes(e,M,r){e.href=M,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(S){return typeof S<"u"}function isProvided(S){return isDefined(S)&&S!==null}function isString(S){return typeof S=="string"}function isArrayBuffer(S){return S instanceof ArrayBuffer}function isBlob(S){return invariant(isBrowser,"isBlob can only be used in a browser environment"),S instanceof Blob}function isDataURI(S){return isString(S)&&/^data:/.test(S)}function dataURItoByteString(S){invariant(isDataURI(S),"Invalid data URI.");const[e="",M=""]=S.split(",");return e.split(";").indexOf("base64")!==-1?atob(M):unescape(M)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(S){S&&S.cancel&&S.cancel()}function makePageCallback(S,e){return Object.defineProperty(S,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(S,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(S,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(S,"originalHeight",{get(){return this.view[3]},configurable:!0}),S}function isCancelException(S){return S.name==="RenderingCancelledException"}function loadFromFile(S){return new Promise((e,M)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return M(new Error("Error while reading a file."));e(r.result)},r.onerror=u=>{if(!u.target)return M(new Error("Error while reading a file."));const{error:G}=u.target;if(!G)return M(new Error("Error while reading a file."));switch(G.code){case G.NOT_FOUND_ERR:return M(new Error("Error while reading a file: File not found."));case G.SECURITY_ERR:return M(new Error("Error while reading a file: Security error."));case G.ABORT_ERR:return M(new Error("Error while reading a file: Aborted."));default:return M(new Error("Error while reading a file."))}},r.readAsArrayBuffer(S)})}function reducer(S,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return S}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const S={};return allEvents.forEach(e=>{S[e]=PropTypes.func}),S})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function S(e,M,r){const{[M]:u,pageNumber:G,pdf:j}=e;if(!isDefined(j))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${r}\`, expected \`number\`.`);if(u<0)return new Error(`Expected \`${M}\` to be greater or equal to 0.`);const{numPages:ot}=j;if(u+1>ot)return new Error(`Expected \`${M}\` to be less or equal to ${ot-1}.`)}else if(!isDefined(G))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${r}\`.`);return null},isPageNumber=function S(e,M,r){const{[M]:u,pageIndex:G,pdf:j}=e;if(!isDefined(j))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${r}\`, expected \`number\`.`);if(u<1)return new Error(`Expected \`${M}\` to be greater or equal to 1.`);const{numPages:ot}=j;if(u>ot)return new Error(`Expected \`${M}\` to be less or equal to ${ot}.`)}else if(!isDefined(G))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${r}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(S,e,M,r){function u(G){return G instanceof M?G:new M(function(j){j(G)})}return new(M||(M=Promise))(function(G,j){function ot(f){try{w(r.next(f))}catch(O){j(O)}}function P(f){try{w(r.throw(f))}catch(O){j(O)}}function w(f){f.done?G(f.value):u(f.value).then(ot,P)}w((r=r.apply(S,e||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(S,e){var M={};for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&e.indexOf(r)<0&&(M[r]=S[r]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(S);u<r.length;u++)e.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(S,r[u])&&(M[r[u]]=S[r[u]]);return M};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(S,e)=>{switch(e){case PasswordResponses$1.NEED_PASSWORD:{const M=prompt("Enter the password to open this PDF file.");S(M);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const M=prompt("Invalid password. Please try again.");S(M);break}}};function isParameterObject(S){return typeof S=="object"&&S!==null&&("data"in S||"range"in S||"url"in S)}const Document=reactExports.forwardRef(function S(e,M){var{children:r,className:u,error:G="Failed to load PDF file.",externalLinkRel:j,externalLinkTarget:ot,file:P,inputRef:w,imageResourcesPath:f,loading:O="Loading PDF…",noData:L="No PDF file specified.",onItemClick:T,onLoadError:x,onLoadProgress:v,onLoadSuccess:p,onPassword:b=defaultOnPassword,onSourceError:m,onSourceSuccess:A,options:_,renderMode:o,rotate:c}=e,D=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[y,l]=useResolver(),{value:F,error:g}=y,[H,z]=useResolver(),{value:R,error:q}=H,tt=reactExports.useRef(new LinkService),Q=reactExports.useRef([]),W=reactExports.useRef(),lt=reactExports.useRef();reactExports.useEffect(()=>{P&&P!==W.current&&isParameterObject(P)&&(warning$1(!dequal(P,W.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),W.current=P)},[P]),reactExports.useEffect(()=>{_&&_!==lt.current&&(warning$1(!dequal(_,lt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),lt.current=_)},[_]);const ft=reactExports.useRef({scrollPageIntoView:gt=>{const{dest:ht,pageNumber:Rt,pageIndex:Lt=Rt-1}=gt;if(T){T({dest:ht,pageIndex:Lt,pageNumber:Rt});return}const vt=Q.current[Lt];if(vt){vt.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Rt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(M,()=>({linkService:tt,pages:Q,viewer:ft}),[]);function xt(){A&&A()}function St(){g&&(warning$1(!1,g.toString()),m&&m(g))}function k(){l({type:"RESET"})}reactExports.useEffect(k,[P,l]);const n=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!P)return null;if(typeof P=="string")return isDataURI(P)?{data:dataURItoByteString(P)}:(displayCORSWarning(),{url:P});if(P instanceof PDFDataRangeTransport)return{range:P};if(isArrayBuffer(P))return{data:P};if(isBrowser&&isBlob(P))return{data:yield loadFromFile(P)};if(invariant(typeof P=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(P),"Invalid parameter object: need either .data, .range or .url"),"url"in P&&typeof P.url=="string"){if(isDataURI(P.url)){const{url:gt}=P,ht=__rest$1(P,["url"]),Rt=dataURItoByteString(gt);return Object.assign({data:Rt},ht)}displayCORSWarning()}return P}),[P]);reactExports.useEffect(()=>{const gt=makeCancellablePromise(n());return gt.promise.then(ht=>{l({type:"RESOLVE",value:ht})}).catch(ht=>{l({type:"REJECT",error:ht})}),()=>{cancelRunningTask(gt)}},[n,l]),reactExports.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){St();return}xt()}},[F]);function a(){R&&(p&&p(R),Q.current=new Array(R.numPages),tt.current.setDocument(R))}function i(){q&&(warning$1(!1,q.toString()),x&&x(q))}function h(){z({type:"RESET"})}reactExports.useEffect(h,[z,F]);function d(){if(!F)return;const gt=_?Object.assign(Object.assign({},F),_):F,ht=pdfjs$1.getDocument(gt);v&&(ht.onProgress=v),b&&(ht.onPassword=b);const Rt=ht;return Rt.promise.then(Lt=>{z({type:"RESOLVE",value:Lt})}).catch(Lt=>{Rt.destroyed||z({type:"REJECT",error:Lt})}),()=>{Rt.destroy()}}reactExports.useEffect(d,[_,z,F]),reactExports.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){i();return}a()}},[R]);function C(){tt.current.setViewer(ft.current),tt.current.setExternalLinkRel(j),tt.current.setExternalLinkTarget(ot)}reactExports.useEffect(C,[j,ot]);function I(gt,ht){Q.current[gt]=ht}function U(gt){delete Q.current[gt]}const it=reactExports.useMemo(()=>({imageResourcesPath:f,linkService:tt.current,onItemClick:T,pdf:R,registerPage:I,renderMode:o,rotate:c,unregisterPage:U}),[f,T,R,o,c]),et=reactExports.useMemo(()=>makeEventProps(D,()=>R),[D,R]);function at(){return React.createElement(DocumentContext.Provider,{value:it},r)}function dt(){return P?R==null?React.createElement(Message,{type:"loading"},typeof O=="function"?O():O):R===!1?React.createElement(Message,{type:"error"},typeof G=="function"?G():G):at():React.createElement(Message,{type:"no-data"},typeof L=="function"?L():L)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",u),ref:w,style:{"--scale-factor":"1"}},et),dt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var S=[],e=0;e<arguments.length;e++)S[e]=arguments[e];var M=S.filter(Boolean);if(M.length<=1){var r=M[0];return r||null}return function(G){M.forEach(function(j){typeof j=="function"?j(G):j&&(j.current=G)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(S){return S in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(S){return"children"in S}function isStructTreeNodeWithOnlyContentChild(S){return isStructTreeNode(S)?S.children.length===1&&0 in S.children&&"id"in S.children[0]:!1}function getRoleAttributes(S){const e={};if(isStructTreeNode(S)){const{role:M}=S,r=M.match(HEADING_PATTERN);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(isPdfRole(M)){const u=PDF_ROLE_TO_HTML_ROLE[M];u&&(e.role=u)}}return e}function getBaseAttributes(S){const e={};if(isStructTreeNode(S)){if(S.alt!==void 0&&(e["aria-label"]=S.alt),S.lang!==void 0&&(e.lang=S.lang),isStructTreeNodeWithOnlyContentChild(S)){const[M]=S.children;if(M){const r=getBaseAttributes(M);return Object.assign(Object.assign({},e),r)}}}else"id"in S&&(e["aria-owns"]=S.id);return e}function getAttributes(S){return S?Object.assign(Object.assign({},getRoleAttributes(S)),getBaseAttributes(S)):null}function StructTreeItem({className:S,node:e}){const M=reactExports.useMemo(()=>getAttributes(e),[e]),r=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((u,G)=>React.createElement(StructTreeItem,{key:G,node:u})),[e]);return React.createElement("span",Object.assign({className:S},M),r)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:M}=S,[r,u]=useResolver(),{value:G,error:j}=r,{customTextRenderer:ot,page:P}=S;function w(){G&&M&&M(G)}function f(){j&&(warning$1(!1,j.toString()),e&&e(j))}function O(){u({type:"RESET"})}reactExports.useEffect(O,[u,P]);function L(){if(ot||!P)return;const T=makeCancellablePromise(P.getStructTree()),x=T;return T.promise.then(v=>{u({type:"RESOLVE",value:v})}).catch(v=>{u({type:"REJECT",error:v})}),()=>cancelRunningTask(x)}return reactExports.useEffect(L,[ot,P,u]),reactExports.useEffect(()=>{if(G!==void 0){if(G===!1){f();return}w()}},[G]),G?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:G}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(S){const e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},e),S),{_className:r,canvasBackground:u,devicePixelRatio:G=getDevicePixelRatio(),onRenderError:j,onRenderSuccess:ot,page:P,renderForms:w,renderTextLayer:f,rotate:O,scale:L}=M,{canvasRef:T}=S;invariant(P,"Attempted to render page canvas, but no page was specified.");const x=reactExports.useRef(null);function v(){P&&ot&&ot(makePageCallback(P,L))}function p(o){isCancelException(o)||(warning$1(!1,o.toString()),j&&j(o))}const b=reactExports.useMemo(()=>P.getViewport({scale:L*G,rotation:O}),[G,P,O,L]),m=reactExports.useMemo(()=>P.getViewport({scale:L,rotation:O}),[P,O,L]);function A(){if(!P)return;P.cleanup();const{current:o}=x;if(!o)return;o.width=b.width,o.height=b.height,o.style.width=`${Math.floor(m.width)}px`,o.style.height=`${Math.floor(m.height)}px`,o.style.visibility="hidden";const c={annotationMode:w?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:b};u&&(c.background=u);const D=P.render(c),y=D;return D.promise.then(()=>{o.style.visibility="",v()}).catch(p),()=>cancelRunningTask(y)}reactExports.useEffect(A,[u,x,G,P,w,b,m]);const _=reactExports.useCallback(()=>{const{current:o}=x;o&&(o.width=0,o.height=0)},[x]);return reactExports.useEffect(()=>_,[_]),React.createElement("canvas",{className:`${r}__canvas`,dir:"ltr",ref:mergeRefs(T,x),style:{display:"block",userSelect:"none"}},f?React.createElement(StructTree,null):null)}function PageSVG(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{_className:e,onRenderSuccess:M,onRenderError:r,page:u,rotate:G,scale:j}=S;invariant(u,"Attempted to render page SVG, but no page was specified.");const[ot,P]=useResolver(),{value:w,error:f}=ot;function O(){u&&M&&M(makePageCallback(u,j))}function L(){f&&(isCancelException(f)||(warning$1(!1,f.toString()),r&&r(f)))}const T=reactExports.useMemo(()=>u.getViewport({scale:j,rotation:G}),[u,G,j]);function x(){P({type:"RESET"})}reactExports.useEffect(x,[u,P,T]);function v(){if(!u)return;const A=makeCancellablePromise(u.getOperatorList());return A.promise.then(_=>{new pdfjs$1.SVGGraphics(u.commonObjs,u.objs).getSVG(_,T).then(c=>{if(!(c instanceof SVGElement))throw new Error("getSVG returned unexpected result.");P({type:"RESOLVE",value:c})}).catch(c=>{P({type:"REJECT",error:c})})}).catch(_=>{P({type:"REJECT",error:_})}),()=>cancelRunningTask(A)}reactExports.useEffect(v,[u,P,T]),reactExports.useEffect(()=>{if(w!==void 0){if(w===!1){L();return}O()}},[w]);function p(A){if(!A||!w)return;A.firstElementChild||A.appendChild(w);const{width:_,height:o}=T;w.setAttribute("width",`${_}`),w.setAttribute("height",`${o}`)}const{width:b,height:m}=T;return React.createElement("div",{className:`${e}__svg`,ref:A=>p(A),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:b,height:m,userSelect:"none"}})}function isTextItem(S){return"str"in S}function TextLayer(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:M,onGetTextSuccess:r,onRenderTextLayerError:u,onRenderTextLayerSuccess:G,page:j,pageIndex:ot,pageNumber:P,rotate:w,scale:f}=S;invariant(j,"Attempted to load page text content, but no page was specified.");const[O,L]=useResolver(),{value:T,error:x}=O,v=reactExports.useRef(null),p=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){T&&r&&r(T)}function m(){x&&(warning$1(!1,x.toString()),M&&M(x))}function A(){L({type:"RESET"})}reactExports.useEffect(A,[j,L]);function _(){if(!j)return;const g=makeCancellablePromise(j.getTextContent()),H=g;return g.promise.then(z=>{L({type:"RESOLVE",value:z})}).catch(z=>{L({type:"REJECT",error:z})}),()=>cancelRunningTask(H)}reactExports.useEffect(_,[j,L]),reactExports.useEffect(()=>{if(T!==void 0){if(T===!1){m();return}b()}},[T]);const o=reactExports.useCallback(()=>{G&&G()},[G]),c=reactExports.useCallback(g=>{warning$1(!1,g.toString()),u&&u(g)},[u]);function D(){const g=p.current;g&&g.classList.add("active")}function y(){const g=p.current;g&&g.classList.remove("active")}const l=reactExports.useMemo(()=>j.getViewport({scale:f,rotation:w}),[j,w,f]);function F(){if(!j||!T)return;const{current:g}=v;if(!g)return;g.innerHTML="";const H=j.streamTextContent({includeMarkedContent:!0}),z={container:g,textContentSource:H,viewport:l},R=pdfjs$1.renderTextLayer(z),q=R;return R.promise.then(()=>{const tt=document.createElement("div");tt.className="endOfContent",g.append(tt),p.current=tt;const Q=g.querySelectorAll('[role="presentation"]');if(e){let W=0;T.items.forEach((lt,ft)=>{if(!isTextItem(lt))return;const xt=Q[W];if(!xt)return;const St=e(Object.assign({pageIndex:ot,pageNumber:P,itemIndex:ft},lt));xt.innerHTML=St,W+=lt.str&&lt.hasEOL?2:1})}o()}).catch(c),()=>cancelRunningTask(q)}return reactExports.useLayoutEffect(F,[e,c,o,j,ot,P,T,l]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:y,onMouseDown:D,ref:v})}function AnnotationLayer(){const S=useDocumentContext();invariant(S,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},S),e),{imageResourcesPath:r,linkService:u,onGetAnnotationsError:G,onGetAnnotationsSuccess:j,onRenderAnnotationLayerError:ot,onRenderAnnotationLayerSuccess:P,page:w,pdf:f,renderForms:O,rotate:L,scale:T=1}=M;invariant(w,"Attempted to load page annotations, but no page was specified.");const[x,v]=useResolver(),{value:p,error:b}=x,m=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){p&&j&&j(p)}function _(){b&&(warning$1(!1,b.toString()),G&&G(b))}function o(){v({type:"RESET"})}reactExports.useEffect(o,[v,w]);function c(){if(!w)return;const g=makeCancellablePromise(w.getAnnotations()),H=g;return g.promise.then(z=>{v({type:"RESOLVE",value:z})}).catch(z=>{v({type:"REJECT",error:z})}),()=>{cancelRunningTask(H)}}reactExports.useEffect(c,[v,w,O]),reactExports.useEffect(()=>{if(p!==void 0){if(p===!1){_();return}A()}},[p]);function D(){P&&P()}function y(g){warning$1(!1,`${g}`),ot&&ot(g)}const l=reactExports.useMemo(()=>w.getViewport({scale:T,rotation:L}),[w,L,T]);function F(){if(!f||!w||!p)return;const{current:g}=m;if(!g)return;const H=l.clone({dontFlip:!0}),z={accessibilityManager:null,annotationCanvasMap:null,div:g,l10n:null,page:w,viewport:H},R={annotations:p,annotationStorage:f.annotationStorage,div:g,downloadManager:null,imageResourcesPath:r,linkService:u,page:w,renderForms:O,viewport:H};g.innerHTML="";try{new pdfjs$1.AnnotationLayer(z).render(R),D()}catch(q){y(q)}return()=>{}}return reactExports.useEffect(F,[p,r,u,w,O,l]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:m})}var __rest=globalThis&&globalThis.__rest||function(S,e){var M={};for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&e.indexOf(r)<0&&(M[r]=S[r]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(S);u<r.length;u++)e.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(S,r[u])&&(M[r[u]]=S[r[u]]);return M};const defaultScale=1,Page=function S(e){const M=useDocumentContext();invariant(M,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const r=Object.assign(Object.assign({},M),e),{_className:u="react-pdf__Page",_enableRegisterUnregisterPage:G=!0,canvasBackground:j,canvasRef:ot,children:P,className:w,customRenderer:f,customTextRenderer:O,devicePixelRatio:L,error:T="Failed to load the page.",height:x,inputRef:v,loading:p="Loading page…",noData:b="No page specified.",onGetAnnotationsError:m,onGetAnnotationsSuccess:A,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:c,onGetTextSuccess:D,onLoadError:y,onLoadSuccess:l,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:g,onRenderError:H,onRenderSuccess:z,onRenderTextLayerError:R,onRenderTextLayerSuccess:q,pageIndex:tt,pageNumber:Q,pdf:W,registerPage:lt,renderAnnotationLayer:ft=!0,renderForms:xt=!1,renderMode:St="canvas",renderTextLayer:k=!0,rotate:n,scale:a=defaultScale,unregisterPage:i,width:h}=r,d=__rest(r,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[C,I]=useResolver(),{value:U,error:it}=C,et=reactExports.useRef(null);invariant(W,"Attempted to load a page, but no document was specified.");const at=isProvided(Q)?Q-1:tt??null,dt=Q??(isProvided(tt)?tt+1:null),gt=n??(U?U.rotate:null),ht=reactExports.useMemo(()=>{if(!U)return null;let Ht=1;const $t=a??defaultScale;if(h||x){const Vt=U.getViewport({scale:1,rotation:gt});h?Ht=h/Vt.width:x&&(Ht=x/Vt.height)}return $t*Ht},[x,U,gt,a,h]);function Rt(){return()=>{isProvided(at)&&G&&i&&i(at)}}reactExports.useEffect(Rt,[G,W,at,i]);function Lt(){if(l){if(!U||!ht)return;l(makePageCallback(U,ht))}if(G&&lt){if(!isProvided(at)||!et.current)return;lt(at,et.current)}}function vt(){it&&(warning$1(!1,it.toString()),y&&y(it))}function Dt(){I({type:"RESET"})}reactExports.useEffect(Dt,[I,W,at]);function mt(){if(!W||!dt)return;const Ht=makeCancellablePromise(W.getPage(dt)),$t=Ht;return Ht.promise.then(Vt=>{I({type:"RESOLVE",value:Vt})}).catch(Vt=>{I({type:"REJECT",error:Vt})}),()=>cancelRunningTask($t)}reactExports.useEffect(mt,[I,W,at,dt,lt]),reactExports.useEffect(()=>{if(U!==void 0){if(U===!1){vt();return}Lt()}},[U,ht]);const nt=reactExports.useMemo(()=>U&&isProvided(at)&&dt&&isProvided(gt)&&isProvided(ht)?{_className:u,canvasBackground:j,customTextRenderer:O,devicePixelRatio:L,onGetAnnotationsError:m,onGetAnnotationsSuccess:A,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:c,onGetTextSuccess:D,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:g,onRenderError:H,onRenderSuccess:z,onRenderTextLayerError:R,onRenderTextLayerSuccess:q,page:U,pageIndex:at,pageNumber:dt,renderForms:xt,renderTextLayer:k,rotate:gt,scale:ht}:null,[u,j,O,L,m,A,_,o,c,D,F,g,H,z,R,q,U,at,dt,xt,k,gt,ht]),st=reactExports.useMemo(()=>makeEventProps(d,()=>U&&(ht?makePageCallback(U,ht):void 0)),[d,U,ht]),pt=`${at}@${ht}/${gt}`,Tt=`${at}/${gt}`;function wt(){switch(St){case"custom":return invariant(f,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(f,{key:`${pt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Tt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${pt}_canvas`,canvasRef:ot})}}function Bt(){return k?React.createElement(TextLayer,{key:`${pt}_text`}):null}function Gt(){return ft?React.createElement(AnnotationLayer,{key:`${pt}_annotations`}):null}function Ut(){return React.createElement(PageContext.Provider,{value:nt},wt(),Bt(),Gt(),P)}function zt(){return dt?W===null||U===void 0||U===null?React.createElement(Message,{type:"loading"},typeof p=="function"?p():p):W===!1||U===!1?React.createElement(Message,{type:"error"},typeof T=="function"?T():T):Ut():React.createElement(Message,{type:"no-data"},typeof b=="function"?b():b)}return React.createElement("div",Object.assign({className:clsx(u,w),"data-page-number":dt,ref:mergeRefs(v,et),style:{"--scale-factor":`${ht}`,backgroundColor:j||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},st),zt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const NTA$1="";pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const fullscreen=()=>{document.getElementsByClassName("m3")[0].requestFullscreen()};function NTA(){const{userName:S,setPage:e,examParams:M,setUserRes:r}=useTestStore(),u=reactExports.useRef(null),G=()=>{u.current.scrollTo({top:u.current.scrollHeight})},j=()=>{u.current.scrollTo({top:0})},ot=M.quesAns.length,[P,w]=reactExports.useState(M.quesAns.map(()=>["nvd",null])),[f,O]=reactExports.useState({nvd:ot,nad:0,asd:0,mfr:0,amr:0}),[L,T]=reactExports.useState(1),[x,v]=reactExports.useState(null),p=n=>{v(n),w(a=>(a[L-1][1]=n,a))},b=n=>p(n.target.value),m=n=>{P[n][0]==="nvd"&&(w(a=>(a[n][0]="nad",a)),O(a=>(a.nvd-=1,a.nad+=1,a)))},A=n=>{let a=parseInt(n.target.dataset.key);v(P[a][1]),T(a+1),m(a)},_=()=>{let n=L===ot?0:L;v(P[n][1]),T(n+1),m(n)},o=n=>{let a="nad";switch(n.target.dataset.i){case"clr":w(d=>(d[i][1]=null,d));break;case"mfr":a=x===null?"mfr":"amr";break;case"svn":a=x===null?"nad":"asd";break}let i=L-1,h=P[i][0];w(d=>(d[i][0]=a,d)),O(d=>(d[h]-=1,d[a]+=1,d)),_()},[c,D]=reactExports.useState(M.meta.timeMinutes*6e4),[y,l]=reactExports.useState(null),[F,g]=reactExports.useState(null);let H=new Date(c);const z=()=>{D(n=>n-1e3)};var R,q;const tt=M.meta.showAns?3:4,Q=n=>n.map(i=>(i[1]!==null&&(i[1]=parseInt(i[1])),i)),W=()=>{R(),q(),document.exitFullscreen(),e(tt),r(Q(P))},lt=()=>{clearInterval(y),clearTimeout(F),document.exitFullscreen(),e(tt),r(Q(P))},ft=()=>{let n=setInterval(z,1e3);l(n);let a=setTimeout(W,c*6e4);g(a),R=()=>clearInterval(n),q=()=>clearTimeout(a),m(0)},[xt,St]=reactExports.useState(!1),k=()=>{document.exitFullscreen(),St(n=>!n)};return jsxRuntimeExports.jsxs("div",{className:"m",style:{height:"100vh"},children:[jsxRuntimeExports.jsx("nav",{className:"m1"}),jsxRuntimeExports.jsx("header",{className:"m2",children:jsxRuntimeExports.jsxs("div",{className:"m21",children:[jsxRuntimeExports.jsx("table",{className:"m211",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{rowSpan:"4",className:"m2112",style:{backgroundImage:"url(./image/user.svg)"}}),jsxRuntimeExports.jsx("td",{children:"Candidate Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2115",children:S||"John Smith"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Exam Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2116",children:M.meta.eName})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Subject Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2117",children:M.meta.tName})]}),jsxRuntimeExports.jsxs("tr",{className:"m213",children:[jsxRuntimeExports.jsx("td",{children:"Remaining Time"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${c<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+H.getUTCHours()).slice(-2),":",("0"+H.getUTCMinutes()).slice(-2),":",("0"+H.getUTCSeconds()).slice(-2)]})})]})]})}),jsxRuntimeExports.jsx("select",{className:"m212",defaultValue:"English",children:jsxRuntimeExports.jsx("option",{value:"English",children:"English"})})]})}),jsxRuntimeExports.jsxs("div",{className:"m3",children:[jsxRuntimeExports.jsxs("main",{className:"m31",ref:u,children:[jsxRuntimeExports.jsxs("div",{className:"m3110",children:[jsxRuntimeExports.jsx("span",{onClick:G,id:"up",className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})}),jsxRuntimeExports.jsxs("h4",{children:["Question number: ",L]})]}),jsxRuntimeExports.jsx(Document$1,{file:M.meta.pdfUrl,onLoadSuccess:ft,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:L,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsxs("div",{className:"m3112",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"option-one",children:[jsxRuntimeExports.jsx("input",{id:"option-one",name:"radio",value:0,type:"radio",checked:x==="0",onChange:b})," (A)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-two",children:[jsxRuntimeExports.jsx("input",{id:"option-two",name:"radio",value:1,type:"radio",checked:x==="1",onChange:b})," (B)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-three",children:[jsxRuntimeExports.jsx("input",{id:"option-three",name:"radio",value:2,type:"radio",checked:x==="2",onChange:b})," (C)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-four",children:[jsxRuntimeExports.jsx("input",{id:"option-four",name:"radio",value:3,type:"radio",checked:x==="3",onChange:b})," (D)"]})]}),jsxRuntimeExports.jsx("div",{className:"m3110",children:jsxRuntimeExports.jsx("span",{onClick:j,className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"m32",children:[jsxRuntimeExports.jsx("button",{className:"m3211",onClick:o,"data-i":"clr",children:" CLEAR RESPONSE "}),jsxRuntimeExports.jsx("button",{className:"m3212",onClick:o,"data-i":"mfr",children:" MARK FOR REVIEW "}),jsxRuntimeExports.jsx("button",{className:"m3213",onClick:o,"data-i":"svn",children:" SAVE & NEXT "})]}),jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",children:f.nvd}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",children:f.nad}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",children:f.asd}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",children:f.mfr}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",children:f.amr}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Will be considered for evalution)"})]}),jsxRuntimeExports.jsx("aside",{className:"m34",children:P.map((n,a)=>jsxRuntimeExports.jsx("div",{className:n[0],onClick:A,"data-key":a,children:a+1},a))}),jsxRuntimeExports.jsxs("div",{className:"opt",children:[jsxRuntimeExports.jsx("button",{className:"m35 m36",onClick:fullscreen,children:"Fullscreen"}),jsxRuntimeExports.jsx("span",{className:"m35",children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${c<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+H.getUTCHours()).slice(-2),":",("0"+H.getUTCMinutes()).slice(-2),":",("0"+H.getUTCSeconds()).slice(-2)]})}),jsxRuntimeExports.jsx("button",{onClick:k,style:{backgroundColor:"GrayText",cursor:"not-allowed"},children:"SUBMIT"})]})]}),jsxRuntimeExports.jsx("footer",{className:"m4"}),jsxRuntimeExports.jsxs(Dialog,{open:xt,onClose:k,children:[jsxRuntimeExports.jsx(DialogTitle,{children:jsxRuntimeExports.jsx(Typography,{fontWeight:"bold",align:"center",color:"primary",children:"PLEASE CONFIRM YOUR RESPONSES"})}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{border:2,children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Number of Questions"})]})}),jsxRuntimeExports.jsxs(TableBody,{children:[jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Visited"}),jsxRuntimeExports.jsx(TableCell,{children:f.nvd})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Answered"}),jsxRuntimeExports.jsx(TableCell,{children:f.nad})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered"}),jsxRuntimeExports.jsx(TableCell,{children:f.asd})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Marked for Review"}),jsxRuntimeExports.jsx(TableCell,{children:f.mfr})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered & Marked for Review (Will be considered for evalution)"}),jsxRuntimeExports.jsx(TableCell,{children:f.amr})]})]})]})})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",onClick:lt,children:"CONFIRM & SUBMIT"}),jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:k,children:"BACK"})]})]})]})}pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const Result=()=>{const{setPage:S,examParams:e,userRes:M}=useTestStore(),[r,u]=reactExports.useState(!1),G=()=>u(m=>!m),j=()=>{S(0)},ot=m=>{switch(m){case"nvd":return"Not Visited";case"nad":return"Not Answered";case"asd":return"Answered";case"mfr":return"Marked for Review";case"amr":return"Answered & Marked for Review"}},P=m=>{switch(m.t){case 1:return`Option ${m.a+1}`;case 2:return m.a;case 3:return m.a;case 4:return String.fromCharCode(m.a+65);case 5:return String.fromCharCode(m.a+65)}},w=(m,A)=>{if(A===null)return"None";switch(m){case 1:return`Option ${A+1}`;case 2:return A;case 3:return A;case 4:return String.fromCharCode(A+65);case 5:return String.fromCharCode(A+65)}};let f=0;const O=e.quesAns,L=M.map((m,A)=>{let _="inherit";return(m[0]==="asd"||m[0]==="amr")&&(m[1]===O[A].a?(_="#71eb71",f=f+O[A].m[0]):(_="#eb7171",f=f+O[A].m[1])),[A+1,ot(m[0]),w(O[A].t,m[1]),P(O[A]),_]}),[T,x]=reactExports.useState(0),v=()=>{let m=T===L.length-1?0:T+1;x(m)},p=()=>{let m=T===0?L.length-1:T-1;x(m)},b=m=>{x(parseInt(m.target.dataset.i)),G()};return jsxRuntimeExports.jsxs(Box,{p:1,maxWidth:"sm",mx:"auto",children:[jsxRuntimeExports.jsxs(Stack,{direction:"row",display:"flex",justifyContent:"space-between",alignItems:"stretch",py:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h5",bgcolor:"success.main",fontFamily:"monospace",flexGrow:1,mr:1,textAlign:"center",p:1,borderRadius:1,color:"#fff",fontWeight:"bold",children:["You scored ",f," out of ",O.length*4]}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"warning",onClick:j,children:"Home"})]}),jsxRuntimeExports.jsxs(Stack,{justifyContent:"space-between",alignItems:"center",p:1,sx:{border:"1px solid blue",backgroundColor:L[T][4],borderRadius:1},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" Correct answer is ",L[T][3]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" You have choosen ",L[T][2]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",textAlign:"center",children:[" Question status is ",L[T][1]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" Question number ",T+1," / ",O.length]})]}),jsxRuntimeExports.jsx(Document$1,{file:e.meta.pdfUrl,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:T+1,renderAnnotationLayer:!1,renderTextLayer:!1})}),jsxRuntimeExports.jsxs(ButtonGroup$1,{fullWidth:!0,children:[jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,sx:{mb:3},onClick:p,children:"Previous"}),jsxRuntimeExports.jsx(Button,{color:"secondary",autoFocus:!0,fullWidth:!0,sx:{mb:3},onClick:G,children:"Question wise view"}),jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,sx:{mb:3},onClick:v,children:"NEXT"})]}),jsxRuntimeExports.jsxs(Dialog,{open:r,children:[jsxRuntimeExports.jsx(DialogContent,{sx:{p:1},children:jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Question Number"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Status"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Choosen answer"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Correct answer"})]})}),jsxRuntimeExports.jsx(TableBody,{children:L.map((m,A)=>jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:m[4]},children:[jsxRuntimeExports.jsx(TableCell,{"data-i":A,onClick:b,sx:{textAlign:"center"},children:m[0]}),jsxRuntimeExports.jsx(TableCell,{"data-i":A,onClick:b,sx:{textAlign:"center"},children:m[1]}),jsxRuntimeExports.jsx(TableCell,{"data-i":A,onClick:b,sx:{textAlign:"center"},children:m[2]}),jsxRuntimeExports.jsx(TableCell,{"data-i":A,onClick:b,sx:{textAlign:"center"},children:m[3]})]},A))})]})})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:G,children:"BACK"})})]})]})};pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const Mobile=()=>{const[S,e]=reactExports.useState(!1),M=()=>e(Q=>!Q),{userName:r,setPage:u,examParams:G,setUserRes:j}=useTestStore(),ot=G.quesAns.length,[P,w]=reactExports.useState(G.quesAns.map(()=>["nvd",null])),[f,O]=reactExports.useState({nvd:ot,nad:0,asd:0,mfr:0,amr:0}),[L,T]=reactExports.useState(1),[x,v]=reactExports.useState(null),p=Q=>{P[Q][0]==="nvd"&&(w(W=>(W[Q][0]="nad",W)),O(W=>(W.nvd-=1,W.nad+=1,W)))},b=()=>{let Q=L===ot?0:L;v(P[Q][1]),T(Q+1),p(Q)},m=Q=>{let W="nad";switch(Q.target.dataset.i){case"clr":w(xt=>(xt[lt][1]=null,xt));break;case"mfr":W=x===null?"mfr":"amr";break;case"svn":W=x===null?"nad":"asd";break}let lt=L-1,ft=P[lt][0];w(xt=>(xt[lt][0]=W,xt)),O(xt=>(xt[ft]-=1,xt[W]+=1,xt)),b()},[A,_]=reactExports.useState(G.meta.timeMinutes*6e4),[o,c]=reactExports.useState(null),[D,y]=reactExports.useState(null);let l=new Date(A);const F=()=>{_(Q=>Q-1e3)};var g,H;const z=G.meta.showAns?3:4,R=Q=>Q.map(lt=>(lt[1]!==null&&(lt[1]=parseInt(lt[1])),lt)),q=()=>{g(),H(),document.exitFullscreen(),u(z),j(R(P))},tt=()=>{let Q=setInterval(F,1e3);c(Q);let W=setTimeout(q,A*6e4);y(W),g=()=>clearInterval(Q),H=()=>clearTimeout(W),p(0)};return reactExports.useState(!1),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(AppBar,{position:"sticky",children:jsxRuntimeExports.jsxs(Toolbar,{sx:{justifyContent:"space-between",display:"flex"},children:[jsxRuntimeExports.jsx(IconButton,{color:"inherit",onClick:M,children:jsxRuntimeExports.jsx(Menu,{})}),jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${A<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+l.getUTCHours()).slice(-2),":",("0"+l.getUTCMinutes()).slice(-2),":",("0"+l.getUTCSeconds()).slice(-2)]}),jsxRuntimeExports.jsx(Box,{borderRadius:3,px:2,py:.4,color:"#b6b6b6",bgcolor:"#fff",children:"Submit"})]})}),jsxRuntimeExports.jsx(SwipeableDrawer,{anchor:"left",open:S,onClose:M,onOpen:M,variant:"temporary",sx:{width:"70dvw"},children:jsxRuntimeExports.jsx(Box,{width:"70dvw"})}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Typography,{bgcolor:"#345578",color:"#fff",py:1,px:2,children:["Q. ",L]}),jsxRuntimeExports.jsx(Document$1,{file:G.meta.pdfUrl,onLoadSuccess:tt,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:L,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsxs(Box,{mb:15,children:[jsxRuntimeExports.jsx(Typography,{border:1,m:1,p:1,children:" Option A"}),jsxRuntimeExports.jsx(Typography,{border:1,m:1,p:1,children:" Option B"}),jsxRuntimeExports.jsx(Typography,{border:1,m:1,p:1,children:" Option C"}),jsxRuntimeExports.jsx(Typography,{border:1,m:1,p:1,children:" Option D"})]}),jsxRuntimeExports.jsx(Box,{position:"fixed",bottom:0,children:jsxRuntimeExports.jsxs(ButtonGroup$1,{variant:"contained",children:[jsxRuntimeExports.jsxs(Button,{onClick:m,"data-i":"clr",children:[" ",jsxRuntimeExports.jsx(ArrowBack,{})," "]}),jsxRuntimeExports.jsx(Button,{sx:{bgcolor:"#ccc",color:"#555"},onClick:m,"data-i":"clr",children:" CLEAR RESPONSE "}),jsxRuntimeExports.jsx(Button,{color:"warning",onClick:m,"data-i":"mfr",children:" MARK FOR REVIEW "}),jsxRuntimeExports.jsx(Button,{color:"success",onClick:m,"data-i":"svn",children:" SAVE & NEXT "}),jsxRuntimeExports.jsxs(Button,{onClick:m,"data-i":"clr",children:[" ",jsxRuntimeExports.jsx(ArrowForward,{})," "]})]})})]})]})},MockTest=()=>{const{page:S}=useTestStore();switch(S){case 0:return jsxRuntimeExports.jsx(Password,{});case 1:return jsxRuntimeExports.jsx(Instruction,{});case 2:return jsxRuntimeExports.jsx(NTA,{});case 3:return jsxRuntimeExports.jsx(Result,{});case 4:return"Thank You your response has been submitted";case 5:return jsxRuntimeExports.jsx(Mobile,{});default:return jsxRuntimeExports.jsx(Password,{})}};export{MockTest as default};
