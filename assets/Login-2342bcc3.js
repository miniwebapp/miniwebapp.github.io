import{j as e,r as t,R as _,H as b}from"./index-a576c8ed.js";import{u as G}from"./appStore-3dc47ab8.js";import{D as A,a as O}from"./DialogContent-f0f57db0.js";import{S as T}from"./Stack-8bed2fb6.js";import{A as B}from"./Avatar-92a98cab.js";import{T as C}from"./TextField-09fdae02.js";import{c as D,B as L}from"./Modal-f965e789.js";import{D as P}from"./Divider-083fe5ba.js";import"./index-27f5d3c3.js";import"./useId-98600e7d.js";import"./InputBase-55cd521b.js";import"./List-d3547974.js";import"./react-is.production.min-a192e302.js";import"./Grow-c16df990.js";import"./useControlled-3a77dc77.js";import"./Input-ea5e1d67.js";const F=D(e.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");function I(o={}){const{nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a}=o,[i,r]=t.useState(!1),d=t.useRef(l);d.current=l;const f=t.useRef(a);return f.current=a,t.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=n,c.onload=()=>{var s;r(!0),(s=d.current)===null||s===void 0||s.call(d)},c.onerror=()=>{var s;r(!1),(s=f.current)===null||s===void 0||s.call(f)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[n]),i}const R=t.createContext(null);function q({clientId:o,nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a,children:i}){const r=I({nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a}),d=t.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:r}),[o,r]);return _.createElement(R.Provider,{value:d},i)}function M(){const o=t.useContext(R);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function z({flow:o="implicit",scope:n="",onSuccess:l,onError:a,onNonOAuthError:i,overrideScope:r,state:d,...f}){const{clientId:c,scriptLoadedSuccessfully:s}=M(),v=t.useRef(),h=t.useRef(l);h.current=l;const x=t.useRef(a);x.current=a;const j=t.useRef(i);j.current=i,t.useEffect(()=>{var u,p;if(!s)return;const w=o==="implicit"?"initTokenClient":"initCodeClient",E=(p=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||p===void 0?void 0:p.oauth2[w]({client_id:c,scope:r?n:`openid profile email ${n}`,callback:g=>{var m,S;if(g.error)return(m=x.current)===null||m===void 0?void 0:m.call(x,g);(S=h.current)===null||S===void 0||S.call(h,g)},error_callback:g=>{var m;(m=j.current)===null||m===void 0||m.call(j,g)},state:d,...f});v.current=E},[c,s,o,n,d]);const k=t.useCallback(u=>{var p;return(p=v.current)===null||p===void 0?void 0:p.requestAccessToken(u)},[]),y=t.useCallback(()=>{var u;return(u=v.current)===null||u===void 0?void 0:u.requestCode()},[]);return o==="implicit"?k:y}const N=()=>{const{toggleLogin:o}=G(),n=b(),l=()=>n(-1),a=z({onSuccess:i=>{fetch("https://ap-south-1.aws.data.mongodb-api.com/app/application-0-sjyrk/endpoint/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i.access_token,cart:[""]})}).then(r=>r.json()).then(r=>{o(r),console.log(r),l()})},onError:i=>console.Error(i)});return e.jsx(e.Fragment,{children:e.jsx(L,{size:"large",variant:"contained",fullWidth:!0,sx:{mx:"auto"},startIcon:e.jsx(F,{}),onClick:a,children:"Google Login "})})};function co(){const o=b(),n=()=>o(-1);return e.jsx(q,{clientId:"626234403451-nrjr0sgqj7e1df84edph3fva8fb18cta.apps.googleusercontent.com",children:e.jsx(A,{open:!0,onClose:n,children:e.jsx(O,{children:e.jsxs(T,{spacing:1.5,children:[e.jsx(B,{sx:{alignSelf:"center"}}),e.jsx(C,{label:"Email",type:"email",disabled:!0}),e.jsx(C,{label:"Password",type:"password",disabled:!0}),e.jsx(L,{variant:"outlined",disabled:!0,children:"Login"}),e.jsx(P,{children:"or"}),e.jsx(N,{})]})})})})}export{co as default};
