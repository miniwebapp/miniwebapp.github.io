import{j as o,r as t,R as _,t as C}from"./index-459c5962.js";import{c as G,B as L,b as A}from"./appStore-653fb111.js";import{D as O,a as T}from"./DialogContent-7297e245.js";import{S as B}from"./Stack-4dc6229b.js";import{A as D,D as P}from"./Divider-866e4931.js";import{T as b}from"./TextField-d7e29632.js";import"./useControlled-99c0d9bb.js";import"./InputBase-394763b2.js";import"./react-is.production.min-a192e302.js";import"./Grow-5ed905fc.js";const F=G(o.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");function I(e={}){const{nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a}=e,[i,r]=t.useState(!1),d=t.useRef(l);d.current=l;const g=t.useRef(a);return g.current=a,t.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=n,c.onload=()=>{var s;r(!0),(s=d.current)===null||s===void 0||s.call(d)},c.onerror=()=>{var s;r(!1),(s=g.current)===null||s===void 0||s.call(g)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[n]),i}const R=t.createContext(null);function q({clientId:e,nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a,children:i}){const r=I({nonce:n,onScriptLoadSuccess:l,onScriptLoadError:a}),d=t.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:r}),[e,r]);return _.createElement(R.Provider,{value:d},i)}function M(){const e=t.useContext(R);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function z({flow:e="implicit",scope:n="",onSuccess:l,onError:a,onNonOAuthError:i,overrideScope:r,state:d,...g}){const{clientId:c,scriptLoadedSuccessfully:s}=M(),m=t.useRef(),h=t.useRef(l);h.current=l;const x=t.useRef(a);x.current=a;const j=t.useRef(i);j.current=i,t.useEffect(()=>{var u,p;if(!s)return;const w=e==="implicit"?"initTokenClient":"initCodeClient",E=(p=(u=window==null?void 0:window.google)===null||u===void 0?void 0:u.accounts)===null||p===void 0?void 0:p.oauth2[w]({client_id:c,scope:r?n:`openid profile email ${n}`,callback:v=>{var f,S;if(v.error)return(f=x.current)===null||f===void 0?void 0:f.call(x,v);(S=h.current)===null||S===void 0||S.call(h,v)},error_callback:v=>{var f;(f=j.current)===null||f===void 0||f.call(j,v)},state:d,...g});m.current=E},[c,s,e,n,d]);const k=t.useCallback(u=>{var p;return(p=m.current)===null||p===void 0?void 0:p.requestAccessToken(u)},[]),y=t.useCallback(()=>{var u;return(u=m.current)===null||u===void 0?void 0:u.requestCode()},[]);return e==="implicit"?k:y}const N=()=>{const{setLogin:e}=A(),n=C(),l=()=>n(-1),a=z({onSuccess:i=>{fetch("https://ap-south-1.aws.data.mongodb-api.com/app/application-0-sjyrk/endpoint/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i.access_token})}).then(r=>r.json()).then(r=>{e(r),l()})},onError:i=>console.Error(i)});return o.jsx(o.Fragment,{children:o.jsx(L,{size:"large",variant:"contained",fullWidth:!0,sx:{mx:"auto"},startIcon:o.jsx(F,{}),onClick:a,children:"Google Login"})})};function Z(){const e=C(),n=()=>e(-1);return o.jsx(q,{clientId:"626234403451-nrjr0sgqj7e1df84edph3fva8fb18cta.apps.googleusercontent.com",children:o.jsx(O,{open:!0,onClose:n,children:o.jsx(T,{children:o.jsxs(B,{spacing:1.5,children:[o.jsx(D,{sx:{alignSelf:"center"}}),o.jsx(b,{label:"Email",type:"email",disabled:!0}),o.jsx(b,{label:"Password",type:"password",disabled:!0}),o.jsx(L,{variant:"outlined",disabled:!0,children:"Login"}),o.jsx(P,{children:"or"}),o.jsx(N,{})]})})})})}export{Z as default};
