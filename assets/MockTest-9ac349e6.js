var Zs=Object.defineProperty;var tn=(j,s,L)=>s in j?Zs(j,s,{enumerable:!0,configurable:!0,writable:!0,value:L}):j[s]=L;var ee=(j,s,L)=>(tn(j,typeof s!="symbol"?s+"":s,L),L),Oe=(j,s,L)=>{if(!s.has(j))throw TypeError("Cannot "+L)};var t=(j,s,L)=>(Oe(j,s,"read from private field"),L?L.call(j):s.get(j)),U=(j,s,L)=>{if(s.has(j))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(j):s.set(j,L)},it=(j,s,L,o)=>(Oe(j,s,"write to private field"),o?o.call(j,L):s.set(j,L),L);var me=(j,s,L,o)=>({set _(u){it(j,s,u,L)},get _(){return t(j,s,o)}}),X=(j,s,L)=>(Oe(j,s,"access private method"),L);import{r as reactExports,h as generateUtilityClasses,g as generateUtilityClass,s as styled,_ as _extends,k as alpha_1,f as useThemeProps,b as _objectWithoutPropertiesLoose,j as jsxRuntimeExports,d as clsx,a as capitalize,e as composeClasses,n as useParams,m as useSearchParams,B as Box,w as getAugmentedNamespace,q as getDefaultExportFromCjs}from"./index-d2e268b7.js";import{u as useTestStore}from"./testStore-5678f378.js";import{r as ButtonGroupContext,s as ButtonGroupButtonContext,c as createSvgIcon,b as useAppStore,B as Button}from"./appStore-f9ed519f.js";import{S as Stack}from"./Stack-8f94a3e4.js";import{T as Typography,A as AppBar,a as Toolbar,I as IconButton,M as Menu,H as Home}from"./ShoppingCartSharp-db04b69c.js";import{A as Avatar,D as Divider}from"./Divider-8bafc3a7.js";import{I as Input,T as TextField}from"./TextField-3b5e37ff.js";import{S as Snackbar,A as Alert}from"./Snackbar-a2b6532e.js";import{u as useMediaQuery,L as LeftDrawer,D as Drawer,E as EmojiEvents}from"./LeftDrawer-d98d7b63.js";import{D as Dialog,a as DialogContent}from"./DialogContent-09b284e1.js";import{D as DialogTitle}from"./DialogTitle-14505401.js";import{D as DialogActions}from"./DialogActions-840e16e1.js";import{T as TableContainer,a as Table,b as TableHead,c as TableRow,d as TableCell,e as TableBody}from"./TableRow-6cbdc868.js";import{N as NavBarColor}from"./NavBarColorful-220510d2.js";import{A as ArrowBack}from"./ArrowBack-fc0c74cf.js";import{G as Grid}from"./Grid-1e971723.js";import{C as Card}from"./Card-ec03caec.js";import"./InputBase-d9a143b0.js";import"./useControlled-8f776ee3.js";import"./react-is.production.min-a192e302.js";import"./Grow-11d999bb.js";function _mergeNamespaces(j,s){for(var L=0;L<s.length;L++){const o=s[L];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in j)){const W=Object.getOwnPropertyDescriptor(o,u);W&&Object.defineProperty(j,u,W.get?W:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}))}function getValidReactChildren(j){return reactExports.Children.toArray(j).filter(s=>reactExports.isValidElement(s))}function getButtonGroupUtilityClass(j){return generateUtilityClass("MuiButtonGroup",j)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),buttonGroupClasses$1=buttonGroupClasses,_excluded=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(j,s)=>{const{ownerState:L}=j;return[{[`& .${buttonGroupClasses$1.grouped}`]:s.grouped},{[`& .${buttonGroupClasses$1.grouped}`]:s[`grouped${capitalize(L.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:s[`grouped${capitalize(L.variant)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:s[`grouped${capitalize(L.variant)}${capitalize(L.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:s[`grouped${capitalize(L.variant)}${capitalize(L.color)}`]},{[`& .${buttonGroupClasses$1.firstButton}`]:s.firstButton},{[`& .${buttonGroupClasses$1.lastButton}`]:s.lastButton},{[`& .${buttonGroupClasses$1.middleButton}`]:s.middleButton},s.root,s[L.variant],L.disableElevation===!0&&s.disableElevation,L.fullWidth&&s.fullWidth,L.orientation==="vertical"&&s.vertical]},useUtilityClasses=j=>{const{classes:s,color:L,disabled:o,disableElevation:u,fullWidth:W,orientation:O,variant:at}=j,M={root:["root",at,O==="vertical"&&"vertical",W&&"fullWidth",u&&"disableElevation"],grouped:["grouped",`grouped${capitalize(O)}`,`grouped${capitalize(at)}`,`grouped${capitalize(at)}${capitalize(O)}`,`grouped${capitalize(at)}${capitalize(L)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(M,getButtonGroupUtilityClass,s)},ButtonGroupRoot=styled("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:j,ownerState:s})=>_extends({display:"inline-flex",borderRadius:(j.vars||j).shape.borderRadius},s.variant==="contained"&&{boxShadow:(j.vars||j).shadows[2]},s.disableElevation&&{boxShadow:"none"},s.fullWidth&&{width:"100%"},s.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses$1.grouped}`]:_extends({minWidth:40,"&:hover":_extends({},s.variant==="contained"&&{boxShadow:"none"})},s.variant==="contained"&&{boxShadow:"none"}),[`& .${buttonGroupClasses$1.firstButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},s.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},s.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},s.variant==="text"&&s.orientation==="horizontal"&&{borderRight:j.vars?`1px solid rgba(${j.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${j.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(j.vars||j).palette.action.disabled}`}},s.variant==="text"&&s.orientation==="vertical"&&{borderBottom:j.vars?`1px solid rgba(${j.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${j.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(j.vars||j).palette.action.disabled}`}},s.variant==="text"&&s.color!=="inherit"&&{borderColor:j.vars?`rgba(${j.vars.palette[s.color].mainChannel} / 0.5)`:alpha_1(j.palette[s.color].main,.5)},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"transparent"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"transparent"},s.variant==="contained"&&s.orientation==="horizontal"&&{borderRight:`1px solid ${(j.vars||j).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(j.vars||j).palette.action.disabled}`}},s.variant==="contained"&&s.orientation==="vertical"&&{borderBottom:`1px solid ${(j.vars||j).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(j.vars||j).palette.action.disabled}`}},s.variant==="contained"&&s.color!=="inherit"&&{borderColor:(j.vars||j).palette[s.color].dark},{"&:hover":_extends({},s.variant==="outlined"&&s.orientation==="horizontal"&&{borderRightColor:"currentColor"},s.variant==="outlined"&&s.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${buttonGroupClasses$1.lastButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},s.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},s.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},s.variant==="outlined"&&s.orientation==="horizontal"&&{marginLeft:-1},s.variant==="outlined"&&s.orientation==="vertical"&&{marginTop:-1})})),ButtonGroup=reactExports.forwardRef(function(s,L){const o=useThemeProps({props:s,name:"MuiButtonGroup"}),{children:u,className:W,color:O="primary",component:at="div",disabled:M=!1,disableElevation:v=!1,disableFocusRipple:p=!1,disableRipple:S=!1,fullWidth:w=!1,orientation:E="horizontal",size:m="medium",variant:x="outlined"}=o,d=_objectWithoutPropertiesLoose(o,_excluded),b=_extends({},o,{color:O,component:at,disabled:M,disableElevation:v,disableFocusRipple:p,disableRipple:S,fullWidth:w,orientation:E,size:m,variant:x}),R=useUtilityClasses(b),C=reactExports.useMemo(()=>({className:R.grouped,color:O,disabled:M,disableElevation:v,disableFocusRipple:p,disableRipple:S,fullWidth:w,size:m,variant:x}),[O,M,v,p,S,w,m,x,R.grouped]),A=getValidReactChildren(u),i=A.length,l=D=>{const y=D===0,c=D===i-1;return y&&c?"":y?R.firstButton:c?R.lastButton:R.middleButton};return jsxRuntimeExports.jsx(ButtonGroupRoot,_extends({as:at,role:"group",className:clsx(R.root,W),ref:L,ownerState:b},d,{children:jsxRuntimeExports.jsx(ButtonGroupContext.Provider,{value:C,children:A.map((D,y)=>jsxRuntimeExports.jsx(ButtonGroupButtonContext.Provider,{value:l(y),children:D},y))})}))}),ButtonGroup$1=ButtonGroup,ArrowForward=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),CancelRounded=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm4.3 14.3c-.39.39-1.02.39-1.41 0L12 13.41 9.11 16.3c-.39.39-1.02.39-1.41 0a.9959.9959 0 0 1 0-1.41L10.59 12 7.7 9.11a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 10.59l2.89-2.89c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L13.41 12l2.89 2.89c.38.38.38 1.02 0 1.41z"}),"CancelRounded"),CheckCircle=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),Keyboard=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),"Keyboard"),Lock=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),Person=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),RemoveRedEye=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye"),Password=()=>{const{edu:j}=useParams(),[s]=useSearchParams(),L=s.get("t"),o=s.get("n"),{uEmail:u}=useAppStore(),[W,O]=reactExports.useState(u),at=b=>{O(b.target.value)},[M,v]=reactExports.useState(""),p=b=>{v(b.target.value)},[S,w]=reactExports.useState(!1),E=()=>w(!1),{setExamParams:m,setUserDetails:x}=useTestStore(),d=async()=>{const b=await fetch(`./examiner/${j}/${L}.json`);if(b.ok){const R=await b.json();m(R),x(o,W,M)}else w(!0)};return jsxRuntimeExports.jsxs(Box,{width:"100%",children:[jsxRuntimeExports.jsx(Box,{bgcolor:"#2d70b6",height:40}),jsxRuntimeExports.jsxs(Stack,{bgcolor:"#666",direction:"row",flexWrap:"nowrap",justifyContent:"space-between",border:2,borderColor:"#666",display:{xs:"none",sm:"flex"},children:[jsxRuntimeExports.jsxs(Stack,{color:"#fff",p:2,direction:"row",flexWrap:"nowrap",justifyContent:"space-between",flexGrow:1,children:[jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{children:"System Name :"}),jsxRuntimeExports.jsx(Typography,{color:"#ff0",fontSize:"3rem",children:"C001"}),jsxRuntimeExports.jsx(Typography,{children:"Kindly contact the invigilator if there are any discrepancies in the Name and Photograph displayed on the screen or if the photograph is not yours"})]}),jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{align:"right",children:"Candidate Name :"}),jsxRuntimeExports.jsx(Typography,{align:"right",color:"#ff0",fontSize:"3rem",children:o||"John Smith"}),jsxRuntimeExports.jsxs(Typography,{align:"right",children:["Subject : ",jsxRuntimeExports.jsx("span",{style:{color:"#ff0"},children:"Mock Exam"})]})]})]}),jsxRuntimeExports.jsx(Box,{minWidth:"8rem",bgcolor:"#fff",sx:{backgroundImage:"url(./image/user.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),jsxRuntimeExports.jsx(Box,{pt:"10dvh",px:1,children:jsxRuntimeExports.jsxs(Box,{maxWidth:370,mx:"auto",flexGrow:1,children:[jsxRuntimeExports.jsx(Typography,{fontSize:"0.8rem",bgcolor:"#ddd",sx:{borderTopRightRadius:5,borderTopLeftRadius:5},fontWeight:"bold",px:2,py:1,color:"#444",children:"Login"}),jsxRuntimeExports.jsx(Box,{p:2,backgroundColor:"#f5f5f5",border:1,borderColor:"#dbdbdb",sx:{borderBottomRightRadius:5,borderBottomLeftRadius:5},children:jsxRuntimeExports.jsxs(Stack,{children:[jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Person,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,fullWidth:!0,placeholder:"Email ID here",value:W,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:at})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Lock,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,type:"text",fullWidth:!0,placeholder:"UPI Payment ID here",value:M,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:p})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsx(Button,{variant:"contained",sx:{marginTop:"20px"},onClick:d,children:"Sign In"})]})})]})}),jsxRuntimeExports.jsx(Box,{bgcolor:"#617b8c",textAlign:"center",color:"#fff",py:.2,fontSize:"small",position:"absolute",bottom:0,width:"100%",children:"Version 00.00.01"}),jsxRuntimeExports.jsx(Snackbar,{open:S,anchorOrigin:{horizontal:"center",vertical:"bottom"},autoHideDuration:3e3,onClose:E,children:jsxRuntimeExports.jsx(Alert,{severity:"error",elevation:6,variant:"filled",children:"Something went Wrong !!"})})]})},MockTest_Instruction="";function Instruction(){const j=useMediaQuery("(min-width:600px)"),[s,L]=reactExports.useState(!1),o=reactExports.useRef(null),u=()=>{L(!0)},W=()=>{L(!1)},{examParams:O,setPage:at}=useTestStore(),M=()=>{o.current.checked?(at(j?2:5),document.getElementsByTagName("body")[0].requestFullscreen()):u()};return jsxRuntimeExports.jsxs("div",{id:"instructionpage",className:"l",children:[jsxRuntimeExports.jsx("h3",{className:"l1",children:"Please read the instructions carefully"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"General Instructions:"})}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:["Total duration of ",O.meta.eName," - ",O.meta.tName," exam is ",O.meta.timeMinutes," min."]}),jsxRuntimeExports.jsx("li",{children:"The clock will be set at the server. The countdown timer in the top left corner of screen will display the remaining time available for you to complete the examination. When the timer reaches zero, the examination will end by itself. You will not be required to end or submit your examination."}),jsxRuntimeExports.jsxs("li",{children:["The Questions Palette displayed on the right side of screen will show the status of each question using one of the following symbols:",jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo1.png",className:"l2"})," You have not visited the question yet."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo2.png",className:"l2"})," You have not answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo3.png",className:"l2"})," You have answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo4.png",className:"l2"})," You have NOT answered the question, but have marked the question for review."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo5.png",className:"l2"}),' The question(s) "Answered and Marked for Review" will be considered for evalution.']})]})]}),jsxRuntimeExports.jsx("li",{children:'You can click on the ">" arrow which apperes to the left of question palette to collapse the question palette thereby maximizing the question window. To view the question palette again, you can click on "<" which appears on the right side of question window.'}),jsxRuntimeExports.jsx("li",{children:'You can click on your "Profile" image on top right corner of your screen to change the language during the exam for entire question paper. On clicking of Profile image you will get a drop-down to change the question content to the desired language.'}),jsxRuntimeExports.jsxs("li",{children:["You can click on ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})," to navigate to the bottom and ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})," to navigate to top of the question are, without scrolling."]})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating to a Question:"})}),jsxRuntimeExports.jsx("ol",{start:"7",children:jsxRuntimeExports.jsxs("li",{children:["To answer a question, do the following:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"Click on the question number in the Question Palette at the right of your screen to go to that numbered question directly. Note that using this option does NOT save your answer to the current question."}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Save & Next"})," to save your answer for the current question and then go to the next question."]}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Mark for Review & Next"})," to save your answer for the current question, mark it for review, and then go to the next question."]})]})]})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Answering a Question:"})}),jsxRuntimeExports.jsxs("ol",{start:"8",children:[jsxRuntimeExports.jsxs("li",{children:["Procedure for answering a multiple choice type question:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"To select you answer, click on the button of one of the options."}),jsxRuntimeExports.jsxs("li",{children:["To deselect your chosen answer, click on the button of the chosen option again or click on the ",jsxRuntimeExports.jsx("strong",{children:"Clear Response"})," button"]}),jsxRuntimeExports.jsx("li",{children:"To change your chosen answer, click on the button of another option"}),jsxRuntimeExports.jsx("li",{children:"To save your answer, you MUST click on the Save & Next button."}),jsxRuntimeExports.jsx("li",{children:"To mark the question for review, click on the Mark for Review & Next button."})]})]}),jsxRuntimeExports.jsx("li",{children:"To change your answer to a question that has already been answered, first select that question for answering and then follow the procedure for answering that type of question."})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating through sections:"})}),jsxRuntimeExports.jsxs("ol",{start:"10",children:[jsxRuntimeExports.jsx("li",{children:"Sections in this question paper are displayed on the top bar of the screen. Questions in a section can be viewed by click on the section name. The section you are currently viewing is highlighted."}),jsxRuntimeExports.jsx("li",{children:"After click the Save & Next button on the last question for a section, you will automatically be taken to the first question of the next section."}),jsxRuntimeExports.jsx("li",{children:"You can shuffle between sections and questions anything during the examination as per your convenience only during the time stipulated."}),jsxRuntimeExports.jsx("li",{children:"Candidate can view the corresponding section summery as part of the legend that appears in every section above the question palette."})]}),jsxRuntimeExports.jsx("h4",{className:"l3",children:"Please note all questions will appear in your default language. This language can be changed for a particular question later on."}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"terms",ref:o}),jsxRuntimeExports.jsx("label",{htmlFor:"terms",children:"  I have read and understood the instructions. All computer hardware allotted to me are in proper working condition. I declare that I am not in possession of / not wearing / not carrying any prohibited gadget like mobile phone, bluetooth devices etc. / any prohibited material with me into the Examination Hall.I agree that in case of not adhering to the instructions, I shall be liable to be debarred from this Test and/or to disciplinary action, which may include ban from future Tests / Examinations."}),jsxRuntimeExports.jsx("p",{className:"lo",onClick:M,children:"PROCEED"}),jsxRuntimeExports.jsxs(Dialog,{open:s,onClose:W,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Please check Terms and Conditions and then proceed"}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button,{onClick:W,autoFocus:!0,children:"OK"})})]})]})}function commonjsRequire(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(s,L){module.exports=s.pdfjsLib=L()})(globalThis,()=>(()=>{var __webpack_modules__=[,(j,s)=>{var Xt;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=ct,s.bytesToString=G,s.createValidAbsoluteUrl=At,s.getModificationDate=wt,s.getUuid=zt,s.getVerbosityLevel=q,s.info=et,s.isArrayBuffer=pt,s.isArrayEqual=Rt,s.isNodeJS=void 0,s.normalizeUnicode=Gt,s.objectFromMap=ht,s.objectSize=ot,s.setVerbosityLevel=P,s.shadow=_t,s.string32=Q,s.stringToBytes=nt,s.stringToPDFString=gt,s.stringToUTF8String=st,s.unreachable=z,s.utf8StringToString=Z,s.warn=rt;const L=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=L;const o=[1,0,0,1,0,0];s.IDENTITY_MATRIX=o;const u=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=u;const W=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=W;const O=1.35;s.LINE_FACTOR=O;const at=.35;s.LINE_DESCENT_FACTOR=at;const M=at/O;s.BASELINE_FACTOR=M;const v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=v;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=p;const S="pdfjs_internal_editor_";s.AnnotationEditorPrefix=S;const w={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=w;const E={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=E;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=m;const x={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=x;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=d;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=b;const R={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=R;const C={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=C;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=A;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=i;const l={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=l;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=D;const y={O:"PageOpen",C:"PageClose"};s.PageActionEventType=y;const c={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=c;const F={NONE:0,BINARY:1};s.CMapCompressionType=F;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=g;const H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=H;let $=c.WARNINGS;function P(ut){Number.isInteger(ut)&&($=ut)}function q(){return $}function et(ut){$>=c.INFOS&&console.log(`Info: ${ut}`)}function rt(ut){$>=c.WARNINGS&&console.log(`Warning: ${ut}`)}function z(ut){throw new Error(ut)}function ct(ut,tt){ut||z(tt)}function mt(ut){switch(ut==null?void 0:ut.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function At(ut,tt=null,Y=null){if(!ut)return null;try{if(Y&&typeof ut=="string"){if(Y.addDefaultProtocol&&ut.startsWith("www.")){const Et=ut.match(/\./g);(Et==null?void 0:Et.length)>=2&&(ut=`http://${ut}`)}if(Y.tryConvertEncoding)try{ut=st(ut)}catch{}}const bt=tt?new URL(ut,tt):new URL(ut);if(mt(bt))return bt}catch{}return null}function _t(ut,tt,Y,bt=!1){return Object.defineProperty(ut,tt,{value:Y,enumerable:!bt,configurable:!0,writable:!1}),Y}const k=function(){function tt(Y,bt){this.constructor===tt&&z("Cannot initialize BaseException."),this.message=Y,this.name=bt}return tt.prototype=new Error,tt.constructor=tt,tt}();s.BaseException=k;class a extends k{constructor(tt,Y){super(tt,"PasswordException"),this.code=Y}}s.PasswordException=a;class e extends k{constructor(tt,Y){super(tt,"UnknownErrorException"),this.details=Y}}s.UnknownErrorException=e;class n extends k{constructor(tt){super(tt,"InvalidPDFException")}}s.InvalidPDFException=n;class h extends k{constructor(tt){super(tt,"MissingPDFException")}}s.MissingPDFException=h;class f extends k{constructor(tt,Y){super(tt,"UnexpectedResponseException"),this.status=Y}}s.UnexpectedResponseException=f;class T extends k{constructor(tt){super(tt,"FormatError")}}s.FormatError=T;class I extends k{constructor(tt){super(tt,"AbortException")}}s.AbortException=I;function G(ut){(typeof ut!="object"||(ut==null?void 0:ut.length)===void 0)&&z("Invalid argument for bytesToString");const tt=ut.length,Y=8192;if(tt<Y)return String.fromCharCode.apply(null,ut);const bt=[];for(let Et=0;Et<tt;Et+=Y){const te=Math.min(Et+Y,tt),Zt=ut.subarray(Et,te);bt.push(String.fromCharCode.apply(null,Zt))}return bt.join("")}function nt(ut){typeof ut!="string"&&z("Invalid argument for stringToBytes");const tt=ut.length,Y=new Uint8Array(tt);for(let bt=0;bt<tt;++bt)Y[bt]=ut.charCodeAt(bt)&255;return Y}function Q(ut){return String.fromCharCode(ut>>24&255,ut>>16&255,ut>>8&255,ut&255)}function ot(ut){return Object.keys(ut).length}function ht(ut){const tt=Object.create(null);for(const[Y,bt]of ut)tt[Y]=bt;return tt}function ft(){const ut=new Uint8Array(4);return ut[0]=1,new Uint32Array(ut.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return _t(this,"isLittleEndian",ft())}static get isEvalSupported(){return _t(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_t(this,"platform",{isWin:!1,isMac:!1}):_t(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var tt,Y;return _t(this,"isCSSRoundSupported",(Y=(tt=globalThis.CSS)==null?void 0:tt.supports)==null?void 0:Y.call(tt,"width: round(1.5px, 1px)"))}}s.FeatureTest=Ct;const Dt=[...Array(256).keys()].map(ut=>ut.toString(16).padStart(2,"0"));class vt{static makeHexColor(tt,Y,bt){return`#${Dt[tt]}${Dt[Y]}${Dt[bt]}`}static scaleMinMax(tt,Y){let bt;tt[0]?(tt[0]<0&&(bt=Y[0],Y[0]=Y[1],Y[1]=bt),Y[0]*=tt[0],Y[1]*=tt[0],tt[3]<0&&(bt=Y[2],Y[2]=Y[3],Y[3]=bt),Y[2]*=tt[3],Y[3]*=tt[3]):(bt=Y[0],Y[0]=Y[2],Y[2]=bt,bt=Y[1],Y[1]=Y[3],Y[3]=bt,tt[1]<0&&(bt=Y[2],Y[2]=Y[3],Y[3]=bt),Y[2]*=tt[1],Y[3]*=tt[1],tt[2]<0&&(bt=Y[0],Y[0]=Y[1],Y[1]=bt),Y[0]*=tt[2],Y[1]*=tt[2]),Y[0]+=tt[4],Y[1]+=tt[4],Y[2]+=tt[5],Y[3]+=tt[5]}static transform(tt,Y){return[tt[0]*Y[0]+tt[2]*Y[1],tt[1]*Y[0]+tt[3]*Y[1],tt[0]*Y[2]+tt[2]*Y[3],tt[1]*Y[2]+tt[3]*Y[3],tt[0]*Y[4]+tt[2]*Y[5]+tt[4],tt[1]*Y[4]+tt[3]*Y[5]+tt[5]]}static applyTransform(tt,Y){const bt=tt[0]*Y[0]+tt[1]*Y[2]+Y[4],Et=tt[0]*Y[1]+tt[1]*Y[3]+Y[5];return[bt,Et]}static applyInverseTransform(tt,Y){const bt=Y[0]*Y[3]-Y[1]*Y[2],Et=(tt[0]*Y[3]-tt[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/bt,te=(-tt[0]*Y[1]+tt[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/bt;return[Et,te]}static getAxialAlignedBoundingBox(tt,Y){const bt=this.applyTransform(tt,Y),Et=this.applyTransform(tt.slice(2,4),Y),te=this.applyTransform([tt[0],tt[3]],Y),Zt=this.applyTransform([tt[2],tt[1]],Y);return[Math.min(bt[0],Et[0],te[0],Zt[0]),Math.min(bt[1],Et[1],te[1],Zt[1]),Math.max(bt[0],Et[0],te[0],Zt[0]),Math.max(bt[1],Et[1],te[1],Zt[1])]}static inverseTransform(tt){const Y=tt[0]*tt[3]-tt[1]*tt[2];return[tt[3]/Y,-tt[1]/Y,-tt[2]/Y,tt[0]/Y,(tt[2]*tt[5]-tt[4]*tt[3])/Y,(tt[4]*tt[1]-tt[5]*tt[0])/Y]}static singularValueDecompose2dScale(tt){const Y=[tt[0],tt[2],tt[1],tt[3]],bt=tt[0]*Y[0]+tt[1]*Y[2],Et=tt[0]*Y[1]+tt[1]*Y[3],te=tt[2]*Y[0]+tt[3]*Y[2],Zt=tt[2]*Y[1]+tt[3]*Y[3],J=(bt+Zt)/2,St=Math.sqrt((bt+Zt)**2-4*(bt*Zt-te*Et))/2,It=J+St||1,Tt=J-St||1;return[Math.sqrt(It),Math.sqrt(Tt)]}static normalizeRect(tt){const Y=tt.slice(0);return tt[0]>tt[2]&&(Y[0]=tt[2],Y[2]=tt[0]),tt[1]>tt[3]&&(Y[1]=tt[3],Y[3]=tt[1]),Y}static intersect(tt,Y){const bt=Math.max(Math.min(tt[0],tt[2]),Math.min(Y[0],Y[2])),Et=Math.min(Math.max(tt[0],tt[2]),Math.max(Y[0],Y[2]));if(bt>Et)return null;const te=Math.max(Math.min(tt[1],tt[3]),Math.min(Y[1],Y[3])),Zt=Math.min(Math.max(tt[1],tt[3]),Math.max(Y[1],Y[3]));return te>Zt?null:[bt,te,Et,Zt]}static bezierBoundingBox(tt,Y,bt,Et,te,Zt,J,St){const It=[],Tt=[[],[]];let Ot,Nt,Qt,yt,Yt,Lt,N,r;for(let K=0;K<2;++K){if(K===0?(Nt=6*tt-12*bt+6*te,Ot=-3*tt+9*bt-9*te+3*J,Qt=3*bt-3*tt):(Nt=6*Y-12*Et+6*Zt,Ot=-3*Y+9*Et-9*Zt+3*St,Qt=3*Et-3*Y),Math.abs(Ot)<1e-12){if(Math.abs(Nt)<1e-12)continue;yt=-Qt/Nt,0<yt&&yt<1&&It.push(yt);continue}N=Nt*Nt-4*Qt*Ot,r=Math.sqrt(N),!(N<0)&&(Yt=(-Nt+r)/(2*Ot),0<Yt&&Yt<1&&It.push(Yt),Lt=(-Nt-r)/(2*Ot),0<Lt&&Lt<1&&It.push(Lt))}let _=It.length,B;const V=_;for(;_--;)yt=It[_],B=1-yt,Tt[0][_]=B*B*B*tt+3*B*B*yt*bt+3*B*yt*yt*te+yt*yt*yt*J,Tt[1][_]=B*B*B*Y+3*B*B*yt*Et+3*B*yt*yt*Zt+yt*yt*yt*St;return Tt[0][V]=tt,Tt[1][V]=Y,Tt[0][V+1]=J,Tt[1][V+1]=St,Tt[0].length=Tt[1].length=V+2,[Math.min(...Tt[0]),Math.min(...Tt[1]),Math.max(...Tt[0]),Math.max(...Tt[1])]}}s.Util=vt;const Ft=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gt(ut){if(ut[0]>="ï"){let Y;if(ut[0]==="þ"&&ut[1]==="ÿ"?Y="utf-16be":ut[0]==="ÿ"&&ut[1]==="þ"?Y="utf-16le":ut[0]==="ï"&&ut[1]==="»"&&ut[2]==="¿"&&(Y="utf-8"),Y)try{const bt=new TextDecoder(Y,{fatal:!0}),Et=nt(ut);return bt.decode(Et)}catch(bt){rt(`stringToPDFString: "${bt}".`)}}const tt=[];for(let Y=0,bt=ut.length;Y<bt;Y++){const Et=Ft[ut.charCodeAt(Y)];tt.push(Et?String.fromCharCode(Et):ut.charAt(Y))}return tt.join("")}function st(ut){return decodeURIComponent(escape(ut))}function Z(ut){return unescape(encodeURIComponent(ut))}function pt(ut){return typeof ut=="object"&&(ut==null?void 0:ut.byteLength)!==void 0}function Rt(ut,tt){if(ut.length!==tt.length)return!1;for(let Y=0,bt=ut.length;Y<bt;Y++)if(ut[Y]!==tt[Y])return!1;return!0}function wt(ut=new Date){return[ut.getUTCFullYear().toString(),(ut.getUTCMonth()+1).toString().padStart(2,"0"),ut.getUTCDate().toString().padStart(2,"0"),ut.getUTCHours().toString().padStart(2,"0"),ut.getUTCMinutes().toString().padStart(2,"0"),ut.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){U(this,Xt,!1);this.promise=new Promise((tt,Y)=>{this.resolve=bt=>{it(this,Xt,!0),tt(bt)},this.reject=bt=>{it(this,Xt,!0),Y(bt)}})}get settled(){return t(this,Xt)}}Xt=new WeakMap,s.PromiseCapability=Ut;let $t=null,Wt=null;function Gt(ut){return $t||($t=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wt=new Map([["ﬅ","ſt"]])),ut.replaceAll($t,(tt,Y,bt)=>Y?Y.normalize("NFKC"):Wt.get(bt))}function zt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ut=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ut);else for(let tt=0;tt<32;tt++)ut[tt]=Math.floor(Math.random()*255);return G(ut)}const Bt="pdfjs_internal_id_";s.AnnotationPrefix=Bt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var j,L,o,u,he,O,_e,M,v,p,S,w,E,m,x,d,Se,R,C,Ne,i,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:F}=c,g=y.url?getUrlProp(y.url):null,H=y.data?getDataProp(y.data):null,$=y.httpHeaders||null,P=y.withCredentials===!0,q=y.password??null,et=y.range instanceof PDFDataRangeTransport?y.range:null,rt=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let z=y.worker instanceof PDFWorker?y.worker:null;const ct=y.verbosity,mt=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,At=typeof y.cMapUrl=="string"?y.cMapUrl:null,_t=y.cMapPacked!==!1,k=y.CMapReaderFactory||DefaultCMapReaderFactory,a=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,e=y.StandardFontDataFactory||DefaultStandardFontDataFactory,n=y.stopAtErrors!==!0,h=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,f=y.isEvalSupported!==!1,T=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,I=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,G=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,nt=y.fontExtraProperties===!0,Q=y.enableXfa===!0,ot=y.ownerDocument||globalThis.document,ht=y.disableRange===!0,ft=y.disableStream===!0,dt=y.disableAutoFetch===!0,Ct=y.pdfBug===!0,Dt=et?et.length:y.length??NaN,vt=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!G,Ft=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:k===_display_utils.DOMCMapReaderFactory&&e===_display_utils.DOMStandardFontDataFactory&&At&&a&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(a,document.baseURI),gt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),st=y.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:ot}),Z=null;(0,_util.setVerbosityLevel)(ct);const pt={canvasFactory:gt,filterFactory:st};if(Ft||(pt.cMapReaderFactory=new k({baseUrl:At,isCompressed:_t}),pt.standardFontDataFactory=new e({baseUrl:a})),!z){const Ut={verbosity:ct,port:_worker_options.GlobalWorkerOptions.workerPort};z=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),c._worker=z}const Rt={docId:F,apiVersion:"3.11.174",data:H,password:q,disableAutoFetch:dt,rangeChunkSize:rt,length:Dt,docBaseUrl:mt,enableXfa:Q,evaluatorOptions:{maxImageSize:h,disableFontFace:G,ignoreErrors:n,isEvalSupported:f,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:I,fontExtraProperties:nt,useSystemFonts:vt,cMapUrl:Ft?At:null,standardFontDataUrl:Ft?a:null}},wt={ignoreErrors:n,isEvalSupported:f,disableFontFace:G,fontExtraProperties:nt,enableXfa:Q,ownerDocument:ot,disableAutoFetch:dt,pdfBug:Ct,styleElement:Z};return z.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(z,Rt),$t=new Promise(function(Wt){let Gt;et?Gt=new _transport_stream.PDFDataTransportStream({length:Dt,initialData:et.initialData,progressiveDone:et.progressiveDone,contentDispositionFilename:et.contentDispositionFilename,disableRange:ht,disableStream:ft},et):H||(Gt=(Bt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Bt):(0,_display_utils.isValidFetchUrl)(Bt.url)?new _displayFetch_stream.PDFFetchStream(Bt):new _displayNetwork.PDFNetworkStream(Bt))({url:g,length:Dt,httpHeaders:$,withCredentials:P,rangeChunkSize:rt,disableRange:ht,disableStream:ft})),Wt(Gt)});return Promise.all([Ut,$t]).then(function([Wt,Gt]){if(c.destroyed)throw new Error("Loading aborted");const zt=new _message_handler.MessageHandler(F,Wt,z.port),Bt=new WorkerTransport(zt,c,Gt,wt,pt);c._transport=Bt,zt.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(y,c){if(y.destroyed)throw new Error("Worker was destroyed");const F=await y.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${me(s,j)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c,F,g;this.destroyed=!0;try{(c=this._worker)!=null&&c.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(H){throw(g=this._worker)!=null&&g.port&&delete this._worker._pendingDestroy,H}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};j=new WeakMap,U(s,j,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,F,g=!1,H=null){this.length=c,this.initialData=F,this.progressiveDone=g,this.contentDispositionFilename=H,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,F){for(const g of this._rangeListeners)g(c,F)}onDataProgress(c,F){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(c,F)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,F){this._pdfInfo=c,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(g=>{if(!g)return g;const H=[];for(const $ in g)H.push(...g[$]);return H}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,F,g,H=!1){U(this,u);U(this,O);U(this,L,null);U(this,o,!1);this._pageIndex=c,this._pageInfo=F,this._transport=g,this._stats=H?new _display_utils.StatTimer:null,this._pdfBug=H,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:F=this.rotate,offsetX:g=0,offsetY:H=0,dontFlip:$=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:F,offsetX:g,offsetY:H,dontFlip:$})}getAnnotations({intent:c="display"}={}){const F=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:F,intent:g="display",annotationMode:H=_util.AnnotationMode.ENABLE,transform:$=null,background:P=null,optionalContentConfigPromise:q=null,annotationCanvasMap:et=null,pageColors:rt=null,printAnnotationStorage:z=null}){var e,n;(e=this._stats)==null||e.time("Overall");const ct=this._transport.getRenderingIntent(g,H,z);it(this,o,!1),X(this,O,_e).call(this),q||(q=this._transport.getOptionalContentConfig());let mt=this._intentStates.get(ct.cacheKey);mt||(mt=Object.create(null),this._intentStates.set(ct.cacheKey,mt)),mt.streamReaderCancelTimeout&&(clearTimeout(mt.streamReaderCancelTimeout),mt.streamReaderCancelTimeout=null);const At=!!(ct.renderingIntent&_util.RenderingIntentFlag.PRINT);mt.displayReadyCapability||(mt.displayReadyCapability=new _util.PromiseCapability,mt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(n=this._stats)==null||n.time("Page Request"),this._pumpOperatorList(ct));const _t=h=>{var f,T;mt.renderTasks.delete(k),(this._maybeCleanupAfterRender||At)&&it(this,o,!0),X(this,u,he).call(this,!At),h?(k.capability.reject(h),this._abortOperatorList({intentState:mt,reason:h instanceof Error?h:new Error(h)})):k.capability.resolve(),(f=this._stats)==null||f.timeEnd("Rendering"),(T=this._stats)==null||T.timeEnd("Overall")},k=new InternalRenderTask({callback:_t,params:{canvasContext:c,viewport:F,transform:$,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:et,operatorList:mt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!At,pdfBug:this._pdfBug,pageColors:rt});(mt.renderTasks||(mt.renderTasks=new Set)).add(k);const a=k.task;return Promise.all([mt.displayReadyCapability.promise,q]).then(([h,f])=>{var T;if(this.destroyed){_t();return}(T=this._stats)==null||T.time("Rendering"),k.initializeGraphics({transparency:h,optionalContentConfig:f}),k.operatorListChanged()}).catch(_t),a}getOperatorList({intent:c="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var et;function H(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(q))}const $=this._transport.getRenderingIntent(c,F,g,!0);let P=this._intentStates.get($.cacheKey);P||(P=Object.create(null),this._intentStates.set($.cacheKey,P));let q;return P.opListReadCapability||(q=Object.create(null),q.operatorListChanged=H,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||(P.renderTasks=new Set)).add(q),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(et=this._stats)==null||et.time("Page Request"),this._pumpOperatorList($)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:F===!0},{highWaterMark:100,size(H){return H.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const F=this.streamTextContent(c);return new Promise(function(g,H){function $(){P.read().then(function({value:et,done:rt}){if(rt){g(q);return}Object.assign(q.styles,et.styles),q.items.push(...et.items),$()},H)}const P=F.getReader(),q={items:[],styles:Object.create(null)};$()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const g of F.renderTasks)c.push(g.completed),g.cancel();return this.objs.clear(),it(this,o,!1),X(this,O,_e).call(this),Promise.all(c)}cleanup(c=!1){it(this,o,!0);const F=X(this,u,he).call(this,!1);return c&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(c,F){var H,$;const g=this._intentStates.get(F);g&&((H=this._stats)==null||H.timeEnd("Page Request"),($=g.displayReadyCapability)==null||$.resolve(c))}_renderPageChunk(c,F){for(let g=0,H=c.length;g<H;g++)F.operatorList.fnArray.push(c.fnArray[g]),F.operatorList.argsArray.push(c.argsArray[g]);F.operatorList.lastChunk=c.lastChunk,F.operatorList.separateAnnots=c.separateAnnots;for(const g of F.renderTasks)g.operatorListChanged();c.lastChunk&&X(this,u,he).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:F,annotationStorageSerializable:g}){const{map:H,transfers:$}=g,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:F,annotationStorage:H},$).getReader(),et=this._intentStates.get(F);et.streamReader=q;const rt=()=>{q.read().then(({value:z,done:ct})=>{if(ct){et.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(z,et),rt())},z=>{if(et.streamReader=null,!this._transport.destroyed){if(et.operatorList){et.operatorList.lastChunk=!0;for(const ct of et.renderTasks)ct.operatorListChanged();X(this,u,he).call(this,!0)}if(et.displayReadyCapability)et.displayReadyCapability.reject(z);else if(et.opListReadCapability)et.opListReadCapability.reject(z);else throw z}})};rt()}_abortOperatorList({intentState:c,reason:F,force:g=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!g){if(c.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let H=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(H+=F.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:F,force:!0})},H);return}}if(c.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[H,$]of this._intentStates)if($===c){this._intentStates.delete(H);break}this.cleanup()}}}get stats(){return this._stats}}L=new WeakMap,o=new WeakMap,u=new WeakSet,he=function(c=!1){if(X(this,O,_e).call(this),!t(this,o)||this.destroyed)return!1;if(c)return it(this,L,setTimeout(()=>{it(this,L,null),X(this,u,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:g}of this._intentStates.values())if(F.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),it(this,o,!1),!0},O=new WeakSet,_e=function(){t(this,L)&&(clearTimeout(t(this,L)),it(this,L,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){U(this,M,new Set);U(this,v,Promise.resolve())}postMessage(c,F){const g={data:structuredClone(c,F?{transfer:F}:null)};t(this,v).then(()=>{for(const H of t(this,M))H.call(this,g)})}addEventListener(c,F){t(this,M).add(F)}removeEventListener(c,F){t(this,M).delete(F)}terminate(){t(this,M).clear()}}M=new WeakMap,v=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(p=document==null?void 0:document.currentScript)==null?void 0:p.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,c){let F;try{if(F=new URL(y),!F.origin||F.origin==="null")return!1}catch{return!1}const g=new URL(c,F);return F.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(y){const c=`importScripts("${y}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:c=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var g;if(this.name=y,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){if((g=t(_PDFWorker,S))!=null&&g.has(c))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,S)||it(_PDFWorker,S,new WeakMap)).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const c=new Worker(y),F=new _message_handler.MessageHandler("main","worker",c),g=()=>{c.removeEventListener("error",H),F.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},H=()=>{this._webWorker||g()};c.addEventListener("error",H),F.on("test",P=>{if(c.removeEventListener("error",H),this.destroyed){g();return}P?(this._messageHandler=F,this._port=c,this._webWorker=c,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),c.terminate())}),F.on("ready",P=>{if(c.removeEventListener("error",H),this.destroyed){g();return}try{$()}catch{this._setupFakeWorker()}});const $=()=>{const P=new Uint8Array;F.send("test",P,[P.buffer])};$();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(F+"_worker",F,c);y.setup(g,c);const H=new _message_handler.MessageHandler(F,F+"_worker",c);this._messageHandler=H,this._readyCapability.resolve(),H.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=t(_PDFWorker,S))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var F;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const c=(F=t(this,S))==null?void 0:F.get(y.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};S=new WeakMap,U(_PDFWorker,S,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,F,g,H,$){U(this,d);U(this,w,new Map);U(this,E,new Map);U(this,m,new Map);U(this,x,null);this.messageHandler=c,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:H.ownerDocument,styleElement:H.styleElement}),this._params=H,this.canvasFactory=$.canvasFactory,this.filterFactory=$.filterFactory,this.cMapReaderFactory=$.cMapReaderFactory,this.standardFontDataFactory=$.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,F=_util.AnnotationMode.ENABLE,g=null,H=!1){let $=_util.RenderingIntentFlag.DISPLAY,P=_annotation_storage.SerializableEmpty;switch(c){case"any":$=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":$=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(F){case _util.AnnotationMode.DISABLE:$+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:$+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:$+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=($&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return H&&($+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:$,cacheKey:`${$}_${P.hash}`,annotationStorageSerializable:P}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,x))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const H of t(this,E).values())c.push(H._destroy());t(this,E).clear(),t(this,m).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return c.push(F),Promise.all(c).then(()=>{var H;this.commonObjs.clear(),this.fontLoader.clear(),t(this,w).clear(),this.filterFactory.destroy(),(H=this._networkStream)==null||H.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:F}=this;c.on("GetReader",(g,H)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=$=>{this._lastProgress={loaded:$.loaded,total:$.total}},H.onPull=()=>{this._fullReader.read().then(function({value:$,done:P}){if(P){H.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array($),1,[$])}).catch($=>{H.error($)})},H.onCancel=$=>{this._fullReader.cancel($),H.ready.catch(P=>{if(!this.destroyed)throw P})}}),c.on("ReaderHeadersReady",g=>{const H=new _util.PromiseCapability,$=this._fullReader;return $.headersReady.then(()=>{var P;(!$.isStreamingSupported||!$.isRangeSupported)&&(this._lastProgress&&((P=F.onProgress)==null||P.call(F,this._lastProgress)),$.onProgress=q=>{var et;(et=F.onProgress)==null||et.call(F,{loaded:q.loaded,total:q.total})}),H.resolve({isStreamingSupported:$.isStreamingSupported,isRangeSupported:$.isRangeSupported,contentLength:$.contentLength})},H.reject),H.promise}),c.on("GetRangeReader",(g,H)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const $=this._networkStream.getRangeReader(g.begin,g.end);if(!$){H.close();return}H.onPull=()=>{$.read().then(function({value:P,done:q}){if(q){H.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),H.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{H.error(P)})},H.onCancel=P=>{$.cancel(P),H.ready.catch(q=>{if(!this.destroyed)throw q})}}),c.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(g,this))}),c.on("DocException",function(g){let H;switch(g.name){case"PasswordException":H=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":H=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":H=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":H=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":H=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(H)}),c.on("PasswordRequest",g=>{if(it(this,x,new _util.PromiseCapability),F.onPassword){const H=$=>{$ instanceof Error?t(this,x).reject($):t(this,x).resolve({password:$})};try{F.onPassword(H,g.code)}catch($){t(this,x).reject($)}}else t(this,x).reject(new _util.PasswordException(g.message,g.code));return t(this,x).promise}),c.on("DataLoaded",g=>{var H;(H=F.onProgress)==null||H.call(F,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),c.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,E).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),c.on("commonobj",([g,H,$])=>{var P;if(!this.destroyed&&!this.commonObjs.has(g))switch(H){case"Font":const q=this._params;if("error"in $){const z=$.error;(0,_util.warn)(`Error during font loading: ${z}`),this.commonObjs.resolve(g,z);break}const et=q.pdfBug&&((P=globalThis.FontInspector)!=null&&P.enabled)?(z,ct)=>globalThis.FontInspector.fontAdded(z,ct):null,rt=new _font_loader.FontFaceObject($,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:et});this.fontLoader.bind(rt).catch(z=>c.sendWithPromise("FontFallback",{id:g})).finally(()=>{!q.fontExtraProperties&&rt.data&&(rt.data=null),this.commonObjs.resolve(g,rt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,$);break;default:throw new Error(`Got unknown common object type ${H}`)}}),c.on("obj",([g,H,$,P])=>{var et;if(this.destroyed)return;const q=t(this,E).get(H);if(!q.objs.has(g))switch($){case"Image":if(q.objs.resolve(g,P),P){let rt;if(P.bitmap){const{width:z,height:ct}=P;rt=z*ct*4}else rt=((et=P.data)==null?void 0:et.length)||0;rt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(g,P);break;default:throw new Error(`Got unknown object type ${$}`)}}),c.on("DocProgress",g=>{var H;this.destroyed||(H=F.onProgress)==null||H.call(F,{loaded:g.loaded,total:g.total})}),c.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:c,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:c,filename:((g=this._fullReader)==null?void 0:g.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=c-1,g=t(this,m).get(F);if(g)return g;const H=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then($=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(F,$,this,this._params.pdfBug);return t(this,E).set(F,P),P});return t(this,m).set(F,H),H}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:F})}getFieldObjects(){return X(this,d,Se).call(this,"GetFieldObjects")}hasJSActions(){return X(this,d,Se).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,d,Se).call(this,"GetDocJSActions")}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",F=t(this,w).get(c);if(F)return F;const g=this.messageHandler.sendWithPromise(c,null).then(H=>{var $,P;return{info:H[0],metadata:H[1]?new _metadata.Metadata(H[1]):null,contentDispositionFilename:(($=this._fullReader)==null?void 0:$.filename)??null,contentLength:((P=this._fullReader)==null?void 0:P.contentLength)??null}});return t(this,w).set(c,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of t(this,E).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),t(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:F})}}w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakSet,Se=function(c,F=null){const g=t(this,w).get(c);if(g)return g;const H=this.messageHandler.sendWithPromise(c,F);return t(this,w).set(c,H),H};class PDFObjects{constructor(){U(this,C);U(this,R,Object.create(null))}get(c,F=null){if(F){const H=X(this,C,Ne).call(this,c);return H.capability.promise.then(()=>F(H.data)),null}const g=t(this,R)[c];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return g.data}has(c){const F=t(this,R)[c];return(F==null?void 0:F.capability.settled)||!1}resolve(c,F=null){const g=X(this,C,Ne).call(this,c);g.data=F,g.capability.resolve()}clear(){var c;for(const F in t(this,R)){const{data:g}=t(this,R)[F];(c=g==null?void 0:g.bitmap)==null||c.close()}it(this,R,Object.create(null))}}R=new WeakMap,C=new WeakSet,Ne=function(c){var F;return(F=t(this,R))[c]||(F[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){U(this,i,null);it(this,i,c),this.onContinue=null}get promise(){return t(this,i).capability.promise}cancel(c=0){t(this,i).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=t(this,i).operatorList;if(!c)return!1;const{annotationCanvasMap:F}=t(this,i);return c.form||c.canvas&&(F==null?void 0:F.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;const D=class D{constructor({callback:c,params:F,objs:g,commonObjs:H,annotationCanvasMap:$,operatorList:P,pageIndex:q,canvasFactory:et,filterFactory:rt,useRequestAnimationFrame:z=!1,pdfBug:ct=!1,pageColors:mt=null}){this.callback=c,this.params=F,this.objs=g,this.commonObjs=H,this.annotationCanvasMap=$,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=q,this.canvasFactory=et,this.filterFactory=rt,this._pdfBug=ct,this.pageColors=mt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=z===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:F}){var q,et;if(this.cancelled)return;if(this._canvas){if(t(D,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(D,l).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:H,transform:$,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:$,viewport:H,transparency:c,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,(et=this.graphicsReadyCallback)==null||et.call(this)}cancel(c=null,F=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),t(D,l).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(D,l).delete(this._canvas),this.callback())))}};l=new WeakMap,U(D,l,new WeakSet);let InternalRenderTask=D;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(j,s,L)=>{var v,p,S,ys,E;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var o=L(1),u=L(4),W=L(8);const O=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=O;class at{constructor(){U(this,S);U(this,v,!1);U(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(x,d){const b=t(this,p).get(x);return b===void 0?d:Object.assign(d,b)}getRawValue(x){return t(this,p).get(x)}remove(x){if(t(this,p).delete(x),t(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of t(this,p).values())if(d instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(x,d){const b=t(this,p).get(x);let R=!1;if(b!==void 0)for(const[C,A]of Object.entries(d))b[C]!==A&&(R=!0,b[C]=A);else R=!0,t(this,p).set(x,d);R&&X(this,S,ys).call(this),d instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(x){return t(this,p).has(x)}getAll(){return t(this,p).size>0?(0,o.objectFromMap)(t(this,p)):null}setAll(x){for(const[d,b]of Object.entries(x))this.setValue(d,b)}get size(){return t(this,p).size}resetModified(){t(this,v)&&(it(this,v,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(t(this,p).size===0)return O;const x=new Map,d=new W.MurmurHash3_64,b=[],R=Object.create(null);let C=!1;for(const[A,i]of t(this,p)){const l=i instanceof u.AnnotationEditor?i.serialize(!1,R):i;l&&(x.set(A,l),d.update(`${A}:${JSON.stringify(l)}`),C||(C=!!l.bitmap))}if(C)for(const A of x.values())A.bitmap&&b.push(A.bitmap);return x.size>0?{map:x,hash:d.hexdigest(),transfers:b}:O}}v=new WeakMap,p=new WeakMap,S=new WeakSet,ys=function(){t(this,v)||(it(this,v,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=at;class M extends at{constructor(d){super();U(this,E,void 0);const{map:b,hash:R,transfers:C}=d.serializable,A=structuredClone(b,C?{transfer:C}:null);it(this,E,{map:A,hash:R,transfers:C})}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,E)}}E=new WeakMap,s.PrintAnnotationStorage=M},(j,s,L)=>{var M,v,p,S,w,E,m,x,d,b,R,C,A,i,l,Be,y,Ue,F,We,H,He,P,Es,et,vs,z,As,mt,Ge,_t,_s;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var o=L(5),u=L(1),W=L(6);const a=class a{constructor(n){U(this,l);U(this,y);U(this,H);U(this,P);U(this,et);U(this,z);U(this,mt);U(this,_t);U(this,M,"");U(this,v,!1);U(this,p,null);U(this,S,null);U(this,w,null);U(this,E,!1);U(this,m,null);U(this,x,this.focusin.bind(this));U(this,d,this.focusout.bind(this));U(this,b,!1);U(this,R,!1);U(this,C,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);U(this,A,!1);U(this,i,a._zIndex++);this.constructor===a&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null,this._uiManager=n.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=n.isCentered,this._structTreeParentId=null;const{rotation:h,rawDims:{pageWidth:f,pageHeight:T,pageX:I,pageY:G}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[f,T],this.pageTranslation=[I,G];const[nt,Q]=this.parentDimensions;this.x=n.x/nt,this.y=n.y/Q,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(n){const h=new at({id:n.parent.getNextId(),parent:n.parent,uiManager:n._uiManager});h.annotationElementId=n.annotationElementId,h.deleted=!0,h._uiManager.addToAnnotationStorage(h)}static initialize(n,h=null){if(a._l10nPromise||(a._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(T=>[T,n.get(T)]))),h!=null&&h.strings)for(const T of h.strings)a._l10nPromise.set(T,n.get(T));if(a._borderLineWidth!==-1)return;const f=getComputedStyle(document.documentElement);a._borderLineWidth=parseFloat(f.getPropertyValue("--outline-width"))||0}static updateDefaultParams(n,h){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(n){return!1}static paste(n,h){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,A)}set _isDraggable(n){var h;it(this,A,n),(h=this.div)==null||h.classList.toggle("draggable",n)}center(){const[n,h]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*h/(n*2),this.y+=this.width*n/(h*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*h/(n*2),this.y-=this.width*n/(h*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(n){this._uiManager.addCommands(n)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,i)}setParent(n){n!==null&&(this.pageIndex=n.pageIndex,this.pageDimensions=n.pageDimensions),this.parent=n}focusin(n){this._focusEventsAllowed&&(t(this,b)?it(this,b,!1):this.parent.setSelected(this))}focusout(n){var f;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const h=n.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(n.preventDefault(),(f=this.parent)!=null&&f.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(n,h,f,T){const[I,G]=this.parentDimensions;[f,T]=this.screenToPageTranslation(f,T),this.x=(n+f)/I,this.y=(h+T)/G,this.fixAndSetPosition()}translate(n,h){X(this,l,Be).call(this,this.parentDimensions,n,h)}translateInPage(n,h){X(this,l,Be).call(this,this.pageDimensions,n,h),this.div.scrollIntoView({block:"nearest"})}drag(n,h){const[f,T]=this.parentDimensions;if(this.x+=n/f,this.y+=h/T,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:ht}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,ht)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:I,y:G}=this;const[nt,Q]=X(this,y,Ue).call(this);I+=nt,G+=Q,this.div.style.left=`${(100*I).toFixed(2)}%`,this.div.style.top=`${(100*G).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[n,h]=this.pageDimensions;let{x:f,y:T,width:I,height:G}=this;switch(I*=n,G*=h,f*=n,T*=h,this.rotation){case 0:f=Math.max(0,Math.min(n-I,f)),T=Math.max(0,Math.min(h-G,T));break;case 90:f=Math.max(0,Math.min(n-G,f)),T=Math.min(h,Math.max(I,T));break;case 180:f=Math.min(n,Math.max(I,f)),T=Math.min(h,Math.max(G,T));break;case 270:f=Math.min(n,Math.max(G,f)),T=Math.max(0,Math.min(h-I,T));break}this.x=f/=n,this.y=T/=h;const[nt,Q]=X(this,y,Ue).call(this);f+=nt,T+=Q;const{style:ot}=this.div;ot.left=`${(100*f).toFixed(2)}%`,ot.top=`${(100*T).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(n,h){var f;return X(f=a,F,We).call(f,n,h,this.parentRotation)}pageTranslationToScreen(n,h){var f;return X(f=a,F,We).call(f,n,h,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:n,pageDimensions:[h,f]}=this,T=h*n,I=f*n;return u.FeatureTest.isCSSRoundSupported?[Math.round(T),Math.round(I)]:[T,I]}setDims(n,h){var I;const[f,T]=this.parentDimensions;this.div.style.width=`${(100*n/f).toFixed(2)}%`,t(this,E)||(this.div.style.height=`${(100*h/T).toFixed(2)}%`),(I=t(this,p))==null||I.classList.toggle("small",n<a.SMALL_EDITOR_SIZE||h<a.SMALL_EDITOR_SIZE)}fixDims(){const{style:n}=this.div,{height:h,width:f}=n,T=f.endsWith("%"),I=!t(this,E)&&h.endsWith("%");if(T&&I)return;const[G,nt]=this.parentDimensions;T||(n.width=`${(100*parseFloat(f)/G).toFixed(2)}%`),!t(this,E)&&!I&&(n.height=`${(100*parseFloat(h)/nt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,p))return;const n=it(this,p,document.createElement("button"));n.className="altText";const h=await a._l10nPromise.get("editor_alt_text_button_label");n.textContent=h,n.setAttribute("aria-label",h),n.tabIndex="0",n.addEventListener("contextmenu",W.noContextMenu),n.addEventListener("pointerdown",f=>f.stopPropagation()),n.addEventListener("click",f=>{f.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),n.addEventListener("keydown",f=>{f.target===n&&f.key==="Enter"&&(f.preventDefault(),this._uiManager.editAltText(this))}),X(this,mt,Ge).call(this),this.div.append(n),a.SMALL_EDITOR_SIZE||(a.SMALL_EDITOR_SIZE=Math.min(128,Math.round(n.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,M),decorative:t(this,v)}}set altTextData({altText:n,decorative:h}){t(this,M)===n&&t(this,v)===h||(it(this,M,n),it(this,v,h),X(this,mt,Ge).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,x)),this.div.addEventListener("focusout",t(this,d));const[n,h]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*h/n).toFixed(2)}%`,this.div.style.maxHeight=`${(100*n/h).toFixed(2)}%`);const[f,T]=this.getInitialTranslation();return this.translate(f,T),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(n){const{isMac:h}=u.FeatureTest.platform;if(n.button!==0||n.ctrlKey&&h){n.preventDefault();return}it(this,b,!0),X(this,_t,_s).call(this,n)}moveInDOM(){var n;(n=this.parent)==null||n.moveEditorInDOM(this)}_setParentAndPosition(n,h,f){n.changeParent(this),this.x=h,this.y=f,this.fixAndSetPosition()}getRect(n,h){const f=this.parentScale,[T,I]=this.pageDimensions,[G,nt]=this.pageTranslation,Q=n/f,ot=h/f,ht=this.x*T,ft=this.y*I,dt=this.width*T,Ct=this.height*I;switch(this.rotation){case 0:return[ht+Q+G,I-ft-ot-Ct+nt,ht+Q+dt+G,I-ft-ot+nt];case 90:return[ht+ot+G,I-ft+Q+nt,ht+ot+Ct+G,I-ft+Q+dt+nt];case 180:return[ht-Q-dt+G,I-ft+ot+nt,ht-Q+G,I-ft+ot+Ct+nt];case 270:return[ht-ot-Ct+G,I-ft-Q-dt+nt,ht-ot+G,I-ft-Q+nt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(n,h){const[f,T,I,G]=n,nt=I-f,Q=G-T;switch(this.rotation){case 0:return[f,h-G,nt,Q];case 90:return[f,h-T,Q,nt];case 180:return[I,h-T,nt,Q];case 270:return[I,h-G,Q,nt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){it(this,C,!0)}disableEditMode(){it(this,C,!1)}isInEditMode(){return t(this,C)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var n,h;(n=this.div)==null||n.addEventListener("focusin",t(this,x)),(h=this.div)==null||h.addEventListener("focusout",t(this,d))}serialize(n=!1,h=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(n,h,f){const T=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:f});T.rotation=n.rotation;const[I,G]=T.pageDimensions,[nt,Q,ot,ht]=T.getRectInCurrentCoords(n.rect,G);return T.x=nt/I,T.y=Q/G,T.width=ot/I,T.height=ht/G,T}remove(){var n;this.div.removeEventListener("focusin",t(this,x)),this.div.removeEventListener("focusout",t(this,d)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(n=t(this,p))==null||n.remove(),it(this,p,null),it(this,S,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,P,Es).call(this),t(this,m).classList.remove("hidden"))}select(){var n;this.makeResizable(),(n=this.div)==null||n.classList.add("selectedEditor")}unselect(){var n,h,f;(n=t(this,m))==null||n.classList.add("hidden"),(h=this.div)==null||h.classList.remove("selectedEditor"),(f=this.div)!=null&&f.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(n,h){}disableEditing(){t(this,p)&&(t(this,p).hidden=!0)}enableEditing(){t(this,p)&&(t(this,p).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,R)}set isEditing(n){it(this,R,n),this.parent&&(n?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(n,h){it(this,E,!0);const f=n/h,{style:T}=this.div;T.aspectRatio=f,T.height="auto"}static get MIN_SIZE(){return 16}};M=new WeakMap,v=new WeakMap,p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakMap,R=new WeakMap,C=new WeakMap,A=new WeakMap,i=new WeakMap,l=new WeakSet,Be=function([n,h],f,T){[f,T]=this.screenToPageTranslation(f,T),this.x+=f/n,this.y+=T/h,this.fixAndSetPosition()},y=new WeakSet,Ue=function(){const[n,h]=this.parentDimensions,{_borderLineWidth:f}=a,T=f/n,I=f/h;switch(this.rotation){case 90:return[-T,I];case 180:return[T,I];case 270:return[T,-I];default:return[-T,-I]}},F=new WeakSet,We=function(n,h,f){switch(f){case 90:return[h,-n];case 180:return[-n,-h];case 270:return[-h,n];default:return[n,h]}},H=new WeakSet,He=function(n){switch(n){case 90:{const[h,f]=this.pageDimensions;return[0,-h/f,f/h,0]}case 180:return[-1,0,0,-1];case 270:{const[h,f]=this.pageDimensions;return[0,h/f,-f/h,0]}default:return[1,0,0,1]}},P=new WeakSet,Es=function(){if(t(this,m))return;it(this,m,document.createElement("div")),t(this,m).classList.add("resizers");const n=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||n.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const h of n){const f=document.createElement("div");t(this,m).append(f),f.classList.add("resizer",h),f.addEventListener("pointerdown",X(this,et,vs).bind(this,h)),f.addEventListener("contextmenu",W.noContextMenu)}this.div.prepend(t(this,m))},et=new WeakSet,vs=function(n,h){h.preventDefault();const{isMac:f}=u.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&f)return;const T=X(this,z,As).bind(this,n),I=this._isDraggable;this._isDraggable=!1;const G={passive:!0,capture:!0};window.addEventListener("pointermove",T,G);const nt=this.x,Q=this.y,ot=this.width,ht=this.height,ft=this.parent.div.style.cursor,dt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(h.target).cursor;const Ct=()=>{this._isDraggable=I,window.removeEventListener("pointerup",Ct),window.removeEventListener("blur",Ct),window.removeEventListener("pointermove",T,G),this.parent.div.style.cursor=ft,this.div.style.cursor=dt;const Dt=this.x,vt=this.y,Ft=this.width,gt=this.height;Dt===nt&&vt===Q&&Ft===ot&&gt===ht||this.addCommands({cmd:()=>{this.width=Ft,this.height=gt,this.x=Dt,this.y=vt;const[st,Z]=this.parentDimensions;this.setDims(st*Ft,Z*gt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=ht,this.x=nt,this.y=Q;const[st,Z]=this.parentDimensions;this.setDims(st*ot,Z*ht),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ct),window.addEventListener("blur",Ct)},z=new WeakSet,As=function(n,h){const[f,T]=this.parentDimensions,I=this.x,G=this.y,nt=this.width,Q=this.height,ot=a.MIN_SIZE/f,ht=a.MIN_SIZE/T,ft=bt=>Math.round(bt*1e4)/1e4,dt=X(this,H,He).call(this,this.rotation),Ct=(bt,Et)=>[dt[0]*bt+dt[2]*Et,dt[1]*bt+dt[3]*Et],Dt=X(this,H,He).call(this,360-this.rotation),vt=(bt,Et)=>[Dt[0]*bt+Dt[2]*Et,Dt[1]*bt+Dt[3]*Et];let Ft,gt,st=!1,Z=!1;switch(n){case"topLeft":st=!0,Ft=(bt,Et)=>[0,0],gt=(bt,Et)=>[bt,Et];break;case"topMiddle":Ft=(bt,Et)=>[bt/2,0],gt=(bt,Et)=>[bt/2,Et];break;case"topRight":st=!0,Ft=(bt,Et)=>[bt,0],gt=(bt,Et)=>[0,Et];break;case"middleRight":Z=!0,Ft=(bt,Et)=>[bt,Et/2],gt=(bt,Et)=>[0,Et/2];break;case"bottomRight":st=!0,Ft=(bt,Et)=>[bt,Et],gt=(bt,Et)=>[0,0];break;case"bottomMiddle":Ft=(bt,Et)=>[bt/2,Et],gt=(bt,Et)=>[bt/2,0];break;case"bottomLeft":st=!0,Ft=(bt,Et)=>[0,Et],gt=(bt,Et)=>[bt,0];break;case"middleLeft":Z=!0,Ft=(bt,Et)=>[0,Et/2],gt=(bt,Et)=>[bt,Et/2];break}const pt=Ft(nt,Q),Rt=gt(nt,Q);let wt=Ct(...Rt);const Ut=ft(I+wt[0]),$t=ft(G+wt[1]);let Wt=1,Gt=1,[zt,Bt]=this.screenToPageTranslation(h.movementX,h.movementY);if([zt,Bt]=vt(zt/f,Bt/T),st){const bt=Math.hypot(nt,Q);Wt=Gt=Math.max(Math.min(Math.hypot(Rt[0]-pt[0]-zt,Rt[1]-pt[1]-Bt)/bt,1/nt,1/Q),ot/nt,ht/Q)}else Z?Wt=Math.max(ot,Math.min(1,Math.abs(Rt[0]-pt[0]-zt)))/nt:Gt=Math.max(ht,Math.min(1,Math.abs(Rt[1]-pt[1]-Bt)))/Q;const Xt=ft(nt*Wt),ut=ft(Q*Gt);wt=Ct(...gt(Xt,ut));const tt=Ut-wt[0],Y=$t-wt[1];this.width=Xt,this.height=ut,this.x=tt,this.y=Y,this.setDims(f*Xt,T*ut),this.fixAndSetPosition()},mt=new WeakSet,Ge=async function(){var f;const n=t(this,p);if(!n)return;if(!t(this,M)&&!t(this,v)){n.classList.remove("done"),(f=t(this,S))==null||f.remove();return}a._l10nPromise.get("editor_alt_text_edit_button_label").then(T=>{n.setAttribute("aria-label",T)});let h=t(this,S);if(!h){it(this,S,h=document.createElement("span")),h.className="tooltip",h.setAttribute("role","tooltip");const T=h.id=`alt-text-tooltip-${this.id}`;n.setAttribute("aria-describedby",T);const I=100;n.addEventListener("mouseenter",()=>{it(this,w,setTimeout(()=>{it(this,w,null),t(this,S).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},I))}),n.addEventListener("mouseleave",()=>{var G;clearTimeout(t(this,w)),it(this,w,null),(G=t(this,S))==null||G.classList.remove("show")})}n.classList.add("done"),h.innerText=t(this,v)?await a._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,M),h.parentNode||n.append(h)},_t=new WeakSet,_s=function(n){if(!this._isDraggable)return;const h=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let f,T;h&&(f={passive:!0,capture:!0},T=G=>{const[nt,Q]=this.screenToPageTranslation(G.movementX,G.movementY);this._uiManager.dragSelectedEditors(nt,Q)},window.addEventListener("pointermove",T,f));const I=()=>{if(window.removeEventListener("pointerup",I),window.removeEventListener("blur",I),h&&window.removeEventListener("pointermove",T,f),it(this,b,!1),!this._uiManager.endDragSession()){const{isMac:G}=u.FeatureTest.platform;n.ctrlKey&&!G||n.shiftKey||n.metaKey&&G?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",I),window.addEventListener("blur",I)},U(a,F),ee(a,"_borderLineWidth",-1),ee(a,"_colorManager",new o.ColorManager),ee(a,"_zIndex",1),ee(a,"SMALL_EDITOR_SIZE",0);let O=a;s.AnnotationEditor=O;class at extends O{constructor(n){super(n),this.annotationElementId=n.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(j,s,L)=>{var E,m,x,d,b,$e,A,i,l,D,y,Ss,g,H,$,P,q,et,rt,z,ct,mt,At,_t,k,a,e,n,h,f,T,I,G,nt,Q,ot,ht,ft,dt,Ct,Dt,vt,Ft,gt,st,Z,pt,Rs,wt,ze,$t,Ve,Gt,Re,Bt,qe,ut,Xe,Y,re,Et,ge,Zt,ws,St,Cs,Tt,Ye,Nt,xe,yt,Ke;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=W,s.opacityToHex=O;var o=L(1),u=L(6);function W(N,r,_){for(const B of _)r.addEventListener(B,N[B].bind(N))}function O(N){return Math.round(Math.min(255,Math.max(1,255*N))).toString(16).padStart(2,"0")}class at{constructor(){U(this,E,0)}getId(){return`${o.AnnotationEditorPrefix}${me(this,E)._++}`}}E=new WeakMap;const C=class C{constructor(){U(this,b);U(this,m,(0,o.getUuid)());U(this,x,0);U(this,d,null)}static get _isSVGFittingCanvas(){const r='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',B=new OffscreenCanvas(1,3).getContext("2d"),V=new Image;V.src=r;const K=V.decode().then(()=>(B.drawImage(V,0,0,1,1,0,0,1,3),new Uint32Array(B.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",K)}async getFromFile(r){const{lastModified:_,name:B,size:V,type:K}=r;return X(this,b,$e).call(this,`${_}_${B}_${V}_${K}`,r)}async getFromUrl(r){return X(this,b,$e).call(this,r,r)}async getFromId(r){t(this,d)||it(this,d,new Map);const _=t(this,d).get(r);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(r){const _=t(this,d).get(r);return _!=null&&_.isSvg?_.svgUrl:null}deleteId(r){t(this,d)||it(this,d,new Map);const _=t(this,d).get(r);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(r){return r.startsWith(`image_${t(this,m)}_`)}};m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakSet,$e=async function(r,_){t(this,d)||it(this,d,new Map);let B=t(this,d).get(r);if(B===null)return null;if(B!=null&&B.bitmap)return B.refCounter+=1,B;try{B||(B={bitmap:null,id:`image_${t(this,m)}_${me(this,x)._++}`,refCounter:0,isSvg:!1});let V;if(typeof _=="string"){B.url=_;const K=await fetch(_);if(!K.ok)throw new Error(K.statusText);V=await K.blob()}else V=B.file=_;if(V.type==="image/svg+xml"){const K=C._isSVGFittingCanvas,lt=new FileReader,xt=new Image,jt=new Promise((Pt,Vt)=>{xt.onload=()=>{B.bitmap=xt,B.isSvg=!0,Pt()},lt.onload=async()=>{const kt=B.svgUrl=lt.result;xt.src=await K?`${kt}#svgView(preserveAspectRatio(none))`:kt},xt.onerror=lt.onerror=Vt});lt.readAsDataURL(V),await jt}else B.bitmap=await createImageBitmap(V);B.refCounter=1}catch(V){console.error(V),B=null}return t(this,d).set(r,B),B&&t(this,d).set(B.id,B),B};let M=C;class v{constructor(r=128){U(this,A,[]);U(this,i,!1);U(this,l,void 0);U(this,D,-1);it(this,l,r)}add({cmd:r,undo:_,mustExec:B,type:V=NaN,overwriteIfSameType:K=!1,keepUndo:lt=!1}){if(B&&r(),t(this,i))return;const xt={cmd:r,undo:_,type:V};if(t(this,D)===-1){t(this,A).length>0&&(t(this,A).length=0),it(this,D,0),t(this,A).push(xt);return}if(K&&t(this,A)[t(this,D)].type===V){lt&&(xt.undo=t(this,A)[t(this,D)].undo),t(this,A)[t(this,D)]=xt;return}const jt=t(this,D)+1;jt===t(this,l)?t(this,A).splice(0,1):(it(this,D,jt),jt<t(this,A).length&&t(this,A).splice(jt)),t(this,A).push(xt)}undo(){t(this,D)!==-1&&(it(this,i,!0),t(this,A)[t(this,D)].undo(),it(this,i,!1),it(this,D,t(this,D)-1))}redo(){t(this,D)<t(this,A).length-1&&(it(this,D,t(this,D)+1),it(this,i,!0),t(this,A)[t(this,D)].cmd(),it(this,i,!1))}hasSomethingToUndo(){return t(this,D)!==-1}hasSomethingToRedo(){return t(this,D)<t(this,A).length-1}destroy(){it(this,A,null)}}A=new WeakMap,i=new WeakMap,l=new WeakMap,D=new WeakMap,s.CommandManager=v;class p{constructor(r){U(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=o.FeatureTest.platform;for(const[B,V,K={}]of r)for(const lt of B){const xt=lt.startsWith("mac+");_&&xt?(this.callbacks.set(lt.slice(4),{callback:V,options:K}),this.allKeys.add(lt.split("+").at(-1))):!_&&!xt&&(this.callbacks.set(lt,{callback:V,options:K}),this.allKeys.add(lt.split("+").at(-1)))}}exec(r,_){if(!this.allKeys.has(_.key))return;const B=this.callbacks.get(X(this,y,Ss).call(this,_));if(!B)return;const{callback:V,options:{bubbles:K=!1,args:lt=[],checker:xt=null}}=B;xt&&!xt(r,_)||(V.bind(r,...lt)(),K||(_.stopPropagation(),_.preventDefault()))}}y=new WeakSet,Ss=function(r){r.altKey&&this.buffer.push("alt"),r.ctrlKey&&this.buffer.push("ctrl"),r.metaKey&&this.buffer.push("meta"),r.shiftKey&&this.buffer.push("shift"),this.buffer.push(r.key);const _=this.buffer.join("+");return this.buffer.length=0,_},s.KeyboardManager=p;const F=class F{get _colors(){const r=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(r),(0,o.shadow)(this,"_colors",r)}convert(r){const _=(0,u.getRGB)(r);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[B,V]of this._colors)if(V.every((K,lt)=>K===_[lt]))return F._colorsMapping.get(B);return _}getHexCode(r){const _=this._colors.get(r);return _?o.Util.makeHexColor(..._):r}};ee(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let S=F;s.ColorManager=S;const Lt=class Lt{constructor(r,_,B,V,K,lt){U(this,pt);U(this,wt);U(this,$t);U(this,Gt);U(this,Bt);U(this,ut);U(this,Y);U(this,Et);U(this,Zt);U(this,St);U(this,Tt);U(this,Nt);U(this,yt);U(this,g,null);U(this,H,new Map);U(this,$,new Map);U(this,P,null);U(this,q,null);U(this,et,new v);U(this,rt,0);U(this,z,new Set);U(this,ct,null);U(this,mt,null);U(this,At,new Set);U(this,_t,null);U(this,k,new at);U(this,a,!1);U(this,e,!1);U(this,n,null);U(this,h,o.AnnotationEditorType.NONE);U(this,f,new Set);U(this,T,null);U(this,I,this.blur.bind(this));U(this,G,this.focus.bind(this));U(this,nt,this.copy.bind(this));U(this,Q,this.cut.bind(this));U(this,ot,this.paste.bind(this));U(this,ht,this.keydown.bind(this));U(this,ft,this.onEditingAction.bind(this));U(this,dt,this.onPageChanging.bind(this));U(this,Ct,this.onScaleChanging.bind(this));U(this,Dt,this.onRotationChanging.bind(this));U(this,vt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});U(this,Ft,[0,0]);U(this,gt,null);U(this,st,null);U(this,Z,null);it(this,st,r),it(this,Z,_),it(this,P,B),this._eventBus=V,this._eventBus._on("editingaction",t(this,ft)),this._eventBus._on("pagechanging",t(this,dt)),this._eventBus._on("scalechanging",t(this,Ct)),this._eventBus._on("rotationchanging",t(this,Dt)),it(this,q,K.annotationStorage),it(this,_t,K.filterFactory),it(this,T,lt),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const r=Lt.prototype,_=K=>{const{activeElement:lt}=document;return lt&&t(K,st).contains(lt)&&K.hasSomethingToControl()},B=this.TRANSLATE_SMALL,V=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],r.selectAll],[["ctrl+z","mac+meta+z"],r.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],r.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],r.delete],[["Escape","mac+Escape"],r.unselectAll],[["ArrowLeft","mac+ArrowLeft"],r.translateSelectedEditors,{args:[-B,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],r.translateSelectedEditors,{args:[-V,0],checker:_}],[["ArrowRight","mac+ArrowRight"],r.translateSelectedEditors,{args:[B,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],r.translateSelectedEditors,{args:[V,0],checker:_}],[["ArrowUp","mac+ArrowUp"],r.translateSelectedEditors,{args:[0,-B],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],r.translateSelectedEditors,{args:[0,-V],checker:_}],[["ArrowDown","mac+ArrowDown"],r.translateSelectedEditors,{args:[0,B],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],r.translateSelectedEditors,{args:[0,V],checker:_}]]))}destroy(){X(this,Gt,Re).call(this),X(this,wt,ze).call(this),this._eventBus._off("editingaction",t(this,ft)),this._eventBus._off("pagechanging",t(this,dt)),this._eventBus._off("scalechanging",t(this,Ct)),this._eventBus._off("rotationchanging",t(this,Dt));for(const r of t(this,$).values())r.destroy();t(this,$).clear(),t(this,H).clear(),t(this,At).clear(),it(this,g,null),t(this,f).clear(),t(this,et).destroy(),t(this,P).destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",t(this,T)?t(this,_t).addHCMFilter(t(this,T).foreground,t(this,T).background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(t(this,st)).direction)}editAltText(r){var _;(_=t(this,P))==null||_.editAltText(this,r)}onPageChanging({pageNumber:r}){it(this,rt,r-1)}focusMainContainer(){t(this,st).focus()}findParent(r,_){for(const B of t(this,$).values()){const{x:V,y:K,width:lt,height:xt}=B.div.getBoundingClientRect();if(r>=V&&r<=V+lt&&_>=K&&_<=K+xt)return B}return null}disableUserSelect(r=!1){t(this,Z).classList.toggle("noUserSelect",r)}addShouldRescale(r){t(this,At).add(r)}removeShouldRescale(r){t(this,At).delete(r)}onScaleChanging({scale:r}){this.commitOrRemove(),this.viewParameters.realScale=r*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of t(this,At))_.onScaleChanging()}onRotationChanging({pagesRotation:r}){this.commitOrRemove(),this.viewParameters.rotation=r}addToAnnotationStorage(r){!r.isEmpty()&&t(this,q)&&!t(this,q).has(r.id)&&t(this,q).setValue(r.id,r)}blur(){if(!this.hasSelection)return;const{activeElement:r}=document;for(const _ of t(this,f))if(_.div.contains(r)){it(this,n,[_,r]),_._focusEventsAllowed=!1;break}}focus(){if(!t(this,n))return;const[r,_]=t(this,n);it(this,n,null),_.addEventListener("focusin",()=>{r._focusEventsAllowed=!0},{once:!0}),_.focus()}addEditListeners(){X(this,$t,Ve).call(this),X(this,Bt,qe).call(this)}removeEditListeners(){X(this,Gt,Re).call(this),X(this,ut,Xe).call(this)}copy(r){var B;if(r.preventDefault(),(B=t(this,g))==null||B.commitOrRemove(),!this.hasSelection)return;const _=[];for(const V of t(this,f)){const K=V.serialize(!0);K&&_.push(K)}_.length!==0&&r.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(r){this.copy(r),this.delete()}paste(r){r.preventDefault();const{clipboardData:_}=r;for(const K of _.items)for(const lt of t(this,mt))if(lt.isHandlingMimeForPasting(K.type)){lt.paste(K,this.currentLayer);return}let B=_.getData("application/pdfjs");if(!B)return;try{B=JSON.parse(B)}catch(K){(0,o.warn)(`paste: "${K.message}".`);return}if(!Array.isArray(B))return;this.unselectAll();const V=this.currentLayer;try{const K=[];for(const jt of B){const Pt=V.deserialize(jt);if(!Pt)return;K.push(Pt)}const lt=()=>{for(const jt of K)X(this,Tt,Ye).call(this,jt);X(this,yt,Ke).call(this,K)},xt=()=>{for(const jt of K)jt.remove()};this.addCommands({cmd:lt,undo:xt,mustExec:!0})}catch(K){(0,o.warn)(`paste: "${K.message}".`)}}keydown(r){var _;(_=this.getActive())!=null&&_.shouldGetKeyboardEvents()||Lt._keyboardManager.exec(this,r)}onEditingAction(r){["undo","redo","delete","selectAll"].includes(r.name)&&this[r.name]()}setEditingState(r){r?(X(this,pt,Rs).call(this),X(this,$t,Ve).call(this),X(this,Bt,qe).call(this),X(this,Y,re).call(this,{isEditing:t(this,h)!==o.AnnotationEditorType.NONE,isEmpty:X(this,Nt,xe).call(this),hasSomethingToUndo:t(this,et).hasSomethingToUndo(),hasSomethingToRedo:t(this,et).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,wt,ze).call(this),X(this,Gt,Re).call(this),X(this,ut,Xe).call(this),X(this,Y,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(r){if(!t(this,mt)){it(this,mt,r);for(const _ of t(this,mt))X(this,Et,ge).call(this,_.defaultPropertiesToUpdate)}}getId(){return t(this,k).getId()}get currentLayer(){return t(this,$).get(t(this,rt))}getLayer(r){return t(this,$).get(r)}get currentPageIndex(){return t(this,rt)}addLayer(r){t(this,$).set(r.pageIndex,r),t(this,a)?r.enable():r.disable()}removeLayer(r){t(this,$).delete(r.pageIndex)}updateMode(r,_=null){if(t(this,h)!==r){if(it(this,h,r),r===o.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,St,Cs).call(this);return}this.setEditingState(!0),X(this,Zt,ws).call(this),this.unselectAll();for(const B of t(this,$).values())B.updateMode(r);if(_){for(const B of t(this,H).values())if(B.annotationElementId===_){this.setSelected(B),B.enterInEditMode();break}}}}updateToolbar(r){r!==t(this,h)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:r})}updateParams(r,_){if(t(this,mt)){if(r===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(r);return}for(const B of t(this,f))B.updateParams(r,_);for(const B of t(this,mt))B.updateDefaultParams(r,_)}}enableWaiting(r=!1){if(t(this,e)!==r){it(this,e,r);for(const _ of t(this,$).values())r?_.disableClick():_.enableClick(),_.div.classList.toggle("waiting",r)}}getEditors(r){const _=[];for(const B of t(this,H).values())B.pageIndex===r&&_.push(B);return _}getEditor(r){return t(this,H).get(r)}addEditor(r){t(this,H).set(r.id,r)}removeEditor(r){var _;t(this,H).delete(r.id),this.unselect(r),(!r.annotationElementId||!t(this,z).has(r.annotationElementId))&&((_=t(this,q))==null||_.remove(r.id))}addDeletedAnnotationElement(r){t(this,z).add(r.annotationElementId),r.deleted=!0}isDeletedAnnotationElement(r){return t(this,z).has(r)}removeDeletedAnnotationElement(r){t(this,z).delete(r.annotationElementId),r.deleted=!1}setActiveEditor(r){t(this,g)!==r&&(it(this,g,r),r&&X(this,Et,ge).call(this,r.propertiesToUpdate))}toggleSelected(r){if(t(this,f).has(r)){t(this,f).delete(r),r.unselect(),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,f).add(r),r.select(),X(this,Et,ge).call(this,r.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}setSelected(r){for(const _ of t(this,f))_!==r&&_.unselect();t(this,f).clear(),t(this,f).add(r),r.select(),X(this,Et,ge).call(this,r.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}isSelected(r){return t(this,f).has(r)}unselect(r){r.unselect(),t(this,f).delete(r),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,f).size!==0}undo(){t(this,et).undo(),X(this,Y,re).call(this,{hasSomethingToUndo:t(this,et).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,Nt,xe).call(this)})}redo(){t(this,et).redo(),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,et).hasSomethingToRedo(),isEmpty:X(this,Nt,xe).call(this)})}addCommands(r){t(this,et).add(r),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,Nt,xe).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const r=[...t(this,f)],_=()=>{for(const V of r)V.remove()},B=()=>{for(const V of r)X(this,Tt,Ye).call(this,V)};this.addCommands({cmd:_,undo:B,mustExec:!0})}commitOrRemove(){var r;(r=t(this,g))==null||r.commitOrRemove()}hasSomethingToControl(){return t(this,g)||this.hasSelection}selectAll(){for(const r of t(this,f))r.commit();X(this,yt,Ke).call(this,t(this,H).values())}unselectAll(){if(t(this,g)){t(this,g).commitOrRemove();return}if(this.hasSelection){for(const r of t(this,f))r.unselect();t(this,f).clear(),X(this,Y,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(r,_,B=!1){if(B||this.commitOrRemove(),!this.hasSelection)return;t(this,Ft)[0]+=r,t(this,Ft)[1]+=_;const[V,K]=t(this,Ft),lt=[...t(this,f)],xt=1e3;t(this,gt)&&clearTimeout(t(this,gt)),it(this,gt,setTimeout(()=>{it(this,gt,null),t(this,Ft)[0]=t(this,Ft)[1]=0,this.addCommands({cmd:()=>{for(const jt of lt)t(this,H).has(jt.id)&&jt.translateInPage(V,K)},undo:()=>{for(const jt of lt)t(this,H).has(jt.id)&&jt.translateInPage(-V,-K)},mustExec:!1})},xt));for(const jt of lt)jt.translateInPage(r,_)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),it(this,ct,new Map);for(const r of t(this,f))t(this,ct).set(r,{savedX:r.x,savedY:r.y,savedPageIndex:r.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ct))return!1;this.disableUserSelect(!1);const r=t(this,ct);it(this,ct,null);let _=!1;for(const[{x:V,y:K,pageIndex:lt},xt]of r)xt.newX=V,xt.newY=K,xt.newPageIndex=lt,_||(_=V!==xt.savedX||K!==xt.savedY||lt!==xt.savedPageIndex);if(!_)return!1;const B=(V,K,lt,xt)=>{if(t(this,H).has(V.id)){const jt=t(this,$).get(xt);jt?V._setParentAndPosition(jt,K,lt):(V.pageIndex=xt,V.x=K,V.y=lt)}};return this.addCommands({cmd:()=>{for(const[V,{newX:K,newY:lt,newPageIndex:xt}]of r)B(V,K,lt,xt)},undo:()=>{for(const[V,{savedX:K,savedY:lt,savedPageIndex:xt}]of r)B(V,K,lt,xt)},mustExec:!0}),!0}dragSelectedEditors(r,_){if(t(this,ct))for(const B of t(this,ct).keys())B.drag(r,_)}rebuild(r){if(r.parent===null){const _=this.getLayer(r.pageIndex);_?(_.changeParent(r),_.addOrRebuild(r)):(this.addEditor(r),this.addToAnnotationStorage(r),r.rebuild())}else r.parent.addOrRebuild(r)}isActive(r){return t(this,g)===r}getActive(){return t(this,g)}getMode(){return t(this,h)}get imageManager(){return(0,o.shadow)(this,"imageManager",new M)}};g=new WeakMap,H=new WeakMap,$=new WeakMap,P=new WeakMap,q=new WeakMap,et=new WeakMap,rt=new WeakMap,z=new WeakMap,ct=new WeakMap,mt=new WeakMap,At=new WeakMap,_t=new WeakMap,k=new WeakMap,a=new WeakMap,e=new WeakMap,n=new WeakMap,h=new WeakMap,f=new WeakMap,T=new WeakMap,I=new WeakMap,G=new WeakMap,nt=new WeakMap,Q=new WeakMap,ot=new WeakMap,ht=new WeakMap,ft=new WeakMap,dt=new WeakMap,Ct=new WeakMap,Dt=new WeakMap,vt=new WeakMap,Ft=new WeakMap,gt=new WeakMap,st=new WeakMap,Z=new WeakMap,pt=new WeakSet,Rs=function(){window.addEventListener("focus",t(this,G)),window.addEventListener("blur",t(this,I))},wt=new WeakSet,ze=function(){window.removeEventListener("focus",t(this,G)),window.removeEventListener("blur",t(this,I))},$t=new WeakSet,Ve=function(){window.addEventListener("keydown",t(this,ht),{capture:!0})},Gt=new WeakSet,Re=function(){window.removeEventListener("keydown",t(this,ht),{capture:!0})},Bt=new WeakSet,qe=function(){document.addEventListener("copy",t(this,nt)),document.addEventListener("cut",t(this,Q)),document.addEventListener("paste",t(this,ot))},ut=new WeakSet,Xe=function(){document.removeEventListener("copy",t(this,nt)),document.removeEventListener("cut",t(this,Q)),document.removeEventListener("paste",t(this,ot))},Y=new WeakSet,re=function(r){Object.entries(r).some(([B,V])=>t(this,vt)[B]!==V)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,vt),r)})},Et=new WeakSet,ge=function(r){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:r})},Zt=new WeakSet,ws=function(){if(!t(this,a)){it(this,a,!0);for(const r of t(this,$).values())r.enable()}},St=new WeakSet,Cs=function(){if(this.unselectAll(),t(this,a)){it(this,a,!1);for(const r of t(this,$).values())r.disable()}},Tt=new WeakSet,Ye=function(r){const _=t(this,$).get(r.pageIndex);_?_.addOrRebuild(r):this.addEditor(r)},Nt=new WeakSet,xe=function(){if(t(this,H).size===0)return!0;if(t(this,H).size===1)for(const r of t(this,H).values())return r.isEmpty();return!1},yt=new WeakSet,Ke=function(r){t(this,f).clear();for(const _ of r)_.isEmpty()||(t(this,f).add(_),_.select());X(this,Y,re).call(this,{hasSelectedEditor:!0})},ee(Lt,"TRANSLATE_SMALL",1),ee(Lt,"TRANSLATE_BIG",10);let w=Lt;s.AnnotationEditorUIManager=w},(j,s,L)=>{var rt,z,ct,mt,At,_t,k,a,e,n,h,f,de,I,ue,nt,Qe,ot,we,ft,Ce,Ct,be,vt,ye;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=D,s.getColorValues=H,s.getCurrentTransform=$,s.getCurrentTransformInverse=P,s.getFilenameFromUrl=b,s.getPdfFilenameFromUrl=R,s.getRGB=g,s.getXfaPageViewport=F,s.isDataScheme=x,s.isPdfFile=d,s.isValidFetchUrl=A,s.loadScript=l,s.noContextMenu=i,s.setLayerDimensions=q;var o=L(7),u=L(1);const W="http://www.w3.org/2000/svg",et=class et{};ee(et,"CSS",96),ee(et,"PDF",72),ee(et,"PDF_TO_CSS_UNITS",et.CSS/et.PDF);let O=et;s.PixelsPerInch=O;class at extends o.BaseFilterFactory{constructor({docId:Z,ownerDocument:pt=globalThis.document}={}){super();U(this,f);U(this,I);U(this,nt);U(this,ot);U(this,ft);U(this,Ct);U(this,vt);U(this,rt,void 0);U(this,z,void 0);U(this,ct,void 0);U(this,mt,void 0);U(this,At,void 0);U(this,_t,void 0);U(this,k,void 0);U(this,a,void 0);U(this,e,void 0);U(this,n,void 0);U(this,h,0);it(this,ct,Z),it(this,mt,pt)}addFilter(Z){if(!Z)return"none";let pt=t(this,f,de).get(Z);if(pt)return pt;let Rt,wt,Ut,$t;if(Z.length===1){const Bt=Z[0],Xt=new Array(256);for(let ut=0;ut<256;ut++)Xt[ut]=Bt[ut]/255;$t=Rt=wt=Ut=Xt.join(",")}else{const[Bt,Xt,ut]=Z,tt=new Array(256),Y=new Array(256),bt=new Array(256);for(let Et=0;Et<256;Et++)tt[Et]=Bt[Et]/255,Y[Et]=Xt[Et]/255,bt[Et]=ut[Et]/255;Rt=tt.join(","),wt=Y.join(","),Ut=bt.join(","),$t=`${Rt}${wt}${Ut}`}if(pt=t(this,f,de).get($t),pt)return t(this,f,de).set(Z,pt),pt;const Wt=`g_${t(this,ct)}_transfer_map_${me(this,h)._++}`,Gt=`url(#${Wt})`;t(this,f,de).set(Z,Gt),t(this,f,de).set($t,Gt);const zt=X(this,ot,we).call(this,Wt);return X(this,Ct,be).call(this,Rt,wt,Ut,zt),Gt}addHCMFilter(Z,pt){var Xt;const Rt=`${Z}-${pt}`;if(t(this,_t)===Rt)return t(this,k);if(it(this,_t,Rt),it(this,k,"none"),(Xt=t(this,At))==null||Xt.remove(),!Z||!pt)return t(this,k);const wt=X(this,vt,ye).call(this,Z);Z=u.Util.makeHexColor(...wt);const Ut=X(this,vt,ye).call(this,pt);if(pt=u.Util.makeHexColor(...Ut),t(this,I,ue).style.color="",Z==="#000000"&&pt==="#ffffff"||Z===pt)return t(this,k);const $t=new Array(256);for(let ut=0;ut<=255;ut++){const tt=ut/255;$t[ut]=tt<=.03928?tt/12.92:((tt+.055)/1.055)**2.4}const Wt=$t.join(","),Gt=`g_${t(this,ct)}_hcm_filter`,zt=it(this,a,X(this,ot,we).call(this,Gt));X(this,Ct,be).call(this,Wt,Wt,Wt,zt),X(this,nt,Qe).call(this,zt);const Bt=(ut,tt)=>{const Y=wt[ut]/255,bt=Ut[ut]/255,Et=new Array(tt+1);for(let te=0;te<=tt;te++)Et[te]=Y+te/tt*(bt-Y);return Et.join(",")};return X(this,Ct,be).call(this,Bt(0,5),Bt(1,5),Bt(2,5),zt),it(this,k,`url(#${Gt})`),t(this,k)}addHighlightHCMFilter(Z,pt,Rt,wt){var bt;const Ut=`${Z}-${pt}-${Rt}-${wt}`;if(t(this,e)===Ut)return t(this,n);if(it(this,e,Ut),it(this,n,"none"),(bt=t(this,a))==null||bt.remove(),!Z||!pt)return t(this,n);const[$t,Wt]=[Z,pt].map(X(this,vt,ye).bind(this));let Gt=Math.round(.2126*$t[0]+.7152*$t[1]+.0722*$t[2]),zt=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),[Bt,Xt]=[Rt,wt].map(X(this,vt,ye).bind(this));zt<Gt&&([Gt,zt,Bt,Xt]=[zt,Gt,Xt,Bt]),t(this,I,ue).style.color="";const ut=(Et,te,Zt)=>{const J=new Array(256),St=(zt-Gt)/Zt,It=Et/255,Tt=(te-Et)/(255*Zt);let Ot=0;for(let Nt=0;Nt<=Zt;Nt++){const Qt=Math.round(Gt+Nt*St),yt=It+Nt*Tt;for(let Yt=Ot;Yt<=Qt;Yt++)J[Yt]=yt;Ot=Qt+1}for(let Nt=Ot;Nt<256;Nt++)J[Nt]=J[Ot-1];return J.join(",")},tt=`g_${t(this,ct)}_hcm_highlight_filter`,Y=it(this,a,X(this,ot,we).call(this,tt));return X(this,nt,Qe).call(this,Y),X(this,Ct,be).call(this,ut(Bt[0],Xt[0],5),ut(Bt[1],Xt[1],5),ut(Bt[2],Xt[2],5),Y),it(this,n,`url(#${tt})`),t(this,n)}destroy(Z=!1){Z&&(t(this,k)||t(this,n))||(t(this,z)&&(t(this,z).parentNode.parentNode.remove(),it(this,z,null)),t(this,rt)&&(t(this,rt).clear(),it(this,rt,null)),it(this,h,0))}}rt=new WeakMap,z=new WeakMap,ct=new WeakMap,mt=new WeakMap,At=new WeakMap,_t=new WeakMap,k=new WeakMap,a=new WeakMap,e=new WeakMap,n=new WeakMap,h=new WeakMap,f=new WeakSet,de=function(){return t(this,rt)||it(this,rt,new Map)},I=new WeakSet,ue=function(){if(!t(this,z)){const Z=t(this,mt).createElement("div"),{style:pt}=Z;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Rt=t(this,mt).createElementNS(W,"svg");Rt.setAttribute("width",0),Rt.setAttribute("height",0),it(this,z,t(this,mt).createElementNS(W,"defs")),Z.append(Rt),Rt.append(t(this,z)),t(this,mt).body.append(Z)}return t(this,z)},nt=new WeakSet,Qe=function(Z){const pt=t(this,mt).createElementNS(W,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Z.append(pt)},ot=new WeakSet,we=function(Z){const pt=t(this,mt).createElementNS(W,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",Z),t(this,I,ue).append(pt),pt},ft=new WeakSet,Ce=function(Z,pt,Rt){const wt=t(this,mt).createElementNS(W,pt);wt.setAttribute("type","discrete"),wt.setAttribute("tableValues",Rt),Z.append(wt)},Ct=new WeakSet,be=function(Z,pt,Rt,wt){const Ut=t(this,mt).createElementNS(W,"feComponentTransfer");wt.append(Ut),X(this,ft,Ce).call(this,Ut,"feFuncR",Z),X(this,ft,Ce).call(this,Ut,"feFuncG",pt),X(this,ft,Ce).call(this,Ut,"feFuncB",Rt)},vt=new WeakSet,ye=function(Z){return t(this,I,ue).style.color=Z,g(getComputedStyle(t(this,I,ue)).getPropertyValue("color"))},s.DOMFilterFactory=at;class M extends o.BaseCanvasFactory{constructor({ownerDocument:st=globalThis.document}={}){super(),this._document=st}_createCanvas(st,Z){const pt=this._document.createElement("canvas");return pt.width=st,pt.height=Z,pt}}s.DOMCanvasFactory=M;async function v(gt,st=!1){if(A(gt,document.baseURI)){const Z=await fetch(gt);if(!Z.ok)throw new Error(Z.statusText);return st?new Uint8Array(await Z.arrayBuffer()):(0,u.stringToBytes)(await Z.text())}return new Promise((Z,pt)=>{const Rt=new XMLHttpRequest;Rt.open("GET",gt,!0),st&&(Rt.responseType="arraybuffer"),Rt.onreadystatechange=()=>{if(Rt.readyState===XMLHttpRequest.DONE){if(Rt.status===200||Rt.status===0){let wt;if(st&&Rt.response?wt=new Uint8Array(Rt.response):!st&&Rt.responseText&&(wt=(0,u.stringToBytes)(Rt.responseText)),wt){Z(wt);return}}pt(new Error(Rt.statusText))}},Rt.send(null)})}class p extends o.BaseCMapReaderFactory{_fetchData(st,Z){return v(st,this.isCompressed).then(pt=>({cMapData:pt,compressionType:Z}))}}s.DOMCMapReaderFactory=p;class S extends o.BaseStandardFontDataFactory{_fetchData(st){return v(st,!0)}}s.DOMStandardFontDataFactory=S;class w extends o.BaseSVGFactory{_createSVG(st){return document.createElementNS(W,st)}}s.DOMSVGFactory=w;class E{constructor({viewBox:st,scale:Z,rotation:pt,offsetX:Rt=0,offsetY:wt=0,dontFlip:Ut=!1}){this.viewBox=st,this.scale=Z,this.rotation=pt,this.offsetX=Rt,this.offsetY=wt;const $t=(st[2]+st[0])/2,Wt=(st[3]+st[1])/2;let Gt,zt,Bt,Xt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:Gt=-1,zt=0,Bt=0,Xt=1;break;case 90:Gt=0,zt=1,Bt=1,Xt=0;break;case 270:Gt=0,zt=-1,Bt=-1,Xt=0;break;case 0:Gt=1,zt=0,Bt=0,Xt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Bt=-Bt,Xt=-Xt);let ut,tt,Y,bt;Gt===0?(ut=Math.abs(Wt-st[1])*Z+Rt,tt=Math.abs($t-st[0])*Z+wt,Y=(st[3]-st[1])*Z,bt=(st[2]-st[0])*Z):(ut=Math.abs($t-st[0])*Z+Rt,tt=Math.abs(Wt-st[1])*Z+wt,Y=(st[2]-st[0])*Z,bt=(st[3]-st[1])*Z),this.transform=[Gt*Z,zt*Z,Bt*Z,Xt*Z,ut-Gt*Z*$t-Bt*Z*Wt,tt-zt*Z*$t-Xt*Z*Wt],this.width=Y,this.height=bt}get rawDims(){const{viewBox:st}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:st[2]-st[0],pageHeight:st[3]-st[1],pageX:st[0],pageY:st[1]})}clone({scale:st=this.scale,rotation:Z=this.rotation,offsetX:pt=this.offsetX,offsetY:Rt=this.offsetY,dontFlip:wt=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:st,rotation:Z,offsetX:pt,offsetY:Rt,dontFlip:wt})}convertToViewportPoint(st,Z){return u.Util.applyTransform([st,Z],this.transform)}convertToViewportRectangle(st){const Z=u.Util.applyTransform([st[0],st[1]],this.transform),pt=u.Util.applyTransform([st[2],st[3]],this.transform);return[Z[0],Z[1],pt[0],pt[1]]}convertToPdfPoint(st,Z){return u.Util.applyInverseTransform([st,Z],this.transform)}}s.PageViewport=E;class m extends u.BaseException{constructor(st,Z=0){super(st,"RenderingCancelledException"),this.extraDelay=Z}}s.RenderingCancelledException=m;function x(gt){const st=gt.length;let Z=0;for(;Z<st&&gt[Z].trim()==="";)Z++;return gt.substring(Z,Z+5).toLowerCase()==="data:"}function d(gt){return typeof gt=="string"&&/\.pdf$/i.test(gt)}function b(gt,st=!1){return st||([gt]=gt.split(/[#?]/,1)),gt.substring(gt.lastIndexOf("/")+1)}function R(gt,st="document.pdf"){if(typeof gt!="string")return st;if(x(gt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),st;const Z=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Rt=Z.exec(gt);let wt=pt.exec(Rt[1])||pt.exec(Rt[2])||pt.exec(Rt[3]);if(wt&&(wt=wt[0],wt.includes("%")))try{wt=pt.exec(decodeURIComponent(wt))[0]}catch{}return wt||st}class C{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(st){st in this.started&&(0,u.warn)(`Timer is already running for ${st}`),this.started[st]=Date.now()}timeEnd(st){st in this.started||(0,u.warn)(`Timer has not been started for ${st}`),this.times.push({name:st,start:this.started[st],end:Date.now()}),delete this.started[st]}toString(){const st=[];let Z=0;for(const{name:pt}of this.times)Z=Math.max(pt.length,Z);for(const{name:pt,start:Rt,end:wt}of this.times)st.push(`${pt.padEnd(Z)} ${wt-Rt}ms
`);return st.join("")}}s.StatTimer=C;function A(gt,st){try{const{protocol:Z}=st?new URL(gt,st):new URL(gt);return Z==="http:"||Z==="https:"}catch{return!1}}function i(gt){gt.preventDefault()}function l(gt,st=!1){return new Promise((Z,pt)=>{const Rt=document.createElement("script");Rt.src=gt,Rt.onload=function(wt){st&&Rt.remove(),Z(wt)},Rt.onerror=function(){pt(new Error(`Cannot load script at: ${Rt.src}`))},(document.head||document.documentElement).append(Rt)})}function D(gt){console.log("Deprecated API usage: "+gt)}let y;class c{static toDateObject(st){if(!st||typeof st!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Z=y.exec(st);if(!Z)return null;const pt=parseInt(Z[1],10);let Rt=parseInt(Z[2],10);Rt=Rt>=1&&Rt<=12?Rt-1:0;let wt=parseInt(Z[3],10);wt=wt>=1&&wt<=31?wt:1;let Ut=parseInt(Z[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let $t=parseInt(Z[5],10);$t=$t>=0&&$t<=59?$t:0;let Wt=parseInt(Z[6],10);Wt=Wt>=0&&Wt<=59?Wt:0;const Gt=Z[7]||"Z";let zt=parseInt(Z[8],10);zt=zt>=0&&zt<=23?zt:0;let Bt=parseInt(Z[9],10)||0;return Bt=Bt>=0&&Bt<=59?Bt:0,Gt==="-"?(Ut+=zt,$t+=Bt):Gt==="+"&&(Ut-=zt,$t-=Bt),new Date(Date.UTC(pt,Rt,wt,Ut,$t,Wt))}}s.PDFDateString=c;function F(gt,{scale:st=1,rotation:Z=0}){const{width:pt,height:Rt}=gt.attributes.style,wt=[0,0,parseInt(pt),parseInt(Rt)];return new E({viewBox:wt,scale:st,rotation:Z})}function g(gt){if(gt.startsWith("#")){const st=parseInt(gt.slice(1),16);return[(st&16711680)>>16,(st&65280)>>8,st&255]}return gt.startsWith("rgb(")?gt.slice(4,-1).split(",").map(st=>parseInt(st)):gt.startsWith("rgba(")?gt.slice(5,-1).split(",").map(st=>parseInt(st)).slice(0,3):((0,u.warn)(`Not a valid color format: "${gt}"`),[0,0,0])}function H(gt){const st=document.createElement("span");st.style.visibility="hidden",document.body.append(st);for(const Z of gt.keys()){st.style.color=Z;const pt=window.getComputedStyle(st).color;gt.set(Z,g(pt))}st.remove()}function $(gt){const{a:st,b:Z,c:pt,d:Rt,e:wt,f:Ut}=gt.getTransform();return[st,Z,pt,Rt,wt,Ut]}function P(gt){const{a:st,b:Z,c:pt,d:Rt,e:wt,f:Ut}=gt.getTransform().invertSelf();return[st,Z,pt,Rt,wt,Ut]}function q(gt,st,Z=!1,pt=!0){if(st instanceof E){const{pageWidth:Rt,pageHeight:wt}=st.rawDims,{style:Ut}=gt,$t=u.FeatureTest.isCSSRoundSupported,Wt=`var(--scale-factor) * ${Rt}px`,Gt=`var(--scale-factor) * ${wt}px`,zt=$t?`round(${Wt}, 1px)`:`calc(${Wt})`,Bt=$t?`round(${Gt}, 1px)`:`calc(${Gt})`;!Z||st.rotation%180===0?(Ut.width=zt,Ut.height=Bt):(Ut.width=Bt,Ut.height=zt)}pt&&gt.setAttribute("data-main-rotation",st.rotation)}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var o=L(1);class u{constructor(){this.constructor===u&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,S){return"none"}addHighlightHCMFilter(p,S,w,E){return"none"}destroy(p=!1){}}s.BaseFilterFactory=u;class W{constructor(){this.constructor===W&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,S){if(p<=0||S<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(p,S);return{canvas:w,context:w.getContext("2d")}}reset(p,S,w){if(!p.canvas)throw new Error("Canvas is not specified");if(S<=0||w<=0)throw new Error("Invalid canvas size");p.canvas.width=S,p.canvas.height=w}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,S){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=W;class O{constructor({baseUrl:p=null,isCompressed:S=!0}){this.constructor===O&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=S}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const S=this.baseUrl+p+(this.isCompressed?".bcmap":""),w=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(S,w).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${S}`)})}_fetchData(p,S){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=O;class at{constructor({baseUrl:p=null}){this.constructor===at&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const S=`${this.baseUrl}${p}`;return this._fetchData(S).catch(w=>{throw new Error(`Unable to load font data at: ${S}`)})}_fetchData(p){(0,o.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=at;class M{constructor(){this.constructor===M&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,S,w=!1){if(p<=0||S<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),w||(E.setAttribute("width",`${p}px`),E.setAttribute("height",`${S}px`)),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${p} ${S}`),E}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,o.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=M},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var o=L(1);const u=3285377520,W=4294901760,O=65535;class at{constructor(v){this.h1=v?v&4294967295:u,this.h2=v?v&4294967295:u}update(v){let p,S;if(typeof v=="string"){p=new Uint8Array(v.length*2),S=0;for(let D=0,y=v.length;D<y;D++){const c=v.charCodeAt(D);c<=255?p[S++]=c:(p[S++]=c>>>8,p[S++]=c&255)}}else if((0,o.isArrayBuffer)(v))p=v.slice(),S=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const w=S>>2,E=S-w*4,m=new Uint32Array(p.buffer,0,w);let x=0,d=0,b=this.h1,R=this.h2;const C=3432918353,A=461845907,i=C&O,l=A&O;for(let D=0;D<w;D++)D&1?(x=m[D],x=x*C&W|x*i&O,x=x<<15|x>>>17,x=x*A&W|x*l&O,b^=x,b=b<<13|b>>>19,b=b*5+3864292196):(d=m[D],d=d*C&W|d*i&O,d=d<<15|d>>>17,d=d*A&W|d*l&O,R^=d,R=R<<13|R>>>19,R=R*5+3864292196);switch(x=0,E){case 3:x^=p[w*4+2]<<16;case 2:x^=p[w*4+1]<<8;case 1:x^=p[w*4],x=x*C&W|x*i&O,x=x<<15|x>>>17,x=x*A&W|x*l&O,w&1?b^=x:R^=x}this.h1=b,this.h2=R}hexdigest(){let v=this.h1,p=this.h2;return v^=p>>>1,v=v*3981806797&W|v*36045&O,p=p*4283543511&W|((p<<16|v>>>16)*2950163797&W)>>>16,v^=p>>>1,v=v*444984403&W|v*60499&O,p=p*3301882366&W|((p<<16|v>>>16)*3120437893&W)>>>16,v^=p>>>1,(v>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=at},(j,s,L)=>{var O;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var o=L(1);class u{constructor({ownerDocument:M=globalThis.document,styleElement:v=null}){U(this,O,new Set);this._document=M,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(M){this.nativeFontFaces.add(M),this._document.fonts.add(M)}removeNativeFontFace(M){this.nativeFontFaces.delete(M),this._document.fonts.delete(M)}insertRule(M){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(M,v.cssRules.length)}clear(){for(const M of this.nativeFontFaces)this._document.fonts.delete(M);this.nativeFontFaces.clear(),t(this,O).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(M){if(!(!M||t(this,O).has(M.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:v,src:p,style:S}=M,w=new FontFace(v,p,S);this.addNativeFontFace(w);try{await w.load(),t(this,O).add(v)}catch{(0,o.warn)(`Cannot load system font: ${M.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(w)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(M){if(M.attached||M.missingFile&&!M.systemFontInfo)return;if(M.attached=!0,M.systemFontInfo){await this.loadSystemFont(M.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=M.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(S){throw(0,o.warn)(`Failed to load font '${p.family}': '${S}'.`),M.disableFontFace=!0,S}}return}const v=M.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const S=this._queueLoadingCallback(p);this._prepareFontLoadEvent(M,S)})}}get isFontLoadingAPISupported(){var v;const M=!!((v=this._document)!=null&&v.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",M)}get isSyncFontLoadingSupported(){let M=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(M=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",M)}_queueLoadingCallback(M){function v(){for((0,o.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;p.length>0&&p[0].done;){const w=p.shift();setTimeout(w.callback,0)}}const{loadingRequests:p}=this,S={done:!1,complete:v,callback:M};return p.push(S),S}get _loadTestFont(){const M=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",M)}_prepareFontLoadEvent(M,v){function p(g,H){return g.charCodeAt(H)<<24|g.charCodeAt(H+1)<<16|g.charCodeAt(H+2)<<8|g.charCodeAt(H+3)&255}function S(g,H,$,P){const q=g.substring(0,H),et=g.substring(H+$);return q+P+et}let w,E;const m=this._document.createElement("canvas");m.width=1,m.height=1;const x=m.getContext("2d");let d=0;function b(g,H){if(++d>30){(0,o.warn)("Load test font never loaded."),H();return}if(x.font="30px "+g,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0){H();return}setTimeout(b.bind(null,g,H))}const R=`lt${Date.now()}${this.loadTestFontId++}`;let C=this._loadTestFont;C=S(C,976,R.length,R);const i=16,l=1482184792;let D=p(C,i);for(w=0,E=R.length-3;w<E;w+=4)D=D-l+p(R,w)|0;w<R.length&&(D=D-l+p(R+"XXX",w)|0),C=S(C,i,4,(0,o.string32)(D));const y=`url(data:font/opentype;base64,${btoa(C)});`,c=`@font-face {font-family:"${R}";src:${y}}`;this.insertRule(c);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const g of[M.loadedName,R]){const H=this._document.createElement("span");H.textContent="Hi",H.style.fontFamily=g,F.append(H)}this._document.body.append(F),b(R,()=>{F.remove(),v.complete()})}}O=new WeakMap,s.FontLoader=u;class W{constructor(M,{isEvalSupported:v=!0,disableFontFace:p=!1,ignoreErrors:S=!1,inspectFont:w=null}){this.compiledGlyphs=Object.create(null);for(const E in M)this[E]=M[E];this.isEvalSupported=v!==!1,this.disableFontFace=p===!0,this.ignoreErrors=S===!0,this._inspectFont=w}createNativeFontFace(){var v;if(!this.data||this.disableFontFace)return null;let M;if(!this.cssFontInfo)M=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),M=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(v=this._inspectFont)==null||v.call(this,this),M}createFontFaceRule(){var S;if(!this.data||this.disableFontFace)return null;const M=(0,o.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(M)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let w=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(w+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${w}src:${v}}`}return(S=this._inspectFont)==null||S.call(this,this,v),p}getPathGenerator(M,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let p;try{p=M.get(this.loadedName+"_path_"+v)}catch(S){if(!this.ignoreErrors)throw S;return(0,o.warn)(`getPathGenerator - ignoring character: "${S}".`),this.compiledGlyphs[v]=function(w,E){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const S=[];for(const w of p){const E=w.args!==void 0?w.args.join(","):"";S.push("c.",w.cmd,"(",E,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",S.join(""))}return this.compiledGlyphs[v]=function(S,w){for(const E of p)E.cmd==="scale"&&(E.args=[w,-w]),S[E.cmd].apply(S,E.args)}}}s.FontFaceObject=W},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var o=L(7);L(1);const u=function(v){return new Promise((p,S)=>{require$$5.readFile(v,(E,m)=>{if(E||!m){S(new Error(E));return}p(new Uint8Array(m))})})};class W extends o.BaseFilterFactory{}s.NodeFilterFactory=W;class O extends o.BaseCanvasFactory{_createCanvas(p,S){return require$$5.createCanvas(p,S)}}s.NodeCanvasFactory=O;class at extends o.BaseCMapReaderFactory{_fetchData(p,S){return u(p).then(w=>({cMapData:w,compressionType:S}))}}s.NodeCMapReaderFactory=at;class M extends o.BaseStandardFontDataFactory{_fetchData(p){return u(p)}}s.NodeStandardFontDataFactory=M},(j,s,L)=>{var z,Je,mt,Ze;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var o=L(1),u=L(6),W=L(12),O=L(13);const at=16,M=100,v=4096,p=15,S=10,w=1e3,E=16;function m(k,a){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){a.save(),this.__originalSave()},k.restore=function(){a.restore(),this.__originalRestore()},k.translate=function(n,h){a.translate(n,h),this.__originalTranslate(n,h)},k.scale=function(n,h){a.scale(n,h),this.__originalScale(n,h)},k.transform=function(n,h,f,T,I,G){a.transform(n,h,f,T,I,G),this.__originalTransform(n,h,f,T,I,G)},k.setTransform=function(n,h,f,T,I,G){a.setTransform(n,h,f,T,I,G),this.__originalSetTransform(n,h,f,T,I,G)},k.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},k.rotate=function(n){a.rotate(n),this.__originalRotate(n)},k.clip=function(n){a.clip(n),this.__originalClip(n)},k.moveTo=function(e,n){a.moveTo(e,n),this.__originalMoveTo(e,n)},k.lineTo=function(e,n){a.lineTo(e,n),this.__originalLineTo(e,n)},k.bezierCurveTo=function(e,n,h,f,T,I){a.bezierCurveTo(e,n,h,f,T,I),this.__originalBezierCurveTo(e,n,h,f,T,I)},k.rect=function(e,n,h,f){a.rect(e,n,h,f),this.__originalRect(e,n,h,f)},k.closePath=function(){a.closePath(),this.__originalClosePath()},k.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}class x{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,e,n){let h;return this.cache[a]!==void 0?(h=this.cache[a],this.canvasFactory.reset(h,e,n)):(h=this.canvasFactory.create(e,n),this.cache[a]=h),h}delete(a){delete this.cache[a]}clear(){for(const a in this.cache){const e=this.cache[a];this.canvasFactory.destroy(e),delete this.cache[a]}}}function d(k,a,e,n,h,f,T,I,G,nt){const[Q,ot,ht,ft,dt,Ct]=(0,u.getCurrentTransform)(k);if(ot===0&&ht===0){const Ft=T*Q+dt,gt=Math.round(Ft),st=I*ft+Ct,Z=Math.round(st),pt=(T+G)*Q+dt,Rt=Math.abs(Math.round(pt)-gt)||1,wt=(I+nt)*ft+Ct,Ut=Math.abs(Math.round(wt)-Z)||1;return k.setTransform(Math.sign(Q),0,0,Math.sign(ft),gt,Z),k.drawImage(a,e,n,h,f,0,0,Rt,Ut),k.setTransform(Q,ot,ht,ft,dt,Ct),[Rt,Ut]}if(Q===0&&ft===0){const Ft=I*ht+dt,gt=Math.round(Ft),st=T*ot+Ct,Z=Math.round(st),pt=(I+nt)*ht+dt,Rt=Math.abs(Math.round(pt)-gt)||1,wt=(T+G)*ot+Ct,Ut=Math.abs(Math.round(wt)-Z)||1;return k.setTransform(0,Math.sign(ot),Math.sign(ht),0,gt,Z),k.drawImage(a,e,n,h,f,0,0,Ut,Rt),k.setTransform(Q,ot,ht,ft,dt,Ct),[Ut,Rt]}k.drawImage(a,e,n,h,f,T,I,G,nt);const Dt=Math.hypot(Q,ot),vt=Math.hypot(ht,ft);return[Dt*G,vt*nt]}function b(k){const{width:a,height:e}=k;if(a>w||e>w)return null;const n=1e3,h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),f=a+1;let T=new Uint8Array(f*(e+1)),I,G,nt;const Q=a+7&-8;let ot=new Uint8Array(Q*e),ht=0;for(const vt of k.data){let Ft=128;for(;Ft>0;)ot[ht++]=vt&Ft?0:255,Ft>>=1}let ft=0;for(ht=0,ot[ht]!==0&&(T[0]=1,++ft),G=1;G<a;G++)ot[ht]!==ot[ht+1]&&(T[G]=ot[ht]?2:1,++ft),ht++;for(ot[ht]!==0&&(T[G]=2,++ft),I=1;I<e;I++){ht=I*Q,nt=I*f,ot[ht-Q]!==ot[ht]&&(T[nt]=ot[ht]?1:8,++ft);let vt=(ot[ht]?4:0)+(ot[ht-Q]?8:0);for(G=1;G<a;G++)vt=(vt>>2)+(ot[ht+1]?4:0)+(ot[ht-Q+1]?8:0),h[vt]&&(T[nt+G]=h[vt],++ft),ht++;if(ot[ht-Q]!==ot[ht]&&(T[nt+G]=ot[ht]?2:4,++ft),ft>n)return null}for(ht=Q*(e-1),nt=I*f,ot[ht]!==0&&(T[nt]=8,++ft),G=1;G<a;G++)ot[ht]!==ot[ht+1]&&(T[nt+G]=ot[ht]?4:8,++ft),ht++;if(ot[ht]!==0&&(T[nt+G]=4,++ft),ft>n)return null;const dt=new Int32Array([0,f,-1,0,-f,0,0,0,1]),Ct=new Path2D;for(I=0;ft&&I<=e;I++){let vt=I*f;const Ft=vt+a;for(;vt<Ft&&!T[vt];)vt++;if(vt===Ft)continue;Ct.moveTo(vt%f,I);const gt=vt;let st=T[vt];do{const Z=dt[st];do vt+=Z;while(!T[vt]);const pt=T[vt];pt!==5&&pt!==10?(st=pt,T[vt]=0):(st=pt&51*st>>4,T[vt]&=st>>2|st<<2),Ct.lineTo(vt%f,vt/f|0),T[vt]||--ft}while(gt!==vt);--I}return ot=null,T=null,function(vt){vt.save(),vt.scale(1/a,-1/e),vt.translate(0,-e),vt.fill(Ct),vt.beginPath(),vt.restore()}}class R{constructor(a,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,a,e])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,e){this.x=a,this.y=e}updatePathMinMax(a,e,n){[e,n]=o.Util.applyTransform([e,n],a),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(a,e){const n=o.Util.applyTransform(e,a),h=o.Util.applyTransform(e.slice(2),a);this.minX=Math.min(this.minX,n[0],h[0]),this.minY=Math.min(this.minY,n[1],h[1]),this.maxX=Math.max(this.maxX,n[0],h[0]),this.maxY=Math.max(this.maxY,n[1],h[1])}updateScalingPathMinMax(a,e){o.Util.scaleMinMax(a,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(a,e,n,h,f,T,I,G,nt,Q){const ot=o.Util.bezierBoundingBox(e,n,h,f,T,I,G,nt);if(Q){Q[0]=Math.min(Q[0],ot[0],ot[2]),Q[1]=Math.max(Q[1],ot[0],ot[2]),Q[2]=Math.min(Q[2],ot[1],ot[3]),Q[3]=Math.max(Q[3],ot[1],ot[3]);return}this.updateRectMinMax(a,ot)}getPathBoundingBox(a=W.PathType.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(a===W.PathType.STROKE){e||(0,o.unreachable)("Stroke bounding box must include transform.");const h=o.Util.singularValueDecompose2dScale(e),f=h[0]*this.lineWidth/2,T=h[1]*this.lineWidth/2;n[0]-=f,n[1]-=T,n[2]+=f,n[3]+=T}return n}updateClipFromPath(){const a=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=W.PathType.FILL,e=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(a,e))}}function C(k,a){if(typeof ImageData<"u"&&a instanceof ImageData){k.putImageData(a,0,0);return}const e=a.height,n=a.width,h=e%E,f=(e-h)/E,T=h===0?f:f+1,I=k.createImageData(n,E);let G=0,nt;const Q=a.data,ot=I.data;let ht,ft,dt,Ct;if(a.kind===o.ImageKind.GRAYSCALE_1BPP){const Dt=Q.byteLength,vt=new Uint32Array(ot.buffer,0,ot.byteLength>>2),Ft=vt.length,gt=n+7>>3,st=4294967295,Z=o.FeatureTest.isLittleEndian?4278190080:255;for(ht=0;ht<T;ht++){for(dt=ht<f?E:h,nt=0,ft=0;ft<dt;ft++){const pt=Dt-G;let Rt=0;const wt=pt>gt?n:pt*8-7,Ut=wt&-8;let $t=0,Wt=0;for(;Rt<Ut;Rt+=8)Wt=Q[G++],vt[nt++]=Wt&128?st:Z,vt[nt++]=Wt&64?st:Z,vt[nt++]=Wt&32?st:Z,vt[nt++]=Wt&16?st:Z,vt[nt++]=Wt&8?st:Z,vt[nt++]=Wt&4?st:Z,vt[nt++]=Wt&2?st:Z,vt[nt++]=Wt&1?st:Z;for(;Rt<wt;Rt++)$t===0&&(Wt=Q[G++],$t=128),vt[nt++]=Wt&$t?st:Z,$t>>=1}for(;nt<Ft;)vt[nt++]=0;k.putImageData(I,0,ht*E)}}else if(a.kind===o.ImageKind.RGBA_32BPP){for(ft=0,Ct=n*E*4,ht=0;ht<f;ht++)ot.set(Q.subarray(G,G+Ct)),G+=Ct,k.putImageData(I,0,ft),ft+=E;ht<T&&(Ct=n*h*4,ot.set(Q.subarray(G,G+Ct)),k.putImageData(I,0,ft))}else if(a.kind===o.ImageKind.RGB_24BPP)for(dt=E,Ct=n*dt,ht=0;ht<T;ht++){for(ht>=f&&(dt=h,Ct=n*dt),nt=0,ft=Ct;ft--;)ot[nt++]=Q[G++],ot[nt++]=Q[G++],ot[nt++]=Q[G++],ot[nt++]=255;k.putImageData(I,0,ht*E)}else throw new Error(`bad image kind: ${a.kind}`)}function A(k,a){if(a.bitmap){k.drawImage(a.bitmap,0,0);return}const e=a.height,n=a.width,h=e%E,f=(e-h)/E,T=h===0?f:f+1,I=k.createImageData(n,E);let G=0;const nt=a.data,Q=I.data;for(let ot=0;ot<T;ot++){const ht=ot<f?E:h;({srcPos:G}=(0,O.convertBlackAndWhiteToRGBA)({src:nt,srcPos:G,dest:Q,width:n,height:ht,nonBlackColor:0})),k.putImageData(I,0,ot*E)}}function i(k,a){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)k[n]!==void 0&&(a[n]=k[n]);k.setLineDash!==void 0&&(a.setLineDash(k.getLineDash()),a.lineDashOffset=k.lineDashOffset)}function l(k){if(k.strokeStyle=k.fillStyle="#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0),!o.isNodeJS){const{filter:a}=k;a!=="none"&&a!==""&&(k.filter="none")}}function D(k,a,e,n){const h=k.length;for(let f=3;f<h;f+=4){const T=k[f];if(T===0)k[f-3]=a,k[f-2]=e,k[f-1]=n;else if(T<255){const I=255-T;k[f-3]=k[f-3]*T+a*I>>8,k[f-2]=k[f-2]*T+e*I>>8,k[f-1]=k[f-1]*T+n*I>>8}}}function y(k,a,e){const n=k.length,h=1/255;for(let f=3;f<n;f+=4){const T=e?e[k[f]]:k[f];a[f]=a[f]*T*h|0}}function c(k,a,e){const n=k.length;for(let h=3;h<n;h+=4){const f=k[h-3]*77+k[h-2]*152+k[h-1]*28;a[h]=e?a[h]*e[f>>8]>>8:a[h]*f>>16}}function F(k,a,e,n,h,f,T,I,G,nt,Q){const ot=!!f,ht=ot?f[0]:0,ft=ot?f[1]:0,dt=ot?f[2]:0,Ct=h==="Luminosity"?c:y,vt=Math.min(n,Math.ceil(1048576/e));for(let Ft=0;Ft<n;Ft+=vt){const gt=Math.min(vt,n-Ft),st=k.getImageData(I-nt,Ft+(G-Q),e,gt),Z=a.getImageData(I,Ft+G,e,gt);ot&&D(st.data,ht,ft,dt),Ct(st.data,Z.data,T),a.putImageData(Z,I,Ft+G)}}function g(k,a,e,n){const h=n[0],f=n[1],T=n[2]-h,I=n[3]-f;T===0||I===0||(F(a.context,e,T,I,a.subtype,a.backdrop,a.transferMap,h,f,a.offsetX,a.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(e.canvas,0,0),k.restore())}function H(k,a){const e=o.Util.singularValueDecompose2dScale(k);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return a!==void 0?a:e[0]<=n||e[1]<=n}const $=["butt","round","square"],P=["miter","round","bevel"],q={},et={},_t=class _t{constructor(a,e,n,h,f,{optionalContentConfig:T,markedContentStack:I=null},G,nt){U(this,z);U(this,mt);this.ctx=a,this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=h,this.filterFactory=f,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=T,this.cachedCanvases=new x(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=G,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=nt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,e=null){return typeof a=="string"?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):e}beginDrawing({transform:a,viewport:e,transparency:n=!1,background:h=null}){const f=this.ctx.canvas.width,T=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,f,T),this.ctx.fillStyle=I,n){const G=this.cachedCanvases.getCanvas("transparent",f,T);this.compositeCtx=this.ctx,this.transparentCanvas=G.canvas,this.ctx=G.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),a&&(this.ctx.transform(...a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(a,e,n,h){const f=a.argsArray,T=a.fnArray;let I=e||0;const G=f.length;if(G===I)return I;const nt=G-I>S&&typeof n=="function",Q=nt?Date.now()+p:0;let ot=0;const ht=this.commonObjs,ft=this.objs;let dt;for(;;){if(h!==void 0&&I===h.nextBreakPoint)return h.breakIt(I,n),I;if(dt=T[I],dt!==o.OPS.dependency)this[dt].apply(this,f[I]);else for(const Ct of f[I]){const Dt=Ct.startsWith("g_")?ht:ft;if(!Dt.has(Ct))return Dt.get(Ct,n),I}if(I++,I===G)return I;if(nt&&++ot>S){if(Date.now()>Q)return n(),I;ot=0}}}endDrawing(){X(this,z,Je).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const e of a.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);a.clear()}this._cachedBitmapsMap.clear(),X(this,mt,Ze).call(this)}_scaleImage(a,e){const n=a.width,h=a.height;let f=Math.max(Math.hypot(e[0],e[1]),1),T=Math.max(Math.hypot(e[2],e[3]),1),I=n,G=h,nt="prescale1",Q,ot;for(;f>2&&I>1||T>2&&G>1;){let ht=I,ft=G;f>2&&I>1&&(ht=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),f/=I/ht),T>2&&G>1&&(ft=G>=16384?Math.floor(G/2)-1||1:Math.ceil(G)/2,T/=G/ft),Q=this.cachedCanvases.getCanvas(nt,ht,ft),ot=Q.context,ot.clearRect(0,0,ht,ft),ot.drawImage(a,0,0,I,G,0,0,ht,ft),a=Q.canvas,I=ht,G=ft,nt=nt==="prescale1"?"prescale2":"prescale1"}return{img:a,paintWidth:I,paintHeight:G}}_createMaskCanvas(a){const e=this.ctx,{width:n,height:h}=a,f=this.current.fillColor,T=this.current.patternFill,I=(0,u.getCurrentTransform)(e);let G,nt,Q,ot;if((a.bitmap||a.data)&&a.count>1){const Rt=a.bitmap||a.data.buffer;nt=JSON.stringify(T?I:[I.slice(0,4),f]),G=this._cachedBitmapsMap.get(Rt),G||(G=new Map,this._cachedBitmapsMap.set(Rt,G));const wt=G.get(nt);if(wt&&!T){const Ut=Math.round(Math.min(I[0],I[2])+I[4]),$t=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:wt,offsetX:Ut,offsetY:$t}}Q=wt}Q||(ot=this.cachedCanvases.getCanvas("maskCanvas",n,h),A(ot.context,a));let ht=o.Util.transform(I,[1/n,0,0,-1/h,0,0]);ht=o.Util.transform(ht,[1,0,0,1,0,-h]);const ft=o.Util.applyTransform([0,0],ht),dt=o.Util.applyTransform([n,h],ht),Ct=o.Util.normalizeRect([ft[0],ft[1],dt[0],dt[1]]),Dt=Math.round(Ct[2]-Ct[0])||1,vt=Math.round(Ct[3]-Ct[1])||1,Ft=this.cachedCanvases.getCanvas("fillCanvas",Dt,vt),gt=Ft.context,st=Math.min(ft[0],dt[0]),Z=Math.min(ft[1],dt[1]);gt.translate(-st,-Z),gt.transform(...ht),Q||(Q=this._scaleImage(ot.canvas,(0,u.getCurrentTransformInverse)(gt)),Q=Q.img,G&&T&&G.set(nt,Q)),gt.imageSmoothingEnabled=H((0,u.getCurrentTransform)(gt),a.interpolate),d(gt,Q,0,0,Q.width,Q.height,0,0,n,h),gt.globalCompositeOperation="source-in";const pt=o.Util.transform((0,u.getCurrentTransformInverse)(gt),[1,0,0,1,-st,-Z]);return gt.fillStyle=T?f.getPattern(e,this,pt,W.PathType.FILL):f,gt.fillRect(0,0,n,h),G&&!T&&(this.cachedCanvases.delete("fillCanvas"),G.set(nt,Ft.canvas)),{canvas:Ft.canvas,offsetX:Math.round(st),offsetY:Math.round(Z)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=$[a]}setLineJoin(a){this.ctx.lineJoin=P[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(a),n.lineDashOffset=e)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[e,n]of a)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(n,a,e);this.suspendedCtx=this.ctx,this.ctx=h.context;const f=this.ctx;f.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,f),m(f,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){if(!this.current.activeSMask)return;a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;g(n,e,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(a,e,n,h,f,T){this.ctx.transform(a,e,n,h,f,T),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(a,e,n){const h=this.ctx,f=this.current;let T=f.x,I=f.y,G,nt;const Q=(0,u.getCurrentTransform)(h),ot=Q[0]===0&&Q[3]===0||Q[1]===0&&Q[2]===0,ht=ot?n.slice(0):null;for(let ft=0,dt=0,Ct=a.length;ft<Ct;ft++)switch(a[ft]|0){case o.OPS.rectangle:T=e[dt++],I=e[dt++];const Dt=e[dt++],vt=e[dt++],Ft=T+Dt,gt=I+vt;h.moveTo(T,I),Dt===0||vt===0?h.lineTo(Ft,gt):(h.lineTo(Ft,I),h.lineTo(Ft,gt),h.lineTo(T,gt)),ot||f.updateRectMinMax(Q,[T,I,Ft,gt]),h.closePath();break;case o.OPS.moveTo:T=e[dt++],I=e[dt++],h.moveTo(T,I),ot||f.updatePathMinMax(Q,T,I);break;case o.OPS.lineTo:T=e[dt++],I=e[dt++],h.lineTo(T,I),ot||f.updatePathMinMax(Q,T,I);break;case o.OPS.curveTo:G=T,nt=I,T=e[dt+4],I=e[dt+5],h.bezierCurveTo(e[dt],e[dt+1],e[dt+2],e[dt+3],T,I),f.updateCurvePathMinMax(Q,G,nt,e[dt],e[dt+1],e[dt+2],e[dt+3],T,I,ht),dt+=6;break;case o.OPS.curveTo2:G=T,nt=I,h.bezierCurveTo(T,I,e[dt],e[dt+1],e[dt+2],e[dt+3]),f.updateCurvePathMinMax(Q,G,nt,T,I,e[dt],e[dt+1],e[dt+2],e[dt+3],ht),T=e[dt+2],I=e[dt+3],dt+=4;break;case o.OPS.curveTo3:G=T,nt=I,T=e[dt+2],I=e[dt+3],h.bezierCurveTo(e[dt],e[dt+1],T,I,T,I),f.updateCurvePathMinMax(Q,G,nt,e[dt],e[dt+1],T,I,T,I,ht),dt+=4;break;case o.OPS.closePath:h.closePath();break}ot&&f.updateScalingPathMinMax(Q,ht),f.setCurrentPoint(T,I)}closePath(){this.ctx.closePath()}stroke(a=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,(0,u.getCurrentTransformInverse)(e),W.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a=!0){const e=this.ctx,n=this.current.fillColor,h=this.current.patternFill;let f=!1;h&&(e.save(),e.fillStyle=n.getPattern(e,this,(0,u.getCurrentTransformInverse)(e),W.PathType.FILL),f=!0);const T=this.current.getClippedPathBoundingBox();this.contentVisible&&T!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),f&&e.restore(),a&&this.consumePath(T)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=et}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,e=this.ctx;if(a===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of a)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,e){var Q;const n=this.commonObjs.get(a),h=this.current;if(!n)throw new Error(`Can't find font for ${a}`);if(h.fontMatrix=n.fontMatrix||o.FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+a),e<0?(e=-e,h.fontDirection=-1):h.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const f=n.loadedName||"sans-serif",T=((Q=n.systemFontInfo)==null?void 0:Q.css)||`"${f}", ${n.fallbackName}`;let I="normal";n.black?I="900":n.bold&&(I="bold");const G=n.italic?"italic":"normal";let nt=e;e<at?nt=at:e>M&&(nt=M),this.current.fontSizeScale=e/nt,this.ctx.font=`${G} ${I} ${nt}px ${T}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,e){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=e}setLeadingMoveText(a,e){this.setLeading(-e),this.moveText(a,e)}setTextMatrix(a,e,n,h,f,T){this.current.textMatrix=[a,e,n,h,f,T],this.current.textMatrixScale=Math.hypot(a,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,e,n,h){const f=this.ctx,T=this.current,I=T.font,G=T.textRenderingMode,nt=T.fontSize/T.fontSizeScale,Q=G&o.TextRenderingMode.FILL_STROKE_MASK,ot=!!(G&o.TextRenderingMode.ADD_TO_PATH_FLAG),ht=T.patternFill&&!I.missingFile;let ft;(I.disableFontFace||ot||ht)&&(ft=I.getPathGenerator(this.commonObjs,a)),I.disableFontFace||ht?(f.save(),f.translate(e,n),f.beginPath(),ft(f,nt),h&&f.setTransform(...h),(Q===o.TextRenderingMode.FILL||Q===o.TextRenderingMode.FILL_STROKE)&&f.fill(),(Q===o.TextRenderingMode.STROKE||Q===o.TextRenderingMode.FILL_STROKE)&&f.stroke(),f.restore()):((Q===o.TextRenderingMode.FILL||Q===o.TextRenderingMode.FILL_STROKE)&&f.fillText(a,e,n),(Q===o.TextRenderingMode.STROKE||Q===o.TextRenderingMode.FILL_STROKE)&&f.strokeText(a,e,n)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(f),x:e,y:n,fontSize:nt,addToPath:ft})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);a.scale(1.5,1),a.fillText("I",0,10);const e=a.getImageData(0,0,10,10).data;let n=!1;for(let h=3;h<e.length;h+=4)if(e[h]>0&&e[h]<255){n=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(a){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(a);const h=e.fontSize;if(h===0)return;const f=this.ctx,T=e.fontSizeScale,I=e.charSpacing,G=e.wordSpacing,nt=e.fontDirection,Q=e.textHScale*nt,ot=a.length,ht=n.vertical,ft=ht?1:-1,dt=n.defaultVMetrics,Ct=h*e.fontMatrix[0],Dt=e.textRenderingMode===o.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;f.save(),f.transform(...e.textMatrix),f.translate(e.x,e.y+e.textRise),nt>0?f.scale(Q,-1):f.scale(Q,1);let vt;if(e.patternFill){f.save();const pt=e.fillColor.getPattern(f,this,(0,u.getCurrentTransformInverse)(f),W.PathType.FILL);vt=(0,u.getCurrentTransform)(f),f.restore(),f.fillStyle=pt}let Ft=e.lineWidth;const gt=e.textMatrixScale;if(gt===0||Ft===0){const pt=e.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(pt===o.TextRenderingMode.STROKE||pt===o.TextRenderingMode.FILL_STROKE)&&(Ft=this.getSinglePixelWidth())}else Ft/=gt;if(T!==1&&(f.scale(T,T),Ft/=T),f.lineWidth=Ft,n.isInvalidPDFjsFont){const pt=[];let Rt=0;for(const wt of a)pt.push(wt.unicode),Rt+=wt.width;f.fillText(pt.join(""),0,0),e.x+=Rt*Ct*Q,f.restore(),this.compose();return}let st=0,Z;for(Z=0;Z<ot;++Z){const pt=a[Z];if(typeof pt=="number"){st+=ft*pt*h/1e3;continue}let Rt=!1;const wt=(pt.isSpace?G:0)+I,Ut=pt.fontChar,$t=pt.accent;let Wt,Gt,zt=pt.width;if(ht){const Xt=pt.vmetric||dt,ut=-(pt.vmetric?Xt[1]:zt*.5)*Ct,tt=Xt[2]*Ct;zt=Xt?-Xt[0]:zt,Wt=ut/T,Gt=(st+tt)/T}else Wt=st/T,Gt=0;if(n.remeasure&&zt>0){const Xt=f.measureText(Ut).width*1e3/h*T;if(zt<Xt&&this.isFontSubpixelAAEnabled){const ut=zt/Xt;Rt=!0,f.save(),f.scale(ut,1),Wt/=ut}else zt!==Xt&&(Wt+=(zt-Xt)/2e3*h/T)}if(this.contentVisible&&(pt.isInFont||n.missingFile)){if(Dt&&!$t)f.fillText(Ut,Wt,Gt);else if(this.paintChar(Ut,Wt,Gt,vt),$t){const Xt=Wt+h*$t.offset.x/T,ut=Gt-h*$t.offset.y/T;this.paintChar($t.fontChar,Xt,ut,vt)}}const Bt=ht?zt*Ct-wt*nt:zt*Ct+wt*nt;st+=Bt,Rt&&f.restore()}ht?e.y-=st:e.x+=st*Q,f.restore(),this.compose()}showType3Text(a){const e=this.ctx,n=this.current,h=n.font,f=n.fontSize,T=n.fontDirection,I=h.vertical?1:-1,G=n.charSpacing,nt=n.wordSpacing,Q=n.textHScale*T,ot=n.fontMatrix||o.FONT_IDENTITY_MATRIX,ht=a.length,ft=n.textRenderingMode===o.TextRenderingMode.INVISIBLE;let dt,Ct,Dt,vt;if(!(ft||f===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(Q,T),dt=0;dt<ht;++dt){if(Ct=a[dt],typeof Ct=="number"){vt=I*Ct*f/1e3,this.ctx.translate(vt,0),n.x+=vt*Q;continue}const Ft=(Ct.isSpace?nt:0)+G,gt=h.charProcOperatorList[Ct.operatorListId];if(!gt){(0,o.warn)(`Type3 character "${Ct.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ct,this.save(),e.scale(f,f),e.transform(...ot),this.executeOperatorList(gt),this.restore()),Dt=o.Util.applyTransform([Ct.width,0],ot)[0]*f+Ft,e.translate(Dt,0),n.x+=Dt*Q}e.restore(),this.processingType3=null}}setCharWidth(a,e){}setCharWidthAndBounds(a,e,n,h,f,T){this.ctx.rect(n,h,f-n,T-h),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let e;if(a[0]==="TilingPattern"){const n=a[1],h=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),f={createCanvasGraphics:T=>new _t(T,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new W.TilingPattern(a,n,this.ctx,f,h)}else e=this._getPattern(a[1],a[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,e,n){const h=o.Util.makeHexColor(a,e,n);this.ctx.strokeStyle=h,this.current.strokeColor=h}setFillRGBColor(a,e,n){const h=o.Util.makeHexColor(a,e,n);this.ctx.fillStyle=h,this.current.fillColor=h,this.current.patternFill=!1}_getPattern(a,e=null){let n;return this.cachedPatterns.has(a)?n=this.cachedPatterns.get(a):(n=(0,W.getShadingPattern)(this.getObject(a)),this.cachedPatterns.set(a,n)),e&&(n.matrix=e),n}shadingFill(a){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(a);e.fillStyle=n.getPattern(e,this,(0,u.getCurrentTransformInverse)(e),W.PathType.SHADING);const h=(0,u.getCurrentTransformInverse)(e);if(h){const{width:f,height:T}=e.canvas,[I,G,nt,Q]=o.Util.getAxialAlignedBoundingBox([0,0,f,T],h);this.ctx.fillRect(I,G,nt-I,Q-G)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&a.length===6&&this.transform(...a),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),e)){const n=e[2]-e[0],h=e[3]-e[1];this.ctx.rect(e[0],e[1],n,h),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;a.isolated||(0,o.info)("TODO: Support non-isolated groups."),a.knockout&&(0,o.warn)("Knockout groups not supported.");const n=(0,u.getCurrentTransform)(e);if(a.matrix&&e.transform(...a.matrix),!a.bbox)throw new Error("Bounding box is required.");let h=o.Util.getAxialAlignedBoundingBox(a.bbox,(0,u.getCurrentTransform)(e));const f=[0,0,e.canvas.width,e.canvas.height];h=o.Util.intersect(h,f)||[0,0,0,0];const T=Math.floor(h[0]),I=Math.floor(h[1]);let G=Math.max(Math.ceil(h[2])-T,1),nt=Math.max(Math.ceil(h[3])-I,1),Q=1,ot=1;G>v&&(Q=G/v,G=v),nt>v&&(ot=nt/v,nt=v),this.current.startNewPathAndClipBox([0,0,G,nt]);let ht="groupAt"+this.groupLevel;a.smask&&(ht+="_smask_"+this.smaskCounter++%2);const ft=this.cachedCanvases.getCanvas(ht,G,nt),dt=ft.context;dt.scale(1/Q,1/ot),dt.translate(-T,-I),dt.transform(...n),a.smask?this.smaskStack.push({canvas:ft.canvas,context:dt,offsetX:T,offsetY:I,scaleX:Q,scaleY:ot,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(T,I),e.scale(Q,ot),e.save()),i(e,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const f=o.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],h);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(f)}}beginAnnotation(a,e,n,h,f){if(X(this,z,Je).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&e.length===4){const T=e[2]-e[0],I=e[3]-e[1];if(f&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=T,e[3]=I;const[G,nt]=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:Q}=this,ot=Math.ceil(T*this.outputScaleX*Q),ht=Math.ceil(I*this.outputScaleY*Q);this.annotationCanvas=this.canvasFactory.create(ot,ht);const{canvas:ft,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(a,ft),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(G,0,0,-nt,0,I*nt),l(this.ctx)}else l(this.ctx),this.ctx.rect(e[0],e[1],T,I),this.ctx.clip(),this.endPath()}this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,mt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(a){if(!this.contentVisible)return;const e=a.count;a=this.getObject(a.data,a),a.count=e;const n=this.ctx,h=this.processingType3;if(h&&(h.compiled===void 0&&(h.compiled=b(a)),h.compiled)){h.compiled(n);return}const f=this._createMaskCanvas(a),T=f.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(T,f.offsetX,f.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(a,e,n=0,h=0,f,T){if(!this.contentVisible)return;a=this.getObject(a.data,a);const I=this.ctx;I.save();const G=(0,u.getCurrentTransform)(I);I.transform(e,n,h,f,0,0);const nt=this._createMaskCanvas(a);I.setTransform(1,0,0,1,nt.offsetX-G[4],nt.offsetY-G[5]);for(let Q=0,ot=T.length;Q<ot;Q+=2){const ht=o.Util.transform(G,[e,n,h,f,T[Q],T[Q+1]]),[ft,dt]=o.Util.applyTransform([0,0],ht);I.drawImage(nt.canvas,ft,dt)}I.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,h=this.current.patternFill;for(const f of a){const{data:T,width:I,height:G,transform:nt}=f,Q=this.cachedCanvases.getCanvas("maskCanvas",I,G),ot=Q.context;ot.save();const ht=this.getObject(T,f);A(ot,ht),ot.globalCompositeOperation="source-in",ot.fillStyle=h?n.getPattern(ot,this,(0,u.getCurrentTransformInverse)(e),W.PathType.FILL):n,ot.fillRect(0,0,I,G),ot.restore(),e.save(),e.transform(...nt),e.scale(1,-1),d(e,Q.canvas,0,0,I,G,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const e=this.getObject(a);if(!e){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(a,e,n,h){if(!this.contentVisible)return;const f=this.getObject(a);if(!f){(0,o.warn)("Dependent image isn't ready yet");return}const T=f.width,I=f.height,G=[];for(let nt=0,Q=h.length;nt<Q;nt+=2)G.push({transform:[e,0,0,n,h[nt],h[nt+1]],x:0,y:0,w:T,h:I});this.paintInlineImageXObjectGroup(f,G)}applyTransferMapsToCanvas(a){return this.current.transferMaps!=="none"&&(a.filter=this.current.transferMaps,a.drawImage(a.canvas,0,0),a.filter="none"),a.canvas}applyTransferMapsToBitmap(a){if(this.current.transferMaps==="none")return a.bitmap;const{bitmap:e,width:n,height:h}=a,f=this.cachedCanvases.getCanvas("inlineImage",n,h),T=f.context;return T.filter=this.current.transferMaps,T.drawImage(e,0,0),T.filter="none",f.canvas}paintInlineImageXObject(a){if(!this.contentVisible)return;const e=a.width,n=a.height,h=this.ctx;if(this.save(),!o.isNodeJS){const{filter:I}=h;I!=="none"&&I!==""&&(h.filter="none")}h.scale(1/e,-1/n);let f;if(a.bitmap)f=this.applyTransferMapsToBitmap(a);else if(typeof HTMLElement=="function"&&a instanceof HTMLElement||!a.data)f=a;else{const G=this.cachedCanvases.getCanvas("inlineImage",e,n).context;C(G,a),f=this.applyTransferMapsToCanvas(G)}const T=this._scaleImage(f,(0,u.getCurrentTransformInverse)(h));h.imageSmoothingEnabled=H((0,u.getCurrentTransform)(h),a.interpolate),d(h,T.img,0,0,T.paintWidth,T.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(a,e){if(!this.contentVisible)return;const n=this.ctx;let h;if(a.bitmap)h=a.bitmap;else{const f=a.width,T=a.height,G=this.cachedCanvases.getCanvas("inlineImage",f,T).context;C(G,a),h=this.applyTransferMapsToCanvas(G)}for(const f of e)n.save(),n.transform(...f.transform),n.scale(1,-1),d(n,h,f.x,f.y,f.w,f.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,e){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,e){a==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===et?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=(0,u.getCurrentTransform)(this.ctx);if(a[1]===0&&a[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const e=Math.abs(a[0]*a[3]-a[2]*a[1]),n=Math.hypot(a[0],a[2]),h=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(n,h)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:a}=this.current,{a:e,b:n,c:h,d:f}=this.ctx.getTransform();let T,I;if(n===0&&h===0){const G=Math.abs(e),nt=Math.abs(f);if(G===nt)if(a===0)T=I=1/G;else{const Q=G*a;T=I=Q<1?1/Q:1}else if(a===0)T=1/G,I=1/nt;else{const Q=G*a,ot=nt*a;T=Q<1?1/Q:1,I=ot<1?1/ot:1}}else{const G=Math.abs(e*f-n*h),nt=Math.hypot(e,n),Q=Math.hypot(h,f);if(a===0)T=Q/G,I=nt/G;else{const ot=a*G;T=Q>ot?Q/ot:1,I=nt>ot?nt/ot:1}}this._cachedScaleForStroking[0]=T,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:e}=this,{lineWidth:n}=this.current,[h,f]=this.getScaleForStroking();if(e.lineWidth=n||1,h===1&&f===1){e.stroke();return}const T=e.getLineDash();if(a&&e.save(),e.scale(h,f),T.length>0){const I=Math.max(h,f);e.setLineDash(T.map(G=>G/I)),e.lineDashOffset/=I}e.stroke(),a&&e.restore()}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}};z=new WeakSet,Je=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},mt=new WeakSet,Ze=function(){if(this.pageColors){const a=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(a!=="none"){const e=this.ctx.filter;this.ctx.filter=a,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let rt=_t;s.CanvasGraphics=rt;for(const k in o.OPS)rt.prototype[k]!==void 0&&(rt.prototype[o.OPS[k]]=rt.prototype[k])},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=E;var o=L(1),u=L(6);const W={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=W;function O(b,R){if(!R)return;const C=R[2]-R[0],A=R[3]-R[1],i=new Path2D;i.rect(R[0],R[1],C,A),b.clip(i)}class at{constructor(){this.constructor===at&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class M extends at{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let C;this._type==="axial"?C=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const A of this._colorStops)C.addColorStop(A[0],A[1]);return C}getPattern(R,C,A,i){let l;if(i===W.STROKE||i===W.FILL){const D=C.current.getClippedPathBoundingBox(i,(0,u.getCurrentTransform)(R))||[0,0,0,0],y=Math.ceil(D[2]-D[0])||1,c=Math.ceil(D[3]-D[1])||1,F=C.cachedCanvases.getCanvas("pattern",y,c,!0),g=F.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-D[0],-D[1]),A=o.Util.transform(A,[1,0,0,1,D[0],D[1]]),g.transform(...C.baseTransform),this.matrix&&g.transform(...this.matrix),O(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=R.createPattern(F.canvas,"no-repeat");const H=new DOMMatrix(A);l.setTransform(H)}else O(R,this._bbox),l=this._createGradient(R);return l}}function v(b,R,C,A,i,l,D,y){const c=R.coords,F=R.colors,g=b.data,H=b.width*4;let $;c[C+1]>c[A+1]&&($=C,C=A,A=$,$=l,l=D,D=$),c[A+1]>c[i+1]&&($=A,A=i,i=$,$=D,D=y,y=$),c[C+1]>c[A+1]&&($=C,C=A,A=$,$=l,l=D,D=$);const P=(c[C]+R.offsetX)*R.scaleX,q=(c[C+1]+R.offsetY)*R.scaleY,et=(c[A]+R.offsetX)*R.scaleX,rt=(c[A+1]+R.offsetY)*R.scaleY,z=(c[i]+R.offsetX)*R.scaleX,ct=(c[i+1]+R.offsetY)*R.scaleY;if(q>=ct)return;const mt=F[l],At=F[l+1],_t=F[l+2],k=F[D],a=F[D+1],e=F[D+2],n=F[y],h=F[y+1],f=F[y+2],T=Math.round(q),I=Math.round(ct);let G,nt,Q,ot,ht,ft,dt,Ct;for(let Dt=T;Dt<=I;Dt++){if(Dt<rt){const Z=Dt<q?0:(q-Dt)/(q-rt);G=P-(P-et)*Z,nt=mt-(mt-k)*Z,Q=At-(At-a)*Z,ot=_t-(_t-e)*Z}else{let Z;Dt>ct?Z=1:rt===ct?Z=0:Z=(rt-Dt)/(rt-ct),G=et-(et-z)*Z,nt=k-(k-n)*Z,Q=a-(a-h)*Z,ot=e-(e-f)*Z}let vt;Dt<q?vt=0:Dt>ct?vt=1:vt=(q-Dt)/(q-ct),ht=P-(P-z)*vt,ft=mt-(mt-n)*vt,dt=At-(At-h)*vt,Ct=_t-(_t-f)*vt;const Ft=Math.round(Math.min(G,ht)),gt=Math.round(Math.max(G,ht));let st=H*Dt+Ft*4;for(let Z=Ft;Z<=gt;Z++)vt=(G-Z)/(G-ht),vt<0?vt=0:vt>1&&(vt=1),g[st++]=nt-(nt-ft)*vt|0,g[st++]=Q-(Q-dt)*vt|0,g[st++]=ot-(ot-Ct)*vt|0,g[st++]=255}}function p(b,R,C){const A=R.coords,i=R.colors;let l,D;switch(R.type){case"lattice":const y=R.verticesPerRow,c=Math.floor(A.length/y)-1,F=y-1;for(l=0;l<c;l++){let g=l*y;for(let H=0;H<F;H++,g++)v(b,C,A[g],A[g+1],A[g+y],i[g],i[g+1],i[g+y]),v(b,C,A[g+y+1],A[g+1],A[g+y],i[g+y+1],i[g+1],i[g+y])}break;case"triangles":for(l=0,D=A.length;l<D;l+=3)v(b,C,A[l],A[l+1],A[l+2],i[l],i[l+1],i[l+2]);break;default:throw new Error("illegal figure")}}class S extends at{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,C,A){const y=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-y,g=Math.ceil(this._bounds[3])-c,H=Math.min(Math.ceil(Math.abs(F*R[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(g*R[1]*1.1)),3e3),P=F/H,q=g/$,et={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-c,scaleX:1/P,scaleY:1/q},rt=H+2*2,z=$+2*2,ct=A.getCanvas("mesh",rt,z,!1),mt=ct.context,At=mt.createImageData(H,$);if(C){const k=At.data;for(let a=0,e=k.length;a<e;a+=4)k[a]=C[0],k[a+1]=C[1],k[a+2]=C[2],k[a+3]=255}for(const k of this._figures)p(At,k,et);return mt.putImageData(At,2,2),{canvas:ct.canvas,offsetX:y-2*P,offsetY:c-2*q,scaleX:P,scaleY:q}}getPattern(R,C,A,i){O(R,this._bbox);let l;if(i===W.SHADING)l=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(R));else if(l=o.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const y=o.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*y[0],l[1]*y[1]]}const D=this._createMeshCanvas(l,i===W.SHADING?null:this._background,C.cachedCanvases);return i!==W.SHADING&&(R.setTransform(...C.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(D.offsetX,D.offsetY),R.scale(D.scaleX,D.scaleY),R.createPattern(D.canvas,"no-repeat")}}class w extends at{getPattern(){return"hotpink"}}function E(b){switch(b[0]){case"RadialAxial":return new M(b);case"Mesh":return new S(b);case"Dummy":return new w}throw new Error(`Unknown IR type: ${b[0]}`)}const m={COLORED:1,UNCOLORED:2},d=class d{constructor(R,C,A,i,l){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=C,this.ctx=A,this.canvasGraphicsFactory=i,this.baseTransform=l}createPatternCanvas(R){const C=this.operatorList,A=this.bbox,i=this.xstep,l=this.ystep,D=this.paintType,y=this.tilingType,c=this.color,F=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+y);const g=A[0],H=A[1],$=A[2],P=A[3],q=o.Util.singularValueDecompose2dScale(this.matrix),et=o.Util.singularValueDecompose2dScale(this.baseTransform),rt=[q[0]*et[0],q[1]*et[1]],z=this.getSizeAndScale(i,this.ctx.canvas.width,rt[0]),ct=this.getSizeAndScale(l,this.ctx.canvas.height,rt[1]),mt=R.cachedCanvases.getCanvas("pattern",z.size,ct.size,!0),At=mt.context,_t=F.createCanvasGraphics(At);_t.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext(_t,D,c);let k=g,a=H,e=$,n=P;return g<0&&(k=0,e+=Math.abs(g)),H<0&&(a=0,n+=Math.abs(H)),At.translate(-(z.scale*k),-(ct.scale*a)),_t.transform(z.scale,0,0,ct.scale,0,0),At.save(),this.clipBbox(_t,k,a,e,n),_t.baseTransform=(0,u.getCurrentTransform)(_t.ctx),_t.executeOperatorList(C),_t.endDrawing(),{canvas:mt.canvas,scaleX:z.scale,scaleY:ct.scale,offsetX:k,offsetY:a}}getSizeAndScale(R,C,A){R=Math.abs(R);const i=Math.max(d.MAX_PATTERN_SIZE,C);let l=Math.ceil(R*A);return l>=i?l=i:A=l/R,{scale:A,size:l}}clipBbox(R,C,A,i,l){const D=i-C,y=l-A;R.ctx.rect(C,A,D,y),R.current.updateRectMinMax((0,u.getCurrentTransform)(R.ctx),[C,A,i,l]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,C,A){const i=R.ctx,l=R.current;switch(C){case m.COLORED:const D=this.ctx;i.fillStyle=D.fillStyle,i.strokeStyle=D.strokeStyle,l.fillColor=D.fillStyle,l.strokeColor=D.strokeStyle;break;case m.UNCOLORED:const y=o.Util.makeHexColor(A[0],A[1],A[2]);i.fillStyle=y,i.strokeStyle=y,l.fillColor=y,l.strokeColor=y;break;default:throw new o.FormatError(`Unsupported paint type: ${C}`)}}getPattern(R,C,A,i){let l=A;i!==W.SHADING&&(l=o.Util.transform(l,C.baseTransform),this.matrix&&(l=o.Util.transform(l,this.matrix)));const D=this.createPatternCanvas(C);let y=new DOMMatrix(l);y=y.translate(D.offsetX,D.offsetY),y=y.scale(1/D.scaleX,1/D.scaleY);const c=R.createPattern(D.canvas,"repeat");return c.setTransform(y),c}};ee(d,"MAX_PATTERN_SIZE",3e3);let x=d;s.TilingPattern=x},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=W,s.convertToRGBA=u,s.grayToRGBA=at;var o=L(1);function u(M){switch(M.kind){case o.ImageKind.GRAYSCALE_1BPP:return W(M);case o.ImageKind.RGB_24BPP:return O(M)}return null}function W({src:M,srcPos:v=0,dest:p,width:S,height:w,nonBlackColor:E=4294967295,inverseDecode:m=!1}){const x=o.FeatureTest.isLittleEndian?4278190080:255,[d,b]=m?[E,x]:[x,E],R=S>>3,C=S&7,A=M.length;p=new Uint32Array(p.buffer);let i=0;for(let l=0;l<w;l++){for(const y=v+R;v<y;v++){const c=v<A?M[v]:255;p[i++]=c&128?b:d,p[i++]=c&64?b:d,p[i++]=c&32?b:d,p[i++]=c&16?b:d,p[i++]=c&8?b:d,p[i++]=c&4?b:d,p[i++]=c&2?b:d,p[i++]=c&1?b:d}if(C===0)continue;const D=v<A?M[v++]:255;for(let y=0;y<C;y++)p[i++]=D&1<<7-y?b:d}return{srcPos:v,destPos:i}}function O({src:M,srcPos:v=0,dest:p,destPos:S=0,width:w,height:E}){let m=0;const x=M.length>>2,d=new Uint32Array(M.buffer,v,x);if(o.FeatureTest.isLittleEndian){for(;m<x-2;m+=3,S+=4){const b=d[m],R=d[m+1],C=d[m+2];p[S]=b|4278190080,p[S+1]=b>>>24|R<<8|4278190080,p[S+2]=R>>>16|C<<16|4278190080,p[S+3]=C>>>8|4278190080}for(let b=m*4,R=M.length;b<R;b+=3)p[S++]=M[b]|M[b+1]<<8|M[b+2]<<16|4278190080}else{for(;m<x-2;m+=3,S+=4){const b=d[m],R=d[m+1],C=d[m+2];p[S]=b|255,p[S+1]=b<<24|R>>>8|255,p[S+2]=R<<16|C>>>16|255,p[S+3]=C<<8|255}for(let b=m*4,R=M.length;b<R;b+=3)p[S++]=M[b]<<24|M[b+1]<<16|M[b+2]<<8|255}return{srcPos:v,destPos:S}}function at(M,v){if(o.FeatureTest.isLittleEndian)for(let p=0,S=M.length;p<S;p++)v[p]=M[p]*65793|4278190080;else for(let p=0,S=M.length;p<S;p++)v[p]=M[p]*16843008|255}},(j,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const L=Object.create(null);s.GlobalWorkerOptions=L,L.workerPort=null,L.workerSrc=""},(j,s,L)=>{var M,Ts,p,Ps,w,Te;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var o=L(1);const u={UNKNOWN:0,DATA:1,ERROR:2},W={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function O(m){switch(m instanceof Error||typeof m=="object"&&m!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new o.AbortException(m.message);case"MissingPDFException":return new o.MissingPDFException(m.message);case"PasswordException":return new o.PasswordException(m.message,m.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(m.message,m.status);case"UnknownErrorException":return new o.UnknownErrorException(m.message,m.details);default:return new o.UnknownErrorException(m.message,m.toString())}}class at{constructor(x,d,b){U(this,M);U(this,p);U(this,w);this.sourceName=x,this.targetName=d,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{const C=R.data;if(C.targetName!==this.sourceName)return;if(C.stream){X(this,p,Ps).call(this,C);return}if(C.callback){const i=C.callbackId,l=this.callbackCapabilities[i];if(!l)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],C.callback===u.DATA)l.resolve(C.data);else if(C.callback===u.ERROR)l.reject(O(C.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[C.action];if(!A)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const i=this.sourceName,l=C.sourceName;new Promise(function(D){D(A(C.data))}).then(function(D){b.postMessage({sourceName:i,targetName:l,callback:u.DATA,callbackId:C.callbackId,data:D})},function(D){b.postMessage({sourceName:i,targetName:l,callback:u.ERROR,callbackId:C.callbackId,reason:O(D)})});return}if(C.streamId){X(this,M,Ts).call(this,C);return}A(C.data)},b.addEventListener("message",this._onComObjOnMessage)}on(x,d){const b=this.actionHandler;if(b[x])throw new Error(`There is already an actionName called "${x}"`);b[x]=d}send(x,d,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,data:d},b)}sendWithPromise(x,d,b){const R=this.callbackId++,C=new o.PromiseCapability;this.callbackCapabilities[R]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,callbackId:R,data:d},b)}catch(A){C.reject(A)}return C.promise}sendWithStream(x,d,b,R){const C=this.streamId++,A=this.sourceName,i=this.targetName,l=this.comObj;return new ReadableStream({start:D=>{const y=new o.PromiseCapability;return this.streamControllers[C]={controller:D,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:A,targetName:i,action:x,streamId:C,data:d,desiredSize:D.desiredSize},R),y.promise},pull:D=>{const y=new o.PromiseCapability;return this.streamControllers[C].pullCall=y,l.postMessage({sourceName:A,targetName:i,stream:W.PULL,streamId:C,desiredSize:D.desiredSize}),y.promise},cancel:D=>{(0,o.assert)(D instanceof Error,"cancel must have a valid reason");const y=new o.PromiseCapability;return this.streamControllers[C].cancelCall=y,this.streamControllers[C].isClosed=!0,l.postMessage({sourceName:A,targetName:i,stream:W.CANCEL,streamId:C,reason:O(D)}),y.promise}},b)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}M=new WeakSet,Ts=function(x){const d=x.streamId,b=this.sourceName,R=x.sourceName,C=this.comObj,A=this,i=this.actionHandler[x.action],l={enqueue(D,y=1,c){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=y,F>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),C.postMessage({sourceName:b,targetName:R,stream:W.ENQUEUE,streamId:d,chunk:D},c)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:b,targetName:R,stream:W.CLOSE,streamId:d}),delete A.streamSinks[d])},error(D){(0,o.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:b,targetName:R,stream:W.ERROR,streamId:d,reason:O(D)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:x.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[d]=l,new Promise(function(D){D(i(x.data,l))}).then(function(){C.postMessage({sourceName:b,targetName:R,stream:W.START_COMPLETE,streamId:d,success:!0})},function(D){C.postMessage({sourceName:b,targetName:R,stream:W.START_COMPLETE,streamId:d,reason:O(D)})})},p=new WeakSet,Ps=function(x){const d=x.streamId,b=this.sourceName,R=x.sourceName,C=this.comObj,A=this.streamControllers[d],i=this.streamSinks[d];switch(x.stream){case W.START_COMPLETE:x.success?A.startCall.resolve():A.startCall.reject(O(x.reason));break;case W.PULL_COMPLETE:x.success?A.pullCall.resolve():A.pullCall.reject(O(x.reason));break;case W.PULL:if(!i){C.postMessage({sourceName:b,targetName:R,stream:W.PULL_COMPLETE,streamId:d,success:!0});break}i.desiredSize<=0&&x.desiredSize>0&&i.sinkCapability.resolve(),i.desiredSize=x.desiredSize,new Promise(function(l){var D;l((D=i.onPull)==null?void 0:D.call(i))}).then(function(){C.postMessage({sourceName:b,targetName:R,stream:W.PULL_COMPLETE,streamId:d,success:!0})},function(l){C.postMessage({sourceName:b,targetName:R,stream:W.PULL_COMPLETE,streamId:d,reason:O(l)})});break;case W.ENQUEUE:if((0,o.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(x.chunk);break;case W.CLOSE:if((0,o.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),X(this,w,Te).call(this,A,d);break;case W.ERROR:(0,o.assert)(A,"error should have stream controller"),A.controller.error(O(x.reason)),X(this,w,Te).call(this,A,d);break;case W.CANCEL_COMPLETE:x.success?A.cancelCall.resolve():A.cancelCall.reject(O(x.reason)),X(this,w,Te).call(this,A,d);break;case W.CANCEL:if(!i)break;new Promise(function(l){var D;l((D=i.onCancel)==null?void 0:D.call(i,O(x.reason)))}).then(function(){C.postMessage({sourceName:b,targetName:R,stream:W.CANCEL_COMPLETE,streamId:d,success:!0})},function(l){C.postMessage({sourceName:b,targetName:R,stream:W.CANCEL_COMPLETE,streamId:d,reason:O(l)})}),i.sinkCapability.reject(O(x.reason)),i.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},w=new WeakSet,Te=async function(x,d){var b,R,C;await Promise.allSettled([(b=x.startCall)==null?void 0:b.promise,(R=x.pullCall)==null?void 0:R.promise,(C=x.cancelCall)==null?void 0:C.promise]),delete this.streamControllers[d]},s.MessageHandler=at},(j,s,L)=>{var W,O;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var o=L(1);class u{constructor({parsedData:M,rawData:v}){U(this,W,void 0);U(this,O,void 0);it(this,W,M),it(this,O,v)}getRaw(){return t(this,O)}get(M){return t(this,W).get(M)??null}getAll(){return(0,o.objectFromMap)(t(this,W))}has(M){return t(this,W).has(M)}}W=new WeakMap,O=new WeakMap,s.Metadata=u},(j,s,L)=>{var M,v,p,S,w,E,ts;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var o=L(1),u=L(8);const W=Symbol("INTERNAL");class O{constructor(d,b){U(this,M,!0);this.name=d,this.intent=b}get visible(){return t(this,M)}_setVisible(d,b){d!==W&&(0,o.unreachable)("Internal method `_setVisible` called."),it(this,M,b)}}M=new WeakMap;class at{constructor(d){U(this,E);U(this,v,null);U(this,p,new Map);U(this,S,null);U(this,w,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,it(this,w,d.order);for(const b of d.groups)t(this,p).set(b.id,new O(b.name,b.intent));if(d.baseState==="OFF")for(const b of t(this,p).values())b._setVisible(W,!1);for(const b of d.on)t(this,p).get(b)._setVisible(W,!0);for(const b of d.off)t(this,p).get(b)._setVisible(W,!1);it(this,S,this.getHash())}}isVisible(d){if(t(this,p).size===0)return!0;if(!d)return(0,o.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return t(this,p).has(d.id)?t(this,p).get(d.id).visible:((0,o.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return X(this,E,ts).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const b of d.ids){if(!t(this,p).has(b))return(0,o.warn)(`Optional content group not found: ${b}`),!0;if(t(this,p).get(b).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const b of d.ids){if(!t(this,p).has(b))return(0,o.warn)(`Optional content group not found: ${b}`),!0;if(!t(this,p).get(b).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const b of d.ids){if(!t(this,p).has(b))return(0,o.warn)(`Optional content group not found: ${b}`),!0;if(!t(this,p).get(b).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const b of d.ids){if(!t(this,p).has(b))return(0,o.warn)(`Optional content group not found: ${b}`),!0;if(t(this,p).get(b).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,o.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,b=!0){if(!t(this,p).has(d)){(0,o.warn)(`Optional content group not found: ${d}`);return}t(this,p).get(d)._setVisible(W,!!b),it(this,v,null)}get hasInitialVisibility(){return t(this,S)===null||this.getHash()===t(this,S)}getOrder(){return t(this,p).size?t(this,w)?t(this,w).slice():[...t(this,p).keys()]:null}getGroups(){return t(this,p).size>0?(0,o.objectFromMap)(t(this,p)):null}getGroup(d){return t(this,p).get(d)||null}getHash(){if(t(this,v)!==null)return t(this,v);const d=new u.MurmurHash3_64;for(const[b,R]of t(this,p))d.update(`${b}:${R.visible}`);return it(this,v,d.hexdigest())}}v=new WeakMap,p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakSet,ts=function(d){const b=d.length;if(b<2)return!0;const R=d[0];for(let C=1;C<b;C++){const A=d[C];let i;if(Array.isArray(A))i=X(this,E,ts).call(this,A);else if(t(this,p).has(A))i=t(this,p).get(A).visible;else return(0,o.warn)(`Optional content group not found: ${A}`),!0;switch(R){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return R==="And"},s.OptionalContentConfig=at},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var o=L(1),u=L(6);class W{constructor({length:v,initialData:p,progressiveDone:S=!1,contentDispositionFilename:w=null,disableRange:E=!1,disableStream:m=!1},x){if((0,o.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=S,this._contentDispositionFilename=w,(p==null?void 0:p.length)>0){const d=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!m,this._isRangeSupported=!E,this._contentLength=v,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,b)=>{this._onReceiveData({begin:d,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((d,b)=>{this._onProgress({loaded:d,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:v,chunk:p}){const S=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;if(v===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(S):this._queuedChunks.push(S);else{const w=this._rangeReaders.some(function(E){return E._begin!==v?!1:(E._enqueue(S),!0)});(0,o.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){var p,S,w,E;v.total===void 0?(S=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||S.call(p,{loaded:v.loaded}):(E=(w=this._fullRequestReader)==null?void 0:w.onProgress)==null||E.call(w,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;(v=this._fullRequestReader)==null||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const p=this._rangeReaders.indexOf(v);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new O(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,p){if(p<=this._progressiveDataLength)return null;const S=new at(this,v,p);return this._pdfDataRangeTransport.requestDataRange(v,p),this._rangeReaders.push(S),S}cancelAllRequests(v){var p;(p=this._fullRequestReader)==null||p.cancel(v);for(const S of this._rangeReaders.slice(0))S.cancel(v);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=W;class O{constructor(v,p,S=!1,w=null){this._stream=v,this._done=S||!1,this._filename=(0,u.isPdfFile)(w)?w:null,this._queuedChunks=p||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new o.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class at{constructor(v,p,S){this._stream=v,this._begin=p,this._end=S,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new o.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var o=L(1),u=L(20);function W(S,w,E){return{method:"GET",headers:S,signal:E.signal,mode:"cors",credentials:w?"include":"same-origin",redirect:"follow"}}function O(S){const w=new Headers;for(const E in S){const m=S[E];m!==void 0&&w.append(E,m)}return w}function at(S){return S instanceof Uint8Array?S.buffer:S instanceof ArrayBuffer?S:((0,o.warn)(`getArrayBuffer - unexpected data format: ${S}`),new Uint8Array(S).buffer)}class M{constructor(w){this.source=w,this.isHttp=/^https?:/i.test(w.url),this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v(this),this._fullRequestReader}getRangeReader(w,E){if(E<=this._progressiveDataLength)return null;const m=new p(this,w,E);return this._rangeRequestReaders.push(m),m}cancelAllRequests(w){var E;(E=this._fullRequestReader)==null||E.cancel(w);for(const m of this._rangeRequestReaders.slice(0))m.cancel(w)}}s.PDFFetchStream=M;class v{constructor(w){this._stream=w,this._reader=null,this._loaded=0,this._filename=null;const E=w.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=new o.PromiseCapability,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=O(this._stream.httpHeaders);const m=E.url;fetch(m,W(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,u.validateResponseStatus)(x.status))throw(0,u.createResponseStatusError)(x.status,m);this._reader=x.body.getReader(),this._headersCapability.resolve();const d=C=>x.headers.get(C),{allowRangeRequests:b,suggestedLength:R}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=R||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:w,done:E}=await this._reader.read();return E?{value:w,done:E}:(this._loaded+=w.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:at(w),done:!1})}cancel(w){var E;(E=this._reader)==null||E.cancel(w),this._abortController.abort()}}class p{constructor(w,E,m){this._stream=w,this._reader=null,this._loaded=0;const x=w.source;this._withCredentials=x.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!x.disableStream,this._abortController=new AbortController,this._headers=O(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${m-1}`);const d=x.url;fetch(d,W(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,u.validateResponseStatus)(b.status))throw(0,u.createResponseStatusError)(b.status,d);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:w,done:E}=await this._reader.read();return E?{value:w,done:E}:(this._loaded+=w.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:at(w),done:!1})}cancel(w){var E;(E=this._reader)==null||E.cancel(w),this._abortController.abort()}}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=M,s.extractFilenameFromHeader=at,s.validateRangeRequestCapabilities=O,s.validateResponseStatus=v;var o=L(1),u=L(21),W=L(6);function O({getResponseHeader:p,isHttp:S,rangeChunkSize:w,disableRange:E}){const m={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(p("Content-Length"),10);return!Number.isInteger(x)||(m.suggestedLength=x,x<=2*w)||E||!S||p("Accept-Ranges")!=="bytes"||(p("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function at(p){const S=p("Content-Disposition");if(S){let w=(0,u.getFilenameFromContentDispositionHeader)(S);if(w.includes("%"))try{w=decodeURIComponent(w)}catch{}if((0,W.isPdfFile)(w))return w}return null}function M(p,S){return p===404||p===0&&S.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+S+'".'):new o.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${S}".`,p)}function v(p){return p===200||p===206}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=u;var o=L(1);function u(W){let O=!0,at=M("filename\\*","i").exec(W);if(at){at=at[1];let x=w(at);return x=unescape(x),x=E(x),x=m(x),p(x)}if(at=S(W),at){const x=m(at);return p(x)}if(at=M("filename","i").exec(W),at){at=at[1];let x=w(at);return x=m(x),p(x)}function M(x,d){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function v(x,d){if(x){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const b=new TextDecoder(x,{fatal:!0}),R=(0,o.stringToBytes)(d);d=b.decode(R),O=!1}catch{}}return d}function p(x){return O&&/[\x80-\xff]/.test(x)&&(x=v("utf-8",x),O&&(x=v("iso-8859-1",x))),x}function S(x){const d=[];let b;const R=M("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=R.exec(x))!==null;){let[,A,i,l]=b;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[i,l]}const C=[];for(let A=0;A<d.length&&A in d;++A){let[i,l]=d[A];l=w(l),i&&(l=unescape(l),A===0&&(l=E(l))),C.push(l)}return C.join("")}function w(x){if(x.startsWith('"')){const d=x.slice(1).split('\\"');for(let b=0;b<d.length;++b){const R=d[b].indexOf('"');R!==-1&&(d[b]=d[b].slice(0,R),d.length=b+1),d[b]=d[b].replaceAll(/\\(.)/g,"$1")}x=d.join('"')}return x}function E(x){const d=x.indexOf("'");if(d===-1)return x;const b=x.slice(0,d),C=x.slice(d+1).replace(/^[^']*'/,"");return v(b,C)}function m(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,b,R,C){if(R==="q"||R==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,i){return String.fromCharCode(parseInt(i,16))}),v(b,C);try{C=atob(C)}catch{}return v(b,C)})}return""}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var o=L(1),u=L(20);const W=200,O=206;function at(w){const E=w.response;return typeof E!="string"?E:(0,o.stringToBytes)(E).buffer}class M{constructor(E,m={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,m,x){const d={begin:E,end:m};for(const b in x)d[b]=x[b];return this.request(d)}requestFull(E){return this.request(E)}request(E){const m=new XMLHttpRequest,x=this.currXhrId++,d=this.pendingRequests[x]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const R=this.httpHeaders[b];R!==void 0&&m.setRequestHeader(b,R)}return this.isHttp&&"begin"in E&&"end"in E?(m.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),d.expectedStatus=O):d.expectedStatus=W,m.responseType="arraybuffer",E.onError&&(m.onerror=function(b){E.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,x),m.onprogress=this.onProgress.bind(this,x),d.onHeadersReceived=E.onHeadersReceived,d.onDone=E.onDone,d.onError=E.onError,d.onProgress=E.onProgress,m.send(null),x}onProgress(E,m){var d;const x=this.pendingRequests[E];x&&((d=x.onProgress)==null||d.call(x,m))}onStateChange(E,m){var A,i,l;const x=this.pendingRequests[E];if(!x)return;const d=x.xhr;if(d.readyState>=2&&x.onHeadersReceived&&(x.onHeadersReceived(),delete x.onHeadersReceived),d.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],d.status===0&&this.isHttp){(A=x.onError)==null||A.call(x,d.status);return}const b=d.status||W;if(!(b===W&&x.expectedStatus===O)&&b!==x.expectedStatus){(i=x.onError)==null||i.call(x,d.status);return}const C=at(d);if(b===O){const D=d.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);x.onDone({begin:parseInt(y[1],10),chunk:C})}else C?x.onDone({begin:0,chunk:C}):(l=x.onError)==null||l.call(x,d.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const m=this.pendingRequests[E].xhr;delete this.pendingRequests[E],m.abort()}}class v{constructor(E){this._source=E,this._manager=new M(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const m=this._rangeRequestReaders.indexOf(E);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(E,m){const x=new S(this._manager,E,m);return x.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(x),x}cancelAllRequests(E){var m;(m=this._fullRequestReader)==null||m.cancel(E);for(const x of this._rangeRequestReaders.slice(0))x.cancel(E)}}s.PDFNetworkStream=v;class p{constructor(E,m){this._manager=E;const x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=E.requestFull(x),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,m=this._manager.getRequestXhr(E),x=R=>m.getResponseHeader(R),{allowRangeRequests:d,suggestedLength:b}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(x),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,u.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var m;(m=this.onProgress)==null||m.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new o.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class S{constructor(E,m,x){this._manager=E;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(m,x,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)==null||E.call(this,this)}_onDone(E){const m=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,u.createResponseStatusError)(E,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new o.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var o=L(1),u=L(20);const W=/^file:\/\/\/[a-zA-Z]:\//;function O(x){const d=require$$5,b=d.parse(x);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(x)?d.parse(`file:///${x}`):(b.host||(b.protocol="file:"),b)}class at{constructor(d){this.source=d,this.url=O(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new E(this):new S(this),this._fullRequestReader}getRangeReader(d,b){if(b<=this._progressiveDataLength)return null;const R=this.isFsUrl?new m(this,d,b):new w(this,d,b);return this._rangeRequestReaders.push(R),R}cancelAllRequests(d){var b;(b=this._fullRequestReader)==null||b.cancel(d);for(const R of this._rangeRequestReaders.slice(0))R.cancel(d)}}s.PDFNodeStream=at;class M{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=d.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=d.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",b=>{this._error(b)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const b=d.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=d.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",b=>{this._error(b)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(x,d){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:d}}class S extends M{constructor(d){super(d);const b=R=>{if(R.statusCode===404){const l=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(R);const C=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:A,suggestedLength:i}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=i||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(C)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(p(this._url,d.httpHeaders),b)}else{const R=require$$5;this._request=R.request(p(this._url,d.httpHeaders),b)}this._request.on("error",R=>{this._storedError=R,this._headersCapability.reject(R)}),this._request.end()}}class w extends v{constructor(d,b,R){super(d),this._httpHeaders={};for(const A in d.httpHeaders){const i=d.httpHeaders[A];i!==void 0&&(this._httpHeaders[A]=i)}this._httpHeaders.Range=`bytes=${b}-${R-1}`;const C=A=>{if(A.statusCode===404){const i=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=i;return}this._setReadableStream(A)};if(this._request=null,this._url.protocol==="http:"){const A=require$$5;this._request=A.request(p(this._url,this._httpHeaders),C)}else{const A=require$$5;this._request=A.request(p(this._url,this._httpHeaders),C)}this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class E extends M{constructor(d){super(d);let b=decodeURIComponent(this._url.path);W.test(this._url.href)&&(b=b.replace(/^\//,""));const R=require$$5;R.lstat(b,(C,A)=>{if(C){C.code==="ENOENT"&&(C=new o.MissingPDFException(`Missing PDF "${b}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=A.size,this._setReadableStream(R.createReadStream(b)),this._headersCapability.resolve()})}}class m extends v{constructor(d,b,R){super(d);let C=decodeURIComponent(this._url.path);W.test(this._url.href)&&(C=C.replace(/^\//,""));const A=require$$5;this._setReadableStream(A.createReadStream(C,{start:b,end:R-1}))}}},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var o=L(6),u=L(1);const W={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},O="http://www.w3.org/XML/1998/namespace",at="http://www.w3.org/1999/xlink",M=["butt","round","square"],v=["miter","round","bevel"],p=function(A,i="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([A],{type:i}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${i};base64,`;for(let c=0,F=A.length;c<F;c+=3){const g=A[c]&255,H=A[c+1]&255,$=A[c+2]&255,P=g>>2,q=(g&3)<<4|H>>4,et=c+1<F?(H&15)<<2|$>>6:64,rt=c+2<F?$&63:64;y+=D[P]+D[q]+D[et]+D[rt]}return y},S=function(){const A=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,l=new Int32Array(256);for(let $=0;$<256;$++){let P=$;for(let q=0;q<8;q++)P=P&1?3988292384^P>>1&2147483647:P>>1&2147483647;l[$]=P}function D($,P,q){let et=-1;for(let rt=P;rt<q;rt++){const z=(et^$[rt])&255,ct=l[z];et=et>>>8^ct}return et^-1}function y($,P,q,et){let rt=et;const z=P.length;q[rt]=z>>24&255,q[rt+1]=z>>16&255,q[rt+2]=z>>8&255,q[rt+3]=z&255,rt+=4,q[rt]=$.charCodeAt(0)&255,q[rt+1]=$.charCodeAt(1)&255,q[rt+2]=$.charCodeAt(2)&255,q[rt+3]=$.charCodeAt(3)&255,rt+=4,q.set(P,rt),rt+=P.length;const ct=D(q,et+4,rt);q[rt]=ct>>24&255,q[rt+1]=ct>>16&255,q[rt+2]=ct>>8&255,q[rt+3]=ct&255}function c($,P,q){let et=1,rt=0;for(let z=P;z<q;++z)et=(et+($[z]&255))%65521,rt=(rt+et)%65521;return rt<<16|et}function F($){if(!u.isNodeJS)return g($);try{const P=parseInt(process.versions.node)>=8?$:Buffer.from($),q=require$$5.deflateSync(P,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(P){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+P)}return g($)}function g($){let P=$.length;const q=65535,et=Math.ceil(P/q),rt=new Uint8Array(2+P+et*5+4);let z=0;rt[z++]=120,rt[z++]=156;let ct=0;for(;P>q;)rt[z++]=0,rt[z++]=255,rt[z++]=255,rt[z++]=0,rt[z++]=0,rt.set($.subarray(ct,ct+q),z),z+=q,ct+=q,P-=q;rt[z++]=1,rt[z++]=P&255,rt[z++]=P>>8&255,rt[z++]=~P&65535&255,rt[z++]=(~P&65535)>>8&255,rt.set($.subarray(ct),z),z+=$.length-ct;const mt=c($,0,$.length);return rt[z++]=mt>>24&255,rt[z++]=mt>>16&255,rt[z++]=mt>>8&255,rt[z++]=mt&255,rt}function H($,P,q,et){const rt=$.width,z=$.height;let ct,mt,At;const _t=$.data;switch(P){case u.ImageKind.GRAYSCALE_1BPP:mt=0,ct=1,At=rt+7>>3;break;case u.ImageKind.RGB_24BPP:mt=2,ct=8,At=rt*3;break;case u.ImageKind.RGBA_32BPP:mt=6,ct=8,At=rt*4;break;default:throw new Error("invalid format")}const k=new Uint8Array((1+At)*z);let a=0,e=0;for(let G=0;G<z;++G)k[a++]=0,k.set(_t.subarray(e,e+At),a),e+=At,a+=At;if(P===u.ImageKind.GRAYSCALE_1BPP&&et){a=0;for(let G=0;G<z;G++){a++;for(let nt=0;nt<At;nt++)k[a++]^=255}}const n=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,z>>24&255,z>>16&255,z>>8&255,z&255,ct,mt,0,0,0]),h=F(k),f=A.length+i*3+n.length+h.length,T=new Uint8Array(f);let I=0;return T.set(A,I),I+=A.length,y("IHDR",n,T,I),I+=i+n.length,y("IDATA",h,T,I),I+=i+h.length,y("IEND",new Uint8Array(0),T,I),p(T,"image/png",q)}return function(P,q,et){const rt=P.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:P.kind;return H(P,rt,q,et)}}();class w{constructor(){this.fontSizeScale=1,this.fontWeight=W.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=W.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,l){this.x=i,this.y=l}}function E(A){let i=[];const l=[];for(const D of A){if(D.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),l.push(i),i=i.at(-1).items;continue}D.fn==="restore"?i=l.pop():i.push(D)}return i}function m(A){if(Number.isInteger(A))return A.toString();const i=A.toFixed(10);let l=i.length-1;if(i[l]!=="0")return i;do l--;while(i[l]==="0");return i.substring(0,i[l]==="."?l:l+1)}function x(A){if(A[4]===0&&A[5]===0){if(A[1]===0&&A[2]===0)return A[0]===1&&A[3]===1?"":`scale(${m(A[0])} ${m(A[3])})`;if(A[0]===A[3]&&A[1]===-A[2]){const i=Math.acos(A[0])*180/Math.PI;return`rotate(${m(i)})`}}else if(A[0]===1&&A[1]===0&&A[2]===0&&A[3]===1)return`translate(${m(A[4])} ${m(A[5])})`;return`matrix(${m(A[0])} ${m(A[1])} ${m(A[2])} ${m(A[3])} ${m(A[4])} ${m(A[5])})`}let d=0,b=0,R=0;class C{constructor(i,l,D=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new w,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const y in u.OPS)this._operatorIdMapping[u.OPS[y]]=y}getObject(i,l=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):l}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const l=i.fnArray,D=i.argsArray;for(let y=0,c=l.length;y<c;y++)if(l[y]===u.OPS.dependency)for(const F of D[y]){const g=F.startsWith("g_")?this.commonObjs:this.objs,H=new Promise($=>{g.get(F,$)});this.current.dependencies.push(H)}return Promise.all(this.current.dependencies)}transform(i,l,D,y,c,F){const g=[i,l,D,y,c,F];this.transformMatrix=u.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(i,l){this.viewport=l;const D=this._initialize(l);return this.loadDependencies(i).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),D))}convertOpList(i){const l=this._operatorIdMapping,D=i.argsArray,y=i.fnArray,c=[];for(let F=0,g=y.length;F<g;F++){const H=y[F];c.push({fnId:H,fn:l[H],args:D[F]})}return E(c)}executeOpTree(i){for(const l of i){const D=l.fn,y=l.fnId,c=l.args;switch(y|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(c);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case u.OPS.setFont:this.setFont(c);break;case u.OPS.showText:this.showText(c[0]);break;case u.OPS.showSpacedText:this.showText(c[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(c[0],c[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case u.OPS.setHScale:this.setHScale(c[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.setTextRise:this.setTextRise(c[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case u.OPS.setLineWidth:this.setLineWidth(c[0]);break;case u.OPS.setLineJoin:this.setLineJoin(c[0]);break;case u.OPS.setLineCap:this.setLineCap(c[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case u.OPS.setFillColorN:this.setFillColorN(c);break;case u.OPS.shadingFill:this.shadingFill(c[0]);break;case u.OPS.setDash:this.setDash(c[0],c[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case u.OPS.setFlatness:this.setFlatness(c[0]);break;case u.OPS.setGState:this.setGState(c[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.constructPath:this.constructPath(c[0],c[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,u.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,l,D,y,c,F){const g=this.current;g.textMatrix=g.lineMatrix=[i,l,D,y,c,F],g.textMatrixScale=Math.hypot(i,l),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${m(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",m(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=u.IDENTITY_MATRIX,i.lineMatrix=u.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,l){const D=this.current;D.x=D.lineX+=i,D.y=D.lineY+=l,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${m(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",m(-D.y))}showText(i){const l=this.current,D=l.font,y=l.fontSize;if(y===0)return;const c=l.fontSizeScale,F=l.charSpacing,g=l.wordSpacing,H=l.fontDirection,$=l.textHScale*H,P=D.vertical,q=P?1:-1,et=D.defaultVMetrics,rt=y*l.fontMatrix[0];let z=0;for(const At of i){if(At===null){z+=H*g;continue}else if(typeof At=="number"){z+=q*At*y/1e3;continue}const _t=(At.isSpace?g:0)+F,k=At.fontChar;let a,e,n=At.width;if(P){let f;const T=At.vmetric||et;f=At.vmetric?T[1]:n*.5,f=-f*rt;const I=T[2]*rt;n=T?-T[0]:n,a=f/c,e=(z+I)/c}else a=z/c,e=0;(At.isInFont||D.missingFile)&&(l.xcoords.push(l.x+a),P&&l.ycoords.push(-l.y+e),l.tspan.textContent+=k);const h=P?n*rt-_t*H:n*rt+_t*H;z+=h}l.tspan.setAttributeNS(null,"x",l.xcoords.map(m).join(" ")),P?l.tspan.setAttributeNS(null,"y",l.ycoords.map(m).join(" ")):l.tspan.setAttributeNS(null,"y",m(-l.y)),P?l.y-=z:l.x+=z*$,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${m(l.fontSize)}px`),l.fontStyle!==W.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==W.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const ct=l.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(ct===u.TextRenderingMode.FILL||ct===u.TextRenderingMode.FILL_STROKE?(l.fillColor!==W.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),ct===u.TextRenderingMode.STROKE||ct===u.TextRenderingMode.FILL_STROKE){const At=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,At)}let mt=l.textMatrix;l.textRise!==0&&(mt=mt.slice(),mt[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${x(mt)} scale(${m($)}, -1)`),l.txtElement.setAttributeNS(O,"xml:space","preserve"),l.txtElement.append(l.tspan),l.txtgrp.append(l.txtElement),this._ensureTransformGroup().append(l.txtElement)}setLeadingMoveText(i,l){this.setLeading(-l),this.moveText(i,l)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const l=p(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${l}); }
`}setFont(i){const l=this.current,D=this.commonObjs.get(i[0]);let y=i[1];l.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),l.fontMatrix=D.fontMatrix||u.FONT_IDENTITY_MATRIX;let c="normal";D.black?c="900":D.bold&&(c="bold");const F=D.italic?"italic":"normal";y<0?(y=-y,l.fontDirection=-1):l.fontDirection=1,l.fontSize=y,l.fontFamily=D.loadedName,l.fontWeight=c,l.fontStyle=F,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",m(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const i=this.current;i.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=i.txtElement)!=null&&l.hasChildNodes())&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=M[i]}setLineJoin(i){this.current.lineJoin=v[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,l,D){this.current.strokeColor=u.Util.makeHexColor(i,l,D)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,l,D){this.current.fillColor=u.Util.makeHexColor(i,l,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const{width:l,height:D}=this.viewport,y=u.Util.inverseTransform(this.transformMatrix),[c,F,g,H]=u.Util.getAxialAlignedBoundingBox([0,0,l,D],y),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",c),$.setAttributeNS(null,"y",F),$.setAttributeNS(null,"width",g-c),$.setAttributeNS(null,"height",H-F),$.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const l=i[1],D=i[2],y=i[3]||u.IDENTITY_MATRIX,[c,F,g,H]=i[4],$=i[5],P=i[6],q=i[7],et=`shading${R++}`,[rt,z,ct,mt]=u.Util.normalizeRect([...u.Util.applyTransform([c,F],y),...u.Util.applyTransform([g,H],y)]),[At,_t]=u.Util.singularValueDecompose2dScale(y),k=$*At,a=P*_t,e=this.svgFactory.createElement("svg:pattern");e.setAttributeNS(null,"id",et),e.setAttributeNS(null,"patternUnits","userSpaceOnUse"),e.setAttributeNS(null,"width",k),e.setAttributeNS(null,"height",a),e.setAttributeNS(null,"x",`${rt}`),e.setAttributeNS(null,"y",`${z}`);const n=this.svg,h=this.transformMatrix,f=this.current.fillColor,T=this.current.strokeColor,I=this.svgFactory.create(ct-rt,mt-z);if(this.svg=I,this.transformMatrix=y,q===2){const G=u.Util.makeHexColor(...l);this.current.fillColor=G,this.current.strokeColor=G}return this.executeOpTree(this.convertOpList(D)),this.svg=n,this.transformMatrix=h,this.current.fillColor=f,this.current.strokeColor=T,e.append(I.childNodes[0]),this.defs.append(e),`url(#${et})`}_makeShadingPattern(i){switch(typeof i=="string"&&(i=this.objs.get(i)),i[0]){case"RadialAxial":const l=`shading${R++}`,D=i[3];let y;switch(i[1]){case"axial":const c=i[4],F=i[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",l),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",c[0]),y.setAttributeNS(null,"y1",c[1]),y.setAttributeNS(null,"x2",F[0]),y.setAttributeNS(null,"y2",F[1]);break;case"radial":const g=i[4],H=i[5],$=i[6],P=i[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",l),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",H[0]),y.setAttributeNS(null,"cy",H[1]),y.setAttributeNS(null,"r",P),y.setAttributeNS(null,"fx",g[0]),y.setAttributeNS(null,"fy",g[1]),y.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const c of D){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",c[0]),F.setAttributeNS(null,"stop-color",c[1]),y.append(F)}return this.defs.append(y),`url(#${l})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,l){this.current.dashArray=i,this.current.dashPhase=l}constructPath(i,l){const D=this.current;let y=D.x,c=D.y,F=[],g=0;for(const H of i)switch(H|0){case u.OPS.rectangle:y=l[g++],c=l[g++];const $=l[g++],P=l[g++],q=y+$,et=c+P;F.push("M",m(y),m(c),"L",m(q),m(c),"L",m(q),m(et),"L",m(y),m(et),"Z");break;case u.OPS.moveTo:y=l[g++],c=l[g++],F.push("M",m(y),m(c));break;case u.OPS.lineTo:y=l[g++],c=l[g++],F.push("L",m(y),m(c));break;case u.OPS.curveTo:y=l[g+4],c=l[g+5],F.push("C",m(l[g]),m(l[g+1]),m(l[g+2]),m(l[g+3]),m(y),m(c)),g+=6;break;case u.OPS.curveTo2:F.push("C",m(y),m(c),m(l[g]),m(l[g+1]),m(l[g+2]),m(l[g+3])),y=l[g+2],c=l[g+3],g+=4;break;case u.OPS.curveTo3:y=l[g+2],c=l[g+3],F.push("C",m(l[g]),m(l[g+1]),m(y),m(c),m(y),m(c)),g+=4;break;case u.OPS.closePath:F.push("Z");break}F=F.join(" "),D.path&&i.length>0&&i[0]!==u.OPS.rectangle&&i[0]!==u.OPS.moveTo?F=D.path.getAttributeNS(null,"d")+F:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",F),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(y,c)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const l=`clippath${d++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",l),D.setAttributeNS(null,"transform",x(this.transformMatrix));const y=i.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(y),this.defs.append(D),i.activeClipUrl){i.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;D.setAttributeNS(null,"clip-path",i.activeClipUrl)}i.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const l=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",l)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[l,D]of i)switch(l){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,u.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,l=1){const D=this.current;let y=D.dashArray;l!==1&&y.length>0&&(y=y.map(function(c){return l*c})),i.setAttributeNS(null,"stroke",D.strokeColor),i.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",m(D.miterLimit)),i.setAttributeNS(null,"stroke-linecap",D.lineCap),i.setAttributeNS(null,"stroke-linejoin",D.lineJoin),i.setAttributeNS(null,"stroke-width",m(l*D.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",y.map(m).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",m(l*D.dashPhase)+"px")}eoFill(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var i;(i=this.current.element)==null||i.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(i)}paintImageXObject(i){const l=this.getObject(i);if(!l){(0,u.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(i,l){const D=i.width,y=i.height,c=S(i,this.forceDataSchema,!!l),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",m(D)),F.setAttributeNS(null,"height",m(y)),this.current.element=F,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(at,"xlink:href",c),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",m(-y)),g.setAttributeNS(null,"width",m(D)+"px"),g.setAttributeNS(null,"height",m(y)+"px"),g.setAttributeNS(null,"transform",`scale(${m(1/D)} ${m(-1/y)})`),l?l.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(i){const l=this.getObject(i.data,i);if(l.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,y=l.width,c=l.height,F=D.fillColor;D.maskId=`mask${b++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",D.maskId);const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",m(y)),H.setAttributeNS(null,"height",m(c)),H.setAttributeNS(null,"fill",F),H.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(H),this.paintInlineImageXObject(l,g)}paintFormXObjectBegin(i,l){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),l){const D=l[2]-l[0],y=l[3]-l[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",l[0]),c.setAttributeNS(null,"y",l[1]),c.setAttributeNS(null,"width",m(D)),c.setAttributeNS(null,"height",m(y)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const l=this.svgFactory.create(i.width,i.height),D=this.svgFactory.createElement("svg:defs");l.append(D),this.defs=D;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",x(i.transform)),l.append(y),this.svg=y,l}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",x(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=C},(j,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class L{static textContent(u){const W=[],O={items:W,styles:Object.create(null)};function at(M){var S;if(!M)return;let v=null;const p=M.name;if(p==="#text")v=M.value;else if(L.shouldBuildText(p))(S=M==null?void 0:M.attributes)!=null&&S.textContent?v=M.attributes.textContent:M.value&&(v=M.value);else return;if(v!==null&&W.push({str:v}),!!M.children)for(const w of M.children)at(w)}return at(u),O}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}s.XfaText=L},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=x,s.updateTextLayer=d;var o=L(1),u=L(6);const W=1e5,O=30,at=.8,M=new Map;function v(b,R){let C;if(R&&o.FeatureTest.isOffscreenCanvasSupported)C=new OffscreenCanvas(b,b).getContext("2d",{alpha:!1});else{const A=document.createElement("canvas");A.width=A.height=b,C=A.getContext("2d",{alpha:!1})}return C}function p(b,R){const C=M.get(b);if(C)return C;const A=v(O,R);A.font=`${O}px ${b}`;const i=A.measureText("");let l=i.fontBoundingBoxAscent,D=Math.abs(i.fontBoundingBoxDescent);if(l){const c=l/(l+D);return M.set(b,c),A.canvas.width=A.canvas.height=0,c}A.strokeStyle="red",A.clearRect(0,0,O,O),A.strokeText("g",0,0);let y=A.getImageData(0,0,O,O).data;D=0;for(let c=y.length-1-3;c>=0;c-=4)if(y[c]>0){D=Math.ceil(c/4/O);break}A.clearRect(0,0,O,O),A.strokeText("A",0,O),y=A.getImageData(0,0,O,O).data,l=0;for(let c=0,F=y.length;c<F;c+=4)if(y[c]>0){l=O-Math.floor(c/4/O);break}if(A.canvas.width=A.canvas.height=0,l){const c=l/(l+D);return M.set(b,c),c}return M.set(b,at),at}function S(b,R,C){const A=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};b._textDivs.push(A);const l=o.Util.transform(b._transform,R.transform);let D=Math.atan2(l[1],l[0]);const y=C[R.fontName];y.vertical&&(D+=Math.PI/2);const c=Math.hypot(l[2],l[3]),F=c*p(y.fontFamily,b._isOffscreenCanvasSupported);let g,H;D===0?(g=l[4],H=l[5]-F):(g=l[4]+F*Math.sin(D),H=l[5]-F*Math.cos(D));const $="calc(var(--scale-factor)*",P=A.style;b._container===b._rootContainer?(P.left=`${(100*g/b._pageWidth).toFixed(2)}%`,P.top=`${(100*H/b._pageHeight).toFixed(2)}%`):(P.left=`${$}${g.toFixed(2)}px)`,P.top=`${$}${H.toFixed(2)}px)`),P.fontSize=`${$}${c.toFixed(2)}px)`,P.fontFamily=y.fontFamily,i.fontSize=c,A.setAttribute("role","presentation"),A.textContent=R.str,A.dir=R.dir,b._fontInspectorEnabled&&(A.dataset.fontName=R.fontName),D!==0&&(i.angle=D*(180/Math.PI));let q=!1;if(R.str.length>1)q=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const et=Math.abs(R.transform[0]),rt=Math.abs(R.transform[3]);et!==rt&&Math.max(et,rt)/Math.min(et,rt)>1.5&&(q=!0)}q&&(i.canvasWidth=y.vertical?R.height:R.width),b._textDivProperties.set(A,i),b._isReadableStream&&b._layoutText(A)}function w(b){const{div:R,scale:C,properties:A,ctx:i,prevFontSize:l,prevFontFamily:D}=b,{style:y}=R;let c="";if(A.canvasWidth!==0&&A.hasText){const{fontFamily:F}=y,{canvasWidth:g,fontSize:H}=A;(l!==H||D!==F)&&(i.font=`${H*C}px ${F}`,b.prevFontSize=H,b.prevFontFamily=F);const{width:$}=i.measureText(R.textContent);$>0&&(c=`scaleX(${g*C/$})`)}A.angle!==0&&(c=`rotate(${A.angle}deg) ${c}`),c.length>0&&(y.transform=c)}function E(b){if(b._canceled)return;const R=b._textDivs,C=b._capability;if(R.length>W){C.resolve();return}if(!b._isReadableStream)for(const i of R)b._layoutText(i);C.resolve()}class m{constructor({textContentSource:R,container:C,viewport:A,textDivs:i,textDivProperties:l,textContentItemsStr:D,isOffscreenCanvasSupported:y}){var $;this._textContentSource=R,this._isReadableStream=R instanceof ReadableStream,this._container=this._rootContainer=C,this._textDivs=i||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=l||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,y)};const{pageWidth:c,pageHeight:F,pageX:g,pageY:H}=A.rawDims;this._transform=[1,0,0,-1,-g,H+F],this._pageWidth=c,this._pageHeight=F,(0,u.setLayerDimensions)(C,A),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(R,C){for(const A of R){if(A.str===void 0){if(A.type==="beginMarkedContentProps"||A.type==="beginMarkedContent"){const i=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),A.id!==null&&this._container.setAttribute("id",`${A.id}`),i.append(this._container)}else A.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(A.str),S(this,A,C)}}_layoutText(R){const C=this._layoutTextParams.properties=this._textDivProperties.get(R);if(this._layoutTextParams.div=R,w(this._layoutTextParams),C.hasText&&this._container.append(R),C.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this._container.append(A)}}_render(){const R=new o.PromiseCapability;let C=Object.create(null);if(this._isReadableStream){const A=()=>{this._reader.read().then(({value:i,done:l})=>{if(l){R.resolve();return}Object.assign(C,i.styles),this._processItems(i.items,C),A()},R.reject)};this._reader=this._textContentSource.getReader(),A()}else if(this._textContentSource){const{items:A,styles:i}=this._textContentSource;this._processItems(A,i),R.resolve()}else throw new Error('No "textContentSource" parameter specified.');R.promise.then(()=>{C=null,E(this)},this._capability.reject)}}s.TextLayerRenderTask=m;function x(b){!b.textContentSource&&(b.textContent||b.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),b.textContentSource=b.textContent||b.textContentStream);const{container:R,viewport:C}=b,A=getComputedStyle(R),i=A.getPropertyValue("visibility"),l=parseFloat(A.getPropertyValue("--scale-factor"));i==="visible"&&(!l||Math.abs(l-C.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new m(b);return D._render(),D}function d({container:b,viewport:R,textDivs:C,textDivProperties:A,isOffscreenCanvasSupported:i,mustRotate:l=!0,mustRescale:D=!0}){if(l&&(0,u.setLayerDimensions)(b,{rotation:R.rotation}),D){const y=v(0,i),F={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const g of C)F.properties=A.get(g),F.div=g,w(F)}}},(j,s,L)=>{var p,S,w,E,m,x,d,b,R,C,A,es,l,Pe,y,ss,F,ns;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var o=L(1),u=L(4),W=L(28),O=L(33),at=L(6),M=L(34);const H=class H{constructor({uiManager:P,pageIndex:q,div:et,accessibilityManager:rt,annotationLayer:z,viewport:ct,l10n:mt}){U(this,A);U(this,l);U(this,y);U(this,F);U(this,p,void 0);U(this,S,!1);U(this,w,null);U(this,E,this.pointerup.bind(this));U(this,m,this.pointerdown.bind(this));U(this,x,new Map);U(this,d,!1);U(this,b,!1);U(this,R,!1);U(this,C,void 0);const At=[W.FreeTextEditor,O.InkEditor,M.StampEditor];if(!H._initialized){H._initialized=!0;for(const _t of At)_t.initialize(mt)}P.registerEditorTypes(At),it(this,C,P),this.pageIndex=q,this.div=et,it(this,p,rt),it(this,w,z),this.viewport=ct,t(this,C).addLayer(this)}get isEmpty(){return t(this,x).size===0}updateToolbar(P){t(this,C).updateToolbar(P)}updateMode(P=t(this,C).getMode()){X(this,F,ns).call(this),P===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),P!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",P===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",P===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",P===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(P){if(!P&&t(this,C).getMode()!==o.AnnotationEditorType.INK)return;if(!P){for(const et of t(this,x).values())if(et.isEmpty()){et.setInBackground();return}}X(this,l,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(P){t(this,C).setEditingState(P)}addCommands(P){t(this,C).addCommands(P)}enable(){this.div.style.pointerEvents="auto";const P=new Set;for(const et of t(this,x).values())et.enableEditing(),et.annotationElementId&&P.add(et.annotationElementId);if(!t(this,w))return;const q=t(this,w).getEditableAnnotations();for(const et of q){if(et.hide(),t(this,C).isDeletedAnnotationElement(et.data.id)||P.has(et.data.id))continue;const rt=this.deserialize(et);rt&&(this.addOrRebuild(rt),rt.enableEditing())}}disable(){var q;it(this,R,!0),this.div.style.pointerEvents="none";const P=new Set;for(const et of t(this,x).values()){if(et.disableEditing(),!et.annotationElementId||et.serialize()!==null){P.add(et.annotationElementId);continue}(q=this.getEditableAnnotation(et.annotationElementId))==null||q.show(),et.remove()}if(t(this,w)){const et=t(this,w).getEditableAnnotations();for(const rt of et){const{id:z}=rt.data;P.has(z)||t(this,C).isDeletedAnnotationElement(z)||rt.show()}}X(this,F,ns).call(this),this.isEmpty&&(this.div.hidden=!0),it(this,R,!1)}getEditableAnnotation(P){var q;return((q=t(this,w))==null?void 0:q.getEditableAnnotation(P))||null}setActiveEditor(P){t(this,C).getActive()!==P&&t(this,C).setActiveEditor(P)}enableClick(){this.div.addEventListener("pointerdown",t(this,m)),this.div.addEventListener("pointerup",t(this,E))}disableClick(){this.div.removeEventListener("pointerdown",t(this,m)),this.div.removeEventListener("pointerup",t(this,E))}attach(P){t(this,x).set(P.id,P);const{annotationElementId:q}=P;q&&t(this,C).isDeletedAnnotationElement(q)&&t(this,C).removeDeletedAnnotationElement(P)}detach(P){var q;t(this,x).delete(P.id),(q=t(this,p))==null||q.removePointerInTextLayer(P.contentDiv),!t(this,R)&&P.annotationElementId&&t(this,C).addDeletedAnnotationElement(P)}remove(P){this.detach(P),t(this,C).removeEditor(P),P.div.contains(document.activeElement)&&setTimeout(()=>{t(this,C).focusMainContainer()},0),P.div.remove(),P.isAttachedToDOM=!1,t(this,b)||this.addInkEditorIfNeeded(!1)}changeParent(P){var q;P.parent!==this&&(P.annotationElementId&&(t(this,C).addDeletedAnnotationElement(P.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(P),P.annotationElementId=null),this.attach(P),(q=P.parent)==null||q.detach(P),P.setParent(this),P.div&&P.isAttachedToDOM&&(P.div.remove(),this.div.append(P.div)))}add(P){if(this.changeParent(P),t(this,C).addEditor(P),this.attach(P),!P.isAttachedToDOM){const q=P.render();this.div.append(q),P.isAttachedToDOM=!0}P.fixAndSetPosition(),P.onceAdded(),t(this,C).addToAnnotationStorage(P)}moveEditorInDOM(P){var et;if(!P.isAttachedToDOM)return;const{activeElement:q}=document;P.div.contains(q)&&(P._focusEventsAllowed=!1,setTimeout(()=>{P.div.contains(document.activeElement)?P._focusEventsAllowed=!0:(P.div.addEventListener("focusin",()=>{P._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),P._structTreeParentId=(et=t(this,p))==null?void 0:et.moveElementInDOM(this.div,P.div,P.contentDiv,!0)}addOrRebuild(P){P.needsToBeRebuilt()?P.rebuild():this.add(P)}addUndoableEditor(P){const q=()=>P._uiManager.rebuild(P),et=()=>{P.remove()};this.addCommands({cmd:q,undo:et,mustExec:!1})}getNextId(){return t(this,C).getId()}pasteEditor(P,q){t(this,C).updateToolbar(P),t(this,C).updateMode(P);const{offsetX:et,offsetY:rt}=X(this,y,ss).call(this),z=this.getNextId(),ct=X(this,A,es).call(this,{parent:this,id:z,x:et,y:rt,uiManager:t(this,C),isCentered:!0,...q});ct&&this.add(ct)}deserialize(P){switch(P.annotationType??P.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return W.FreeTextEditor.deserialize(P,this,t(this,C));case o.AnnotationEditorType.INK:return O.InkEditor.deserialize(P,this,t(this,C));case o.AnnotationEditorType.STAMP:return M.StampEditor.deserialize(P,this,t(this,C))}return null}addNewEditor(){X(this,l,Pe).call(this,X(this,y,ss).call(this),!0)}setSelected(P){t(this,C).setSelected(P)}toggleSelected(P){t(this,C).toggleSelected(P)}isSelected(P){return t(this,C).isSelected(P)}unselect(P){t(this,C).unselect(P)}pointerup(P){const{isMac:q}=o.FeatureTest.platform;if(!(P.button!==0||P.ctrlKey&&q)&&P.target===this.div&&t(this,d)){if(it(this,d,!1),!t(this,S)){it(this,S,!0);return}if(t(this,C).getMode()===o.AnnotationEditorType.STAMP){t(this,C).unselectAll();return}X(this,l,Pe).call(this,P,!1)}}pointerdown(P){if(t(this,d)){it(this,d,!1);return}const{isMac:q}=o.FeatureTest.platform;if(P.button!==0||P.ctrlKey&&q||P.target!==this.div)return;it(this,d,!0);const et=t(this,C).getActive();it(this,S,!et||et.isEmpty())}findNewParent(P,q,et){const rt=t(this,C).findParent(q,et);return rt===null||rt===this?!1:(rt.changeParent(P),!0)}destroy(){var P,q;((P=t(this,C).getActive())==null?void 0:P.parent)===this&&(t(this,C).commitOrRemove(),t(this,C).setActiveEditor(null));for(const et of t(this,x).values())(q=t(this,p))==null||q.removePointerInTextLayer(et.contentDiv),et.setParent(null),et.isAttachedToDOM=!1,et.div.remove();this.div=null,t(this,x).clear(),t(this,C).removeLayer(this)}render({viewport:P}){this.viewport=P,(0,at.setLayerDimensions)(this.div,P);for(const q of t(this,C).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:P}){t(this,C).commitOrRemove(),this.viewport=P,(0,at.setLayerDimensions)(this.div,{rotation:P.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:P,pageHeight:q}=this.viewport.rawDims;return[P,q]}};p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakMap,R=new WeakMap,C=new WeakMap,A=new WeakSet,es=function(P){switch(t(this,C).getMode()){case o.AnnotationEditorType.FREETEXT:return new W.FreeTextEditor(P);case o.AnnotationEditorType.INK:return new O.InkEditor(P);case o.AnnotationEditorType.STAMP:return new M.StampEditor(P)}return null},l=new WeakSet,Pe=function(P,q){const et=this.getNextId(),rt=X(this,A,es).call(this,{parent:this,id:et,x:P.offsetX,y:P.offsetY,uiManager:t(this,C),isCentered:q});return rt&&this.add(rt),rt},y=new WeakSet,ss=function(){const{x:P,y:q,width:et,height:rt}=this.div.getBoundingClientRect(),z=Math.max(0,P),ct=Math.max(0,q),mt=Math.min(window.innerWidth,P+et),At=Math.min(window.innerHeight,q+rt),_t=(z+mt)/2-P,k=(ct+At)/2-q,[a,e]=this.viewport.rotation%180===0?[_t,k]:[k,_t];return{offsetX:a,offsetY:e}},F=new WeakSet,ns=function(){it(this,b,!0);for(const P of t(this,x).values())P.isEmpty()&&P.remove();it(this,b,!1)},ee(H,"_initialized",!1);let v=H;s.AnnotationEditorLayer=v},(j,s,L)=>{var M,v,p,S,w,E,m,x,d,b,js,C,ks,i,Ms,D,Ee,c,is,g,Fs,$,rs;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var o=L(1),u=L(5),W=L(4),O=L(29);const q=class q extends W.AnnotationEditor{constructor(z){super({...z,name:"freeTextEditor"});U(this,b);U(this,C);U(this,i);U(this,D);U(this,c);U(this,g);U(this,$);U(this,M,this.editorDivBlur.bind(this));U(this,v,this.editorDivFocus.bind(this));U(this,p,this.editorDivInput.bind(this));U(this,S,this.editorDivKeydown.bind(this));U(this,w,void 0);U(this,E,"");U(this,m,`${this.id}-editor`);U(this,x,void 0);U(this,d,null);it(this,w,z.color||q._defaultColor||W.AnnotationEditor._defaultLineColor),it(this,x,z.fontSize||q._defaultFontSize)}static get _keyboardManager(){const z=q.prototype,ct=_t=>_t.isEmpty(),mt=u.AnnotationEditorUIManager.TRANSLATE_SMALL,At=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],z.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],z.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],z._translateEmpty,{args:[-mt,0],checker:ct}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],z._translateEmpty,{args:[-At,0],checker:ct}],[["ArrowRight","mac+ArrowRight"],z._translateEmpty,{args:[mt,0],checker:ct}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],z._translateEmpty,{args:[At,0],checker:ct}],[["ArrowUp","mac+ArrowUp"],z._translateEmpty,{args:[0,-mt],checker:ct}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],z._translateEmpty,{args:[0,-At],checker:ct}],[["ArrowDown","mac+ArrowDown"],z._translateEmpty,{args:[0,mt],checker:ct}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],z._translateEmpty,{args:[0,At],checker:ct}]]))}static initialize(z){W.AnnotationEditor.initialize(z,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(z,ct){switch(z){case o.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=ct;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=ct;break}}updateParams(z,ct){switch(z){case o.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,b,js).call(this,ct);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,C,ks).call(this,ct);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||W.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,x)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,w)]]}_translateEmpty(z,ct){this._uiManager.translateSelectedEditors(z,ct,!0)}getInitialTranslation(){const z=this.parentScale;return[-q._internalPadding*z,-(q._internalPadding+t(this,x))*z]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,S)),this.editorDiv.addEventListener("focus",t(this,v)),this.editorDiv.addEventListener("blur",t(this,M)),this.editorDiv.addEventListener("input",t(this,p)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,m)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,S)),this.editorDiv.removeEventListener("focus",t(this,v)),this.editorDiv.removeEventListener("blur",t(this,M)),this.editorDiv.removeEventListener("input",t(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(z){this._focusEventsAllowed&&(super.focusin(z),z.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var z;if(this.width){X(this,$,rs).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(z=this._initialOptions)!=null&&z.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const z=t(this,E),ct=it(this,E,X(this,i,Ms).call(this).trimEnd());if(z===ct)return;const mt=At=>{if(it(this,E,At),!At){this.remove();return}X(this,c,is).call(this),this._uiManager.rebuild(this),X(this,D,Ee).call(this)};this.addCommands({cmd:()=>{mt(ct)},undo:()=>{mt(z)},mustExec:!1}),X(this,D,Ee).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(z){this.enterInEditMode()}keydown(z){z.target===this.div&&z.key==="Enter"&&(this.enterInEditMode(),z.preventDefault())}editorDivKeydown(z){q._keyboardManager.exec(this,z)}editorDivFocus(z){this.isEditing=!0}editorDivBlur(z){this.isEditing=!1}editorDivInput(z){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let z,ct;this.width&&(z=this.x,ct=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,m)),this.enableEditing(),W.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(At=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("aria-label",At)}),W.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(At=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("default-content",At)}),this.editorDiv.contentEditable=!0;const{style:mt}=this.editorDiv;if(mt.fontSize=`calc(${t(this,x)}px * var(--scale-factor))`,mt.color=t(this,w),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[At,_t]=this.parentDimensions;if(this.annotationElementId){const{position:k}=t(this,d);let[a,e]=this.getInitialTranslation();[a,e]=this.pageTranslationToScreen(a,e);const[n,h]=this.pageDimensions,[f,T]=this.pageTranslation;let I,G;switch(this.rotation){case 0:I=z+(k[0]-f)/n,G=ct+this.height-(k[1]-T)/h;break;case 90:I=z+(k[0]-f)/n,G=ct-(k[1]-T)/h,[a,e]=[e,-a];break;case 180:I=z-this.width+(k[0]-f)/n,G=ct-(k[1]-T)/h,[a,e]=[-a,-e];break;case 270:I=z+(k[0]-f-this.height*h)/n,G=ct+(k[1]-T-this.width*n)/h,[a,e]=[-e,a];break}this.setAt(I*At,G*_t,a,e)}else this.setAt(z*At,ct*_t,this.width*At,this.height*_t);X(this,c,is).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(z,ct,mt){let At=null;if(z instanceof O.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:k,fontColor:a},rect:e,rotation:n,id:h},textContent:f,textPosition:T,parent:{page:{pageNumber:I}}}=z;if(!f||f.length===0)return null;At=z={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(a),fontSize:k,value:f.join(`
`),position:T,pageIndex:I-1,rect:e,rotation:n,id:h,deleted:!1}}const _t=super.deserialize(z,ct,mt);return it(_t,x,z.fontSize),it(_t,w,o.Util.makeHexColor(...z.color)),it(_t,E,z.value),_t.annotationElementId=z.id||null,it(_t,d,At),_t}serialize(z=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ct=q._internalPadding*this.parentScale,mt=this.getRect(ct,ct),At=W.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,w)),_t={annotationType:o.AnnotationEditorType.FREETEXT,color:At,fontSize:t(this,x),value:t(this,E),pageIndex:this.pageIndex,rect:mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return z?_t:this.annotationElementId&&!X(this,g,Fs).call(this,_t)?null:(_t.id=this.annotationElementId,_t)}};M=new WeakMap,v=new WeakMap,p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakSet,js=function(z){const ct=At=>{this.editorDiv.style.fontSize=`calc(${At}px * var(--scale-factor))`,this.translate(0,-(At-t(this,x))*this.parentScale),it(this,x,At),X(this,D,Ee).call(this)},mt=t(this,x);this.addCommands({cmd:()=>{ct(z)},undo:()=>{ct(mt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},C=new WeakSet,ks=function(z){const ct=t(this,w);this.addCommands({cmd:()=>{it(this,w,this.editorDiv.style.color=z)},undo:()=>{it(this,w,this.editorDiv.style.color=ct)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i=new WeakSet,Ms=function(){const z=this.editorDiv.getElementsByTagName("div");if(z.length===0)return this.editorDiv.innerText;const ct=[];for(const mt of z)ct.push(mt.innerText.replace(/\r\n?|\n/,""));return ct.join(`
`)},D=new WeakSet,Ee=function(){const[z,ct]=this.parentDimensions;let mt;if(this.isAttachedToDOM)mt=this.div.getBoundingClientRect();else{const{currentLayer:At,div:_t}=this,k=_t.style.display;_t.style.display="hidden",At.div.append(this.div),mt=_t.getBoundingClientRect(),_t.remove(),_t.style.display=k}this.rotation%180===this.parentRotation%180?(this.width=mt.width/z,this.height=mt.height/ct):(this.width=mt.height/z,this.height=mt.width/ct),this.fixAndSetPosition()},c=new WeakSet,is=function(){if(this.editorDiv.replaceChildren(),!!t(this,E))for(const z of t(this,E).split(`
`)){const ct=document.createElement("div");ct.append(z?document.createTextNode(z):document.createElement("br")),this.editorDiv.append(ct)}},g=new WeakSet,Fs=function(z){const{value:ct,fontSize:mt,color:At,rect:_t,pageIndex:k}=t(this,d);return z.value!==ct||z.fontSize!==mt||z.rect.some((a,e)=>Math.abs(a-_t[e])>=1)||z.color.some((a,e)=>a!==At[e])||z.pageIndex!==k},$=new WeakSet,rs=function(z=!1){if(!this.annotationElementId)return;if(X(this,D,Ee).call(this),!z&&(this.width===0||this.height===0)){setTimeout(()=>X(this,$,rs).call(this,!0),0);return}const ct=q._internalPadding*this.parentScale;t(this,d).rect=this.getRect(ct,ct)},ee(q,"_freeTextDefaultContent",""),ee(q,"_internalPadding",0),ee(q,"_defaultColor",null),ee(q,"_defaultFontSize",10),ee(q,"_type","freetext");let at=q;s.FreeTextEditor=at},(j,s,L)=>{var e,h,ce,T,Ds,G,nt,Q,ot,ht,ft,dt,Ct,Dt,vt,Ft,gt,st,Z,pt,Rt,wt,Ut,Ls,Wt,je,zt,as,Xt,os,tt,Y,bt,Et,te,Zt,J,ls,It,Tt,Ot,Nt,Is,yt,cs;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var o=L(1),u=L(6),W=L(3),O=L(30),at=L(31),M=L(32);const v=1e3,p=9,S=new WeakSet;function w(Lt){return{width:Lt[2]-Lt[0],height:Lt[3]-Lt[1]}}class E{static create(N){switch(N.data.annotationType){case o.AnnotationType.LINK:return new x(N);case o.AnnotationType.TEXT:return new d(N);case o.AnnotationType.WIDGET:switch(N.data.fieldType){case"Tx":return new R(N);case"Btn":return N.data.radioButton?new i(N):N.data.checkBox?new A(N):new l(N);case"Ch":return new D(N);case"Sig":return new C(N)}return new b(N);case o.AnnotationType.POPUP:return new y(N);case o.AnnotationType.FREETEXT:return new F(N);case o.AnnotationType.LINE:return new g(N);case o.AnnotationType.SQUARE:return new H(N);case o.AnnotationType.CIRCLE:return new $(N);case o.AnnotationType.POLYLINE:return new P(N);case o.AnnotationType.CARET:return new et(N);case o.AnnotationType.INK:return new rt(N);case o.AnnotationType.POLYGON:return new q(N);case o.AnnotationType.HIGHLIGHT:return new z(N);case o.AnnotationType.UNDERLINE:return new ct(N);case o.AnnotationType.SQUIGGLY:return new mt(N);case o.AnnotationType.STRIKEOUT:return new At(N);case o.AnnotationType.STAMP:return new _t(N);case o.AnnotationType.FILEATTACHMENT:return new k(N);default:return new m(N)}}}const n=class n{constructor(N,{isRenderable:r=!1,ignoreBorder:_=!1,createQuadrilaterals:B=!1}={}){U(this,e,!1);this.isRenderable=r,this.data=N.data,this.layer=N.layer,this.linkService=N.linkService,this.downloadManager=N.downloadManager,this.imageResourcesPath=N.imageResourcesPath,this.renderForms=N.renderForms,this.svgFactory=N.svgFactory,this.annotationStorage=N.annotationStorage,this.enableScripting=N.enableScripting,this.hasJSActions=N.hasJSActions,this._fieldObjects=N.fieldObjects,this.parent=N.parent,r&&(this.container=this._createContainer(_)),B&&this._createQuadrilaterals()}static _hasPopupData({titleObj:N,contentsObj:r,richText:_}){return!!(N!=null&&N.str||r!=null&&r.str||_!=null&&_.str)}get hasPopupData(){return n._hasPopupData(this.data)}_createContainer(N){const{data:r,parent:{page:_,viewport:B}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",r.id),this instanceof b||(V.tabIndex=v),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),r.noRotate&&V.classList.add("norotate");const{pageWidth:K,pageHeight:lt,pageX:xt,pageY:jt}=B.rawDims;if(!r.rect||this instanceof y){const{rotation:Ht}=r;return!r.hasOwnCanvas&&Ht!==0&&this.setRotation(Ht,V),V}const{width:Pt,height:Vt}=w(r.rect),kt=o.Util.normalizeRect([r.rect[0],_.view[3]-r.rect[1]+_.view[1],r.rect[2],_.view[3]-r.rect[3]+_.view[1]]);if(!N&&r.borderStyle.width>0){V.style.borderWidth=`${r.borderStyle.width}px`;const Ht=r.borderStyle.horizontalCornerRadius,qt=r.borderStyle.verticalCornerRadius;if(Ht>0||qt>0){const Jt=`calc(${Ht}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;V.style.borderRadius=Jt}else if(this instanceof i){const Jt=`calc(${Pt}px * var(--scale-factor)) / calc(${Vt}px * var(--scale-factor))`;V.style.borderRadius=Jt}switch(r.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const Kt=r.borderColor||null;Kt?(it(this,e,!0),V.style.borderColor=o.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(kt[0]-xt)/K}%`,V.style.top=`${100*(kt[1]-jt)/lt}%`;const{rotation:Mt}=r;return r.hasOwnCanvas||Mt===0?(V.style.width=`${100*Pt/K}%`,V.style.height=`${100*Vt/lt}%`):this.setRotation(Mt,V),V}setRotation(N,r=this.container){if(!this.data.rect)return;const{pageWidth:_,pageHeight:B}=this.parent.viewport.rawDims,{width:V,height:K}=w(this.data.rect);let lt,xt;N%180===0?(lt=100*V/_,xt=100*K/B):(lt=100*K/_,xt=100*V/B),r.style.width=`${lt}%`,r.style.height=`${xt}%`,r.setAttribute("data-main-rotation",(360-N)%360)}get _commonActions(){const N=(r,_,B)=>{const V=B.detail[r],K=V[0],lt=V.slice(1);B.target.style[_]=O.ColorConverters[`${K}_HTML`](lt),this.annotationStorage.setValue(this.data.id,{[_]:O.ColorConverters[`${K}_rgb`](lt)})};return(0,o.shadow)(this,"_commonActions",{display:r=>{const{display:_}=r.detail,B=_%2===1;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:B,noPrint:_===1||_===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:_}=r.detail;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_,noView:_})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{N("bgColor","backgroundColor",r)},fillColor:r=>{N("fillColor","backgroundColor",r)},fgColor:r=>{N("fgColor","color",r)},textColor:r=>{N("textColor","color",r)},borderColor:r=>{N("borderColor","borderColor",r)},strokeColor:r=>{N("strokeColor","borderColor",r)},rotation:r=>{const _=r.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(N,r){const _=this._commonActions;for(const B of Object.keys(r.detail)){const V=N[B]||_[B];V==null||V(r)}}_setDefaultPropertiesFromJS(N){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const _=this._commonActions;for(const[B,V]of Object.entries(r)){const K=_[B];if(K){const lt={detail:{[B]:V},target:N};K(lt),delete r[B]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:N}=this.data;if(!N)return;const[r,_,B,V]=this.data.rect;if(N.length===1){const[,{x:qt,y:Kt},{x:Jt,y:ne}]=N[0];if(B===qt&&V===Kt&&r===Jt&&_===ne)return}const{style:K}=this.container;let lt;if(t(this,e)){const{borderColor:qt,borderWidth:Kt}=K;K.borderWidth=0,lt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${qt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const xt=B-r,jt=V-_,{svgFactory:Pt}=this,Vt=Pt.createElement("svg");Vt.classList.add("quadrilateralsContainer"),Vt.setAttribute("width",0),Vt.setAttribute("height",0);const kt=Pt.createElement("defs");Vt.append(kt);const Mt=Pt.createElement("clipPath"),Ht=`clippath_${this.data.id}`;Mt.setAttribute("id",Ht),Mt.setAttribute("clipPathUnits","objectBoundingBox"),kt.append(Mt);for(const[,{x:qt,y:Kt},{x:Jt,y:ne}]of N){const se=Pt.createElement("rect"),ie=(Jt-r)/xt,oe=(V-Kt)/jt,le=(qt-Jt)/xt,bs=(Kt-ne)/jt;se.setAttribute("x",ie),se.setAttribute("y",oe),se.setAttribute("width",le),se.setAttribute("height",bs),Mt.append(se),lt==null||lt.push(`<rect vector-effect="non-scaling-stroke" x="${ie}" y="${oe}" width="${le}" height="${bs}"/>`)}t(this,e)&&(lt.push("</g></svg>')"),K.backgroundImage=lt.join("")),this.container.append(Vt),this.container.style.clipPath=`url(#${Ht})`}_createPopup(){const{container:N,data:r}=this;N.setAttribute("aria-haspopup","dialog");const _=new y({data:{color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,parentRect:r.rect,borderStyle:0,id:`popup_${r.id}`,rotation:r.rotation},parent:this.parent,elements:[this]});this.parent.div.append(_.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(N,r=null){const _=[];if(this._fieldObjects){const B=this._fieldObjects[N];if(B)for(const{page:V,id:K,exportValues:lt}of B){if(V===-1||K===r)continue;const xt=typeof lt=="string"?lt:null,jt=document.querySelector(`[data-element-id="${K}"]`);if(jt&&!S.has(jt)){(0,o.warn)(`_getElementsByName - element not allowed: ${K}`);continue}_.push({id:K,exportValue:xt,domElement:jt})}return _}for(const B of document.getElementsByName(N)){const{exportValue:V}=B,K=B.getAttribute("data-element-id");K!==r&&S.has(B)&&_.push({id:K,exportValue:V,domElement:B})}return _}show(){var N;this.container&&(this.container.hidden=!1),(N=this.popup)==null||N.maybeShow()}hide(){var N;this.container&&(this.container.hidden=!0),(N=this.popup)==null||N.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const N=this.getElementsToTriggerPopup();if(Array.isArray(N))for(const r of N)r.classList.add("highlightArea");else N.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:N,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{var _;(_=this.linkService.eventBus)==null||_.dispatch("switchannotationeditormode",{source:this,mode:N,editId:r})})}};e=new WeakMap;let m=n;class x extends m{constructor(r,_=null){super(r,{isRenderable:!0,ignoreBorder:!!(_!=null&&_.ignoreBorder),createQuadrilaterals:!0});U(this,h);U(this,T);this.isTooltipOnly=r.data.isTooltipOnly}render(){const{data:r,linkService:_}=this,B=document.createElement("a");B.setAttribute("data-element-id",r.id);let V=!1;return r.url?(_.addLinkAttributes(B,r.url,r.newWindow),V=!0):r.action?(this._bindNamedAction(B,r.action),V=!0):r.attachment?(this._bindAttachment(B,r.attachment),V=!0):r.setOCGState?(X(this,T,Ds).call(this,B,r.setOCGState),V=!0):r.dest?(this._bindLink(B,r.dest),V=!0):(r.actions&&(r.actions.Action||r.actions["Mouse Up"]||r.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(B,r),V=!0),r.resetForm?(this._bindResetFormAction(B,r.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(B,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(B),this.container}_bindLink(r,_){r.href=this.linkService.getDestinationHash(_),r.onclick=()=>(_&&this.linkService.goToDestination(_),!1),(_||_==="")&&X(this,h,ce).call(this)}_bindNamedAction(r,_){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeNamedAction(_),!1),X(this,h,ce).call(this)}_bindAttachment(r,_){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>{var B;return(B=this.downloadManager)==null||B.openOrDownloadData(this.container,_.content,_.filename),!1},X(this,h,ce).call(this)}_bindJSAction(r,_){r.href=this.linkService.getAnchorUrl("");const B=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(_.actions)){const K=B.get(V);K&&(r[K]=()=>{var lt;return(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_.id,name:V}}),!1})}r.onclick||(r.onclick=()=>!1),X(this,h,ce).call(this)}_bindResetFormAction(r,_){const B=r.onclick;if(B||(r.href=this.linkService.getAnchorUrl("")),X(this,h,ce).call(this),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),B||(r.onclick=()=>!1);return}r.onclick=()=>{var Vt;B==null||B();const{fields:V,refs:K,include:lt}=_,xt=[];if(V.length!==0||K.length!==0){const kt=new Set(K);for(const Mt of V){const Ht=this._fieldObjects[Mt]||[];for(const{id:qt}of Ht)kt.add(qt)}for(const Mt of Object.values(this._fieldObjects))for(const Ht of Mt)kt.has(Ht.id)===lt&&xt.push(Ht)}else for(const kt of Object.values(this._fieldObjects))xt.push(...kt);const jt=this.annotationStorage,Pt=[];for(const kt of xt){const{id:Mt}=kt;switch(Pt.push(Mt),kt.type){case"text":{const qt=kt.defaultValue||"";jt.setValue(Mt,{value:qt});break}case"checkbox":case"radiobutton":{const qt=kt.defaultValue===kt.exportValues;jt.setValue(Mt,{value:qt});break}case"combobox":case"listbox":{const qt=kt.defaultValue||"";jt.setValue(Mt,{value:qt});break}default:continue}const Ht=document.querySelector(`[data-element-id="${Mt}"]`);if(Ht){if(!S.has(Ht)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Pt,name:"ResetForm"}})),!1}}}h=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},T=new WeakSet,Ds=function(r,_){r.href=this.linkService.getAnchorUrl(""),r.onclick=()=>(this.linkService.executeSetOCGState(_),!1),X(this,h,ce).call(this)};class d extends m{constructor(N){super(N,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const N=document.createElement("img");return N.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",N.alt="[{{type}} Annotation]",N.dataset.l10nId="text_annotation_type",N.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(N),this.container}}class b extends m{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(N){var r;this.data.hasOwnCanvas&&(((r=N.previousSibling)==null?void 0:r.nodeName)==="CANVAS"&&(N.previousSibling.hidden=!0),N.hidden=!1)}_getKeyModifier(N){const{isWin:r,isMac:_}=o.FeatureTest.platform;return r&&N.ctrlKey||_&&N.metaKey}_setEventListener(N,r,_,B,V){_.includes("mouse")?N.addEventListener(_,K=>{var lt;(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:V(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):N.addEventListener(_,K=>{var lt;if(_==="blur"){if(!r.focused||!K.relatedTarget)return;r.focused=!1}else if(_==="focus"){if(r.focused)return;r.focused=!0}V&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:B,value:V(K)}}))})}_setEventListeners(N,r,_,B){var V,K,lt;for(const[xt,jt]of _)(jt==="Action"||(V=this.data.actions)!=null&&V[jt])&&((jt==="Focus"||jt==="Blur")&&(r||(r={focused:!1})),this._setEventListener(N,r,xt,jt,B),jt==="Focus"&&!((K=this.data.actions)!=null&&K.Blur)?this._setEventListener(N,r,"blur","Blur",null):jt==="Blur"&&!((lt=this.data.actions)!=null&&lt.Focus)&&this._setEventListener(N,r,"focus","Focus",null))}_setBackgroundColor(N){const r=this.data.backgroundColor||null;N.style.backgroundColor=r===null?"transparent":o.Util.makeHexColor(r[0],r[1],r[2])}_setTextStyle(N){const r=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,B=this.data.defaultAppearanceData.fontSize||p,V=N.style;let K;const lt=2,xt=jt=>Math.round(10*jt)/10;if(this.data.multiLine){const jt=Math.abs(this.data.rect[3]-this.data.rect[1]-lt),Pt=Math.round(jt/(o.LINE_FACTOR*B))||1,Vt=jt/Pt;K=Math.min(B,xt(Vt/o.LINE_FACTOR))}else{const jt=Math.abs(this.data.rect[3]-this.data.rect[1]-lt);K=Math.min(B,xt(jt/o.LINE_FACTOR))}V.fontSize=`calc(${K}px * var(--scale-factor))`,V.color=o.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(V.textAlign=r[this.data.textAlignment])}_setRequired(N,r){r?N.setAttribute("required",!0):N.removeAttribute("required"),N.setAttribute("aria-required",r)}}class R extends b{constructor(N){const r=N.renderForms||!N.data.hasAppearance&&!!N.data.fieldValue;super(N,{isRenderable:r})}setPropertyOnSiblings(N,r,_,B){const V=this.annotationStorage;for(const K of this._getElementsByName(N.name,N.id))K.domElement&&(K.domElement[r]=_),V.setValue(K.id,{[B]:_})}render(){var B,V;const N=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let _=null;if(this.renderForms){const K=N.getValue(r,{value:this.data.fieldValue});let lt=K.value||"";const xt=N.getValue(r,{charLimit:this.data.maxLen}).charLimit;xt&&lt.length>xt&&(lt=lt.slice(0,xt));let jt=K.formattedValue||((B=this.data.textContent)==null?void 0:B.join(`
`))||null;jt&&this.data.comb&&(jt=jt.replaceAll(/\s+/g,""));const Pt={userValue:lt,formattedValue:jt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=jt??lt,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",jt??lt),this.data.doNotScroll&&(_.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_.hidden=!0),S.add(_),_.setAttribute("data-element-id",r),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=v,this._setRequired(_,this.data.required),xt&&(_.maxLength=xt),_.addEventListener("input",kt=>{N.setValue(r,{value:kt.target.value}),this.setPropertyOnSiblings(_,"value",kt.target.value,"value"),Pt.formattedValue=null}),_.addEventListener("resetform",kt=>{const Mt=this.data.defaultFieldValue??"";_.value=Pt.userValue=Mt,Pt.formattedValue=null});let Vt=kt=>{const{formattedValue:Mt}=Pt;Mt!=null&&(kt.target.value=Mt),kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",Mt=>{if(Pt.focused)return;const{target:Ht}=Mt;Pt.userValue&&(Ht.value=Pt.userValue),Pt.lastCommittedValue=Ht.value,Pt.commitKey=1,Pt.focused=!0}),_.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Ht={value(qt){Pt.userValue=qt.detail.value??"",N.setValue(r,{value:Pt.userValue.toString()}),qt.target.value=Pt.userValue},formattedValue(qt){const{formattedValue:Kt}=qt.detail;Pt.formattedValue=Kt,Kt!=null&&qt.target!==document.activeElement&&(qt.target.value=Kt),N.setValue(r,{formattedValue:Kt})},selRange(qt){qt.target.setSelectionRange(...qt.detail.selRange)},charLimit:qt=>{var se;const{charLimit:Kt}=qt.detail,{target:Jt}=qt;if(Kt===0){Jt.removeAttribute("maxLength");return}Jt.setAttribute("maxLength",Kt);let ne=Pt.userValue;!ne||ne.length<=Kt||(ne=ne.slice(0,Kt),Jt.value=Pt.userValue=ne,N.setValue(r,{value:ne}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:ne,willCommit:!0,commitKey:1,selStart:Jt.selectionStart,selEnd:Jt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ht,Mt)}),_.addEventListener("keydown",Mt=>{var Kt;Pt.commitKey=1;let Ht=-1;if(Mt.key==="Escape"?Ht=0:Mt.key==="Enter"&&!this.data.multiLine?Ht=2:Mt.key==="Tab"&&(Pt.commitKey=3),Ht===-1)return;const{value:qt}=Mt.target;Pt.lastCommittedValue!==qt&&(Pt.lastCommittedValue=qt,Pt.userValue=qt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:qt,willCommit:!0,commitKey:Ht,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const kt=Vt;Vt=null,_.addEventListener("blur",Mt=>{var qt;if(!Pt.focused||!Mt.relatedTarget)return;Pt.focused=!1;const{value:Ht}=Mt.target;Pt.userValue=Ht,Pt.lastCommittedValue!==Ht&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Ht,willCommit:!0,commitKey:Pt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),kt(Mt)}),(V=this.data.actions)!=null&&V.Keystroke&&_.addEventListener("beforeinput",Mt=>{var oe;Pt.lastCommittedValue=null;const{data:Ht,target:qt}=Mt,{value:Kt,selectionStart:Jt,selectionEnd:ne}=qt;let se=Jt,ie=ne;switch(Mt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Jt).match(/\w*[^\w]*$/);le&&(se-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Jt).match(/^[^\w]*\w*/);le&&(ie+=le[0].length);break}case"deleteContentBackward":Jt===ne&&(se-=1);break;case"deleteContentForward":Jt===ne&&(ie+=1);break}Mt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Kt,change:Ht||"",willCommit:!1,selStart:se,selEnd:ie}})}),this._setEventListeners(_,Pt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(Vt&&_.addEventListener("blur",Vt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/xt;_.classList.add("comb"),_.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class C extends b{constructor(N){super(N,{isRenderable:!!N.data.hasOwnCanvas})}}class A extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){const N=this.annotationStorage,r=this.data,_=r.id;let B=N.getValue(_,{value:r.exportValue===r.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",N.setValue(_,{value:B})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return S.add(V),V.setAttribute("data-element-id",_),V.disabled=r.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=r.fieldName,B&&V.setAttribute("checked",!0),V.setAttribute("exportValue",r.exportValue),V.tabIndex=v,V.addEventListener("change",K=>{const{name:lt,checked:xt}=K.target;for(const jt of this._getElementsByName(lt,_)){const Pt=xt&&jt.exportValue===r.exportValue;jt.domElement&&(jt.domElement.checked=Pt),N.setValue(jt.id,{value:Pt})}N.setValue(_,{value:xt})}),V.addEventListener("resetform",K=>{const lt=r.defaultFieldValue||"Off";K.target.checked=lt===r.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",K=>{const lt={value(xt){xt.target.checked=xt.detail.value!=="Off",N.setValue(_,{value:xt.target.checked})}};this._dispatchEventFromSandbox(lt,K)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class i extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const N=this.annotationStorage,r=this.data,_=r.id;let B=N.getValue(_,{value:r.fieldValue===r.buttonValue}).value;typeof B=="string"&&(B=B!==r.buttonValue,N.setValue(_,{value:B}));const V=document.createElement("input");if(S.add(V),V.setAttribute("data-element-id",_),V.disabled=r.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=r.fieldName,B&&V.setAttribute("checked",!0),V.tabIndex=v,V.addEventListener("change",K=>{const{name:lt,checked:xt}=K.target;for(const jt of this._getElementsByName(lt,_))N.setValue(jt.id,{value:!1});N.setValue(_,{value:xt})}),V.addEventListener("resetform",K=>{const lt=r.defaultFieldValue;K.target.checked=lt!=null&&lt===r.buttonValue}),this.enableScripting&&this.hasJSActions){const K=r.buttonValue;V.addEventListener("updatefromsandbox",lt=>{const xt={value:jt=>{const Pt=K===jt.detail.value;for(const Vt of this._getElementsByName(jt.target.name)){const kt=Pt&&Vt.id===_;Vt.domElement&&(Vt.domElement.checked=kt),N.setValue(Vt.id,{value:kt})}}};this._dispatchEventFromSandbox(xt,lt)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class l extends x{constructor(N){super(N,{ignoreBorder:N.data.hasAppearance})}render(){const N=super.render();N.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(N.title=this.data.alternativeText);const r=N.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),N}}class D extends b{constructor(N){super(N,{isRenderable:N.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const N=this.annotationStorage,r=this.data.id,_=N.getValue(r,{value:this.data.fieldValue}),B=document.createElement("select");S.add(B),B.setAttribute("data-element-id",r),B.disabled=this.data.readOnly,this._setRequired(B,this.data.required),B.name=this.data.fieldName,B.tabIndex=v;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(B.size=this.data.options.length,this.data.multiSelect&&(B.multiple=!0)),B.addEventListener("resetform",Pt=>{const Vt=this.data.defaultFieldValue;for(const kt of B.options)kt.selected=kt.value===Vt});for(const Pt of this.data.options){const Vt=document.createElement("option");Vt.textContent=Pt.displayValue,Vt.value=Pt.exportValue,_.value.includes(Pt.exportValue)&&(Vt.setAttribute("selected",!0),V=!1),B.append(Vt)}let K=null;if(V){const Pt=document.createElement("option");Pt.value=" ",Pt.setAttribute("hidden",!0),Pt.setAttribute("selected",!0),B.prepend(Pt),K=()=>{Pt.remove(),B.removeEventListener("input",K),K=null},B.addEventListener("input",K)}const lt=Pt=>{const Vt=Pt?"value":"textContent",{options:kt,multiple:Mt}=B;return Mt?Array.prototype.filter.call(kt,Ht=>Ht.selected).map(Ht=>Ht[Vt]):kt.selectedIndex===-1?null:kt[kt.selectedIndex][Vt]};let xt=lt(!1);const jt=Pt=>{const Vt=Pt.target.options;return Array.prototype.map.call(Vt,kt=>({displayValue:kt.textContent,exportValue:kt.value}))};return this.enableScripting&&this.hasJSActions?(B.addEventListener("updatefromsandbox",Pt=>{const Vt={value(kt){K==null||K();const Mt=kt.detail.value,Ht=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const qt of B.options)qt.selected=Ht.has(qt.value);N.setValue(r,{value:lt(!0)}),xt=lt(!1)},multipleSelection(kt){B.multiple=!0},remove(kt){const Mt=B.options,Ht=kt.detail.remove;Mt[Ht].selected=!1,B.remove(Ht),Mt.length>0&&Array.prototype.findIndex.call(Mt,Kt=>Kt.selected)===-1&&(Mt[0].selected=!0),N.setValue(r,{value:lt(!0),items:jt(kt)}),xt=lt(!1)},clear(kt){for(;B.length!==0;)B.remove(0);N.setValue(r,{value:null,items:[]}),xt=lt(!1)},insert(kt){const{index:Mt,displayValue:Ht,exportValue:qt}=kt.detail.insert,Kt=B.children[Mt],Jt=document.createElement("option");Jt.textContent=Ht,Jt.value=qt,Kt?Kt.before(Jt):B.append(Jt),N.setValue(r,{value:lt(!0),items:jt(kt)}),xt=lt(!1)},items(kt){const{items:Mt}=kt.detail;for(;B.length!==0;)B.remove(0);for(const Ht of Mt){const{displayValue:qt,exportValue:Kt}=Ht,Jt=document.createElement("option");Jt.textContent=qt,Jt.value=Kt,B.append(Jt)}B.options.length>0&&(B.options[0].selected=!0),N.setValue(r,{value:lt(!0),items:jt(kt)}),xt=lt(!1)},indices(kt){const Mt=new Set(kt.detail.indices);for(const Ht of kt.target.options)Ht.selected=Mt.has(Ht.index);N.setValue(r,{value:lt(!0)}),xt=lt(!1)},editable(kt){kt.target.disabled=!kt.detail.editable}};this._dispatchEventFromSandbox(Vt,Pt)}),B.addEventListener("input",Pt=>{var kt;const Vt=lt(!0);N.setValue(r,{value:Vt}),Pt.preventDefault(),(kt=this.linkService.eventBus)==null||kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:xt,changeEx:Vt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(B,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Pt=>Pt.target.value)):B.addEventListener("input",function(Pt){N.setValue(r,{value:lt(!0)})}),this.data.combo&&this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class y extends m{constructor(N){const{data:r,elements:_}=N;super(N,{isRenderable:m._hasPopupData(r)}),this.elements=_}render(){this.container.classList.add("popupAnnotation");const N=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const _ of this.elements)_.popup=N,r.push(_.data.id),_.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(_=>`${o.AnnotationPrefix}${_}`).join(",")),this.container}}class c{constructor({container:N,color:r,elements:_,titleObj:B,modificationDate:V,contentsObj:K,richText:lt,parent:xt,rect:jt,parentRect:Pt,open:Vt}){U(this,Ut);U(this,Wt);U(this,zt);U(this,Xt);U(this,G,null);U(this,nt,X(this,Ut,Ls).bind(this));U(this,Q,X(this,Xt,os).bind(this));U(this,ot,X(this,zt,as).bind(this));U(this,ht,X(this,Wt,je).bind(this));U(this,ft,null);U(this,dt,null);U(this,Ct,null);U(this,Dt,null);U(this,vt,null);U(this,Ft,null);U(this,gt,!1);U(this,st,null);U(this,Z,null);U(this,pt,null);U(this,Rt,null);U(this,wt,!1);var Mt;it(this,dt,N),it(this,Rt,B),it(this,Ct,K),it(this,pt,lt),it(this,vt,xt),it(this,ft,r),it(this,Z,jt),it(this,Ft,Pt),it(this,Dt,_);const kt=u.PDFDateString.toDateObject(V);kt&&it(this,G,xt.l10n.get("annotation_date_string",{date:kt.toLocaleDateString(),time:kt.toLocaleTimeString()})),this.trigger=_.flatMap(Ht=>Ht.getElementsToTriggerPopup());for(const Ht of this.trigger)Ht.addEventListener("click",t(this,ht)),Ht.addEventListener("mouseenter",t(this,ot)),Ht.addEventListener("mouseleave",t(this,Q)),Ht.classList.add("popupTriggerArea");for(const Ht of _)(Mt=Ht.container)==null||Mt.addEventListener("keydown",t(this,nt));t(this,dt).hidden=!0,Vt&&X(this,Wt,je).call(this)}render(){if(t(this,st))return;const{page:{view:N},viewport:{rawDims:{pageWidth:r,pageHeight:_,pageX:B,pageY:V}}}=t(this,vt),K=it(this,st,document.createElement("div"));if(K.className="popup",t(this,ft)){const se=K.style.outlineColor=o.Util.makeHexColor(...t(this,ft));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?K.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:K.style.backgroundColor=o.Util.makeHexColor(...t(this,ft).map(oe=>Math.floor(.7*(255-oe)+oe)))}const lt=document.createElement("span");lt.className="header";const xt=document.createElement("h1");if(lt.append(xt),{dir:xt.dir,str:xt.textContent}=t(this,Rt),K.append(lt),t(this,G)){const se=document.createElement("span");se.classList.add("popupDate"),t(this,G).then(ie=>{se.textContent=ie}),lt.append(se)}const jt=t(this,Ct),Pt=t(this,pt);if(Pt!=null&&Pt.str&&(!(jt!=null&&jt.str)||jt.str===Pt.str))M.XfaLayer.render({xfaHtml:Pt.html,intent:"richText",div:K}),K.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(jt);K.append(se)}let Vt=!!t(this,Ft),kt=Vt?t(this,Ft):t(this,Z);for(const se of t(this,Dt))if(!kt||o.Util.intersect(se.data.rect,kt)!==null){kt=se.data.rect,Vt=!0;break}const Mt=o.Util.normalizeRect([kt[0],N[3]-kt[1]+N[1],kt[2],N[3]-kt[3]+N[1]]),Ht=5,qt=Vt?kt[2]-kt[0]+Ht:0,Kt=Mt[0]+qt,Jt=Mt[1],{style:ne}=t(this,dt);ne.left=`${100*(Kt-B)/r}%`,ne.top=`${100*(Jt-V)/_}%`,t(this,dt).append(K)}_formatContents({str:N,dir:r}){const _=document.createElement("p");_.classList.add("popupContent"),_.dir=r;const B=N.split(/(?:\r\n?|\n)/);for(let V=0,K=B.length;V<K;++V){const lt=B[V];_.append(document.createTextNode(lt)),V<K-1&&_.append(document.createElement("br"))}return _}forceHide(){it(this,wt,this.isVisible),t(this,wt)&&(t(this,dt).hidden=!0)}maybeShow(){t(this,wt)&&(it(this,wt,!1),t(this,dt).hidden=!1)}get isVisible(){return t(this,dt).hidden===!1}}G=new WeakMap,nt=new WeakMap,Q=new WeakMap,ot=new WeakMap,ht=new WeakMap,ft=new WeakMap,dt=new WeakMap,Ct=new WeakMap,Dt=new WeakMap,vt=new WeakMap,Ft=new WeakMap,gt=new WeakMap,st=new WeakMap,Z=new WeakMap,pt=new WeakMap,Rt=new WeakMap,wt=new WeakMap,Ut=new WeakSet,Ls=function(N){N.altKey||N.shiftKey||N.ctrlKey||N.metaKey||(N.key==="Enter"||N.key==="Escape"&&t(this,gt))&&X(this,Wt,je).call(this)},Wt=new WeakSet,je=function(){it(this,gt,!t(this,gt)),t(this,gt)?(X(this,zt,as).call(this),t(this,dt).addEventListener("click",t(this,ht)),t(this,dt).addEventListener("keydown",t(this,nt))):(X(this,Xt,os).call(this),t(this,dt).removeEventListener("click",t(this,ht)),t(this,dt).removeEventListener("keydown",t(this,nt)))},zt=new WeakSet,as=function(){t(this,st)||this.render(),this.isVisible?t(this,gt)&&t(this,dt).classList.add("focused"):(t(this,dt).hidden=!1,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)+1e3)},Xt=new WeakSet,os=function(){t(this,dt).classList.remove("focused"),!(t(this,gt)||!this.isVisible)&&(t(this,dt).hidden=!0,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)-1e3)};class F extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0}),this.textContent=N.data.textContent,this.textPosition=N.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const N=document.createElement("div");N.classList.add("annotationTextContent"),N.setAttribute("role","comment");for(const r of this.textContent){const _=document.createElement("span");_.textContent=r,N.append(_)}this.container.append(N)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=F;class g extends m{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});U(this,tt,null)}render(){this.container.classList.add("lineAnnotation");const r=this.data,{width:_,height:B}=w(r.rect),V=this.svgFactory.create(_,B,!0),K=it(this,tt,this.svgFactory.createElement("svg:line"));return K.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),K.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),K.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),K.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),K.setAttribute("stroke-width",r.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),V.append(K),this.container.append(V),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class H extends m{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});U(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const r=this.data,{width:_,height:B}=w(r.rect),V=this.svgFactory.create(_,B,!0),K=r.borderStyle.width,lt=it(this,Y,this.svgFactory.createElement("svg:rect"));return lt.setAttribute("x",K/2),lt.setAttribute("y",K/2),lt.setAttribute("width",_-K),lt.setAttribute("height",B-K),lt.setAttribute("stroke-width",K||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),V.append(lt),this.container.append(V),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class $ extends m{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});U(this,bt,null)}render(){this.container.classList.add("circleAnnotation");const r=this.data,{width:_,height:B}=w(r.rect),V=this.svgFactory.create(_,B,!0),K=r.borderStyle.width,lt=it(this,bt,this.svgFactory.createElement("svg:ellipse"));return lt.setAttribute("cx",_/2),lt.setAttribute("cy",B/2),lt.setAttribute("rx",_/2-K/2),lt.setAttribute("ry",B/2-K/2),lt.setAttribute("stroke-width",K||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),V.append(lt),this.container.append(V),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class P extends m{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});U(this,Et,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:_,height:B}=w(r.rect),V=this.svgFactory.create(_,B,!0);let K=[];for(const xt of r.vertices){const jt=xt.x-r.rect[0],Pt=r.rect[3]-xt.y;K.push(jt+","+Pt)}K=K.join(" ");const lt=it(this,Et,this.svgFactory.createElement(this.svgElementName));return lt.setAttribute("points",K),lt.setAttribute("stroke-width",r.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),V.append(lt),this.container.append(V),!r.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Et)}addHighlightArea(){this.container.classList.add("highlightArea")}}Et=new WeakMap;class q extends P{constructor(N){super(N),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class et extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class rt extends m{constructor(r){super(r,{isRenderable:!0,ignoreBorder:!0});U(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:_,height:B}=w(r.rect),V=this.svgFactory.create(_,B,!0);for(const K of r.inkLists){let lt=[];for(const jt of K){const Pt=jt.x-r.rect[0],Vt=r.rect[3]-jt.y;lt.push(`${Pt},${Vt}`)}lt=lt.join(" ");const xt=this.svgFactory.createElement(this.svgElementName);t(this,te).push(xt),xt.setAttribute("points",lt),xt.setAttribute("stroke-width",r.borderStyle.width||1),xt.setAttribute("stroke","transparent"),xt.setAttribute("fill","transparent"),!r.popupRef&&this.hasPopupData&&this._createPopup(),V.append(xt)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,s.InkAnnotationElement=rt;class z extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class mt extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class At extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _t extends m{constructor(N){super(N,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=_t;class k extends m{constructor(r){var V;super(r,{isRenderable:!0});U(this,J);U(this,Zt,null);const{filename:_,content:B}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(_,!0),this.content=B,(V=this.linkService.eventBus)==null||V.dispatch("fileattachmentannotation",{source:this,filename:_,content:B})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:r,data:_}=this;let B;_.hasAppearance||_.fillAlpha===0?B=document.createElement("div"):(B=document.createElement("img"),B.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_.name)?"paperclip":"pushpin"}.svg`,_.fillAlpha&&_.fillAlpha<1&&(B.style=`filter: opacity(${Math.round(_.fillAlpha*100)}%);`)),B.addEventListener("dblclick",X(this,J,ls).bind(this)),it(this,Zt,B);const{isMac:V}=o.FeatureTest.platform;return r.addEventListener("keydown",K=>{K.key==="Enter"&&(V?K.metaKey:K.ctrlKey)&&X(this,J,ls).call(this)}),!_.popupRef&&this.hasPopupData?this._createPopup():B.classList.add("popupTriggerArea"),r.append(B),r}getElementsToTriggerPopup(){return t(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,J=new WeakSet,ls=function(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.container,this.content,this.filename)};class a{constructor({div:N,accessibilityManager:r,annotationCanvasMap:_,l10n:B,page:V,viewport:K}){U(this,Nt);U(this,yt);U(this,It,null);U(this,Tt,null);U(this,Ot,new Map);this.div=N,it(this,It,r),it(this,Tt,_),this.l10n=B,this.page=V,this.viewport=K,this.zIndex=0,this.l10n||(this.l10n=at.NullL10n)}async render(N){const{annotations:r}=N,_=this.div;(0,u.setLayerDimensions)(_,this.viewport);const B=new Map,V={data:null,layer:_,linkService:N.linkService,downloadManager:N.downloadManager,imageResourcesPath:N.imageResourcesPath||"",renderForms:N.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:N.annotationStorage||new W.AnnotationStorage,enableScripting:N.enableScripting===!0,hasJSActions:N.hasJSActions,fieldObjects:N.fieldObjects,parent:this,elements:null};for(const K of r){if(K.noHTML)continue;const lt=K.annotationType===o.AnnotationType.POPUP;if(lt){const Pt=B.get(K.id);if(!Pt)continue;V.elements=Pt}else{const{width:Pt,height:Vt}=w(K.rect);if(Pt<=0||Vt<=0)continue}V.data=K;const xt=E.create(V);if(!xt.isRenderable)continue;if(!lt&&K.popupRef){const Pt=B.get(K.popupRef);Pt?Pt.push(xt):B.set(K.popupRef,[xt])}xt.annotationEditorType>0&&t(this,Ot).set(xt.data.id,xt);const jt=xt.render();K.hidden&&(jt.style.visibility="hidden"),X(this,Nt,Is).call(this,jt,K.id)}X(this,yt,cs).call(this),await this.l10n.translate(_)}update({viewport:N}){const r=this.div;this.viewport=N,(0,u.setLayerDimensions)(r,{rotation:N.rotation}),X(this,yt,cs).call(this),r.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ot).values())}getEditableAnnotation(N){return t(this,Ot).get(N)}}It=new WeakMap,Tt=new WeakMap,Ot=new WeakMap,Nt=new WeakSet,Is=function(N,r){var B;const _=N.firstChild||N;_.id=`${o.AnnotationPrefix}${r}`,this.div.append(N),(B=t(this,It))==null||B.moveElementInDOM(this.div,N,_,!1)},yt=new WeakSet,cs=function(){if(!t(this,Tt))return;const N=this.div;for(const[r,_]of t(this,Tt)){const B=N.querySelector(`[data-annotation-id="${r}"]`);if(!B)continue;const{firstChild:V}=B;V?V.nodeName==="CANVAS"?V.replaceWith(_):V.before(_):B.append(_)}t(this,Tt).clear()},s.AnnotationLayer=a},(j,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function L(W){return Math.floor(Math.max(0,Math.min(1,W))*255).toString(16).padStart(2,"0")}function o(W){return Math.max(0,Math.min(255,255*W))}class u{static CMYK_G([O,at,M,v]){return["G",1-Math.min(1,.3*O+.59*M+.11*at+v)]}static G_CMYK([O]){return["CMYK",0,0,0,1-O]}static G_RGB([O]){return["RGB",O,O,O]}static G_rgb([O]){return O=o(O),[O,O,O]}static G_HTML([O]){const at=L(O);return`#${at}${at}${at}`}static RGB_G([O,at,M]){return["G",.3*O+.59*at+.11*M]}static RGB_rgb(O){return O.map(o)}static RGB_HTML(O){return`#${O.map(L).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([O,at,M,v]){return["RGB",1-Math.min(1,O+v),1-Math.min(1,M+v),1-Math.min(1,at+v)]}static CMYK_rgb([O,at,M,v]){return[o(1-Math.min(1,O+v)),o(1-Math.min(1,M+v)),o(1-Math.min(1,at+v))]}static CMYK_HTML(O){const at=this.CMYK_RGB(O).slice(1);return this.RGB_HTML(at)}static RGB_CMYK([O,at,M]){const v=1-O,p=1-at,S=1-M,w=Math.min(v,p,S);return["CMYK",v,p,S,w]}}s.ColorConverters=u},(j,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=o;const L={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};L.print_progress_percent="{{progress}}%";function o(O,at){switch(O){case"find_match_count":O=`find_match_count[${at.total===1?"one":"other"}]`;break;case"find_match_count_limit":O=`find_match_count_limit[${at.limit===1?"one":"other"}]`;break}return L[O]||""}function u(O,at){return at?O.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(M,v)=>v in at?at[v]:"{{"+v+"}}"):O}const W={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(O,at=null,M=o(O,at)){return u(M,at)},async translate(O){}};s.NullL10n=W},(j,s,L)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var o=L(25);class u{static setupStorage(O,at,M,v,p){const S=v.getValue(at,{value:null});switch(M.name){case"textarea":if(S.value!==null&&(O.textContent=S.value),p==="print")break;O.addEventListener("input",w=>{v.setValue(at,{value:w.target.value})});break;case"input":if(M.attributes.type==="radio"||M.attributes.type==="checkbox"){if(S.value===M.attributes.xfaOn?O.setAttribute("checked",!0):S.value===M.attributes.xfaOff&&O.removeAttribute("checked"),p==="print")break;O.addEventListener("change",w=>{v.setValue(at,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(S.value!==null&&O.setAttribute("value",S.value),p==="print")break;O.addEventListener("input",w=>{v.setValue(at,{value:w.target.value})})}break;case"select":if(S.value!==null){O.setAttribute("value",S.value);for(const w of M.children)w.attributes.value===S.value?w.attributes.selected=!0:w.attributes.hasOwnProperty("selected")&&delete w.attributes.selected}O.addEventListener("input",w=>{const E=w.target.options,m=E.selectedIndex===-1?"":E[E.selectedIndex].value;v.setValue(at,{value:m})});break}}static setAttributes({html:O,element:at,storage:M=null,intent:v,linkService:p}){const{attributes:S}=at,w=O instanceof HTMLAnchorElement;S.type==="radio"&&(S.name=`${S.name}-${v}`);for(const[E,m]of Object.entries(S))if(m!=null)switch(E){case"class":m.length&&O.setAttribute(E,m.join(" "));break;case"dataId":break;case"id":O.setAttribute("data-element-id",m);break;case"style":Object.assign(O.style,m);break;case"textContent":O.textContent=m;break;default:(!w||E!=="href"&&E!=="newWindow")&&O.setAttribute(E,m)}w&&p.addLinkAttributes(O,S.href,S.newWindow),M&&S.dataId&&this.setupStorage(O,S.dataId,at,M)}static render(O){var x;const at=O.annotationStorage,M=O.linkService,v=O.xfaHtml,p=O.intent||"display",S=document.createElement(v.name);v.attributes&&this.setAttributes({html:S,element:v,intent:p,linkService:M});const w=[[v,-1,S]],E=O.div;if(E.append(S),O.viewport){const d=`matrix(${O.viewport.transform.join(",")})`;E.style.transform=d}p!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const m=[];for(;w.length>0;){const[d,b,R]=w.at(-1);if(b+1===d.children.length){w.pop();continue}const C=d.children[++w.at(-1)[1]];if(C===null)continue;const{name:A}=C;if(A==="#text"){const l=document.createTextNode(C.value);m.push(l),R.append(l);continue}const i=(x=C==null?void 0:C.attributes)!=null&&x.xmlns?document.createElementNS(C.attributes.xmlns,A):document.createElement(A);if(R.append(i),C.attributes&&this.setAttributes({html:i,element:C,storage:at,intent:p,linkService:M}),C.children&&C.children.length>0)w.push([C,-1,i]);else if(C.value){const l=document.createTextNode(C.value);o.XfaText.shouldBuildText(A)&&m.push(l),i.append(l)}}for(const d of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:m}}static update(O){const at=`matrix(${O.viewport.transform.join(",")})`;O.div.style.transform=at,O.div.hidden=!1}}s.XfaLayer=u},(j,s,L)=>{var v,p,S,w,E,m,x,d,b,R,C,A,i,l,D,Os,c,Ns,g,Bs,$,Us,q,hs,rt,Ws,ct,ds,At,Hs,k,Gs,e,$s,h,zs,T,Vs,G,ae,Q,us,ht,ke,dt,Me,Dt,pe,Ft,ps,st,Fe,pt,qs,wt,fs,$t,Xs,Gt,Ys,Bt,ms,ut,De,Y,fe;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var o=L(1),u=L(4),W=L(29),O=L(6),at=L(5);const Et=class Et extends u.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"});U(this,D);U(this,c);U(this,g);U(this,$);U(this,q);U(this,rt);U(this,ct);U(this,At);U(this,k);U(this,e);U(this,h);U(this,T);U(this,G);U(this,Q);U(this,ht);U(this,dt);U(this,Dt);U(this,Ft);U(this,st);U(this,Gt);U(this,Bt);U(this,ut);U(this,Y);U(this,v,0);U(this,p,0);U(this,S,this.canvasPointermove.bind(this));U(this,w,this.canvasPointerleave.bind(this));U(this,E,this.canvasPointerup.bind(this));U(this,m,this.canvasPointerdown.bind(this));U(this,x,new Path2D);U(this,d,!1);U(this,b,!1);U(this,R,!1);U(this,C,null);U(this,A,0);U(this,i,0);U(this,l,null);this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(J){u.AnnotationEditor.initialize(J,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(J,St){switch(J){case o.AnnotationEditorParamsType.INK_THICKNESS:Et._defaultThickness=St;break;case o.AnnotationEditorParamsType.INK_COLOR:Et._defaultColor=St;break;case o.AnnotationEditorParamsType.INK_OPACITY:Et._defaultOpacity=St/100;break}}updateParams(J,St){switch(J){case o.AnnotationEditorParamsType.INK_THICKNESS:X(this,D,Os).call(this,St);break;case o.AnnotationEditorParamsType.INK_COLOR:X(this,c,Ns).call(this,St);break;case o.AnnotationEditorParamsType.INK_OPACITY:X(this,g,Bs).call(this,St);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,Et._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,Et._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(Et._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Et._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||Et._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Et._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,ht,ke).call(this),X(this,dt,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,Dt,pe).call(this)),X(this,Y,fe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,C).disconnect(),it(this,C,null),super.remove())}setParent(J){!this.parent&&J?this._uiManager.removeShouldRescale(this):this.parent&&J===null&&this._uiManager.addShouldRescale(this),super.setParent(J)}onScaleChanging(){const[J,St]=this.parentDimensions,It=this.width*J,Tt=this.height*St;this.setDimensions(It,Tt)}enableEditMode(){t(this,d)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,m)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),it(this,d,!0),this.div.classList.add("disabled"),X(this,Y,fe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(J){this._focusEventsAllowed&&(super.focusin(J),this.enableEditMode())}canvasPointerdown(J){J.button!==0||!this.isInEditMode()||t(this,d)||(this.setInForeground(),J.preventDefault(),J.type!=="mouse"&&this.div.focus(),X(this,rt,Ws).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.preventDefault(),X(this,ct,ds).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){J.preventDefault(),X(this,Q,us).call(this,J)}canvasPointerleave(J){X(this,Q,us).call(this,J)}get isResizable(){return!this.isEmpty()&&t(this,d)}render(){if(this.div)return this.div;let J,St;this.width&&(J=this.x,St=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",Qt)});const[It,Tt,Ot,Nt]=X(this,$,Us).call(this);if(this.setAt(It,Tt,0,0),this.setDims(Ot,Nt),X(this,ht,ke).call(this),this.width){const[Qt,yt]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*yt),this.setAt(J*Qt,St*yt,this.width*Qt,this.height*yt),it(this,R,!0),X(this,Dt,pe).call(this),this.setDims(this.width*Qt,this.height*yt),X(this,G,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,dt,Me).call(this),this.div}setDimensions(J,St){const It=Math.round(J),Tt=Math.round(St);if(t(this,A)===It&&t(this,i)===Tt)return;it(this,A,It),it(this,i,Tt),this.canvas.style.visibility="hidden";const[Ot,Nt]=this.parentDimensions;this.width=J/Ot,this.height=St/Nt,this.fixAndSetPosition(),t(this,d)&&X(this,Ft,ps).call(this,J,St),X(this,Dt,pe).call(this),X(this,G,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(J,St,It){var V,K,lt;if(J instanceof W.InkAnnotationElement)return null;const Tt=super.deserialize(J,St,It);Tt.thickness=J.thickness,Tt.color=o.Util.makeHexColor(...J.color),Tt.opacity=J.opacity;const[Ot,Nt]=Tt.pageDimensions,Qt=Tt.width*Ot,yt=Tt.height*Nt,Yt=Tt.parentScale,Lt=J.thickness/2;it(Tt,d,!0),it(Tt,A,Math.round(Qt)),it(Tt,i,Math.round(yt));const{paths:N,rect:r,rotation:_}=J;for(let{bezier:xt}of N){xt=X(V=Et,$t,Xs).call(V,xt,r,_);const jt=[];Tt.paths.push(jt);let Pt=Yt*(xt[0]-Lt),Vt=Yt*(xt[1]-Lt);for(let Mt=2,Ht=xt.length;Mt<Ht;Mt+=6){const qt=Yt*(xt[Mt]-Lt),Kt=Yt*(xt[Mt+1]-Lt),Jt=Yt*(xt[Mt+2]-Lt),ne=Yt*(xt[Mt+3]-Lt),se=Yt*(xt[Mt+4]-Lt),ie=Yt*(xt[Mt+5]-Lt);jt.push([[Pt,Vt],[qt,Kt],[Jt,ne],[se,ie]]),Pt=se,Vt=ie}const kt=X(this,pt,qs).call(this,jt);Tt.bezierPath2D.push(kt)}const B=X(K=Tt,Bt,ms).call(K);return it(Tt,p,Math.max(u.AnnotationEditor.MIN_SIZE,B[2]-B[0])),it(Tt,v,Math.max(u.AnnotationEditor.MIN_SIZE,B[3]-B[1])),X(lt=Tt,Ft,ps).call(lt,Qt,yt),Tt}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),St=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:St,thickness:this.thickness,opacity:this.opacity,paths:X(this,Gt,Ys).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,J),pageIndex:this.pageIndex,rect:J,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};v=new WeakMap,p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakMap,R=new WeakMap,C=new WeakMap,A=new WeakMap,i=new WeakMap,l=new WeakMap,D=new WeakSet,Os=function(J){const St=this.thickness;this.addCommands({cmd:()=>{this.thickness=J,X(this,Y,fe).call(this)},undo:()=>{this.thickness=St,X(this,Y,fe).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Ns=function(J){const St=this.color;this.addCommands({cmd:()=>{this.color=J,X(this,G,ae).call(this)},undo:()=>{this.color=St,X(this,G,ae).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Bs=function(J){J/=100;const St=this.opacity;this.addCommands({cmd:()=>{this.opacity=J,X(this,G,ae).call(this)},undo:()=>{this.opacity=St,X(this,G,ae).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,Us=function(){const{parentRotation:J,parentDimensions:[St,It]}=this;switch(J){case 90:return[0,It,It,St];case 180:return[St,It,St,It];case 270:return[St,0,It,St];default:return[0,0,St,It]}},q=new WeakSet,hs=function(){const{ctx:J,color:St,opacity:It,thickness:Tt,parentScale:Ot,scaleFactor:Nt}=this;J.lineWidth=Tt*Ot/Nt,J.lineCap="round",J.lineJoin="round",J.miterLimit=10,J.strokeStyle=`${St}${(0,at.opacityToHex)(It)}`},rt=new WeakSet,Ws=function(J,St){this.canvas.addEventListener("contextmenu",O.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,w)),this.canvas.addEventListener("pointermove",t(this,S)),this.canvas.addEventListener("pointerup",t(this,E)),this.canvas.removeEventListener("pointerdown",t(this,m)),this.isEditing=!0,t(this,R)||(it(this,R,!0),X(this,Dt,pe).call(this),this.thickness||(this.thickness=Et._defaultThickness),this.color||(this.color=Et._defaultColor||u.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Et._defaultOpacity)),this.currentPath.push([J,St]),it(this,b,!1),X(this,q,hs).call(this),it(this,l,()=>{X(this,e,$s).call(this),t(this,l)&&window.requestAnimationFrame(t(this,l))}),window.requestAnimationFrame(t(this,l))},ct=new WeakSet,ds=function(J,St){const[It,Tt]=this.currentPath.at(-1);if(this.currentPath.length>1&&J===It&&St===Tt)return;const Ot=this.currentPath;let Nt=t(this,x);if(Ot.push([J,St]),it(this,b,!0),Ot.length<=2){Nt.moveTo(...Ot[0]),Nt.lineTo(J,St);return}Ot.length===3&&(it(this,x,Nt=new Path2D),Nt.moveTo(...Ot[0])),X(this,h,zs).call(this,Nt,...Ot.at(-3),...Ot.at(-2),J,St)},At=new WeakSet,Hs=function(){if(this.currentPath.length===0)return;const J=this.currentPath.at(-1);t(this,x).lineTo(...J)},k=new WeakSet,Gs=function(J,St){it(this,l,null),J=Math.min(Math.max(J,0),this.canvas.width),St=Math.min(Math.max(St,0),this.canvas.height),X(this,ct,ds).call(this,J,St),X(this,At,Hs).call(this);let It;if(this.currentPath.length!==1)It=X(this,T,Vs).call(this);else{const yt=[J,St];It=[[yt,yt.slice(),yt.slice(),yt]]}const Tt=t(this,x),Ot=this.currentPath;this.currentPath=[],it(this,x,new Path2D);const Nt=()=>{this.allRawPaths.push(Ot),this.paths.push(It),this.bezierPath2D.push(Tt),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,ht,ke).call(this),X(this,dt,Me).call(this)),X(this,Y,fe).call(this))};this.addCommands({cmd:Nt,undo:Qt,mustExec:!0})},e=new WeakSet,$s=function(){if(!t(this,b))return;it(this,b,!1);const J=Math.ceil(this.thickness*this.parentScale),St=this.currentPath.slice(-3),It=St.map(Nt=>Nt[0]),Tt=St.map(Nt=>Nt[1]);Math.min(...It)-J,Math.max(...It)+J,Math.min(...Tt)-J,Math.max(...Tt)+J;const{ctx:Ot}=this;Ot.save(),Ot.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Nt of this.bezierPath2D)Ot.stroke(Nt);Ot.stroke(t(this,x)),Ot.restore()},h=new WeakSet,zs=function(J,St,It,Tt,Ot,Nt,Qt){const yt=(St+Tt)/2,Yt=(It+Ot)/2,Lt=(Tt+Nt)/2,N=(Ot+Qt)/2;J.bezierCurveTo(yt+2*(Tt-yt)/3,Yt+2*(Ot-Yt)/3,Lt+2*(Tt-Lt)/3,N+2*(Ot-N)/3,Lt,N)},T=new WeakSet,Vs=function(){const J=this.currentPath;if(J.length<=2)return[[J[0],J[0],J.at(-1),J.at(-1)]];const St=[];let It,[Tt,Ot]=J[0];for(It=1;It<J.length-2;It++){const[r,_]=J[It],[B,V]=J[It+1],K=(r+B)/2,lt=(_+V)/2,xt=[Tt+2*(r-Tt)/3,Ot+2*(_-Ot)/3],jt=[K+2*(r-K)/3,lt+2*(_-lt)/3];St.push([[Tt,Ot],xt,jt,[K,lt]]),[Tt,Ot]=[K,lt]}const[Nt,Qt]=J[It],[yt,Yt]=J[It+1],Lt=[Tt+2*(Nt-Tt)/3,Ot+2*(Qt-Ot)/3],N=[yt+2*(Nt-yt)/3,Yt+2*(Qt-Yt)/3];return St.push([[Tt,Ot],Lt,N,[yt,Yt]]),St},G=new WeakSet,ae=function(){if(this.isEmpty()){X(this,st,Fe).call(this);return}X(this,q,hs).call(this);const{canvas:J,ctx:St}=this;St.setTransform(1,0,0,1,0,0),St.clearRect(0,0,J.width,J.height),X(this,st,Fe).call(this);for(const It of this.bezierPath2D)St.stroke(It)},Q=new WeakSet,us=function(J){this.canvas.removeEventListener("pointerleave",t(this,w)),this.canvas.removeEventListener("pointermove",t(this,S)),this.canvas.removeEventListener("pointerup",t(this,E)),this.canvas.addEventListener("pointerdown",t(this,m)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",O.noContextMenu)},10),X(this,k,Gs).call(this,J.offsetX,J.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ht=new WeakSet,ke=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(J=>{var St;return(St=this.canvas)==null?void 0:St.setAttribute("aria-label",J)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,Me=function(){it(this,C,new ResizeObserver(J=>{const St=J[0].contentRect;St.width&&St.height&&this.setDimensions(St.width,St.height)})),t(this,C).observe(this.div)},Dt=new WeakSet,pe=function(){if(!t(this,R))return;const[J,St]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*J),this.canvas.height=Math.ceil(this.height*St),X(this,st,Fe).call(this)},Ft=new WeakSet,ps=function(J,St){const It=X(this,ut,De).call(this),Tt=(J-It)/t(this,p),Ot=(St-It)/t(this,v);this.scaleFactor=Math.min(Tt,Ot)},st=new WeakSet,Fe=function(){const J=X(this,ut,De).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+J,this.translationY*this.scaleFactor+J)},pt=new WeakSet,qs=function(J){const St=new Path2D;for(let It=0,Tt=J.length;It<Tt;It++){const[Ot,Nt,Qt,yt]=J[It];It===0&&St.moveTo(...Ot),St.bezierCurveTo(Nt[0],Nt[1],Qt[0],Qt[1],yt[0],yt[1])}return St},wt=new WeakSet,fs=function(J,St,It){const[Tt,Ot,Nt,Qt]=St;switch(It){case 0:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]+=Tt,J[yt+1]=Qt-J[yt+1];break;case 90:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const Lt=J[yt];J[yt]=J[yt+1]+Tt,J[yt+1]=Lt+Ot}break;case 180:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]=Nt-J[yt],J[yt+1]+=Ot;break;case 270:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const Lt=J[yt];J[yt]=Nt-J[yt+1],J[yt+1]=Qt-Lt}break;default:throw new Error("Invalid rotation")}return J},$t=new WeakSet,Xs=function(J,St,It){const[Tt,Ot,Nt,Qt]=St;switch(It){case 0:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]-=Tt,J[yt+1]=Qt-J[yt+1];break;case 90:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const Lt=J[yt];J[yt]=J[yt+1]-Ot,J[yt+1]=Lt-Tt}break;case 180:for(let yt=0,Yt=J.length;yt<Yt;yt+=2)J[yt]=Nt-J[yt],J[yt+1]-=Ot;break;case 270:for(let yt=0,Yt=J.length;yt<Yt;yt+=2){const Lt=J[yt];J[yt]=Qt-J[yt+1],J[yt+1]=Nt-Lt}break;default:throw new Error("Invalid rotation")}return J},Gt=new WeakSet,Ys=function(J,St,It,Tt){var Yt,Lt;const Ot=[],Nt=this.thickness/2,Qt=J*St+Nt,yt=J*It+Nt;for(const N of this.paths){const r=[],_=[];for(let B=0,V=N.length;B<V;B++){const[K,lt,xt,jt]=N[B],Pt=J*K[0]+Qt,Vt=J*K[1]+yt,kt=J*lt[0]+Qt,Mt=J*lt[1]+yt,Ht=J*xt[0]+Qt,qt=J*xt[1]+yt,Kt=J*jt[0]+Qt,Jt=J*jt[1]+yt;B===0&&(r.push(Pt,Vt),_.push(Pt,Vt)),r.push(kt,Mt,Ht,qt,Kt,Jt),_.push(kt,Mt),B===V-1&&_.push(Kt,Jt)}Ot.push({bezier:X(Yt=Et,wt,fs).call(Yt,r,Tt,this.rotation),points:X(Lt=Et,wt,fs).call(Lt,_,Tt,this.rotation)})}return Ot},Bt=new WeakSet,ms=function(){let J=1/0,St=-1/0,It=1/0,Tt=-1/0;for(const Ot of this.paths)for(const[Nt,Qt,yt,Yt]of Ot){const Lt=o.Util.bezierBoundingBox(...Nt,...Qt,...yt,...Yt);J=Math.min(J,Lt[0]),It=Math.min(It,Lt[1]),St=Math.max(St,Lt[2]),Tt=Math.max(Tt,Lt[3])}return[J,It,St,Tt]},ut=new WeakSet,De=function(){return t(this,d)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,fe=function(J=!1){if(this.isEmpty())return;if(!t(this,d)){X(this,G,ae).call(this);return}const St=X(this,Bt,ms).call(this),It=X(this,ut,De).call(this);it(this,p,Math.max(u.AnnotationEditor.MIN_SIZE,St[2]-St[0])),it(this,v,Math.max(u.AnnotationEditor.MIN_SIZE,St[3]-St[1]));const Tt=Math.ceil(It+t(this,p)*this.scaleFactor),Ot=Math.ceil(It+t(this,v)*this.scaleFactor),[Nt,Qt]=this.parentDimensions;this.width=Tt/Nt,this.height=Ot/Qt,this.setAspectRatio(Tt,Ot);const yt=this.translationX,Yt=this.translationY;this.translationX=-St[0],this.translationY=-St[1],X(this,Dt,pe).call(this),X(this,G,ae).call(this),it(this,A,Tt),it(this,i,Ot),this.setDims(Tt,Ot);const Lt=J?It/this.scaleFactor/2:0;this.translate(yt-this.translationX-Lt,Yt-this.translationY-Lt)},U(Et,pt),U(Et,wt),U(Et,$t),ee(Et,"_defaultColor",null),ee(Et,"_defaultOpacity",1),ee(Et,"_defaultThickness",1),ee(Et,"_type","ink");let M=Et;s.InkEditor=M},(j,s,L)=>{var M,v,p,S,w,E,m,x,d,b,R,ve,A,Ae,l,Le,y,gs,F,Ks,H,Qs,P,xs,et,Ie,z,Js;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var o=L(1),u=L(4),W=L(6),O=L(29);const mt=class mt extends u.AnnotationEditor{constructor(k){super({...k,name:"stampEditor"});U(this,R);U(this,A);U(this,l);U(this,y);U(this,F);U(this,H);U(this,P);U(this,et);U(this,z);U(this,M,null);U(this,v,null);U(this,p,null);U(this,S,null);U(this,w,null);U(this,E,null);U(this,m,null);U(this,x,null);U(this,d,!1);U(this,b,!1);it(this,S,k.bitmapUrl),it(this,w,k.bitmapFile)}static initialize(k){u.AnnotationEditor.initialize(k)}static get supportedTypes(){const k=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",k.map(a=>`image/${a}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(k){return this.supportedTypes.includes(k)}static paste(k,a){a.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:k.getAsFile()})}remove(){var k,a;t(this,v)&&(it(this,M,null),this._uiManager.imageManager.deleteId(t(this,v)),(k=t(this,E))==null||k.remove(),it(this,E,null),(a=t(this,m))==null||a.disconnect(),it(this,m,null)),super.remove()}rebuild(){if(!this.parent){t(this,v)&&X(this,l,Le).call(this);return}super.rebuild(),this.div!==null&&(t(this,v)&&X(this,l,Le).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,p)||t(this,M)||t(this,S)||t(this,w))}get isResizable(){return!0}render(){if(this.div)return this.div;let k,a;if(this.width&&(k=this.x,a=this.y),super.render(),this.div.hidden=!0,t(this,M)?X(this,y,gs).call(this):X(this,l,Le).call(this),this.width){const[e,n]=this.parentDimensions;this.setAt(k*e,a*n,this.width*e,this.height*n)}return this.div}static deserialize(k,a,e){if(k instanceof O.StampAnnotationElement)return null;const n=super.deserialize(k,a,e),{rect:h,bitmapUrl:f,bitmapId:T,isSvg:I,accessibilityData:G}=k;T&&e.imageManager.isValidId(T)?it(n,v,T):it(n,S,f),it(n,d,I);const[nt,Q]=n.pageDimensions;return n.width=(h[2]-h[0])/nt,n.height=(h[3]-h[1])/Q,G&&(n.altTextData=G),n}serialize(k=!1,a=null){if(this.isEmpty())return null;const e={annotationType:o.AnnotationEditorType.STAMP,bitmapId:t(this,v),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,d),structTreeParentId:this._structTreeParentId};if(k)return e.bitmapUrl=X(this,et,Ie).call(this,!0),e.accessibilityData=this.altTextData,e;const{decorative:n,altText:h}=this.altTextData;if(!n&&h&&(e.accessibilityData={type:"Figure",alt:h}),a===null)return e;a.stamps||(a.stamps=new Map);const f=t(this,d)?(e.rect[2]-e.rect[0])*(e.rect[3]-e.rect[1]):null;if(!a.stamps.has(t(this,v)))a.stamps.set(t(this,v),{area:f,serialized:e}),e.bitmap=X(this,et,Ie).call(this,!1);else if(t(this,d)){const T=a.stamps.get(t(this,v));f>T.area&&(T.area=f,T.serialized.bitmap.close(),T.serialized.bitmap=X(this,et,Ie).call(this,!1))}return e}};M=new WeakMap,v=new WeakMap,p=new WeakMap,S=new WeakMap,w=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap,d=new WeakMap,b=new WeakMap,R=new WeakSet,ve=function(k,a=!1){if(!k){this.remove();return}it(this,M,k.bitmap),a||(it(this,v,k.id),it(this,d,k.isSvg)),X(this,y,gs).call(this)},A=new WeakSet,Ae=function(){it(this,p,null),this._uiManager.enableWaiting(!1),t(this,E)&&this.div.focus()},l=new WeakSet,Le=function(){if(t(this,v)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,v)).then(a=>X(this,R,ve).call(this,a,!0)).finally(()=>X(this,A,Ae).call(this));return}if(t(this,S)){const a=t(this,S);it(this,S,null),this._uiManager.enableWaiting(!0),it(this,p,this._uiManager.imageManager.getFromUrl(a).then(e=>X(this,R,ve).call(this,e)).finally(()=>X(this,A,Ae).call(this)));return}if(t(this,w)){const a=t(this,w);it(this,w,null),this._uiManager.enableWaiting(!0),it(this,p,this._uiManager.imageManager.getFromFile(a).then(e=>X(this,R,ve).call(this,e)).finally(()=>X(this,A,Ae).call(this)));return}const k=document.createElement("input");k.type="file",k.accept=mt.supportedTypesStr,it(this,p,new Promise(a=>{k.addEventListener("change",async()=>{if(!k.files||k.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(k.files[0]);X(this,R,ve).call(this,e)}a()}),k.addEventListener("cancel",()=>{this.remove(),a()})}).finally(()=>X(this,A,Ae).call(this))),k.click()},y=new WeakSet,gs=function(){const{div:k}=this;let{width:a,height:e}=t(this,M);const[n,h]=this.pageDimensions,f=.75;if(this.width)a=this.width*n,e=this.height*h;else if(a>f*n||e>f*h){const nt=Math.min(f*n/a,f*h/e);a*=nt,e*=nt}const[T,I]=this.parentDimensions;this.setDims(a*T/n,e*I/h),this._uiManager.enableWaiting(!1);const G=it(this,E,document.createElement("canvas"));k.append(G),k.hidden=!1,X(this,P,xs).call(this,a,e),X(this,z,Js).call(this),t(this,b)||(this.parent.addUndoableEditor(this),it(this,b,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,Ks=function(k,a){var f;const[e,n]=this.parentDimensions;this.width=k/e,this.height=a/n,this.setDims(k,a),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,x)!==null&&clearTimeout(t(this,x)),it(this,x,setTimeout(()=>{it(this,x,null),X(this,P,xs).call(this,k,a)},200))},H=new WeakSet,Qs=function(k,a){const{width:e,height:n}=t(this,M);let h=e,f=n,T=t(this,M);for(;h>2*k||f>2*a;){const I=h,G=f;h>2*k&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),f>2*a&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));const nt=new OffscreenCanvas(h,f);nt.getContext("2d").drawImage(T,0,0,I,G,0,0,h,f),T=nt.transferToImageBitmap()}return T},P=new WeakSet,xs=function(k,a){k=Math.ceil(k),a=Math.ceil(a);const e=t(this,E);if(!e||e.width===k&&e.height===a)return;e.width=k,e.height=a;const n=t(this,d)?t(this,M):X(this,H,Qs).call(this,k,a),h=e.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(n,0,0,n.width,n.height,0,0,k,a)},et=new WeakSet,Ie=function(k){if(k){if(t(this,d)){const n=this._uiManager.imageManager.getSvgUrl(t(this,v));if(n)return n}const a=document.createElement("canvas");return{width:a.width,height:a.height}=t(this,M),a.getContext("2d").drawImage(t(this,M),0,0),a.toDataURL()}if(t(this,d)){const[a,e]=this.pageDimensions,n=Math.round(this.width*a*W.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*e*W.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(n,h);return f.getContext("2d").drawImage(t(this,M),0,0,t(this,M).width,t(this,M).height,0,0,n,h),f.transferToImageBitmap()}return structuredClone(t(this,M))},z=new WeakSet,Js=function(){it(this,m,new ResizeObserver(k=>{const a=k[0].contentRect;a.width&&a.height&&X(this,F,Ks).call(this,a.width,a.height)})),t(this,m).observe(this.div)},ee(mt,"_type","stamp");let at=mt;s.StampEditor=at}],__webpack_module_cache__={};function __w_pdfjs_require__(j){var s=__webpack_module_cache__[j];if(s!==void 0)return s.exports;var L=__webpack_module_cache__[j]={exports:{}};return __webpack_modules__[j](L,L.exports,__w_pdfjs_require__),L.exports}var __webpack_exports__={};return(()=>{var j=__webpack_exports__;Object.defineProperty(j,"__esModule",{value:!0}),Object.defineProperty(j,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(j,"AnnotationEditorLayer",{enumerable:!0,get:function(){return W.AnnotationEditorLayer}}),Object.defineProperty(j,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(j,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(j,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return O.AnnotationEditorUIManager}}),Object.defineProperty(j,"AnnotationLayer",{enumerable:!0,get:function(){return at.AnnotationLayer}}),Object.defineProperty(j,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(j,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(j,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(j,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(j,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(j,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(j,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(j,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(j,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(j,"PDFDataRangeTransport",{enumerable:!0,get:function(){return L.PDFDataRangeTransport}}),Object.defineProperty(j,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(j,"PDFWorker",{enumerable:!0,get:function(){return L.PDFWorker}}),Object.defineProperty(j,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(j,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(j,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(j,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(j,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(j,"SVGGraphics",{enumerable:!0,get:function(){return L.SVGGraphics}}),Object.defineProperty(j,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(j,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(j,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(j,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(j,"build",{enumerable:!0,get:function(){return L.build}}),Object.defineProperty(j,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(j,"getDocument",{enumerable:!0,get:function(){return L.getDocument}}),Object.defineProperty(j,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(j,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(j,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(j,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(j,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(j,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(j,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(j,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(j,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(j,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(j,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(j,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(j,"version",{enumerable:!0,get:function(){return L.version}});var s=__w_pdfjs_require__(1),L=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),W=__w_pdfjs_require__(27),O=__w_pdfjs_require__(5),at=__w_pdfjs_require__(29),M=__w_pdfjs_require__(14),v=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(j,s,L){if(L||arguments.length===2)for(var o=0,u=s.length,W;o<u;o++)(W||!(o in s))&&(W||(W=Array.prototype.slice.call(s,0,o)),W[o]=s[o]);return j.concat(W||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(j,s){var L={};return allEvents.forEach(function(o){var u=j[o];u&&(s?L[o]=function(W){return u(W,s(o))}:L[o]=u)}),L}function makeCancellablePromise(j){var s=!1,L=new Promise(function(o,u){j.then(function(W){return!s&&o(W)}).catch(function(W){return!s&&u(W)})});return{promise:L,cancel:function(){s=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(j,s){if(!j){if(isProduction)throw new Error(prefix);var L=typeof s=="function"?s():s,o=L?"".concat(prefix,": ").concat(L):prefix;throw new Error(o)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(j,s,L){for(L of j.keys())if(dequal(L,s))return L}function dequal(j,s){var L,o,u;if(j===s)return!0;if(j&&s&&(L=j.constructor)===s.constructor){if(L===Date)return j.getTime()===s.getTime();if(L===RegExp)return j.toString()===s.toString();if(L===Array){if((o=j.length)===s.length)for(;o--&&dequal(j[o],s[o]););return o===-1}if(L===Set){if(j.size!==s.size)return!1;for(o of j)if(u=o,u&&typeof u=="object"&&(u=find(s,u),!u)||!s.has(u))return!1;return!0}if(L===Map){if(j.size!==s.size)return!1;for(o of j)if(u=o[0],u&&typeof u=="object"&&(u=find(s,u),!u)||!dequal(o[1],s.get(u)))return!1;return!0}if(L===ArrayBuffer)j=new Uint8Array(j),s=new Uint8Array(s);else if(L===DataView){if((o=j.byteLength)===s.byteLength)for(;o--&&j.getInt8(o)===s.getInt8(o););return o===-1}if(ArrayBuffer.isView(j)){if((o=j.byteLength)===s.byteLength)for(;o--&&j[o]===s[o];);return o===-1}if(!L||typeof j=="object"){o=0;for(L in j)if(has.call(j,L)&&++o&&!has.call(s,L)||!(L in s)||!dequal(j[L],s[L]))return!1;return Object.keys(s).length===o}}return j!==j&&s!==s}const DocumentContext=reactExports.createContext(null);function Message({children:j,type:s}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${s}`,children:j})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(s){this.pdfDocument=s}setViewer(s){this.pdfViewer=s}setExternalLinkRel(s){this.externalLinkRel=s}setExternalLinkTarget(s){this.externalLinkTarget=s}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(s){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=s}get rotation(){return 0}set rotation(s){}goToDestination(s){return new Promise(L=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(s,"Destination is not specified."),typeof s=="string"?this.pdfDocument.getDestination(s).then(L):Array.isArray(s)?L(s):s.then(L)}).then(L=>{invariant(Array.isArray(L),`"${L}" is not a valid destination array.`);const o=L[0];new Promise(u=>{invariant(this.pdfDocument,"PDF document not loaded."),o instanceof Object?this.pdfDocument.getPageIndex(o).then(W=>{u(W)}).catch(()=>{invariant(!1,`"${o}" is not a valid page reference.`)}):typeof o=="number"?u(o):invariant(!1,`"${o}" is not a valid destination reference.`)}).then(u=>{const W=u+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(W>=1&&W<=this.pagesCount,`"${W}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:L,pageIndex:u,pageNumber:W})})})}navigateTo(s){this.goToDestination(s)}goToPage(s){const L=s-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(s>=1&&s<=this.pagesCount,`"${s}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:L,pageNumber:s})}addLinkAttributes(s,L,o){s.href=L,s.rel=this.externalLinkRel||DEFAULT_LINK_REL,s.target=o?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(j){return typeof j<"u"}function isProvided(j){return isDefined(j)&&j!==null}function isString(j){return typeof j=="string"}function isArrayBuffer(j){return j instanceof ArrayBuffer}function isBlob(j){return invariant(isBrowser,"isBlob can only be used in a browser environment"),j instanceof Blob}function isDataURI(j){return isString(j)&&/^data:/.test(j)}function dataURItoByteString(j){invariant(isDataURI(j),"Invalid data URI.");const[s="",L=""]=j.split(",");return s.split(";").indexOf("base64")!==-1?atob(L):unescape(L)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(j){j&&j.cancel&&j.cancel()}function makePageCallback(j,s){return Object.defineProperty(j,"width",{get(){return this.view[2]*s},configurable:!0}),Object.defineProperty(j,"height",{get(){return this.view[3]*s},configurable:!0}),Object.defineProperty(j,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(j,"originalHeight",{get(){return this.view[3]},configurable:!0}),j}function isCancelException(j){return j.name==="RenderingCancelledException"}function loadFromFile(j){return new Promise((s,L)=>{const o=new FileReader;o.onload=()=>{if(!o.result)return L(new Error("Error while reading a file."));s(o.result)},o.onerror=u=>{if(!u.target)return L(new Error("Error while reading a file."));const{error:W}=u.target;if(!W)return L(new Error("Error while reading a file."));switch(W.code){case W.NOT_FOUND_ERR:return L(new Error("Error while reading a file: File not found."));case W.SECURITY_ERR:return L(new Error("Error while reading a file: Security error."));case W.ABORT_ERR:return L(new Error("Error while reading a file: Aborted."));default:return L(new Error("Error while reading a file."))}},o.readAsArrayBuffer(j)})}function reducer(j,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return j}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __awaiter=globalThis&&globalThis.__awaiter||function(j,s,L,o){function u(W){return W instanceof L?W:new L(function(O){O(W)})}return new(L||(L=Promise))(function(W,O){function at(p){try{v(o.next(p))}catch(S){O(S)}}function M(p){try{v(o.throw(p))}catch(S){O(S)}}function v(p){p.done?W(p.value):u(p.value).then(at,M)}v((o=o.apply(j,s||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(j,s){var L={};for(var o in j)Object.prototype.hasOwnProperty.call(j,o)&&s.indexOf(o)<0&&(L[o]=j[o]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(j);u<o.length;u++)s.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(j,o[u])&&(L[o[u]]=j[o[u]]);return L};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(j,s)=>{switch(s){case PasswordResponses$1.NEED_PASSWORD:{const L=prompt("Enter the password to open this PDF file.");j(L);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const L=prompt("Invalid password. Please try again.");j(L);break}}};function isParameterObject(j){return typeof j=="object"&&j!==null&&("data"in j||"range"in j||"url"in j)}const Document=reactExports.forwardRef(function j(s,L){var{children:o,className:u,error:W="Failed to load PDF file.",externalLinkRel:O,externalLinkTarget:at,file:M,inputRef:v,imageResourcesPath:p,loading:S="Loading PDF…",noData:w="No PDF file specified.",onItemClick:E,onLoadError:m,onLoadProgress:x,onLoadSuccess:d,onPassword:b=defaultOnPassword,onSourceError:R,onSourceSuccess:C,options:A,renderMode:i,rotate:l}=s,D=__rest$1(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[y,c]=useResolver(),{value:F,error:g}=y,[H,$]=useResolver(),{value:P,error:q}=H,et=reactExports.useRef(new LinkService),rt=reactExports.useRef([]),z=reactExports.useRef(void 0),ct=reactExports.useRef(void 0);M&&M!==z.current&&isParameterObject(M)&&(warning$1(!dequal(M,z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),z.current=M),A&&A!==ct.current&&(warning$1(!dequal(A,ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ct.current=A);const mt=reactExports.useRef({scrollPageIntoView:ft=>{const{dest:dt,pageNumber:Ct,pageIndex:Dt=Ct-1}=ft;if(E){E({dest:dt,pageIndex:Dt,pageNumber:Ct});return}const vt=rt.current[Dt];if(vt){vt.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Ct} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(L,()=>({linkService:et,pages:rt,viewer:mt}),[]);function At(){C&&C()}function _t(){g&&(warning$1(!1,g.toString()),R&&R(g))}function k(){c({type:"RESET"})}reactExports.useEffect(k,[M,c]);const a=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!M)return null;if(typeof M=="string")return isDataURI(M)?{data:dataURItoByteString(M)}:(displayCORSWarning(),{url:M});if(M instanceof PDFDataRangeTransport)return{range:M};if(isArrayBuffer(M))return{data:M};if(isBrowser&&isBlob(M))return{data:yield loadFromFile(M)};if(invariant(typeof M=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(M),"Invalid parameter object: need either .data, .range or .url"),"url"in M&&typeof M.url=="string"){if(isDataURI(M.url)){const{url:ft}=M,dt=__rest$1(M,["url"]),Ct=dataURItoByteString(ft);return Object.assign({data:Ct},dt)}displayCORSWarning()}return M}),[M]);reactExports.useEffect(()=>{const ft=makeCancellablePromise(a());return ft.promise.then(dt=>{c({type:"RESOLVE",value:dt})}).catch(dt=>{c({type:"REJECT",error:dt})}),()=>{cancelRunningTask(ft)}},[a,c]),reactExports.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){_t();return}At()}},[F]);function e(){P&&(d&&d(P),rt.current=new Array(P.numPages),et.current.setDocument(P))}function n(){q&&(warning$1(!1,q.toString()),m&&m(q))}function h(){$({type:"RESET"})}reactExports.useEffect(h,[$,F]);function f(){if(!F)return;const ft=Object.assign(Object.assign({},A),{isEvalSupported:!1}),dt=Object.assign(Object.assign({},F),ft),Ct=pdfjs$1.getDocument(dt);x&&(Ct.onProgress=x),b&&(Ct.onPassword=b);const Dt=Ct;return Dt.promise.then(vt=>{$({type:"RESOLVE",value:vt})}).catch(vt=>{Dt.destroyed||$({type:"REJECT",error:vt})}),()=>{Dt.destroy()}}reactExports.useEffect(f,[A,$,F]),reactExports.useEffect(()=>{if(!(typeof P>"u")){if(P===!1){n();return}e()}},[P]);function T(){et.current.setViewer(mt.current),et.current.setExternalLinkRel(O),et.current.setExternalLinkTarget(at)}reactExports.useEffect(T,[O,at]);function I(ft,dt){rt.current[ft]=dt}function G(ft){delete rt.current[ft]}const nt=reactExports.useMemo(()=>({imageResourcesPath:p,linkService:et.current,onItemClick:E,pdf:P,registerPage:I,renderMode:i,rotate:l,unregisterPage:G}),[p,E,P,i,l]),Q=reactExports.useMemo(()=>makeEventProps(D,()=>P),[D,P]);function ot(){return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:nt,children:o})}function ht(){return M?P==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof S=="function"?S():S}):P===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof W=="function"?W():W}):ot():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof w=="function"?w():w})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",u),ref:v,style:{"--scale-factor":"1"}},Q,{children:ht()}))}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var j=[],s=0;s<arguments.length;s++)j[s]=arguments[s];var L=j.filter(Boolean);if(L.length<=1){var o=L[0];return o||null}return function(W){L.forEach(function(O){typeof O=="function"?O(W):O&&(O.current=W)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(j){return j in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(j){return"children"in j}function isStructTreeNodeWithOnlyContentChild(j){return isStructTreeNode(j)?j.children.length===1&&0 in j.children&&"id"in j.children[0]:!1}function getRoleAttributes(j){const s={};if(isStructTreeNode(j)){const{role:L}=j,o=L.match(HEADING_PATTERN);if(o)s.role="heading",s["aria-level"]=Number(o[1]);else if(isPdfRole(L)){const u=PDF_ROLE_TO_HTML_ROLE[L];u&&(s.role=u)}}return s}function getBaseAttributes(j){const s={};if(isStructTreeNode(j)){if(j.alt!==void 0&&(s["aria-label"]=j.alt),j.lang!==void 0&&(s.lang=j.lang),isStructTreeNodeWithOnlyContentChild(j)){const[L]=j.children;if(L){const o=getBaseAttributes(L);return Object.assign(Object.assign({},s),o)}}}else"id"in j&&(s["aria-owns"]=j.id);return s}function getAttributes(j){return j?Object.assign(Object.assign({},getRoleAttributes(j)),getBaseAttributes(j)):null}function StructTreeItem({className:j,node:s}){const L=reactExports.useMemo(()=>getAttributes(s),[s]),o=reactExports.useMemo(()=>!isStructTreeNode(s)||isStructTreeNodeWithOnlyContentChild(s)?null:s.children.map((u,W)=>jsxRuntimeExports.jsx(StructTreeItem,{node:u},W)),[s]);return jsxRuntimeExports.jsx("span",Object.assign({className:j},L,{children:o}))}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{onGetStructTreeError:s,onGetStructTreeSuccess:L}=j,[o,u]=useResolver(),{value:W,error:O}=o,{customTextRenderer:at,page:M}=j;function v(){W&&L&&L(W)}function p(){O&&(warning$1(!1,O.toString()),s&&s(O))}function S(){u({type:"RESET"})}reactExports.useEffect(S,[u,M]);function w(){if(at||!M)return;const E=makeCancellablePromise(M.getStructTree()),m=E;return E.promise.then(x=>{u({type:"RESOLVE",value:x})}).catch(x=>{u({type:"REJECT",error:x})}),()=>cancelRunningTask(m)}return reactExports.useEffect(w,[at,M,u]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){p();return}v()}},[W]),W?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:W}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(j){const s=usePageContext();invariant(s,"Unable to find Page context.");const L=Object.assign(Object.assign({},s),j),{_className:o,canvasBackground:u,devicePixelRatio:W=getDevicePixelRatio(),onRenderError:O,onRenderSuccess:at,page:M,renderForms:v,renderTextLayer:p,rotate:S,scale:w}=L,{canvasRef:E}=j;invariant(M,"Attempted to render page canvas, but no page was specified.");const m=reactExports.useRef(null);function x(){M&&at&&at(makePageCallback(M,w))}function d(i){isCancelException(i)||(warning$1(!1,i.toString()),O&&O(i))}const b=reactExports.useMemo(()=>M.getViewport({scale:w*W,rotation:S}),[W,M,S,w]),R=reactExports.useMemo(()=>M.getViewport({scale:w,rotation:S}),[M,S,w]);function C(){if(!M)return;M.cleanup();const{current:i}=m;if(!i)return;i.width=b.width,i.height=b.height,i.style.width=`${Math.floor(R.width)}px`,i.style.height=`${Math.floor(R.height)}px`,i.style.visibility="hidden";const l={annotationMode:v?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:i.getContext("2d",{alpha:!1}),viewport:b};u&&(l.background=u);const D=M.render(l),y=D;return D.promise.then(()=>{i.style.visibility="",x()}).catch(d),()=>cancelRunningTask(y)}reactExports.useEffect(C,[u,m,W,M,v,b,R]);const A=reactExports.useCallback(()=>{const{current:i}=m;i&&(i.width=0,i.height=0)},[m]);return reactExports.useEffect(()=>A,[A]),jsxRuntimeExports.jsx("canvas",{className:`${o}__canvas`,dir:"ltr",ref:mergeRefs(E,m),style:{display:"block",userSelect:"none"},children:p?jsxRuntimeExports.jsx(StructTree,{}):null})}function PageSVG(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{_className:s,onRenderSuccess:L,onRenderError:o,page:u,rotate:W,scale:O}=j;invariant(u,"Attempted to render page SVG, but no page was specified.");const[at,M]=useResolver(),{value:v,error:p}=at;function S(){u&&L&&L(makePageCallback(u,O))}function w(){p&&(isCancelException(p)||(warning$1(!1,p.toString()),o&&o(p)))}const E=reactExports.useMemo(()=>u.getViewport({scale:O,rotation:W}),[u,W,O]);function m(){M({type:"RESET"})}reactExports.useEffect(m,[u,M,E]);function x(){if(!u)return;const C=makeCancellablePromise(u.getOperatorList());return C.promise.then(A=>{new pdfjs$1.SVGGraphics(u.commonObjs,u.objs).getSVG(A,E).then(l=>{if(!(l instanceof SVGElement))throw new Error("getSVG returned unexpected result.");M({type:"RESOLVE",value:l})}).catch(l=>{M({type:"REJECT",error:l})})}).catch(A=>{M({type:"REJECT",error:A})}),()=>cancelRunningTask(C)}reactExports.useEffect(x,[u,M,E]),reactExports.useEffect(()=>{if(v!==void 0){if(v===!1){w();return}S()}},[v]);function d(C){if(!C||!v)return;C.firstElementChild||C.appendChild(v);const{width:A,height:i}=E;v.setAttribute("width",`${A}`),v.setAttribute("height",`${i}`)}const{width:b,height:R}=E;return jsxRuntimeExports.jsx("div",{className:`${s}__svg`,ref:C=>d(C),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:b,height:R,userSelect:"none"}})}function isTextItem(j){return"str"in j}function TextLayer(){const j=usePageContext();invariant(j,"Unable to find Page context.");const{customTextRenderer:s,onGetTextError:L,onGetTextSuccess:o,onRenderTextLayerError:u,onRenderTextLayerSuccess:W,page:O,pageIndex:at,pageNumber:M,rotate:v,scale:p}=j;invariant(O,"Attempted to load page text content, but no page was specified.");const[S,w]=useResolver(),{value:E,error:m}=S,x=reactExports.useRef(null),d=reactExports.useRef(void 0);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){E&&o&&o(E)}function R(){m&&(warning$1(!1,m.toString()),L&&L(m))}function C(){w({type:"RESET"})}reactExports.useEffect(C,[O,w]);function A(){if(!O)return;const g=makeCancellablePromise(O.getTextContent()),H=g;return g.promise.then($=>{w({type:"RESOLVE",value:$})}).catch($=>{w({type:"REJECT",error:$})}),()=>cancelRunningTask(H)}reactExports.useEffect(A,[O,w]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){R();return}b()}},[E]);const i=reactExports.useCallback(()=>{W&&W()},[W]),l=reactExports.useCallback(g=>{warning$1(!1,g.toString()),u&&u(g)},[u]);function D(){const g=d.current;g&&g.classList.add("active")}function y(){const g=d.current;g&&g.classList.remove("active")}const c=reactExports.useMemo(()=>O.getViewport({scale:p,rotation:v}),[O,v,p]);function F(){if(!O||!E)return;const{current:g}=x;if(!g)return;g.innerHTML="";const H=O.streamTextContent({includeMarkedContent:!0}),$={container:g,textContentSource:H,viewport:c},P=pdfjs$1.renderTextLayer($),q=P;return P.promise.then(()=>{const et=document.createElement("div");et.className="endOfContent",g.append(et),d.current=et;const rt=g.querySelectorAll('[role="presentation"]');if(s){let z=0;E.items.forEach((ct,mt)=>{if(!isTextItem(ct))return;const At=rt[z];if(!At)return;const _t=s(Object.assign({pageIndex:at,pageNumber:M,itemIndex:mt},ct));At.innerHTML=_t,z+=ct.str&&ct.hasEOL?2:1})}i()}).catch(l),()=>cancelRunningTask(q)}return reactExports.useLayoutEffect(F,[s,l,i,O,at,M,E,c]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:y,onMouseDown:D,ref:x})}function AnnotationLayer(){const j=useDocumentContext(),s=usePageContext();invariant(s,"Unable to find Page context.");const L=Object.assign(Object.assign({},j),s),{imageResourcesPath:o,linkService:u,onGetAnnotationsError:W,onGetAnnotationsSuccess:O,onRenderAnnotationLayerError:at,onRenderAnnotationLayerSuccess:M,page:v,pdf:p,renderForms:S,rotate:w,scale:E=1}=L;invariant(p,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(v,"Attempted to load page annotations, but no page was specified."),invariant(u,"Attempted to load page annotations, but no linkService was specified.");const[m,x]=useResolver(),{value:d,error:b}=m,R=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){d&&O&&O(d)}function A(){b&&(warning$1(!1,b.toString()),W&&W(b))}function i(){x({type:"RESET"})}reactExports.useEffect(i,[x,v]);function l(){if(!v)return;const g=makeCancellablePromise(v.getAnnotations()),H=g;return g.promise.then($=>{x({type:"RESOLVE",value:$})}).catch($=>{x({type:"REJECT",error:$})}),()=>{cancelRunningTask(H)}}reactExports.useEffect(l,[x,v,S]),reactExports.useEffect(()=>{if(d!==void 0){if(d===!1){A();return}C()}},[d]);function D(){M&&M()}function y(g){warning$1(!1,`${g}`),at&&at(g)}const c=reactExports.useMemo(()=>v.getViewport({scale:E,rotation:w}),[v,w,E]);function F(){if(!p||!v||!u||!d)return;const{current:g}=R;if(!g)return;const H=c.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,div:g,l10n:null,page:v,viewport:H},P={annotations:d,annotationStorage:p.annotationStorage,div:g,downloadManager:null,imageResourcesPath:o,linkService:u,page:v,renderForms:S,viewport:H};g.innerHTML="";try{new pdfjs$1.AnnotationLayer($).render(P),D()}catch(q){y(q)}return()=>{}}return reactExports.useEffect(F,[d,o,u,v,S,c]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:R})}var __rest=globalThis&&globalThis.__rest||function(j,s){var L={};for(var o in j)Object.prototype.hasOwnProperty.call(j,o)&&s.indexOf(o)<0&&(L[o]=j[o]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(j);u<o.length;u++)s.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(j,o[u])&&(L[o[u]]=j[o[u]]);return L};const defaultScale=1;function Page(j){const s=useDocumentContext(),L=Object.assign(Object.assign({},s),j),{_className:o="react-pdf__Page",_enableRegisterUnregisterPage:u=!0,canvasBackground:W,canvasRef:O,children:at,className:M,customRenderer:v,customTextRenderer:p,devicePixelRatio:S,error:w="Failed to load the page.",height:E,inputRef:m,loading:x="Loading page…",noData:d="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:R,onGetStructTreeError:C,onGetStructTreeSuccess:A,onGetTextError:i,onGetTextSuccess:l,onLoadError:D,onLoadSuccess:y,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:F,onRenderError:g,onRenderSuccess:H,onRenderTextLayerError:$,onRenderTextLayerSuccess:P,pageIndex:q,pageNumber:et,pdf:rt,registerPage:z,renderAnnotationLayer:ct=!0,renderForms:mt=!1,renderMode:At="canvas",renderTextLayer:_t=!0,rotate:k,scale:a=defaultScale,unregisterPage:e,width:n}=L,h=__rest(L,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[f,T]=useResolver(),{value:I,error:G}=f,nt=reactExports.useRef(null);invariant(rt,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Q=isProvided(et)?et-1:q??null,ot=et??(isProvided(q)?q+1:null),ht=k??(I?I.rotate:null),ft=reactExports.useMemo(()=>{if(!I)return null;let Gt=1;const zt=a??defaultScale;if(n||E){const Bt=I.getViewport({scale:1,rotation:ht});n?Gt=n/Bt.width:E&&(Gt=E/Bt.height)}return zt*Gt},[E,I,ht,a,n]);function dt(){return()=>{isProvided(Q)&&u&&e&&e(Q)}}reactExports.useEffect(dt,[u,rt,Q,e]);function Ct(){if(y){if(!I||!ft)return;y(makePageCallback(I,ft))}if(u&&z){if(!isProvided(Q)||!nt.current)return;z(Q,nt.current)}}function Dt(){G&&(warning$1(!1,G.toString()),D&&D(G))}function vt(){T({type:"RESET"})}reactExports.useEffect(vt,[T,rt,Q]);function Ft(){if(!rt||!ot)return;const Gt=makeCancellablePromise(rt.getPage(ot)),zt=Gt;return Gt.promise.then(Bt=>{T({type:"RESOLVE",value:Bt})}).catch(Bt=>{T({type:"REJECT",error:Bt})}),()=>cancelRunningTask(zt)}reactExports.useEffect(Ft,[T,rt,Q,ot,z]),reactExports.useEffect(()=>{if(I!==void 0){if(I===!1){Dt();return}Ct()}},[I,ft]);const gt=reactExports.useMemo(()=>I&&isProvided(Q)&&ot&&isProvided(ht)&&isProvided(ft)?{_className:o,canvasBackground:W,customTextRenderer:p,devicePixelRatio:S,onGetAnnotationsError:b,onGetAnnotationsSuccess:R,onGetStructTreeError:C,onGetStructTreeSuccess:A,onGetTextError:i,onGetTextSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:F,onRenderError:g,onRenderSuccess:H,onRenderTextLayerError:$,onRenderTextLayerSuccess:P,page:I,pageIndex:Q,pageNumber:ot,renderForms:mt,renderTextLayer:_t,rotate:ht,scale:ft}:null,[o,W,p,S,b,R,C,A,i,l,c,F,g,H,$,P,I,Q,ot,mt,_t,ht,ft]),st=reactExports.useMemo(()=>makeEventProps(h,()=>I&&(ft?makePageCallback(I,ft):void 0)),[h,I,ft]),Z=`${Q}@${ft}/${ht}`,pt=`${Q}/${ht}`;function Rt(){switch(At){case"custom":return invariant(v,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(v,{},`${Z}_custom`);case"none":return null;case"svg":return jsxRuntimeExports.jsx(PageSVG,{},`${pt}_svg`);case"canvas":default:return jsxRuntimeExports.jsx(PageCanvas,{canvasRef:O},`${Z}_canvas`)}}function wt(){return _t?jsxRuntimeExports.jsx(TextLayer,{},`${Z}_text`):null}function Ut(){return ct?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Z}_annotations`):null}function $t(){return jsxRuntimeExports.jsxs(PageContext.Provider,{value:gt,children:[Rt(),wt(),Ut(),at]})}function Wt(){return ot?rt===null||I===void 0||I===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof x=="function"?x():x}):rt===!1||I===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof w=="function"?w():w}):$t():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof d=="function"?d():d})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(o,M),"data-page-number":ot,ref:mergeRefs(m,nt),style:{"--scale-factor":`${ft}`,backgroundColor:W||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},st,{children:Wt()}))}displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const MockTest_NTA="",digestMessage=async j=>{const s=new TextEncoder().encode(j);return await crypto.subtle.digest("SHA-256",s)},b642ab=j=>{let s=window.atob(j),L=s.length,o=new Uint8Array(L);for(let u=0;u<L;u++)o[u]=s.charCodeAt(u);return o.buffer},importKey=async j=>await crypto.subtle.importKey("raw",j,{name:"AES-CBC"},!0,["decrypt","encrypt"]),getPW=async(j,s,L)=>{let o=await digestMessage(s),u=await importKey(o),W=b642ab(L.slice(0,22)+"=="),O=b642ab(L.slice(22));try{let at=await crypto.subtle.decrypt({name:"AES-CBC",iv:W},u,O),M=new TextDecoder("utf-8");j(M.decode(at))}catch(at){console.error("Error: Name: ",at.name,", Message: ",at.message)}};pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const fullscreen=()=>{document.getElementsByClassName("m3")[0].requestFullscreen()};function NTA(){const{userName:j,userMail:s,userPW:L,setPage:o,examParams:u,setUserRes:W}=useTestStore(),O=reactExports.useRef(null),at=()=>{O.current.scrollTo({top:O.current.scrollHeight})},M=()=>{O.current.scrollTo({top:0})},v=u.quesAns.length,[p,S]=reactExports.useState(u.quesAns.map(e=>({s:"nvd",r:null,...e}))),[w,E]=reactExports.useState(0),[m,x]=reactExports.useState(null),d=e=>{x(e),S(n=>(n[w].r=e,n[w].s==="mfr"&&(n[w].s="amr"),n))};reactExports.useEffect(()=>{p[w].s==="nvd"&&S(e=>(e[w].s="nad",e))},[w]);const b=e=>{E(parseInt(e.target.dataset.key)),x(p[parseInt(e.target.dataset.key)].r)},R=()=>w===v-1?0:w+1,C=()=>{let e=R();E(e),x(p[e].r)},A=()=>{S(e=>(e[w].s="nad",e[w].r=null,x(null),e))},i=()=>{S(e=>(e[w].s=m!==null?"amr":"mfr",e)),C()},l=()=>{S(e=>(e[w].s=m!==null?"asd":"nad",e[w].r=m,e)),C()},[D,y]=reactExports.useState(u.meta.timeMinutes*6e4),[c,F]=reactExports.useState(null),[g,H]=reactExports.useState(null);let $=new Date(D);const P=()=>{y(e=>e-1e3)};var q,et;const rt=u.meta.showAns?3:4,z=()=>{q(),et(),document.exitFullscreen(),o(rt),W(p)},ct=()=>{clearInterval(c),clearTimeout(g),document.exitFullscreen(),o(rt),W(p)},mt=()=>{let e=setInterval(P,1e3);F(e);let n=setTimeout(z,D);H(n),q=()=>clearInterval(e),et=()=>clearTimeout(n)},[At,_t]=reactExports.useState(!1),k=()=>{document.exitFullscreen(),_t(e=>!e)},a=e=>getPW(e,s,L);return jsxRuntimeExports.jsxs("div",{className:"m",style:{height:"100vh"},children:[jsxRuntimeExports.jsx("nav",{className:"m1"}),jsxRuntimeExports.jsx("header",{className:"m2",children:jsxRuntimeExports.jsxs("div",{className:"m21",children:[jsxRuntimeExports.jsx("table",{className:"m211",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{rowSpan:"4",className:"m2112",style:{backgroundImage:"url(./image/user.svg)"}}),jsxRuntimeExports.jsx("td",{children:"Candidate Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2115",children:j||"John Smith"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Exam Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2116",children:u.meta.eName})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Subject Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2117",children:u.meta.tName})]}),jsxRuntimeExports.jsxs("tr",{className:"m213",children:[jsxRuntimeExports.jsx("td",{children:"Remaining Time"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${D<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+$.getUTCHours()).slice(-2),":",("0"+$.getUTCMinutes()).slice(-2),":",("0"+$.getUTCSeconds()).slice(-2)]})})]})]})}),jsxRuntimeExports.jsx("select",{className:"m212",defaultValue:"English",children:jsxRuntimeExports.jsx("option",{value:"English",children:"English"})})]})}),jsxRuntimeExports.jsxs("div",{className:"m3",children:[jsxRuntimeExports.jsxs("main",{className:"m31",ref:O,children:[jsxRuntimeExports.jsxs("div",{className:"m3110",children:[jsxRuntimeExports.jsx("span",{onClick:at,id:"up",className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})}),jsxRuntimeExports.jsxs("h4",{children:["Question number: ",w+1]})]}),jsxRuntimeExports.jsx(Document$1,{file:u.meta.pdfUrl,onLoadSuccess:mt,onPassword:a,children:jsxRuntimeExports.jsx(Page,{pageNumber:w+1,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsxs("div",{className:"m3112",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"option-one",children:[jsxRuntimeExports.jsx("input",{id:"option-one",name:"radio",value:0,type:"radio",checked:m===0,onChange:()=>d(0)})," (A)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-two",children:[jsxRuntimeExports.jsx("input",{id:"option-two",name:"radio",value:1,type:"radio",checked:m===1,onChange:()=>d(1)})," (B)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-three",children:[jsxRuntimeExports.jsx("input",{id:"option-three",name:"radio",value:2,type:"radio",checked:m===2,onChange:()=>d(2)})," (C)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-four",children:[jsxRuntimeExports.jsx("input",{id:"option-four",name:"radio",value:3,type:"radio",checked:m===3,onChange:()=>d(3)})," (D)"]})]}),jsxRuntimeExports.jsx("div",{className:"m3110",children:jsxRuntimeExports.jsx("span",{onClick:M,className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"m32",children:[jsxRuntimeExports.jsx("button",{className:"m3211",onClick:A,"data-i":"clr",children:" CLEAR RESPONSE "}),jsxRuntimeExports.jsx("button",{className:"m3212",onClick:i,"data-i":"mfr",children:" MARK FOR REVIEW "}),jsxRuntimeExports.jsx("button",{className:"m3213",onClick:l,"data-i":"svn",children:" SAVE & NEXT "})]}),jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",children:p.filter(e=>e.s==="nvd").length}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",children:p.filter(e=>e.s==="nad").length}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",children:p.filter(e=>e.s==="asd").length}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",children:p.filter(e=>e.s==="mfr").length}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",children:p.filter(e=>e.s==="amr").length}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Will be considered for evalution)"})]}),jsxRuntimeExports.jsx("aside",{className:"m34",children:p.map((e,n)=>jsxRuntimeExports.jsx("div",{className:e.s,onClick:b,"data-key":n,children:n+1},n))}),jsxRuntimeExports.jsxs("div",{className:"opt",children:[jsxRuntimeExports.jsx("button",{className:"m35 m36",onClick:fullscreen,children:"Fullscreen"}),jsxRuntimeExports.jsx("span",{className:"m35",children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${D<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+$.getUTCHours()).slice(-2),":",("0"+$.getUTCMinutes()).slice(-2),":",("0"+$.getUTCSeconds()).slice(-2)]})}),jsxRuntimeExports.jsx("button",{onClick:k,style:{backgroundColor:"GrayText",cursor:"not-allowed"},children:"SUBMIT"})]})]}),jsxRuntimeExports.jsx("footer",{className:"m4"}),jsxRuntimeExports.jsxs(Dialog,{open:At,onClose:k,children:[jsxRuntimeExports.jsx(DialogTitle,{children:jsxRuntimeExports.jsx(Typography,{fontWeight:"bold",align:"center",color:"primary",children:"PLEASE CONFIRM YOUR RESPONSES"})}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{border:2,children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Number of Questions"})]})}),jsxRuntimeExports.jsxs(TableBody,{children:[jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Visited"}),jsxRuntimeExports.jsx(TableCell,{children:p.filter(e=>e.s==="nvd").length})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Answered"}),jsxRuntimeExports.jsx(TableCell,{children:p.filter(e=>e.s==="nad").length})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered"}),jsxRuntimeExports.jsx(TableCell,{children:p.filter(e=>e.s==="asd").length})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Marked for Review"}),jsxRuntimeExports.jsx(TableCell,{children:p.filter(e=>e.s==="mfr").length})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered & Marked for Review (Will be considered for evalution)"}),jsxRuntimeExports.jsx(TableCell,{children:p.filter(e=>e.s==="amr").length})]})]})]})})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",onClick:ct,children:"CONFIRM & SUBMIT"}),jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:k,children:"BACK"})]})]})]})}pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const Result=()=>{const{userRes:j,userMail:s,userPW:L,examParams:o}=useTestStore(),u=i=>getPW(i,s,L);let W=0,O=0,at=0,M=0;const v=j.map(i=>(O=O+i.m[0],i.e=1,(i.s==="asd"||i.s==="amr")&&(i.r==i.a?(W=W+i.m[0],i.e=2,at=at+1):(W=W-i.m[1],i.e=3,M=M+1)),{...i})),p=j.length,[S,w]=reactExports.useState(0),E=i=>{w(i)},m=()=>S===p-1?0:S+1,x=()=>{let i=m();w(i)},d=()=>S===0?p-1:S-1,b=()=>{let i=d();w(i)},[R,C]=reactExports.useState(!1),A=()=>C(i=>!i);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LeftDrawer,{}),jsxRuntimeExports.jsxs(Box,{flexGrow:1,children:[jsxRuntimeExports.jsx(NavBarColor,{}),jsxRuntimeExports.jsxs(Stack,{direction:"row",children:[jsxRuntimeExports.jsxs(Box,{overflow:"auto",maxHeight:"calc(100dvh - 64px)",minWidth:"400px",maxWidth:"700px",children:[jsxRuntimeExports.jsx(Box,{border:1,m:1,children:jsxRuntimeExports.jsx(Document$1,{file:o.meta.pdfUrl,onPassword:u,children:jsxRuntimeExports.jsx(Page,{pageNumber:S+1,renderTextLayer:!1,renderAnnotationLayer:!1})})}),jsxRuntimeExports.jsxs(Stack,{direction:"row",justifyContent:"space-between",m:1,alignItems:"center",children:[jsxRuntimeExports.jsx(Button,{onClick:b,variant:"outlined",startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),children:" Previous "}),jsxRuntimeExports.jsxs(Button,{variant:"contained",onClick:A,children:["Question: ",S+1," / ",p]}),jsxRuntimeExports.jsx(Button,{onClick:x,variant:"outlined",endIcon:jsxRuntimeExports.jsx(ArrowForward,{}),children:" NEXT "})]}),v[S].t===1?jsxRuntimeExports.jsx(Box,{children:v[S].o.map((i,l)=>jsxRuntimeExports.jsx(Typography,{border:2,borderRadius:2,borderColor:l===v[S].r&&v[S].e===3?"red":"gray",bgcolor:l==v[S].a?"#96ff96":"#fff",m:1,p:1,value:l,children:i},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),v[S].t===2?jsxRuntimeExports.jsxs(Box,{p:2,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,type:"number",disabled:!0,value:v[S].r||""}),jsxRuntimeExports.jsxs(Typography,{pt:2,children:['Correct answer is "',v[S].a,'"']})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),v[S].t===3?jsxRuntimeExports.jsxs(Box,{p:2,children:[jsxRuntimeExports.jsx(TextField,{type:"text",disabled:!0,fullWidth:!0,value:v[S].r||""}),jsxRuntimeExports.jsxs(Typography,{pt:2,children:['Correct answer is "',v[S].a,'"']})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),v[S].t===4?jsxRuntimeExports.jsx(Box,{children:["A","B","C","D"].map((i,l)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,borderColor:l===v[S].r&&v[S].e===3?"red":"gray",bgcolor:l===v[S].a?"#96ff96":"#fff",m:1,p:1,value:l,children:["Option ",i]},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),v[S].t===5?jsxRuntimeExports.jsx(Box,{children:["A","B","C","D","E"].map((i,l)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,borderColor:l===v[S].r&&v[S].e===3?"red":"gray",bgcolor:l===v[S].a?"#96ff96":"#fff",m:1,p:1,value:l,children:["Option ",i]},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]}),jsxRuntimeExports.jsxs(Box,{maxHeight:"calc(100dvh - 64px)",flexGrow:1,p:1,pt:0,children:[jsxRuntimeExports.jsx(Box,{bgcolor:"primary.main",p:2,sx:{borderBottomRightRadius:"34px",borderBottomLeftRadius:"34px"},children:jsxRuntimeExports.jsxs(Typography,{textAlign:"center",fontSize:"1.3rem",color:"#fff",children:[o.meta.tName," test"]})}),jsxRuntimeExports.jsx(Box,{my:1,children:jsxRuntimeExports.jsxs(Grid,{container:!0,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:6,p:1,children:jsxRuntimeExports.jsxs(Card,{sx:{p:1,bgcolor:"#cafa80"},elevation:4,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",align:"center",color:"#1aa81a",children:[jsxRuntimeExports.jsx("b",{children:W}),"/",jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem"},children:O})]}),jsxRuntimeExports.jsxs(Typography,{variant:"subtitle2",align:"center",color:"#1aa81a",children:["Obtained Score (",Math.ceil(100*W/O),"%)"]})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:6,p:1,children:jsxRuntimeExports.jsxs(Card,{direction:"row",sx:{p:1,bgcolor:"#d0f2fe"},elevation:4,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h4",align:"center",color:"#0c53b7",children:[jsxRuntimeExports.jsx("b",{children:at+M==0?0:Math.ceil(100*at/(at+M))}),jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem"},children:"%"})]}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",align:"center",color:"#0c53b7",children:"Accuracy"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:6,p:1,children:jsxRuntimeExports.jsxs(Card,{direction:"row",sx:{p:1,bgcolor:"#fff7cc"},elevation:4,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",align:"center",color:"#7a4f01",children:jsxRuntimeExports.jsx("b",{children:at})}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",align:"center",color:"#7a4f01",children:"Correct Answers"})]})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,lg:6,p:1,children:jsxRuntimeExports.jsxs(Card,{direction:"row",sx:{p:1,bgcolor:"#ffe7d9"},elevation:4,children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",align:"center",color:"#831938",children:jsxRuntimeExports.jsx("b",{children:M})}),jsxRuntimeExports.jsx(Typography,{variant:"subtitle2",align:"center",color:"#831938",children:"Incorrect Answers"})]})})]})}),jsxRuntimeExports.jsx(Button,{sx:{mt:1},fullWidth:!0,startIcon:jsxRuntimeExports.jsx(RemoveRedEye,{}),onClick:A,variant:"outlined",children:"See All Responses "})]})]})]}),jsxRuntimeExports.jsx(Dialog,{open:R,onClose:A,children:jsxRuntimeExports.jsxs(DialogContent,{sx:{p:1},children:[jsxRuntimeExports.jsx(Box,{sx:{m:1,ml:0},children:jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",style:{margin:"4px"},children:v.filter(i=>i.s==="nvd").length}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",style:{margin:"4px"},children:v.filter(i=>i.s==="nad").length}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",style:{margin:"4px"},children:v.filter(i=>i.s==="asd").length}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",style:{margin:"4px"},children:v.filter(i=>i.s==="mfr").length}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",style:{margin:"4px"},children:v.filter(i=>i.s==="amr").length}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Considered for evalution)"})]})}),jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Q. No."}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Status"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Score"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Evaluation result"})]})}),jsxRuntimeExports.jsx(TableBody,{children:v.map((i,l)=>jsxRuntimeExports.jsxs(TableRow,{onClick:()=>E(l),children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:l+1}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx("div",{className:i.s,style:{margin:"auto",width:"24px",height:"24px",backgroundRepeat:"no-repeat",backgroundSize:"contain"}})}),i.e===1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:"0"}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"}})]}):i.e===2?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:i.m[0]}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx(CheckCircle,{color:"success"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(TableCell,{sx:{textAlign:"center"},children:["- ",i.m[1]]}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx(CancelRounded,{color:"error"})})]})]},l))})]})})]})})]})};pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const ResultMobile=()=>{const[j,s]=reactExports.useState(!0),L=()=>s(i=>!i),{userRes:o,setPage:u,examParams:W,userMail:O,userPW:at}=useTestStore(),M=i=>getPW(i,O,at),v=()=>{u(0)};let p=0,S=0;const w=o.map((i,l)=>(S=S+i.m[0],i.e=1,(i.s==="asd"||i.s==="amr")&&(i.r==i.a?(p=p+i.m[0],i.e=2):(p=p-i.m[1],i.e=3)),{...i})),E=o.length,[m,x]=reactExports.useState(0),d=i=>{x(i),s(!1)},b=()=>m===E-1?0:m+1,R=()=>{let i=b();x(i)},C=()=>m===0?E-1:m-1,A=()=>{let i=C();x(i)};return jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(AppBar,{position:"sticky",children:jsxRuntimeExports.jsxs(Toolbar,{sx:{justifyContent:"space-between",display:"flex"},children:[jsxRuntimeExports.jsx(IconButton,{color:"inherit",onClick:L,children:jsxRuntimeExports.jsx(Menu,{})}),jsxRuntimeExports.jsx(Button,{onClick:v,variant:"outlined",size:"small",endIcon:jsxRuntimeExports.jsx(Home,{}),color:"inherit",children:"Home"})]})}),jsxRuntimeExports.jsx(Drawer,{anchor:"left",open:j,onClose:L,variant:"temporary",sx:{width:"70dvw"},children:jsxRuntimeExports.jsxs(Box,{width:"70dvw",children:[jsxRuntimeExports.jsxs(Box,{border:5,borderRadius:2,sx:{m:1,p:1},children:[jsxRuntimeExports.jsxs(Stack,{direction:"row",alignItems:"center",children:[jsxRuntimeExports.jsx(Avatar,{sx:{bgcolor:"gold"},children:jsxRuntimeExports.jsx(EmojiEvents,{})}),jsxRuntimeExports.jsxs(Typography,{variant:"h5",textAlign:"center",flexGrow:1,fontWeight:"bold",color:"green",children:[" SCORE: ",p]})]}),jsxRuntimeExports.jsxs(Typography,{pt:1,textAlign:"center",children:["FULL MARKS: ",S]})]}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(Box,{p:1,children:jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",style:{margin:"4px"},children:w.filter(i=>i.s==="nvd").length}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",style:{margin:"4px"},children:w.filter(i=>i.s==="nad").length}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",style:{margin:"4px"},children:w.filter(i=>i.s==="asd").length}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",style:{margin:"4px"},children:w.filter(i=>i.s==="mfr").length}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",style:{margin:"4px"},children:w.filter(i=>i.s==="amr").length}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Considered for evalution)"})]})}),jsxRuntimeExports.jsx(Divider,{}),jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Q. No."}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Status"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Score"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Evaluation result"})]})}),jsxRuntimeExports.jsx(TableBody,{children:w.map((i,l)=>jsxRuntimeExports.jsxs(TableRow,{onClick:()=>d(l),children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:l+1}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx("div",{className:i.s,style:{margin:"auto",width:"24px",height:"24px",backgroundRepeat:"no-repeat",backgroundSize:"contain"}})}),i.e===1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:"0"}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"}})]}):i.e===2?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:i.m[0]}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx(CheckCircle,{color:"success"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(TableCell,{sx:{textAlign:"center"},children:["- ",i.m[1]]}),jsxRuntimeExports.jsx(TableCell,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx(CancelRounded,{color:"error"})})]})]},l))})]})})]})}),jsxRuntimeExports.jsxs(Box,{children:[w[m].e===1?jsxRuntimeExports.jsxs(Stack,{direction:"row",justifyContent:"space-between",bgcolor:"#345578",color:"#fff",py:1,px:2,children:[jsxRuntimeExports.jsxs(Typography,{children:["Q. ",m+1," "]}),jsxRuntimeExports.jsx(Typography,{children:"Not Answered (Mark: 0)"})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].e===2?jsxRuntimeExports.jsxs(Stack,{direction:"row",justifyContent:"space-between",bgcolor:"green",color:"#fff",py:1,px:2,children:[jsxRuntimeExports.jsxs(Typography,{children:["Q. ",m+1," "]}),jsxRuntimeExports.jsxs(Typography,{children:["Correct Answer (Mark: + ",w[m].m[0],")"]})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].e===3?jsxRuntimeExports.jsxs(Stack,{direction:"row",justifyContent:"space-between",bgcolor:"#e02f49",color:"#fff",py:1,px:2,children:[jsxRuntimeExports.jsxs(Typography,{children:["Q. ",m+1," "]}),jsxRuntimeExports.jsxs(Typography,{children:["Incorrect Answer (Mark: - ",w[m].m[1],")"]})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(Document$1,{file:W.meta.pdfUrl,onPassword:M,children:jsxRuntimeExports.jsx(Page,{pageNumber:m+1,renderTextLayer:!1,renderAnnotationLayer:!1})}),w[m].t===1?jsxRuntimeExports.jsx(Box,{mb:15,children:w[m].o.map((i,l)=>jsxRuntimeExports.jsx(Typography,{border:2,borderRadius:2,borderColor:l===w[m].r&&w[m].e===3?"red":"gray",bgcolor:l==w[m].a?"#96ff96":"#fff",m:1,p:1,value:l,children:i},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].t===2?jsxRuntimeExports.jsxs(Box,{p:2,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,type:"number",disabled:!0,value:w[m].r||""}),jsxRuntimeExports.jsxs(Typography,{pt:2,children:['Correct answer is "',w[m].a,'"']})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].t===3?jsxRuntimeExports.jsxs(Box,{p:2,children:[jsxRuntimeExports.jsx(TextField,{type:"text",disabled:!0,fullWidth:!0,value:w[m].r||""}),jsxRuntimeExports.jsxs(Typography,{pt:2,children:['Correct answer is "',w[m].a,'"']})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].t===4?jsxRuntimeExports.jsx(Box,{mb:15,children:["A","B","C","D"].map((i,l)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,borderColor:l===w[m].r&&w[m].e===3?"red":"gray",bgcolor:l===w[m].a?"#96ff96":"#fff",m:1,p:1,value:l,children:["Option ",i]},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),w[m].t===5?jsxRuntimeExports.jsx(Box,{mb:15,children:["A","B","C","D","E"].map((i,l)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,borderColor:l===w[m].r&&w[m].e===3?"red":"gray",bgcolor:l===w[m].a?"#96ff96":"#fff",m:1,p:1,value:l,children:["Option ",i]},l))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(Box,{position:"fixed",bottom:0,width:"100%",children:jsxRuntimeExports.jsxs(ButtonGroup$1,{variant:"contained",fullWidth:!0,children:[jsxRuntimeExports.jsx(Button,{onClick:A,startIcon:jsxRuntimeExports.jsx(ArrowBack,{}),children:" Previous "}),jsxRuntimeExports.jsx(Button,{onClick:R,endIcon:jsxRuntimeExports.jsx(ArrowForward,{}),children:" NEXT "})]})})]})]})};pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const Mobile=()=>{const[j,s]=reactExports.useState(!1),L=()=>s(e=>!e),{userName:o,setPage:u,examParams:W,userMail:O,userPW:at,setUserRes:M}=useTestStore(),v=e=>getPW(e,O,at),p=W.quesAns.length,[S,w]=reactExports.useState(W.quesAns.map(e=>({s:"nvd",r:null,...e}))),[E,m]=reactExports.useState(0),[x,d]=reactExports.useState(null),b=e=>{d(e),w(n=>(n[E].r=e,n[E].s==="mfr"&&(n[E].s="amr"),n))},R=e=>{d(e.target.value)};reactExports.useEffect(()=>{S[E].s==="nvd"&&w(e=>(e[E].s="nad",e))},[E]);const C=e=>{m(parseInt(e.target.dataset.key)),d(S[parseInt(e.target.dataset.key)].r),s(!1)},A=()=>E===p-1?0:E+1,i=()=>{let e=A();m(e),d(S[e].r)},l=()=>E===0?p-1:E-1,D=()=>{let e=l();m(e),d(S[e].r)},y=()=>{w(e=>(e[E].s="nad",e[E].r=null,d(null),e))},c=()=>{w(e=>(e[E].s=x!==null?"amr":"mfr",e)),i()},F=()=>{w(e=>(e[E].s=x!==null?"asd":"nad",e[E].r=x,e)),i()},[g,H]=reactExports.useState(W.meta.timeMinutes*6e4),[$,P]=reactExports.useState(null),[q,et]=reactExports.useState(null);let rt=new Date(g);const z=()=>{H(e=>e-1e3)};var ct,mt;const At=W.meta.showAns?7:4,_t=()=>{ct(),mt(),document.exitFullscreen(),u(At),M(S)},k=()=>{clearInterval($),clearTimeout(q),document.exitFullscreen(),u(At),M(S)},a=()=>{let e=setInterval(z,1e3);P(e);let n=setTimeout(_t,g);et(n),ct=()=>clearInterval(e),mt=()=>clearTimeout(n)};return reactExports.useState(!1),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(AppBar,{position:"sticky",children:jsxRuntimeExports.jsxs(Toolbar,{sx:{justifyContent:"space-between",display:"flex"},children:[jsxRuntimeExports.jsx(IconButton,{color:"inherit",onClick:L,children:jsxRuntimeExports.jsx(Menu,{})}),jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${g<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+rt.getUTCHours()).slice(-2),":",("0"+rt.getUTCMinutes()).slice(-2),":",("0"+rt.getUTCSeconds()).slice(-2)]}),jsxRuntimeExports.jsx(Box,{borderRadius:3,px:2,py:.4,color:"#b6b6b6",bgcolor:"#fff",onClick:k,children:"Submit"})]})}),jsxRuntimeExports.jsx(Drawer,{anchor:"left",open:j,onClose:L,variant:"temporary",sx:{width:"70dvw"},children:jsxRuntimeExports.jsxs(Box,{width:"70dvw",children:[jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",children:S.filter(e=>e.s==="nvd").length}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",children:S.filter(e=>e.s==="nad").length}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",children:S.filter(e=>e.s==="asd").length}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",children:S.filter(e=>e.s==="mfr").length}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",children:S.filter(e=>e.s==="amr").length}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Will be considered for evalution)"})]}),jsxRuntimeExports.jsx("aside",{className:"m34",children:S.map((e,n)=>jsxRuntimeExports.jsx("div",{className:e.s,onClick:C,"data-key":n,children:n+1},n))})]})}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Stack,{direction:"row",justifyContent:"space-between",bgcolor:"#345578",color:"#fff",py:1,px:2,children:[jsxRuntimeExports.jsxs(Typography,{children:["Q. ",E+1," "]}),jsxRuntimeExports.jsxs(Typography,{children:["Correct + ",S[E].m[0]," : Wrong - ",S[E].m[1]]})]}),jsxRuntimeExports.jsx(Document$1,{file:W.meta.pdfUrl,onLoadSuccess:a,onPassword:v,children:jsxRuntimeExports.jsx(Page,{pageNumber:E+1,renderTextLayer:!1,renderAnnotationLayer:!1})}),S[E].t===1?jsxRuntimeExports.jsx(Box,{mb:15,children:S[E].o.map((e,n)=>jsxRuntimeExports.jsx(Typography,{border:2,borderRadius:2,bgcolor:n==x?"#96ff96":"#fff",onClick:()=>b(n),m:1,p:1,value:n,children:e},n))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),S[E].t===2?jsxRuntimeExports.jsxs(Box,{p:2,children:[" ",jsxRuntimeExports.jsx(Typography,{pb:2,children:"Important: For your answer, please provide a number with two decimal places in the text box (e.g., 1.23)."})," ",jsxRuntimeExports.jsx(TextField,{fullWidth:!0,type:"number",value:x===null?"":x,onChange:R})," "]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),S[E].t===3?jsxRuntimeExports.jsxs(Box,{p:2,children:[" ",jsxRuntimeExports.jsx(Typography,{pb:2,children:"Important: Answer with one word in lowercase only (e.g., example). "}),jsxRuntimeExports.jsx(TextField,{type:"text",fullWidth:!0,spellCheck:"false",value:x===null?"":x,onChange:R})," "]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),S[E].t===4?jsxRuntimeExports.jsx(Box,{mb:15,children:["A","B","C","D"].map((e,n)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,bgcolor:n==x?"#96ff96":"#fff",onClick:()=>b(n),m:1,p:1,value:n,children:["Option ",e]},n))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),S[E].t===5?jsxRuntimeExports.jsx(Box,{mb:15,children:["A","B","C","D","E"].map((e,n)=>jsxRuntimeExports.jsxs(Typography,{border:2,borderRadius:2,bgcolor:n==x?"#96ff96":"#fff",onClick:()=>b(n),m:1,p:1,value:n,children:["Option ",e]},n))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),jsxRuntimeExports.jsx(Box,{position:"fixed",bottom:0,children:jsxRuntimeExports.jsxs(ButtonGroup$1,{variant:"contained",children:[jsxRuntimeExports.jsxs(Button,{size:"small",onClick:D,children:[" ",jsxRuntimeExports.jsx(ArrowBack,{})," "]}),jsxRuntimeExports.jsx(Button,{size:"small",color:"inherit",onClick:y,"data-i":"clr",children:" CLEAR RESPONSE "}),jsxRuntimeExports.jsx(Button,{size:"small",color:"warning",onClick:c,"data-i":"mfr",children:" MARK FOR REVIEW & NEXT "}),jsxRuntimeExports.jsx(Button,{size:"small",color:"success",onClick:F,"data-i":"svn",children:" SAVE & NEXT "})]})})]})]})},MockTest=()=>{const{page:j}=useTestStore();switch(j){case 0:return jsxRuntimeExports.jsx(Password,{});case 1:return jsxRuntimeExports.jsx(Instruction,{});case 2:return jsxRuntimeExports.jsx(NTA,{});case 3:return jsxRuntimeExports.jsx(Result,{});case 4:return"Thank You your response has been submitted";case 5:return jsxRuntimeExports.jsx(Mobile,{});case 7:return jsxRuntimeExports.jsx(ResultMobile,{});default:return jsxRuntimeExports.jsx(Password,{})}};export{MockTest as default};
