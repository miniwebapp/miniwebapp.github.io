import{j as e,r as f,D as O,f as r,F as g,L as y}from"./index.b6b2f139.js";import{C as p}from"./CourseDataBase.7543e66d.js";import{R as A,L as R,a as k,b as P,G as B}from"./RAppBar.ee232240.js";import{T as D,a as E,b as L,c as C,d as s,e as N}from"./TableRow.d6ff6722.js";import{S as b}from"./Stack.66dbcd55.js";import{T as m,b as u,a as j}from"./Button.c1922477.js";import{A as q}from"./ArrowBack.30b813bb.js";import{A as w}from"./ShoppingCart.c1de8ac8.js";import{I as z}from"./Toolbar.51c004f9.js";import{c as M}from"./dividerClasses.0c29ded8.js";import{S as W,A as U}from"./Snackbar.6723dd50.js";import"./listItemTextClasses.15be0f20.js";import"./utils.4bd14281.js";import"./appendOwnerState.9b9a562e.js";import"./ownerDocument.d64bc4d4.js";import"./Grow.c006775e.js";var H=M(e("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");function F(t){if(window.PaymentRequest){const o=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:"sangramgarai@upi",pn:"Exam Idea",tn:"Course Purchase",mc:"5815",tr:"Unique reference id",tid:"1234",url:"https://examidea.in"}}],n=t,i={requestShipping:!1,requestPayerName:!1,requestPayerPhone:!1,requestPayerEmail:!1};new PaymentRequest(o,n,i).show().then(c=>{$(c)}).catch(c=>console.error(c))}}const G=t=>{var o={methodName:t.methodName,details:t.details,payerName:t.payerName,payerPhone:t.payerPhone,payerEmail:t.payerEmail};return JSON.stringify(o,void 0,2)},$=t=>{var o=G(t);fetch("/buy",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:o}).then(function(n){if(n.ok)return n.json()}).then(function(n){J(t,n.status,n.message)}).catch(function(n){console.log("Unable to process payment. "+n)})},J=(t,o,n)=>{t.complete(o).then(function(){console.log("Payment succeeds."),console.log(n)}).catch(function(i){console.log(i)})};function K(t,o,n,i){return{id:t,title:o,about:n,price:i}}function de(){const{appData:t,editAppData:o}=f.exports.useContext(O),[n,i]=f.exports.useState(!1),x=()=>{i(!1)},[c,v]=f.exports.useState(t.uCartItems),h=t.uCartItems.map(a=>K(p[a].id,p[a].title,p[a].about,p[a].price)),l={total:{label:"Total Cost",amount:{currency:"INR",value:h.reduce((a,d)=>a+d.price,0).toString()}},displayItems:h.map(a=>({label:a.title,amount:{currency:"INR",value:a.price.toString()}}))},I=()=>{F(l)},S=a=>{i(!0),v(t.uCartItems);let d=new Set(t.uCartItems);d.delete(a),o(Object.assign({},t,{uCartItems:[...d]}))},T=()=>{i(!1),o(Object.assign({},t,{uCartItems:c}))};return r(g,{children:[e(A,{}),r(D,{sx:{maxWidth:650,mx:"auto",overflow:"hidden"},children:[r(b,{direction:"row",px:2,py:5,justifyContent:"space-between",alignItems:"center",children:[e(m,{variant:"h5",fontWeight:"bold",color:"primary",children:"My Cart"}),e(y,{to:"/search",children:e(u,{variant:"outlined",size:"small",startIcon:e(q,{}),children:"Continue shopping"})})]}),t.uCartItems.length===0?r(g,{children:[e(m,{variant:"h5",fontWeight:"bold",align:"center",color:"text.secondary",my:3,children:"Cart is empty"}),e(j,{px:3,children:e(y,{to:"/search",children:e(u,{variant:"contained",fullWidth:!0,size:"large",children:"ADD SOME COURSES"})})})]}):r(g,{children:[r(E,{sx:{backgroundColor:"#eee"},children:[e(L,{children:r(C,{sx:{backgroundColor:"#ccf"},children:[e(s,{align:"center",children:"COURSES"}),e(s,{align:"right",children:"PRICE"}),e(s,{})]})}),r(N,{children:[h.map(a=>r(C,{children:[e(s,{component:"th",scope:"row",color:"text.success",children:e(y,{to:`/course/${a.id}`,children:r(R,{sx:{p:0},children:[e(k,{children:e(w,{src:`/courses/${a.id}/small.jpg`})}),e(P,{primary:a.title,secondary:a.about})]})})}),r(s,{align:"right",children:["\u20B9\xA0",a.price,".00"]}),e(s,{align:"right",children:e(z,{"aria-label":"Cancel",onClick:()=>{S(a.id)},children:e(H,{color:"text.secondary"})})})]},a.id)),r(C,{sx:{backgroundColor:"#ccf"},children:[e(s,{align:"right",children:"TOTAL"}),r(s,{align:"right",sx:{fontWeight:"bold"},children:["\u20B9\xA0",l.total.amount.value,".00"]}),e(s,{})]})]})]}),t.isLogin?r(b,{direction:"row",spacing:2,px:2,py:4,children:[r(m,{variant:"h6",border:1,px:1,borderRadius:1,disabled:!0,children:["\u20B9\xA0",l.total.amount.value,".00"]}),e(u,{variant:"contained",fullWidth:!0,onClick:I,children:"CHECKOUT"})]}):r(b,{direction:"row",spacing:2,m:1,py:4,children:[r(m,{variant:"h6",border:1,p:1,borderRadius:1,disabled:!0,children:["\u20B9\xA0",l.total.amount.value,".00"]}),e(B,{})]})]})]}),e(W,{open:n,anchorOrigin:{horizontal:"center",vertical:"bottom"},autoHideDuration:3e3,onClose:x,children:e(U,{severity:"success",action:e(u,{onClick:T,sx:{py:.2,color:"#fff",border:"1px solid #fff"},children:"undo"}),elevation:6,variant:"filled",children:"ITEM REMOVED"})})]})}export{de as default};
