var ts=Object.defineProperty;var es=(S,e,M)=>e in S?ts(S,e,{enumerable:!0,configurable:!0,writable:!0,value:M}):S[e]=M;var ee=(S,e,M)=>(es(S,typeof e!="symbol"?e+"":e,M),M),je=(S,e,M)=>{if(!e.has(S))throw TypeError("Cannot "+M)};var t=(S,e,M)=>(je(S,e,"read from private field"),M?M.call(S):e.get(S)),$=(S,e,M)=>{if(e.has(S))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(S):e.set(S,M)},it=(S,e,M,r)=>(je(S,e,"write to private field"),r?r.call(S,M):e.set(S,M),M);var ge=(S,e,M,r)=>({set _(u){it(S,e,u,M)},get _(){return t(S,e,r)}}),X=(S,e,M)=>(je(S,e,"access private method"),M);import{p as getDefaultExportFromCjs,r as reactExports,h as generateUtilityClasses,g as generateUtilityClass,s as styled,_ as _extends,k as alpha,f as useThemeProps,b as _objectWithoutPropertiesLoose,j as jsxRuntimeExports,d as clsx,a as capitalize,e as composeClasses,n as useParams,m as useSearchParams,B as Box,y as getAugmentedNamespace,R as React}from"./index-7c985869.js";import{c as create}from"./index-03a03c3c.js";import{S as Stack}from"./Stack-a44280a8.js";import{q as ButtonGroupContext,r as ButtonGroupButtonContext,c as createSvgIcon,T as Typography,B as Button}from"./Modal-c160a10b.js";import{A as Avatar}from"./Avatar-bb928fc8.js";import{I as Input}from"./Input-9350de88.js";import{S as Snackbar,A as Alert}from"./Snackbar-24eb5686.js";import{D as Dialog,a as DialogContent}from"./DialogContent-8c17125d.js";import{D as DialogTitle}from"./DialogTitle-c87d6a63.js";import{D as DialogActions}from"./DialogActions-07aaba7a.js";import{T as TableContainer,a as Table,b as TableHead,c as TableRow,d as TableCell,e as TableBody}from"./TableRow-5291f87f.js";import"./InputBase-8fd551c0.js";import"./Grow-59ef9e4e.js";import"./useId-35f47072.js";function _mergeNamespaces(S,e){for(var M=0;M<e.length;M++){const r=e[M];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in S)){const H=Object.getOwnPropertyDescriptor(r,u);H&&Object.defineProperty(S,u,H.get?H:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}))}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function S(r,u,H,B,lt,F){if(F!==ReactPropTypesSecret){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}S.isRequired=S;function e(){return S}var M={array:S,bigint:S,bool:S,func:S,number:S,object:S,string:S,symbol:S,any:S,arrayOf:e,element:S,elementType:S,instanceOf:e,node:S,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return M.PropTypes=M,M};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function getValidReactChildren(S){return reactExports.Children.toArray(S).filter(e=>reactExports.isValidElement(e))}function getButtonGroupUtilityClass(S){return generateUtilityClass("MuiButtonGroup",S)}const buttonGroupClasses=generateUtilityClasses("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),buttonGroupClasses$1=buttonGroupClasses,_excluded=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],overridesResolver=(S,e)=>{const{ownerState:M}=S;return[{[`& .${buttonGroupClasses$1.grouped}`]:e.grouped},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}${capitalize(M.orientation)}`]},{[`& .${buttonGroupClasses$1.grouped}`]:e[`grouped${capitalize(M.variant)}${capitalize(M.color)}`]},{[`& .${buttonGroupClasses$1.firstButton}`]:e.firstButton},{[`& .${buttonGroupClasses$1.lastButton}`]:e.lastButton},{[`& .${buttonGroupClasses$1.middleButton}`]:e.middleButton},e.root,e[M.variant],M.disableElevation===!0&&e.disableElevation,M.fullWidth&&e.fullWidth,M.orientation==="vertical"&&e.vertical]},useUtilityClasses=S=>{const{classes:e,color:M,disabled:r,disableElevation:u,fullWidth:H,orientation:B,variant:lt}=S,F={root:["root",lt,B==="vertical"&&"vertical",H&&"fullWidth",u&&"disableElevation"],grouped:["grouped",`grouped${capitalize(B)}`,`grouped${capitalize(lt)}`,`grouped${capitalize(lt)}${capitalize(B)}`,`grouped${capitalize(lt)}${capitalize(M)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(F,getButtonGroupUtilityClass,e)},ButtonGroupRoot=styled("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver})(({theme:S,ownerState:e})=>_extends({display:"inline-flex",borderRadius:(S.vars||S).shape.borderRadius},e.variant==="contained"&&{boxShadow:(S.vars||S).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${buttonGroupClasses$1.grouped}`]:_extends({minWidth:40,"&:hover":_extends({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${buttonGroupClasses$1.firstButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:S.vars?`1px solid rgba(${S.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${S.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:S.vars?`1px solid rgba(${S.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${S.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:S.vars?`rgba(${S.vars.palette[e.color].mainChannel} / 0.5)`:alpha(S.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(S.vars||S).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderRight:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(S.vars||S).palette.grey[400]}`,[`&.${buttonGroupClasses$1.disabled}`]:{borderBottom:`1px solid ${(S.vars||S).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(S.vars||S).palette[e.color].dark},{"&:hover":_extends({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${buttonGroupClasses$1.lastButton},& .${buttonGroupClasses$1.middleButton}`]:_extends({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),ButtonGroup=reactExports.forwardRef(function(e,M){const r=useThemeProps({props:e,name:"MuiButtonGroup"}),{children:u,className:H,color:B="primary",component:lt="div",disabled:F=!1,disableElevation:C=!1,disableFocusRipple:f=!1,disableRipple:L=!1,fullWidth:O=!1,orientation:T="horizontal",size:x="medium",variant:A="outlined"}=r,p=_objectWithoutPropertiesLoose(r,_excluded),m=_extends({},r,{color:B,component:lt,disabled:F,disableElevation:C,disableFocusRipple:f,disableRipple:L,fullWidth:O,orientation:T,size:x,variant:A}),b=useUtilityClasses(m),E=reactExports.useMemo(()=>({className:b.grouped,color:B,disabled:F,disableElevation:C,disableFocusRipple:f,disableRipple:L,fullWidth:O,size:x,variant:A}),[B,F,C,f,L,O,x,A,b.grouped]),_=getValidReactChildren(u),o=_.length,h=D=>{const y=D===0,l=D===o-1;return y&&l?"":y?b.firstButton:l?b.lastButton:b.middleButton};return jsxRuntimeExports.jsx(ButtonGroupRoot,_extends({as:lt,role:"group",className:clsx(b.root,H),ref:M,ownerState:m},p,{children:jsxRuntimeExports.jsx(ButtonGroupContext.Provider,{value:E,children:_.map((D,y)=>jsxRuntimeExports.jsx(ButtonGroupButtonContext.Provider,{value:h(y),children:D},y))})}))}),ButtonGroup$1=ButtonGroup,Keyboard=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),"Keyboard"),Lock=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),Person=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),initialState={page:0,userName:void 0,userMail:void 0,userPW:void 0,examParams:{},userRes:[]},useTestStore=create(S=>({setPage:e=>S({page:e}),setUserDetails:(e,M,r)=>S({userName:e,userMail:M,userPW:r}),setExamParams:e=>S({page:e.meta.interface,examParams:e}),setUserRes:e=>S({userRes:e}),reset:()=>S(initialState)})),Password=()=>{const{edu:S}=useParams(),[e]=useSearchParams(),M=e.get("t"),r=e.get("n"),u=e.get("e"),[H,B]=reactExports.useState(u||""),lt=m=>{B(m.target.value)},[F,C]=reactExports.useState(""),f=m=>{C(m.target.value)},[L,O]=reactExports.useState(!1),T=()=>O(!1),{setExamParams:x,setUserDetails:A}=useTestStore(),p=async()=>{const m=await fetch(`./examiner/${S}/${M}.json`);if(m.ok){const b=await m.json();x(b),A(r,H,F)}else O(!0)};return jsxRuntimeExports.jsxs(Box,{width:"100%",children:[jsxRuntimeExports.jsx(Box,{bgcolor:"#2d70b6",height:40}),jsxRuntimeExports.jsxs(Stack,{bgcolor:"#666",direction:"row",flexWrap:"nowrap",justifyContent:"space-between",border:2,borderColor:"#666",display:{xs:"none",sm:"flex"},children:[jsxRuntimeExports.jsxs(Stack,{color:"#fff",p:2,direction:"row",flexWrap:"nowrap",justifyContent:"space-between",flexGrow:1,children:[jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{children:"System Name :"}),jsxRuntimeExports.jsx(Typography,{color:"#ff0",fontSize:"3rem",children:"C001"}),jsxRuntimeExports.jsx(Typography,{children:"Kindly contact the invigilator if there are any discrepancies in the Name and Photograph displayed on the screen or if the photograph is not yours"})]}),jsxRuntimeExports.jsxs(Box,{width:"50%",children:[jsxRuntimeExports.jsx(Typography,{align:"right",children:"Candidate Name :"}),jsxRuntimeExports.jsx(Typography,{align:"right",color:"#ff0",fontSize:"3rem",children:r||"John Smith"}),jsxRuntimeExports.jsxs(Typography,{align:"right",children:["Subject : ",jsxRuntimeExports.jsx("span",{style:{color:"#ff0"},children:"Mock Exam"})]})]})]}),jsxRuntimeExports.jsx(Box,{minWidth:"8rem",bgcolor:"#fff",sx:{backgroundImage:"url(./image/user.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"center"}})]}),jsxRuntimeExports.jsx(Box,{pt:"10dvh",px:1,children:jsxRuntimeExports.jsxs(Box,{maxWidth:370,mx:"auto",flexGrow:1,children:[jsxRuntimeExports.jsx(Typography,{fontSize:"0.8rem",bgcolor:"#ddd",sx:{borderTopRightRadius:5,borderTopLeftRadius:5},fontWeight:"bold",px:2,py:1,color:"#444",children:"Login"}),jsxRuntimeExports.jsx(Box,{p:2,backgroundColor:"#f5f5f5",border:1,borderColor:"#dbdbdb",sx:{borderBottomRightRadius:5,borderBottomLeftRadius:5},children:jsxRuntimeExports.jsxs(Stack,{children:[jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Person,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,fullWidth:!0,placeholder:"User ID here",value:H,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:lt})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsxs(Stack,{border:2,direction:"row",alignContent:"stretch",flexWrap:"nowrap",justifyContent:"space-between",borderRadius:1,borderColor:"#dbdbdb",mb:2,children:[jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Lock,{sx:{color:"#666"}})}),jsxRuntimeExports.jsx(Stack,{direction:"row",flexGrow:1,borderLeft:2,borderRight:2,pl:2,borderColor:"#dbdbdb",children:jsxRuntimeExports.jsx(Input,{disableUnderline:!0,type:"password",fullWidth:!0,placeholder:"Password here",value:F,sx:{borderColor:"#dbdbdb",color:"GrayText"},onChange:f})}),jsxRuntimeExports.jsx(Avatar,{variant:"square",sx:{backgroundColor:"#eee"},children:jsxRuntimeExports.jsx(Keyboard,{sx:{color:"#666"}})})]}),jsxRuntimeExports.jsx(Button,{variant:"contained",sx:{marginTop:"20px"},onClick:p,children:"Sign In"})]})})]})}),jsxRuntimeExports.jsx(Box,{bgcolor:"#617b8c",textAlign:"center",color:"#fff",py:.2,fontSize:"small",position:"absolute",bottom:0,width:"100%",children:"Version 00.00.01"}),jsxRuntimeExports.jsx(Snackbar,{open:L,anchorOrigin:{horizontal:"center",vertical:"bottom"},autoHideDuration:3e3,onClose:T,children:jsxRuntimeExports.jsx(Alert,{severity:"error",elevation:6,variant:"filled",children:"Something went Wrong !!"})})]})},Instruction$1="";function Instruction(){const[S,e]=reactExports.useState(!1),M=reactExports.useRef(null),r=()=>{e(!0)},u=()=>{e(!1)},{examParams:H,setPage:B}=useTestStore(),lt=()=>{M.current.checked?(B(2),document.getElementsByTagName("body")[0].requestFullscreen()):r()};return jsxRuntimeExports.jsxs("div",{id:"instructionpage",className:"l",children:[jsxRuntimeExports.jsx("h3",{className:"l1",children:"Please read the instructions carefully"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"General Instructions:"})}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("br",{})}),jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:["Total duration of ",H.meta.eName," - ",H.meta.tName," exam is ",H.meta.timeMinutes," min."]}),jsxRuntimeExports.jsx("li",{children:"The clock will be set at the server. The countdown timer in the top left corner of screen will display the remaining time available for you to complete the examination. When the timer reaches zero, the examination will end by itself. You will not be required to end or submit your examination."}),jsxRuntimeExports.jsxs("li",{children:["The Questions Palette displayed on the right side of screen will show the status of each question using one of the following symbols:",jsxRuntimeExports.jsxs("ol",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo1.png",className:"l2"})," You have not visited the question yet."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo2.png",className:"l2"})," You have not answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo3.png",className:"l2"})," You have answered the question."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo4.png",className:"l2"})," You have NOT answered the question, but have marked the question for review."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("img",{src:"./image/Logo5.png",className:"l2"}),' The question(s) "Answered and Marked for Review" will be considered for evalution.']})]})]}),jsxRuntimeExports.jsx("li",{children:'You can click on the ">" arrow which apperes to the left of question palette to collapse the question palette thereby maximizing the question window. To view the question palette again, you can click on "<" which appears on the right side of question window.'}),jsxRuntimeExports.jsx("li",{children:'You can click on your "Profile" image on top right corner of your screen to change the language during the exam for entire question paper. On clicking of Profile image you will get a drop-down to change the question content to the desired language.'}),jsxRuntimeExports.jsxs("li",{children:["You can click on ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})," to navigate to the bottom and ",jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,style:{verticalAlign:"middle"},children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})," to navigate to top of the question are, without scrolling."]})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating to a Question:"})}),jsxRuntimeExports.jsx("ol",{start:"7",children:jsxRuntimeExports.jsxs("li",{children:["To answer a question, do the following:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"Click on the question number in the Question Palette at the right of your screen to go to that numbered question directly. Note that using this option does NOT save your answer to the current question."}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Save & Next"})," to save your answer for the current question and then go to the next question."]}),jsxRuntimeExports.jsxs("li",{children:["Click on ",jsxRuntimeExports.jsx("strong",{children:"Mark for Review & Next"})," to save your answer for the current question, mark it for review, and then go to the next question."]})]})]})}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Answering a Question:"})}),jsxRuntimeExports.jsxs("ol",{start:"8",children:[jsxRuntimeExports.jsxs("li",{children:["Procedure for answering a multiple choice type question:",jsxRuntimeExports.jsxs("ol",{type:"a",children:[jsxRuntimeExports.jsx("li",{children:"To select you answer, click on the button of one of the options."}),jsxRuntimeExports.jsxs("li",{children:["To deselect your chosen answer, click on the button of the chosen option again or click on the ",jsxRuntimeExports.jsx("strong",{children:"Clear Response"})," button"]}),jsxRuntimeExports.jsx("li",{children:"To change your chosen answer, click on the button of another option"}),jsxRuntimeExports.jsx("li",{children:"To save your answer, you MUST click on the Save & Next button."}),jsxRuntimeExports.jsx("li",{children:"To mark the question for review, click on the Mark for Review & Next button."})]})]}),jsxRuntimeExports.jsx("li",{children:"To change your answer to a question that has already been answered, first select that question for answering and then follow the procedure for answering that type of question."})]}),jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("u",{children:"Navigating through sections:"})}),jsxRuntimeExports.jsxs("ol",{start:"10",children:[jsxRuntimeExports.jsx("li",{children:"Sections in this question paper are displayed on the top bar of the screen. Questions in a section can be viewed by click on the section name. The section you are currently viewing is highlighted."}),jsxRuntimeExports.jsx("li",{children:"After click the Save & Next button on the last question for a section, you will automatically be taken to the first question of the next section."}),jsxRuntimeExports.jsx("li",{children:"You can shuffle between sections and questions anything during the examination as per your convenience only during the time stipulated."}),jsxRuntimeExports.jsx("li",{children:"Candidate can view the corresponding section summery as part of the legend that appears in every section above the question palette."})]}),jsxRuntimeExports.jsx("h4",{className:"l3",children:"Please note all questions will appear in your default language. This language can be changed for a particular question later on."}),jsxRuntimeExports.jsx("input",{type:"checkbox",id:"terms",ref:M}),jsxRuntimeExports.jsx("label",{htmlFor:"terms",children:"  I have read and understood the instructions. All computer hardware allotted to me are in proper working condition. I declare that I am not in possession of / not wearing / not carrying any prohibited gadget like mobile phone, bluetooth devices etc. / any prohibited material with me into the Examination Hall.I agree that in case of not adhering to the instructions, I shall be liable to be debarred from this Test and/or to disciplinary action, which may include ban from future Tests / Examinations."}),jsxRuntimeExports.jsx("p",{className:"lo",onClick:lt,children:"PROCEED"}),jsxRuntimeExports.jsxs(Dialog,{open:S,onClose:u,children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Please check Terms and Conditions and then proceed"}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button,{onClick:u,autoFocus:!0,children:"OK"})})]})]})}function commonjsRequire(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,M){module.exports=e.pdfjsLib=M()})(globalThis,()=>(()=>{var __webpack_modules__=[,(S,e)=>{var Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=ht,e.bytesToString=U,e.createValidAbsoluteUrl=vt,e.getModificationDate=wt,e.getUuid=Ht,e.getVerbosityLevel=q,e.info=nt,e.isArrayBuffer=pt,e.isArrayEqual=Tt,e.isNodeJS=void 0,e.normalizeUnicode=zt,e.objectFromMap=dt,e.objectSize=rt,e.setVerbosityLevel=w,e.shadow=St,e.string32=Z,e.stringToBytes=st,e.stringToPDFString=mt,e.stringToUTF8String=tt,e.unreachable=G,e.utf8StringToString=et,e.warn=at;const M=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=M;const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const u=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=u;const H=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=H;const B=1.35;e.LINE_FACTOR=B;const lt=.35;e.LINE_DESCENT_FACTOR=lt;const F=lt/B;e.BASELINE_FACTOR=F;const C={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=C;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=f;const L="pdfjs_internal_editor_";e.AnnotationEditorPrefix=L;const O={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=O;const T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=T;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=x;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=A;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=p;const m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=m;const b={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=b;const E={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=E;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=_;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=o;const h={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=h;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=D;const y={O:"PageOpen",C:"PageClose"};e.PageActionEventType=y;const l={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=l;const k={NONE:0,BINARY:1};e.CMapCompressionType=k;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=g;const W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=W;let z=l.WARNINGS;function w(ut){Number.isInteger(ut)&&(z=ut)}function q(){return z}function nt(ut){z>=l.INFOS&&console.log(`Info: ${ut}`)}function at(ut){z>=l.WARNINGS&&console.log(`Warning: ${ut}`)}function G(ut){throw new Error(ut)}function ht(ut,Q){ut||G(Q)}function gt(ut){switch(ut==null?void 0:ut.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function vt(ut,Q=null,Y=null){if(!ut)return null;try{if(Y&&typeof ut=="string"){if(Y.addDefaultProtocol&&ut.startsWith("www.")){const _t=ut.match(/\./g);(_t==null?void 0:_t.length)>=2&&(ut=`http://${ut}`)}if(Y.tryConvertEncoding)try{ut=tt(ut)}catch{}}const yt=Q?new URL(ut,Q):new URL(ut);if(gt(yt))return yt}catch{}return null}function St(ut,Q,Y,yt=!1){return Object.defineProperty(ut,Q,{value:Y,enumerable:!yt,configurable:!0,writable:!1}),Y}const P=function(){function Q(Y,yt){this.constructor===Q&&G("Cannot initialize BaseException."),this.message=Y,this.name=yt}return Q.prototype=new Error,Q.constructor=Q,Q}();e.BaseException=P;class n extends P{constructor(Q,Y){super(Q,"PasswordException"),this.code=Y}}e.PasswordException=n;class a extends P{constructor(Q,Y){super(Q,"UnknownErrorException"),this.details=Y}}e.UnknownErrorException=a;class i extends P{constructor(Q){super(Q,"InvalidPDFException")}}e.InvalidPDFException=i;class c extends P{constructor(Q){super(Q,"MissingPDFException")}}e.MissingPDFException=c;class d extends P{constructor(Q,Y){super(Q,"UnexpectedResponseException"),this.status=Y}}e.UnexpectedResponseException=d;class R extends P{constructor(Q){super(Q,"FormatError")}}e.FormatError=R;class I extends P{constructor(Q){super(Q,"AbortException")}}e.AbortException=I;function U(ut){(typeof ut!="object"||(ut==null?void 0:ut.length)===void 0)&&G("Invalid argument for bytesToString");const Q=ut.length,Y=8192;if(Q<Y)return String.fromCharCode.apply(null,ut);const yt=[];for(let _t=0;_t<Q;_t+=Y){const te=Math.min(_t+Y,Q),Zt=ut.subarray(_t,te);yt.push(String.fromCharCode.apply(null,Zt))}return yt.join("")}function st(ut){typeof ut!="string"&&G("Invalid argument for stringToBytes");const Q=ut.length,Y=new Uint8Array(Q);for(let yt=0;yt<Q;++yt)Y[yt]=ut.charCodeAt(yt)&255;return Y}function Z(ut){return String.fromCharCode(ut>>24&255,ut>>16&255,ut>>8&255,ut&255)}function rt(ut){return Object.keys(ut).length}function dt(ut){const Q=Object.create(null);for(const[Y,yt]of ut)Q[Y]=yt;return Q}function ft(){const ut=new Uint8Array(4);return ut[0]=1,new Uint32Array(ut.buffer,0,1)[0]===1}function ct(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return St(this,"isLittleEndian",ft())}static get isEvalSupported(){return St(this,"isEvalSupported",ct())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?St(this,"platform",{isWin:!1,isMac:!1}):St(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Q,Y;return St(this,"isCSSRoundSupported",(Y=(Q=globalThis.CSS)==null?void 0:Q.supports)==null?void 0:Y.call(Q,"width: round(1.5px, 1px)"))}}e.FeatureTest=Ct;const Lt=[...Array(256).keys()].map(ut=>ut.toString(16).padStart(2,"0"));class At{static makeHexColor(Q,Y,yt){return`#${Lt[Q]}${Lt[Y]}${Lt[yt]}`}static scaleMinMax(Q,Y){let yt;Q[0]?(Q[0]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=Q[0],Y[1]*=Q[0],Q[3]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=Q[3],Y[3]*=Q[3]):(yt=Y[0],Y[0]=Y[2],Y[2]=yt,yt=Y[1],Y[1]=Y[3],Y[3]=yt,Q[1]<0&&(yt=Y[2],Y[2]=Y[3],Y[3]=yt),Y[2]*=Q[1],Y[3]*=Q[1],Q[2]<0&&(yt=Y[0],Y[0]=Y[1],Y[1]=yt),Y[0]*=Q[2],Y[1]*=Q[2]),Y[0]+=Q[4],Y[1]+=Q[4],Y[2]+=Q[5],Y[3]+=Q[5]}static transform(Q,Y){return[Q[0]*Y[0]+Q[2]*Y[1],Q[1]*Y[0]+Q[3]*Y[1],Q[0]*Y[2]+Q[2]*Y[3],Q[1]*Y[2]+Q[3]*Y[3],Q[0]*Y[4]+Q[2]*Y[5]+Q[4],Q[1]*Y[4]+Q[3]*Y[5]+Q[5]]}static applyTransform(Q,Y){const yt=Q[0]*Y[0]+Q[1]*Y[2]+Y[4],_t=Q[0]*Y[1]+Q[1]*Y[3]+Y[5];return[yt,_t]}static applyInverseTransform(Q,Y){const yt=Y[0]*Y[3]-Y[1]*Y[2],_t=(Q[0]*Y[3]-Q[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/yt,te=(-Q[0]*Y[1]+Q[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/yt;return[_t,te]}static getAxialAlignedBoundingBox(Q,Y){const yt=this.applyTransform(Q,Y),_t=this.applyTransform(Q.slice(2,4),Y),te=this.applyTransform([Q[0],Q[3]],Y),Zt=this.applyTransform([Q[2],Q[1]],Y);return[Math.min(yt[0],_t[0],te[0],Zt[0]),Math.min(yt[1],_t[1],te[1],Zt[1]),Math.max(yt[0],_t[0],te[0],Zt[0]),Math.max(yt[1],_t[1],te[1],Zt[1])]}static inverseTransform(Q){const Y=Q[0]*Q[3]-Q[1]*Q[2];return[Q[3]/Y,-Q[1]/Y,-Q[2]/Y,Q[0]/Y,(Q[2]*Q[5]-Q[4]*Q[3])/Y,(Q[4]*Q[1]-Q[5]*Q[0])/Y]}static singularValueDecompose2dScale(Q){const Y=[Q[0],Q[2],Q[1],Q[3]],yt=Q[0]*Y[0]+Q[1]*Y[2],_t=Q[0]*Y[1]+Q[1]*Y[3],te=Q[2]*Y[0]+Q[3]*Y[2],Zt=Q[2]*Y[1]+Q[3]*Y[3],J=(yt+Zt)/2,Et=Math.sqrt((yt+Zt)**2-4*(yt*Zt-te*_t))/2,It=J+Et||1,Rt=J-Et||1;return[Math.sqrt(It),Math.sqrt(Rt)]}static normalizeRect(Q){const Y=Q.slice(0);return Q[0]>Q[2]&&(Y[0]=Q[2],Y[2]=Q[0]),Q[1]>Q[3]&&(Y[1]=Q[3],Y[3]=Q[1]),Y}static intersect(Q,Y){const yt=Math.max(Math.min(Q[0],Q[2]),Math.min(Y[0],Y[2])),_t=Math.min(Math.max(Q[0],Q[2]),Math.max(Y[0],Y[2]));if(yt>_t)return null;const te=Math.max(Math.min(Q[1],Q[3]),Math.min(Y[1],Y[3])),Zt=Math.min(Math.max(Q[1],Q[3]),Math.max(Y[1],Y[3]));return te>Zt?null:[yt,te,_t,Zt]}static bezierBoundingBox(Q,Y,yt,_t,te,Zt,J,Et){const It=[],Rt=[[],[]];let jt,Nt,Jt,xt,Yt,Ot,j,s;for(let K=0;K<2;++K){if(K===0?(Nt=6*Q-12*yt+6*te,jt=-3*Q+9*yt-9*te+3*J,Jt=3*yt-3*Q):(Nt=6*Y-12*_t+6*Zt,jt=-3*Y+9*_t-9*Zt+3*Et,Jt=3*_t-3*Y),Math.abs(jt)<1e-12){if(Math.abs(Nt)<1e-12)continue;xt=-Jt/Nt,0<xt&&xt<1&&It.push(xt);continue}j=Nt*Nt-4*Jt*jt,s=Math.sqrt(j),!(j<0)&&(Yt=(-Nt+s)/(2*jt),0<Yt&&Yt<1&&It.push(Yt),Ot=(-Nt-s)/(2*jt),0<Ot&&Ot<1&&It.push(Ot))}let v=It.length,N;const V=v;for(;v--;)xt=It[v],N=1-xt,Rt[0][v]=N*N*N*Q+3*N*N*xt*yt+3*N*xt*xt*te+xt*xt*xt*J,Rt[1][v]=N*N*N*Y+3*N*N*xt*_t+3*N*xt*xt*Zt+xt*xt*xt*Et;return Rt[0][V]=Q,Rt[1][V]=Y,Rt[0][V+1]=J,Rt[1][V+1]=Et,Rt[0].length=Rt[1].length=V+2,[Math.min(...Rt[0]),Math.min(...Rt[1]),Math.max(...Rt[0]),Math.max(...Rt[1])]}}e.Util=At;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mt(ut){if(ut[0]>="ï"){let Y;if(ut[0]==="þ"&&ut[1]==="ÿ"?Y="utf-16be":ut[0]==="ÿ"&&ut[1]==="þ"?Y="utf-16le":ut[0]==="ï"&&ut[1]==="»"&&ut[2]==="¿"&&(Y="utf-8"),Y)try{const yt=new TextDecoder(Y,{fatal:!0}),_t=st(ut);return yt.decode(_t)}catch(yt){at(`stringToPDFString: "${yt}".`)}}const Q=[];for(let Y=0,yt=ut.length;Y<yt;Y++){const _t=Dt[ut.charCodeAt(Y)];Q.push(_t?String.fromCharCode(_t):ut.charAt(Y))}return Q.join("")}function tt(ut){return decodeURIComponent(escape(ut))}function et(ut){return unescape(encodeURIComponent(ut))}function pt(ut){return typeof ut=="object"&&(ut==null?void 0:ut.byteLength)!==void 0}function Tt(ut,Q){if(ut.length!==Q.length)return!1;for(let Y=0,yt=ut.length;Y<yt;Y++)if(ut[Y]!==Q[Y])return!1;return!0}function wt(ut=new Date){return[ut.getUTCFullYear().toString(),(ut.getUTCMonth()+1).toString().padStart(2,"0"),ut.getUTCDate().toString().padStart(2,"0"),ut.getUTCHours().toString().padStart(2,"0"),ut.getUTCMinutes().toString().padStart(2,"0"),ut.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){$(this,Vt,!1);this.promise=new Promise((Q,Y)=>{this.resolve=yt=>{it(this,Vt,!0),Q(yt)},this.reject=yt=>{it(this,Vt,!0),Y(yt)}})}get settled(){return t(this,Vt)}}Vt=new WeakMap,e.PromiseCapability=Bt;let Gt=null,Ut=null;function zt(ut){return Gt||(Gt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ut=new Map([["ﬅ","ſt"]])),ut.replaceAll(Gt,(Q,Y,yt)=>Y?Y.normalize("NFKC"):Ut.get(yt))}function Ht(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ut=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ut);else for(let Q=0;Q<32;Q++)ut[Q]=Math.floor(Math.random()*255);return U(ut)}const $t="pdfjs_internal_id_";e.AnnotationPrefix=$t},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var S,M,r,u,he,B,Ee,F,C,f,L,O,T,x,A,p,Se,b,E,Ne,o,h;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(y){if(typeof y=="string"||y instanceof URL?y={url:y}:(0,_util.isArrayBuffer)(y)&&(y={data:y}),typeof y!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const l=new PDFDocumentLoadingTask,{docId:k}=l,g=y.url?getUrlProp(y.url):null,W=y.data?getDataProp(y.data):null,z=y.httpHeaders||null,w=y.withCredentials===!0,q=y.password??null,nt=y.range instanceof PDFDataRangeTransport?y.range:null,at=Number.isInteger(y.rangeChunkSize)&&y.rangeChunkSize>0?y.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let G=y.worker instanceof PDFWorker?y.worker:null;const ht=y.verbosity,gt=typeof y.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(y.docBaseUrl)?y.docBaseUrl:null,vt=typeof y.cMapUrl=="string"?y.cMapUrl:null,St=y.cMapPacked!==!1,P=y.CMapReaderFactory||DefaultCMapReaderFactory,n=typeof y.standardFontDataUrl=="string"?y.standardFontDataUrl:null,a=y.StandardFontDataFactory||DefaultStandardFontDataFactory,i=y.stopAtErrors!==!0,c=Number.isInteger(y.maxImageSize)&&y.maxImageSize>-1?y.maxImageSize:-1,d=y.isEvalSupported!==!1,R=typeof y.isOffscreenCanvasSupported=="boolean"?y.isOffscreenCanvasSupported:!_util.isNodeJS,I=Number.isInteger(y.canvasMaxAreaInBytes)?y.canvasMaxAreaInBytes:-1,U=typeof y.disableFontFace=="boolean"?y.disableFontFace:_util.isNodeJS,st=y.fontExtraProperties===!0,Z=y.enableXfa===!0,rt=y.ownerDocument||globalThis.document,dt=y.disableRange===!0,ft=y.disableStream===!0,ct=y.disableAutoFetch===!0,Ct=y.pdfBug===!0,Lt=nt?nt.length:y.length??NaN,At=typeof y.useSystemFonts=="boolean"?y.useSystemFonts:!_util.isNodeJS&&!U,Dt=typeof y.useWorkerFetch=="boolean"?y.useWorkerFetch:P===_display_utils.DOMCMapReaderFactory&&a===_display_utils.DOMStandardFontDataFactory&&vt&&n&&(0,_display_utils.isValidFetchUrl)(vt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(n,document.baseURI),mt=y.canvasFactory||new DefaultCanvasFactory({ownerDocument:rt}),tt=y.filterFactory||new DefaultFilterFactory({docId:k,ownerDocument:rt}),et=null;(0,_util.setVerbosityLevel)(ht);const pt={canvasFactory:mt,filterFactory:tt};if(Dt||(pt.cMapReaderFactory=new P({baseUrl:vt,isCompressed:St}),pt.standardFontDataFactory=new a({baseUrl:n})),!G){const Bt={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};G=Bt.port?PDFWorker.fromPort(Bt):new PDFWorker(Bt),l._worker=G}const Tt={docId:k,apiVersion:"3.11.174",data:W,password:q,disableAutoFetch:ct,rangeChunkSize:at,length:Lt,docBaseUrl:gt,enableXfa:Z,evaluatorOptions:{maxImageSize:c,disableFontFace:U,ignoreErrors:i,isEvalSupported:d,isOffscreenCanvasSupported:R,canvasMaxAreaInBytes:I,fontExtraProperties:st,useSystemFonts:At,cMapUrl:Dt?vt:null,standardFontDataUrl:Dt?n:null}},wt={ignoreErrors:i,isEvalSupported:d,disableFontFace:U,fontExtraProperties:st,enableXfa:Z,ownerDocument:rt,disableAutoFetch:ct,pdfBug:Ct,styleElement:et};return G.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const Bt=_fetchDocument(G,Tt),Gt=new Promise(function(Ut){let zt;nt?zt=new _transport_stream.PDFDataTransportStream({length:Lt,initialData:nt.initialData,progressiveDone:nt.progressiveDone,contentDispositionFilename:nt.contentDispositionFilename,disableRange:dt,disableStream:ft},nt):W||(zt=($t=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream($t):(0,_display_utils.isValidFetchUrl)($t.url)?new _displayFetch_stream.PDFFetchStream($t):new _displayNetwork.PDFNetworkStream($t))({url:g,length:Lt,httpHeaders:z,withCredentials:w,rangeChunkSize:at,disableRange:dt,disableStream:ft})),Ut(zt)});return Promise.all([Bt,Gt]).then(function([Ut,zt]){if(l.destroyed)throw new Error("Loading aborted");const Ht=new _message_handler.MessageHandler(k,Ut,G.port),$t=new WorkerTransport(Ht,l,zt,wt,pt);l._transport=$t,Ht.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(y,l){if(y.destroyed)throw new Error("Worker was destroyed");const k=await y.messageHandler.sendWithPromise("GetDocRequest",l,l.data?[l.data.buffer]:null);if(y.destroyed)throw new Error("Worker was destroyed");return k}function getUrlProp(y){if(y instanceof URL)return y.href;try{return new URL(y,window.location).href}catch{if(_util.isNodeJS&&typeof y=="string")return y}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(y){if(_util.isNodeJS&&typeof Buffer<"u"&&y instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength)return y;if(typeof y=="string")return(0,_util.stringToBytes)(y);if(typeof y=="object"&&!isNaN(y==null?void 0:y.length)||(0,_util.isArrayBuffer)(y))return new Uint8Array(y);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(e,S)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var l,k,g;this.destroyed=!0;try{(l=this._worker)!=null&&l.port&&(this._worker._pendingDestroy=!0),await((k=this._transport)==null?void 0:k.destroy())}catch(W){throw(g=this._worker)!=null&&g.port&&delete this._worker._pendingDestroy,W}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};S=new WeakMap,$(e,S,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,k,g=!1,W=null){this.length=l,this.initialData=k,this.progressiveDone=g,this.contentDispositionFilename=W,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,k){for(const g of this._rangeListeners)g(l,k)}onDataProgress(l,k){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(l,k)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const k of this._progressiveReadListeners)k(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,k){this._pdfInfo=l,this._transport=k,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(g=>{if(!g)return g;const W=[];for(const z in g)W.push(...g[z]);return W}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,k,g,W=!1){$(this,u);$(this,B);$(this,M,null);$(this,r,!1);this._pageIndex=l,this._pageInfo=k,this._transport=g,this._stats=W?new _display_utils.StatTimer:null,this._pdfBug=W,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:k=this.rotate,offsetX:g=0,offsetY:W=0,dontFlip:z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:k,offsetX:g,offsetY:W,dontFlip:z})}getAnnotations({intent:l="display"}={}){const k=this._transport.getRenderingIntent(l);return this._transport.getAnnotations(this._pageIndex,k.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:k,intent:g="display",annotationMode:W=_util.AnnotationMode.ENABLE,transform:z=null,background:w=null,optionalContentConfigPromise:q=null,annotationCanvasMap:nt=null,pageColors:at=null,printAnnotationStorage:G=null}){var a,i;(a=this._stats)==null||a.time("Overall");const ht=this._transport.getRenderingIntent(g,W,G);it(this,r,!1),X(this,B,Ee).call(this),q||(q=this._transport.getOptionalContentConfig());let gt=this._intentStates.get(ht.cacheKey);gt||(gt=Object.create(null),this._intentStates.set(ht.cacheKey,gt)),gt.streamReaderCancelTimeout&&(clearTimeout(gt.streamReaderCancelTimeout),gt.streamReaderCancelTimeout=null);const vt=!!(ht.renderingIntent&_util.RenderingIntentFlag.PRINT);gt.displayReadyCapability||(gt.displayReadyCapability=new _util.PromiseCapability,gt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(i=this._stats)==null||i.time("Page Request"),this._pumpOperatorList(ht));const St=c=>{var d,R;gt.renderTasks.delete(P),(this._maybeCleanupAfterRender||vt)&&it(this,r,!0),X(this,u,he).call(this,!vt),c?(P.capability.reject(c),this._abortOperatorList({intentState:gt,reason:c instanceof Error?c:new Error(c)})):P.capability.resolve(),(d=this._stats)==null||d.timeEnd("Rendering"),(R=this._stats)==null||R.timeEnd("Overall")},P=new InternalRenderTask({callback:St,params:{canvasContext:l,viewport:k,transform:z,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:nt,operatorList:gt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!vt,pdfBug:this._pdfBug,pageColors:at});(gt.renderTasks||(gt.renderTasks=new Set)).add(P);const n=P.task;return Promise.all([gt.displayReadyCapability.promise,q]).then(([c,d])=>{var R;if(this.destroyed){St();return}(R=this._stats)==null||R.time("Rendering"),P.initializeGraphics({transparency:c,optionalContentConfig:d}),P.operatorListChanged()}).catch(St),n}getOperatorList({intent:l="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var nt;function W(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(q))}const z=this._transport.getRenderingIntent(l,k,g,!0);let w=this._intentStates.get(z.cacheKey);w||(w=Object.create(null),this._intentStates.set(z.cacheKey,w));let q;return w.opListReadCapability||(q=Object.create(null),q.operatorListChanged=W,w.opListReadCapability=new _util.PromiseCapability,(w.renderTasks||(w.renderTasks=new Set)).add(q),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(nt=this._stats)==null||nt.time("Page Request"),this._pumpOperatorList(z)),w.opListReadCapability.promise}streamTextContent({includeMarkedContent:l=!1,disableNormalization:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:l===!0,disableNormalization:k===!0},{highWaterMark:100,size(W){return W.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const k=this.streamTextContent(l);return new Promise(function(g,W){function z(){w.read().then(function({value:nt,done:at}){if(at){g(q);return}Object.assign(q.styles,nt.styles),q.items.push(...nt.items),z()},W)}const w=k.getReader(),q={items:[],styles:Object.create(null)};z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(const g of k.renderTasks)l.push(g.completed),g.cancel();return this.objs.clear(),it(this,r,!1),X(this,B,Ee).call(this),Promise.all(l)}cleanup(l=!1){it(this,r,!0);const k=X(this,u,he).call(this,!1);return l&&k&&this._stats&&(this._stats=new _display_utils.StatTimer),k}_startRenderPage(l,k){var W,z;const g=this._intentStates.get(k);g&&((W=this._stats)==null||W.timeEnd("Page Request"),(z=g.displayReadyCapability)==null||z.resolve(l))}_renderPageChunk(l,k){for(let g=0,W=l.length;g<W;g++)k.operatorList.fnArray.push(l.fnArray[g]),k.operatorList.argsArray.push(l.argsArray[g]);k.operatorList.lastChunk=l.lastChunk,k.operatorList.separateAnnots=l.separateAnnots;for(const g of k.renderTasks)g.operatorListChanged();l.lastChunk&&X(this,u,he).call(this,!0)}_pumpOperatorList({renderingIntent:l,cacheKey:k,annotationStorageSerializable:g}){const{map:W,transfers:z}=g,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:k,annotationStorage:W},z).getReader(),nt=this._intentStates.get(k);nt.streamReader=q;const at=()=>{q.read().then(({value:G,done:ht})=>{if(ht){nt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(G,nt),at())},G=>{if(nt.streamReader=null,!this._transport.destroyed){if(nt.operatorList){nt.operatorList.lastChunk=!0;for(const ht of nt.renderTasks)ht.operatorListChanged();X(this,u,he).call(this,!0)}if(nt.displayReadyCapability)nt.displayReadyCapability.reject(G);else if(nt.opListReadCapability)nt.opListReadCapability.reject(G);else throw G}})};at()}_abortOperatorList({intentState:l,reason:k,force:g=!1}){if(l.streamReader){if(l.streamReaderCancelTimeout&&(clearTimeout(l.streamReaderCancelTimeout),l.streamReaderCancelTimeout=null),!g){if(l.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException){let W=RENDERING_CANCELLED_TIMEOUT;k.extraDelay>0&&k.extraDelay<1e3&&(W+=k.extraDelay),l.streamReaderCancelTimeout=setTimeout(()=>{l.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:l,reason:k,force:!0})},W);return}}if(l.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[W,z]of this._intentStates)if(z===l){this._intentStates.delete(W);break}this.cleanup()}}}get stats(){return this._stats}}M=new WeakMap,r=new WeakMap,u=new WeakSet,he=function(l=!1){if(X(this,B,Ee).call(this),!t(this,r)||this.destroyed)return!1;if(l)return it(this,M,setTimeout(()=>{it(this,M,null),X(this,u,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:k,operatorList:g}of this._intentStates.values())if(k.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),it(this,r,!1),!0},B=new WeakSet,Ee=function(){t(this,M)&&(clearTimeout(t(this,M)),it(this,M,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){$(this,F,new Set);$(this,C,Promise.resolve())}postMessage(l,k){const g={data:structuredClone(l,k?{transfer:k}:null)};t(this,C).then(()=>{for(const W of t(this,F))W.call(this,g)})}addEventListener(l,k){t(this,F).add(k)}removeEventListener(l,k){t(this,F).delete(k)}terminate(){t(this,F).clear()}}F=new WeakMap,C=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,l){let k;try{if(k=new URL(y),!k.origin||k.origin==="null")return!1}catch{return!1}const g=new URL(l,k);return k.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(y){const l=`importScripts("${y}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:l=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){var g;if(this.name=y,this.destroyed=!1,this.verbosity=k,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,l){if((g=t(_PDFWorker,L))!=null&&g.has(l))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,L)||it(_PDFWorker,L,new WeakMap)).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const l=new Worker(y),k=new _message_handler.MessageHandler("main","worker",l),g=()=>{l.removeEventListener("error",W),k.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},W=()=>{this._webWorker||g()};l.addEventListener("error",W),k.on("test",w=>{if(l.removeEventListener("error",W),this.destroyed){g();return}w?(this._messageHandler=k,this._port=l,this._webWorker=l,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),l.terminate())}),k.on("ready",w=>{if(l.removeEventListener("error",W),this.destroyed){g();return}try{z()}catch{this._setupFakeWorker()}});const z=()=>{const w=new Uint8Array;k.send("test",w,[w.buffer])};z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const k=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(k+"_worker",k,l);y.setup(g,l);const W=new _message_handler.MessageHandler(k,k+"_worker",l);this._messageHandler=W,this._readyCapability.resolve(),W.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){var y;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(y=t(_PDFWorker,L))==null||y.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){var k;if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const l=(k=t(this,L))==null?void 0:k.get(y.port);if(l){if(l._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return l}return new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};L=new WeakMap,$(_PDFWorker,L,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(l,k,g,W,z){$(this,p);$(this,O,new Map);$(this,T,new Map);$(this,x,new Map);$(this,A,null);this.messageHandler=l,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:W.ownerDocument,styleElement:W.styleElement}),this._params=W,this.canvasFactory=z.canvasFactory,this.filterFactory=z.filterFactory,this.cMapReaderFactory=z.cMapReaderFactory,this.standardFontDataFactory=z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(l,k=_util.AnnotationMode.ENABLE,g=null,W=!1){let z=_util.RenderingIntentFlag.DISPLAY,w=_annotation_storage.SerializableEmpty;switch(l){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(k){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,w=(z&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return W&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${w.hash}`,annotationStorageSerializable:w}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,A))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const W of t(this,T).values())l.push(W._destroy());t(this,T).clear(),t(this,x).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const k=this.messageHandler.sendWithPromise("Terminate",null);return l.push(k),Promise.all(l).then(()=>{var W;this.commonObjs.clear(),this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(),(W=this._networkStream)==null||W.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:k}=this;l.on("GetReader",(g,W)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=z=>{this._lastProgress={loaded:z.loaded,total:z.total}},W.onPull=()=>{this._fullReader.read().then(function({value:z,done:w}){if(w){W.close();return}(0,_util.assert)(z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array(z),1,[z])}).catch(z=>{W.error(z)})},W.onCancel=z=>{this._fullReader.cancel(z),W.ready.catch(w=>{if(!this.destroyed)throw w})}}),l.on("ReaderHeadersReady",g=>{const W=new _util.PromiseCapability,z=this._fullReader;return z.headersReady.then(()=>{var w;(!z.isStreamingSupported||!z.isRangeSupported)&&(this._lastProgress&&((w=k.onProgress)==null||w.call(k,this._lastProgress)),z.onProgress=q=>{var nt;(nt=k.onProgress)==null||nt.call(k,{loaded:q.loaded,total:q.total})}),W.resolve({isStreamingSupported:z.isStreamingSupported,isRangeSupported:z.isRangeSupported,contentLength:z.contentLength})},W.reject),W.promise}),l.on("GetRangeReader",(g,W)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const z=this._networkStream.getRangeReader(g.begin,g.end);if(!z){W.close();return}W.onPull=()=>{z.read().then(function({value:w,done:q}){if(q){W.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{W.error(w)})},W.onCancel=w=>{z.cancel(w),W.ready.catch(q=>{if(!this.destroyed)throw q})}}),l.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(g,this))}),l.on("DocException",function(g){let W;switch(g.name){case"PasswordException":W=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":W=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":W=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":W=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":W=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject(W)}),l.on("PasswordRequest",g=>{if(it(this,A,new _util.PromiseCapability),k.onPassword){const W=z=>{z instanceof Error?t(this,A).reject(z):t(this,A).resolve({password:z})};try{k.onPassword(W,g.code)}catch(z){t(this,A).reject(z)}}else t(this,A).reject(new _util.PasswordException(g.message,g.code));return t(this,A).promise}),l.on("DataLoaded",g=>{var W;(W=k.onProgress)==null||W.call(k,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),l.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,T).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),l.on("commonobj",([g,W,z])=>{var w;if(!this.destroyed&&!this.commonObjs.has(g))switch(W){case"Font":const q=this._params;if("error"in z){const G=z.error;(0,_util.warn)(`Error during font loading: ${G}`),this.commonObjs.resolve(g,G);break}const nt=q.pdfBug&&((w=globalThis.FontInspector)!=null&&w.enabled)?(G,ht)=>globalThis.FontInspector.fontAdded(G,ht):null,at=new _font_loader.FontFaceObject(z,{isEvalSupported:q.isEvalSupported,disableFontFace:q.disableFontFace,ignoreErrors:q.ignoreErrors,inspectFont:nt});this.fontLoader.bind(at).catch(G=>l.sendWithPromise("FontFallback",{id:g})).finally(()=>{!q.fontExtraProperties&&at.data&&(at.data=null),this.commonObjs.resolve(g,at)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,z);break;default:throw new Error(`Got unknown common object type ${W}`)}}),l.on("obj",([g,W,z,w])=>{var nt;if(this.destroyed)return;const q=t(this,T).get(W);if(!q.objs.has(g))switch(z){case"Image":if(q.objs.resolve(g,w),w){let at;if(w.bitmap){const{width:G,height:ht}=w;at=G*ht*4}else at=((nt=w.data)==null?void 0:nt.length)||0;at>_util.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(g,w);break;default:throw new Error(`Got unknown object type ${z}`)}}),l.on("DocProgress",g=>{var W;this.destroyed||(W=k.onProgress)==null||W.call(k,{loaded:g.loaded,total:g.total})}),l.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:l,transfers:k}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:l,filename:((g=this._fullReader)==null?void 0:g.filename)??null},k).finally(()=>{this.annotationStorage.resetModified()})}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const k=l-1,g=t(this,x).get(k);if(g)return g;const W=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then(z=>{if(this.destroyed)throw new Error("Transport destroyed");const w=new PDFPageProxy(k,z,this,this._params.pdfBug);return t(this,T).set(k,w),w});return t(this,x).set(k,W),W}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:k})}getFieldObjects(){return X(this,p,Se).call(this,"GetFieldObjects")}hasJSActions(){return X(this,p,Se).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,p,Se).call(this,"GetDocJSActions")}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const l="GetMetadata",k=t(this,O).get(l);if(k)return k;const g=this.messageHandler.sendWithPromise(l,null).then(W=>{var z,w;return{info:W[0],metadata:W[1]?new _metadata.Metadata(W[1]):null,contentDispositionFilename:((z=this._fullReader)==null?void 0:z.filename)??null,contentLength:((w=this._fullReader)==null?void 0:w.contentLength)??null}});return t(this,O).set(l,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const k of t(this,T).values())if(!k.cleanup())throw new Error(`startCleanup: Page ${k.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:l,enableXfa:k}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l,enableXfa:k})}}O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakSet,Se=function(l,k=null){const g=t(this,O).get(l);if(g)return g;const W=this.messageHandler.sendWithPromise(l,k);return t(this,O).set(l,W),W};class PDFObjects{constructor(){$(this,E);$(this,b,Object.create(null))}get(l,k=null){if(k){const W=X(this,E,Ne).call(this,l);return W.capability.promise.then(()=>k(W.data)),null}const g=t(this,b)[l];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return g.data}has(l){const k=t(this,b)[l];return(k==null?void 0:k.capability.settled)||!1}resolve(l,k=null){const g=X(this,E,Ne).call(this,l);g.data=k,g.capability.resolve()}clear(){var l;for(const k in t(this,b)){const{data:g}=t(this,b)[k];(l=g==null?void 0:g.bitmap)==null||l.close()}it(this,b,Object.create(null))}}b=new WeakMap,E=new WeakSet,Ne=function(l){var k;return(k=t(this,b))[l]||(k[l]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(l){$(this,o,null);it(this,o,l),this.onContinue=null}get promise(){return t(this,o).capability.promise}cancel(l=0){t(this,o).cancel(null,l)}get separateAnnots(){const{separateAnnots:l}=t(this,o).operatorList;if(!l)return!1;const{annotationCanvasMap:k}=t(this,o);return l.form||l.canvas&&(k==null?void 0:k.size)>0}}o=new WeakMap,exports.RenderTask=RenderTask;const D=class D{constructor({callback:l,params:k,objs:g,commonObjs:W,annotationCanvasMap:z,operatorList:w,pageIndex:q,canvasFactory:nt,filterFactory:at,useRequestAnimationFrame:G=!1,pdfBug:ht=!1,pageColors:gt=null}){this.callback=l,this.params=k,this.objs=g,this.commonObjs=W,this.annotationCanvasMap=z,this.operatorListIdx=null,this.operatorList=w,this._pageIndex=q,this.canvasFactory=nt,this.filterFactory=at,this._pdfBug=ht,this.pageColors=gt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=G===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:k}){var q,nt;if(this.cancelled)return;if(this._canvas){if(t(D,h).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(D,h).add(this._canvas)}this._pdfBug&&((q=globalThis.StepperManager)!=null&&q.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:W,transform:z,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:k},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:z,viewport:W,transparency:l,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,(nt=this.graphicsReadyCallback)==null||nt.call(this)}cancel(l=null,k=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),t(D,h).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,k))}operatorListChanged(){var l;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(l=this.stepper)==null||l.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(D,h).delete(this._canvas),this.callback())))}};h=new WeakMap,$(D,h,new WeakSet);let InternalRenderTask=D;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(S,e,M)=>{var C,f,L,_n,T;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=M(1),u=M(4),H=M(8);const B=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=B;class lt{constructor(){$(this,L);$(this,C,!1);$(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(A,p){const m=t(this,f).get(A);return m===void 0?p:Object.assign(p,m)}getRawValue(A){return t(this,f).get(A)}remove(A){if(t(this,f).delete(A),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of t(this,f).values())if(p instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(A,p){const m=t(this,f).get(A);let b=!1;if(m!==void 0)for(const[E,_]of Object.entries(p))m[E]!==_&&(b=!0,m[E]=_);else b=!0,t(this,f).set(A,p);b&&X(this,L,_n).call(this),p instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(A){return t(this,f).has(A)}getAll(){return t(this,f).size>0?(0,r.objectFromMap)(t(this,f)):null}setAll(A){for(const[p,m]of Object.entries(A))this.setValue(p,m)}get size(){return t(this,f).size}resetModified(){t(this,C)&&(it(this,C,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new F(this)}get serializable(){if(t(this,f).size===0)return B;const A=new Map,p=new H.MurmurHash3_64,m=[],b=Object.create(null);let E=!1;for(const[_,o]of t(this,f)){const h=o instanceof u.AnnotationEditor?o.serialize(!1,b):o;h&&(A.set(_,h),p.update(`${_}:${JSON.stringify(h)}`),E||(E=!!h.bitmap))}if(E)for(const _ of A.values())_.bitmap&&m.push(_.bitmap);return A.size>0?{map:A,hash:p.hexdigest(),transfers:m}:B}}C=new WeakMap,f=new WeakMap,L=new WeakSet,_n=function(){t(this,C)||(it(this,C,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=lt;class F extends lt{constructor(p){super();$(this,T,void 0);const{map:m,hash:b,transfers:E}=p.serializable,_=structuredClone(m,E?{transfer:E}:null);it(this,T,{map:_,hash:b,transfers:E})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,T)}}T=new WeakMap,e.PrintAnnotationStorage=F},(S,e,M)=>{var F,C,f,L,O,T,x,A,p,m,b,E,_,o,h,Be,y,Ue,k,$e,W,We,w,An,nt,vn,G,En,gt,He,St,Sn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=M(5),u=M(1),H=M(6);const n=class n{constructor(i){$(this,h);$(this,y);$(this,W);$(this,w);$(this,nt);$(this,G);$(this,gt);$(this,St);$(this,F,"");$(this,C,!1);$(this,f,null);$(this,L,null);$(this,O,null);$(this,T,!1);$(this,x,null);$(this,A,this.focusin.bind(this));$(this,p,this.focusout.bind(this));$(this,m,!1);$(this,b,!1);$(this,E,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);$(this,_,!1);$(this,o,n._zIndex++);this.constructor===n&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=i.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:d,pageHeight:R,pageX:I,pageY:U}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,R],this.pageTranslation=[I,U];const[st,Z]=this.parentDimensions;this.x=i.x/st,this.y=i.y/Z,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(i){const c=new lt({id:i.parent.getNextId(),parent:i.parent,uiManager:i._uiManager});c.annotationElementId=i.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(i,c=null){if(n._l10nPromise||(n._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(R=>[R,i.get(R)]))),c!=null&&c.strings)for(const R of c.strings)n._l10nPromise.set(R,i.get(R));if(n._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(i,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(i){return!1}static paste(i,c){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,_)}set _isDraggable(i){var c;it(this,_,i),(c=this.div)==null||c.classList.toggle("draggable",i)}center(){const[i,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(i*2),this.y+=this.width*i/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(i*2),this.y-=this.width*i/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,o)}setParent(i){i!==null&&(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions),this.parent=i}focusin(i){this._focusEventsAllowed&&(t(this,m)?it(this,m,!1):this.parent.setSelected(this))}focusout(i){var d;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=i.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(i.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(i,c,d,R){const[I,U]=this.parentDimensions;[d,R]=this.screenToPageTranslation(d,R),this.x=(i+d)/I,this.y=(c+R)/U,this.fixAndSetPosition()}translate(i,c){X(this,h,Be).call(this,this.parentDimensions,i,c)}translateInPage(i,c){X(this,h,Be).call(this,this.pageDimensions,i,c),this.div.scrollIntoView({block:"nearest"})}drag(i,c){const[d,R]=this.parentDimensions;if(this.x+=i/d,this.y+=c/R,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:rt,y:dt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,rt,dt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:I,y:U}=this;const[st,Z]=X(this,y,Ue).call(this);I+=st,U+=Z,this.div.style.left=`${(100*I).toFixed(2)}%`,this.div.style.top=`${(100*U).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[i,c]=this.pageDimensions;let{x:d,y:R,width:I,height:U}=this;switch(I*=i,U*=c,d*=i,R*=c,this.rotation){case 0:d=Math.max(0,Math.min(i-I,d)),R=Math.max(0,Math.min(c-U,R));break;case 90:d=Math.max(0,Math.min(i-U,d)),R=Math.min(c,Math.max(I,R));break;case 180:d=Math.min(i,Math.max(I,d)),R=Math.min(c,Math.max(U,R));break;case 270:d=Math.min(i,Math.max(U,d)),R=Math.max(0,Math.min(c-I,R));break}this.x=d/=i,this.y=R/=c;const[st,Z]=X(this,y,Ue).call(this);d+=st,R+=Z;const{style:rt}=this.div;rt.left=`${(100*d).toFixed(2)}%`,rt.top=`${(100*R).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(i,c){var d;return X(d=n,k,$e).call(d,i,c,this.parentRotation)}pageTranslationToScreen(i,c){var d;return X(d=n,k,$e).call(d,i,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:i,pageDimensions:[c,d]}=this,R=c*i,I=d*i;return u.FeatureTest.isCSSRoundSupported?[Math.round(R),Math.round(I)]:[R,I]}setDims(i,c){var I;const[d,R]=this.parentDimensions;this.div.style.width=`${(100*i/d).toFixed(2)}%`,t(this,T)||(this.div.style.height=`${(100*c/R).toFixed(2)}%`),(I=t(this,f))==null||I.classList.toggle("small",i<n.SMALL_EDITOR_SIZE||c<n.SMALL_EDITOR_SIZE)}fixDims(){const{style:i}=this.div,{height:c,width:d}=i,R=d.endsWith("%"),I=!t(this,T)&&c.endsWith("%");if(R&&I)return;const[U,st]=this.parentDimensions;R||(i.width=`${(100*parseFloat(d)/U).toFixed(2)}%`),!t(this,T)&&!I&&(i.height=`${(100*parseFloat(c)/st).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const i=it(this,f,document.createElement("button"));i.className="altText";const c=await n._l10nPromise.get("editor_alt_text_button_label");i.textContent=c,i.setAttribute("aria-label",c),i.tabIndex="0",i.addEventListener("contextmenu",H.noContextMenu),i.addEventListener("pointerdown",d=>d.stopPropagation()),i.addEventListener("click",d=>{d.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),i.addEventListener("keydown",d=>{d.target===i&&d.key==="Enter"&&(d.preventDefault(),this._uiManager.editAltText(this))}),X(this,gt,He).call(this),this.div.append(i),n.SMALL_EDITOR_SIZE||(n.SMALL_EDITOR_SIZE=Math.min(128,Math.round(i.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,F),decorative:t(this,C)}}set altTextData({altText:i,decorative:c}){t(this,F)===i&&t(this,C)===c||(it(this,F,i),it(this,C,c),X(this,gt,He).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,A)),this.div.addEventListener("focusout",t(this,p));const[i,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/i).toFixed(2)}%`,this.div.style.maxHeight=`${(100*i/c).toFixed(2)}%`);const[d,R]=this.getInitialTranslation();return this.translate(d,R),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(i){const{isMac:c}=u.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&c){i.preventDefault();return}it(this,m,!0),X(this,St,Sn).call(this,i)}moveInDOM(){var i;(i=this.parent)==null||i.moveEditorInDOM(this)}_setParentAndPosition(i,c,d){i.changeParent(this),this.x=c,this.y=d,this.fixAndSetPosition()}getRect(i,c){const d=this.parentScale,[R,I]=this.pageDimensions,[U,st]=this.pageTranslation,Z=i/d,rt=c/d,dt=this.x*R,ft=this.y*I,ct=this.width*R,Ct=this.height*I;switch(this.rotation){case 0:return[dt+Z+U,I-ft-rt-Ct+st,dt+Z+ct+U,I-ft-rt+st];case 90:return[dt+rt+U,I-ft+Z+st,dt+rt+Ct+U,I-ft+Z+ct+st];case 180:return[dt-Z-ct+U,I-ft+rt+st,dt-Z+U,I-ft+rt+Ct+st];case 270:return[dt-rt-Ct+U,I-ft-Z-ct+st,dt-rt+U,I-ft-Z+st];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,c){const[d,R,I,U]=i,st=I-d,Z=U-R;switch(this.rotation){case 0:return[d,c-U,st,Z];case 90:return[d,c-R,Z,st];case 180:return[I,c-R,st,Z];case 270:return[I,c-U,Z,st];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){it(this,E,!0)}disableEditMode(){it(this,E,!1)}isInEditMode(){return t(this,E)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var i,c;(i=this.div)==null||i.addEventListener("focusin",t(this,A)),(c=this.div)==null||c.addEventListener("focusout",t(this,p))}serialize(i=!1,c=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(i,c,d){const R=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:d});R.rotation=i.rotation;const[I,U]=R.pageDimensions,[st,Z,rt,dt]=R.getRectInCurrentCoords(i.rect,U);return R.x=st/I,R.y=Z/U,R.width=rt/I,R.height=dt/U,R}remove(){var i;this.div.removeEventListener("focusin",t(this,A)),this.div.removeEventListener("focusout",t(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(i=t(this,f))==null||i.remove(),it(this,f,null),it(this,L,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,w,An).call(this),t(this,x).classList.remove("hidden"))}select(){var i;this.makeResizable(),(i=this.div)==null||i.classList.add("selectedEditor")}unselect(){var i,c,d;(i=t(this,x))==null||i.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(d=this.div)!=null&&d.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(i,c){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,b)}set isEditing(i){it(this,b,i),this.parent&&(i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(i,c){it(this,T,!0);const d=i/c,{style:R}=this.div;R.aspectRatio=d,R.height="auto"}static get MIN_SIZE(){return 16}};F=new WeakMap,C=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,_=new WeakMap,o=new WeakMap,h=new WeakSet,Be=function([i,c],d,R){[d,R]=this.screenToPageTranslation(d,R),this.x+=d/i,this.y+=R/c,this.fixAndSetPosition()},y=new WeakSet,Ue=function(){const[i,c]=this.parentDimensions,{_borderLineWidth:d}=n,R=d/i,I=d/c;switch(this.rotation){case 90:return[-R,I];case 180:return[R,I];case 270:return[R,-I];default:return[-R,-I]}},k=new WeakSet,$e=function(i,c,d){switch(d){case 90:return[c,-i];case 180:return[-i,-c];case 270:return[-c,i];default:return[i,c]}},W=new WeakSet,We=function(i){switch(i){case 90:{const[c,d]=this.pageDimensions;return[0,-c/d,d/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,d]=this.pageDimensions;return[0,c/d,-d/c,0]}default:return[1,0,0,1]}},w=new WeakSet,An=function(){if(t(this,x))return;it(this,x,document.createElement("div")),t(this,x).classList.add("resizers");const i=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||i.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of i){const d=document.createElement("div");t(this,x).append(d),d.classList.add("resizer",c),d.addEventListener("pointerdown",X(this,nt,vn).bind(this,c)),d.addEventListener("contextmenu",H.noContextMenu)}this.div.prepend(t(this,x))},nt=new WeakSet,vn=function(i,c){c.preventDefault();const{isMac:d}=u.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&d)return;const R=X(this,G,En).bind(this,i),I=this._isDraggable;this._isDraggable=!1;const U={passive:!0,capture:!0};window.addEventListener("pointermove",R,U);const st=this.x,Z=this.y,rt=this.width,dt=this.height,ft=this.parent.div.style.cursor,ct=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const Ct=()=>{this._isDraggable=I,window.removeEventListener("pointerup",Ct),window.removeEventListener("blur",Ct),window.removeEventListener("pointermove",R,U),this.parent.div.style.cursor=ft,this.div.style.cursor=ct;const Lt=this.x,At=this.y,Dt=this.width,mt=this.height;Lt===st&&At===Z&&Dt===rt&&mt===dt||this.addCommands({cmd:()=>{this.width=Dt,this.height=mt,this.x=Lt,this.y=At;const[tt,et]=this.parentDimensions;this.setDims(tt*Dt,et*mt),this.fixAndSetPosition()},undo:()=>{this.width=rt,this.height=dt,this.x=st,this.y=Z;const[tt,et]=this.parentDimensions;this.setDims(tt*rt,et*dt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ct),window.addEventListener("blur",Ct)},G=new WeakSet,En=function(i,c){const[d,R]=this.parentDimensions,I=this.x,U=this.y,st=this.width,Z=this.height,rt=n.MIN_SIZE/d,dt=n.MIN_SIZE/R,ft=yt=>Math.round(yt*1e4)/1e4,ct=X(this,W,We).call(this,this.rotation),Ct=(yt,_t)=>[ct[0]*yt+ct[2]*_t,ct[1]*yt+ct[3]*_t],Lt=X(this,W,We).call(this,360-this.rotation),At=(yt,_t)=>[Lt[0]*yt+Lt[2]*_t,Lt[1]*yt+Lt[3]*_t];let Dt,mt,tt=!1,et=!1;switch(i){case"topLeft":tt=!0,Dt=(yt,_t)=>[0,0],mt=(yt,_t)=>[yt,_t];break;case"topMiddle":Dt=(yt,_t)=>[yt/2,0],mt=(yt,_t)=>[yt/2,_t];break;case"topRight":tt=!0,Dt=(yt,_t)=>[yt,0],mt=(yt,_t)=>[0,_t];break;case"middleRight":et=!0,Dt=(yt,_t)=>[yt,_t/2],mt=(yt,_t)=>[0,_t/2];break;case"bottomRight":tt=!0,Dt=(yt,_t)=>[yt,_t],mt=(yt,_t)=>[0,0];break;case"bottomMiddle":Dt=(yt,_t)=>[yt/2,_t],mt=(yt,_t)=>[yt/2,0];break;case"bottomLeft":tt=!0,Dt=(yt,_t)=>[0,_t],mt=(yt,_t)=>[yt,0];break;case"middleLeft":et=!0,Dt=(yt,_t)=>[0,_t/2],mt=(yt,_t)=>[yt,_t/2];break}const pt=Dt(st,Z),Tt=mt(st,Z);let wt=Ct(...Tt);const Bt=ft(I+wt[0]),Gt=ft(U+wt[1]);let Ut=1,zt=1,[Ht,$t]=this.screenToPageTranslation(c.movementX,c.movementY);if([Ht,$t]=At(Ht/d,$t/R),tt){const yt=Math.hypot(st,Z);Ut=zt=Math.max(Math.min(Math.hypot(Tt[0]-pt[0]-Ht,Tt[1]-pt[1]-$t)/yt,1/st,1/Z),rt/st,dt/Z)}else et?Ut=Math.max(rt,Math.min(1,Math.abs(Tt[0]-pt[0]-Ht)))/st:zt=Math.max(dt,Math.min(1,Math.abs(Tt[1]-pt[1]-$t)))/Z;const Vt=ft(st*Ut),ut=ft(Z*zt);wt=Ct(...mt(Vt,ut));const Q=Bt-wt[0],Y=Gt-wt[1];this.width=Vt,this.height=ut,this.x=Q,this.y=Y,this.setDims(d*Vt,R*ut),this.fixAndSetPosition()},gt=new WeakSet,He=async function(){var d;const i=t(this,f);if(!i)return;if(!t(this,F)&&!t(this,C)){i.classList.remove("done"),(d=t(this,L))==null||d.remove();return}n._l10nPromise.get("editor_alt_text_edit_button_label").then(R=>{i.setAttribute("aria-label",R)});let c=t(this,L);if(!c){it(this,L,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip");const R=c.id=`alt-text-tooltip-${this.id}`;i.setAttribute("aria-describedby",R);const I=100;i.addEventListener("mouseenter",()=>{it(this,O,setTimeout(()=>{it(this,O,null),t(this,L).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},I))}),i.addEventListener("mouseleave",()=>{var U;clearTimeout(t(this,O)),it(this,O,null),(U=t(this,L))==null||U.classList.remove("show")})}i.classList.add("done"),c.innerText=t(this,C)?await n._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,F),c.parentNode||i.append(c)},St=new WeakSet,Sn=function(i){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let d,R;c&&(d={passive:!0,capture:!0},R=U=>{const[st,Z]=this.screenToPageTranslation(U.movementX,U.movementY);this._uiManager.dragSelectedEditors(st,Z)},window.addEventListener("pointermove",R,d));const I=()=>{if(window.removeEventListener("pointerup",I),window.removeEventListener("blur",I),c&&window.removeEventListener("pointermove",R,d),it(this,m,!1),!this._uiManager.endDragSession()){const{isMac:U}=u.FeatureTest.platform;i.ctrlKey&&!U||i.shiftKey||i.metaKey&&U?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",I),window.addEventListener("blur",I)},$(n,k),ee(n,"_borderLineWidth",-1),ee(n,"_colorManager",new r.ColorManager),ee(n,"_zIndex",1),ee(n,"SMALL_EDITOR_SIZE",0);let B=n;e.AnnotationEditor=B;class lt extends B{constructor(i){super(i),this.annotationElementId=i.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(S,e,M)=>{var T,x,A,p,m,Ge,_,o,h,D,y,Tn,g,W,z,w,q,nt,at,G,ht,gt,vt,St,P,n,a,i,c,d,R,I,U,st,Z,rt,dt,ft,ct,Ct,Lt,At,Dt,mt,tt,et,pt,wn,wt,ze,Gt,Ve,zt,Te,$t,qe,ut,Xe,Y,re,_t,me,Zt,Cn,Et,Rn,Rt,Ye,Nt,be,xt,Ke;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=H,e.opacityToHex=B;var r=M(1),u=M(6);function H(j,s,v){for(const N of v)s.addEventListener(N,j[N].bind(j))}function B(j){return Math.round(Math.min(255,Math.max(1,255*j))).toString(16).padStart(2,"0")}class lt{constructor(){$(this,T,0)}getId(){return`${r.AnnotationEditorPrefix}${ge(this,T)._++}`}}T=new WeakMap;const E=class E{constructor(){$(this,m);$(this,x,(0,r.getUuid)());$(this,A,0);$(this,p,null)}static get _isSVGFittingCanvas(){const s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',N=new OffscreenCanvas(1,3).getContext("2d"),V=new Image;V.src=s;const K=V.decode().then(()=>(N.drawImage(V,0,0,1,1,0,0,1,3),new Uint32Array(N.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",K)}async getFromFile(s){const{lastModified:v,name:N,size:V,type:K}=s;return X(this,m,Ge).call(this,`${v}_${N}_${V}_${K}`,s)}async getFromUrl(s){return X(this,m,Ge).call(this,s,s)}async getFromId(s){t(this,p)||it(this,p,new Map);const v=t(this,p).get(s);return v?v.bitmap?(v.refCounter+=1,v):v.file?this.getFromFile(v.file):this.getFromUrl(v.url):null}getSvgUrl(s){const v=t(this,p).get(s);return v!=null&&v.isSvg?v.svgUrl:null}deleteId(s){t(this,p)||it(this,p,new Map);const v=t(this,p).get(s);v&&(v.refCounter-=1,v.refCounter===0&&(v.bitmap=null))}isValidId(s){return s.startsWith(`image_${t(this,x)}_`)}};x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakSet,Ge=async function(s,v){t(this,p)||it(this,p,new Map);let N=t(this,p).get(s);if(N===null)return null;if(N!=null&&N.bitmap)return N.refCounter+=1,N;try{N||(N={bitmap:null,id:`image_${t(this,x)}_${ge(this,A)._++}`,refCounter:0,isSvg:!1});let V;if(typeof v=="string"){N.url=v;const K=await fetch(v);if(!K.ok)throw new Error(K.statusText);V=await K.blob()}else V=N.file=v;if(V.type==="image/svg+xml"){const K=E._isSVGFittingCanvas,ot=new FileReader,bt=new Image,kt=new Promise((Pt,qt)=>{bt.onload=()=>{N.bitmap=bt,N.isSvg=!0,Pt()},ot.onload=async()=>{const Ft=N.svgUrl=ot.result;bt.src=await K?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},bt.onerror=ot.onerror=qt});ot.readAsDataURL(V),await kt}else N.bitmap=await createImageBitmap(V);N.refCounter=1}catch(V){console.error(V),N=null}return t(this,p).set(s,N),N&&t(this,p).set(N.id,N),N};let F=E;class C{constructor(s=128){$(this,_,[]);$(this,o,!1);$(this,h,void 0);$(this,D,-1);it(this,h,s)}add({cmd:s,undo:v,mustExec:N,type:V=NaN,overwriteIfSameType:K=!1,keepUndo:ot=!1}){if(N&&s(),t(this,o))return;const bt={cmd:s,undo:v,type:V};if(t(this,D)===-1){t(this,_).length>0&&(t(this,_).length=0),it(this,D,0),t(this,_).push(bt);return}if(K&&t(this,_)[t(this,D)].type===V){ot&&(bt.undo=t(this,_)[t(this,D)].undo),t(this,_)[t(this,D)]=bt;return}const kt=t(this,D)+1;kt===t(this,h)?t(this,_).splice(0,1):(it(this,D,kt),kt<t(this,_).length&&t(this,_).splice(kt)),t(this,_).push(bt)}undo(){t(this,D)!==-1&&(it(this,o,!0),t(this,_)[t(this,D)].undo(),it(this,o,!1),it(this,D,t(this,D)-1))}redo(){t(this,D)<t(this,_).length-1&&(it(this,D,t(this,D)+1),it(this,o,!0),t(this,_)[t(this,D)].cmd(),it(this,o,!1))}hasSomethingToUndo(){return t(this,D)!==-1}hasSomethingToRedo(){return t(this,D)<t(this,_).length-1}destroy(){it(this,_,null)}}_=new WeakMap,o=new WeakMap,h=new WeakMap,D=new WeakMap,e.CommandManager=C;class f{constructor(s){$(this,y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:v}=r.FeatureTest.platform;for(const[N,V,K={}]of s)for(const ot of N){const bt=ot.startsWith("mac+");v&&bt?(this.callbacks.set(ot.slice(4),{callback:V,options:K}),this.allKeys.add(ot.split("+").at(-1))):!v&&!bt&&(this.callbacks.set(ot,{callback:V,options:K}),this.allKeys.add(ot.split("+").at(-1)))}}exec(s,v){if(!this.allKeys.has(v.key))return;const N=this.callbacks.get(X(this,y,Tn).call(this,v));if(!N)return;const{callback:V,options:{bubbles:K=!1,args:ot=[],checker:bt=null}}=N;bt&&!bt(s,v)||(V.bind(s,...ot)(),K||(v.stopPropagation(),v.preventDefault()))}}y=new WeakSet,Tn=function(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const v=this.buffer.join("+");return this.buffer.length=0,v},e.KeyboardManager=f;const k=class k{get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(s),(0,r.shadow)(this,"_colors",s)}convert(s){const v=(0,u.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return v;for(const[N,V]of this._colors)if(V.every((K,ot)=>K===v[ot]))return k._colorsMapping.get(N);return v}getHexCode(s){const v=this._colors.get(s);return v?r.Util.makeHexColor(...v):s}};ee(k,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let L=k;e.ColorManager=L;const Ot=class Ot{constructor(s,v,N,V,K,ot){$(this,pt);$(this,wt);$(this,Gt);$(this,zt);$(this,$t);$(this,ut);$(this,Y);$(this,_t);$(this,Zt);$(this,Et);$(this,Rt);$(this,Nt);$(this,xt);$(this,g,null);$(this,W,new Map);$(this,z,new Map);$(this,w,null);$(this,q,null);$(this,nt,new C);$(this,at,0);$(this,G,new Set);$(this,ht,null);$(this,gt,null);$(this,vt,new Set);$(this,St,null);$(this,P,new lt);$(this,n,!1);$(this,a,!1);$(this,i,null);$(this,c,r.AnnotationEditorType.NONE);$(this,d,new Set);$(this,R,null);$(this,I,this.blur.bind(this));$(this,U,this.focus.bind(this));$(this,st,this.copy.bind(this));$(this,Z,this.cut.bind(this));$(this,rt,this.paste.bind(this));$(this,dt,this.keydown.bind(this));$(this,ft,this.onEditingAction.bind(this));$(this,ct,this.onPageChanging.bind(this));$(this,Ct,this.onScaleChanging.bind(this));$(this,Lt,this.onRotationChanging.bind(this));$(this,At,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});$(this,Dt,[0,0]);$(this,mt,null);$(this,tt,null);$(this,et,null);it(this,tt,s),it(this,et,v),it(this,w,N),this._eventBus=V,this._eventBus._on("editingaction",t(this,ft)),this._eventBus._on("pagechanging",t(this,ct)),this._eventBus._on("scalechanging",t(this,Ct)),this._eventBus._on("rotationchanging",t(this,Lt)),it(this,q,K.annotationStorage),it(this,St,K.filterFactory),it(this,R,ot),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const s=Ot.prototype,v=K=>{const{activeElement:ot}=document;return ot&&t(K,tt).contains(ot)&&K.hasSomethingToControl()},N=this.TRANSLATE_SMALL,V=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],s.selectAll],[["ctrl+z","mac+meta+z"],s.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],s.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],s.delete],[["Escape","mac+Escape"],s.unselectAll],[["ArrowLeft","mac+ArrowLeft"],s.translateSelectedEditors,{args:[-N,0],checker:v}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s.translateSelectedEditors,{args:[-V,0],checker:v}],[["ArrowRight","mac+ArrowRight"],s.translateSelectedEditors,{args:[N,0],checker:v}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s.translateSelectedEditors,{args:[V,0],checker:v}],[["ArrowUp","mac+ArrowUp"],s.translateSelectedEditors,{args:[0,-N],checker:v}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s.translateSelectedEditors,{args:[0,-V],checker:v}],[["ArrowDown","mac+ArrowDown"],s.translateSelectedEditors,{args:[0,N],checker:v}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s.translateSelectedEditors,{args:[0,V],checker:v}]]))}destroy(){X(this,zt,Te).call(this),X(this,wt,ze).call(this),this._eventBus._off("editingaction",t(this,ft)),this._eventBus._off("pagechanging",t(this,ct)),this._eventBus._off("scalechanging",t(this,Ct)),this._eventBus._off("rotationchanging",t(this,Lt));for(const s of t(this,z).values())s.destroy();t(this,z).clear(),t(this,W).clear(),t(this,vt).clear(),it(this,g,null),t(this,d).clear(),t(this,nt).destroy(),t(this,w).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",t(this,R)?t(this,St).addHCMFilter(t(this,R).foreground,t(this,R).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(t(this,tt)).direction)}editAltText(s){var v;(v=t(this,w))==null||v.editAltText(this,s)}onPageChanging({pageNumber:s}){it(this,at,s-1)}focusMainContainer(){t(this,tt).focus()}findParent(s,v){for(const N of t(this,z).values()){const{x:V,y:K,width:ot,height:bt}=N.div.getBoundingClientRect();if(s>=V&&s<=V+ot&&v>=K&&v<=K+bt)return N}return null}disableUserSelect(s=!1){t(this,et).classList.toggle("noUserSelect",s)}addShouldRescale(s){t(this,vt).add(s)}removeShouldRescale(s){t(this,vt).delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const v of t(this,vt))v.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&t(this,q)&&!t(this,q).has(s.id)&&t(this,q).setValue(s.id,s)}blur(){if(!this.hasSelection)return;const{activeElement:s}=document;for(const v of t(this,d))if(v.div.contains(s)){it(this,i,[v,s]),v._focusEventsAllowed=!1;break}}focus(){if(!t(this,i))return;const[s,v]=t(this,i);it(this,i,null),v.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),v.focus()}addEditListeners(){X(this,Gt,Ve).call(this),X(this,$t,qe).call(this)}removeEditListeners(){X(this,zt,Te).call(this),X(this,ut,Xe).call(this)}copy(s){var N;if(s.preventDefault(),(N=t(this,g))==null||N.commitOrRemove(),!this.hasSelection)return;const v=[];for(const V of t(this,d)){const K=V.serialize(!0);K&&v.push(K)}v.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(v))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();const{clipboardData:v}=s;for(const K of v.items)for(const ot of t(this,gt))if(ot.isHandlingMimeForPasting(K.type)){ot.paste(K,this.currentLayer);return}let N=v.getData("application/pdfjs");if(!N)return;try{N=JSON.parse(N)}catch(K){(0,r.warn)(`paste: "${K.message}".`);return}if(!Array.isArray(N))return;this.unselectAll();const V=this.currentLayer;try{const K=[];for(const kt of N){const Pt=V.deserialize(kt);if(!Pt)return;K.push(Pt)}const ot=()=>{for(const kt of K)X(this,Rt,Ye).call(this,kt);X(this,xt,Ke).call(this,K)},bt=()=>{for(const kt of K)kt.remove()};this.addCommands({cmd:ot,undo:bt,mustExec:!0})}catch(K){(0,r.warn)(`paste: "${K.message}".`)}}keydown(s){var v;(v=this.getActive())!=null&&v.shouldGetKeyboardEvents()||Ot._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}setEditingState(s){s?(X(this,pt,wn).call(this),X(this,Gt,Ve).call(this),X(this,$t,qe).call(this),X(this,Y,re).call(this,{isEditing:t(this,c)!==r.AnnotationEditorType.NONE,isEmpty:X(this,Nt,be).call(this),hasSomethingToUndo:t(this,nt).hasSomethingToUndo(),hasSomethingToRedo:t(this,nt).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,wt,ze).call(this),X(this,zt,Te).call(this),X(this,ut,Xe).call(this),X(this,Y,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(s){if(!t(this,gt)){it(this,gt,s);for(const v of t(this,gt))X(this,_t,me).call(this,v.defaultPropertiesToUpdate)}}getId(){return t(this,P).getId()}get currentLayer(){return t(this,z).get(t(this,at))}getLayer(s){return t(this,z).get(s)}get currentPageIndex(){return t(this,at)}addLayer(s){t(this,z).set(s.pageIndex,s),t(this,n)?s.enable():s.disable()}removeLayer(s){t(this,z).delete(s.pageIndex)}updateMode(s,v=null){if(t(this,c)!==s){if(it(this,c,s),s===r.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,Et,Rn).call(this);return}this.setEditingState(!0),X(this,Zt,Cn).call(this),this.unselectAll();for(const N of t(this,z).values())N.updateMode(s);if(v){for(const N of t(this,W).values())if(N.annotationElementId===v){this.setSelected(N),N.enterInEditMode();break}}}}updateToolbar(s){s!==t(this,c)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,v){if(t(this,gt)){if(s===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(s);return}for(const N of t(this,d))N.updateParams(s,v);for(const N of t(this,gt))N.updateDefaultParams(s,v)}}enableWaiting(s=!1){if(t(this,a)!==s){it(this,a,s);for(const v of t(this,z).values())s?v.disableClick():v.enableClick(),v.div.classList.toggle("waiting",s)}}getEditors(s){const v=[];for(const N of t(this,W).values())N.pageIndex===s&&v.push(N);return v}getEditor(s){return t(this,W).get(s)}addEditor(s){t(this,W).set(s.id,s)}removeEditor(s){var v;t(this,W).delete(s.id),this.unselect(s),(!s.annotationElementId||!t(this,G).has(s.annotationElementId))&&((v=t(this,q))==null||v.remove(s.id))}addDeletedAnnotationElement(s){t(this,G).add(s.annotationElementId),s.deleted=!0}isDeletedAnnotationElement(s){return t(this,G).has(s)}removeDeletedAnnotationElement(s){t(this,G).delete(s.annotationElementId),s.deleted=!1}setActiveEditor(s){t(this,g)!==s&&(it(this,g,s),s&&X(this,_t,me).call(this,s.propertiesToUpdate))}toggleSelected(s){if(t(this,d).has(s)){t(this,d).delete(s),s.unselect(),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,d).add(s),s.select(),X(this,_t,me).call(this,s.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}setSelected(s){for(const v of t(this,d))v!==s&&v.unselect();t(this,d).clear(),t(this,d).add(s),s.select(),X(this,_t,me).call(this,s.propertiesToUpdate),X(this,Y,re).call(this,{hasSelectedEditor:!0})}isSelected(s){return t(this,d).has(s)}unselect(s){s.unselect(),t(this,d).delete(s),X(this,Y,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,d).size!==0}undo(){t(this,nt).undo(),X(this,Y,re).call(this,{hasSomethingToUndo:t(this,nt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,Nt,be).call(this)})}redo(){t(this,nt).redo(),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,nt).hasSomethingToRedo(),isEmpty:X(this,Nt,be).call(this)})}addCommands(s){t(this,nt).add(s),X(this,Y,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,Nt,be).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...t(this,d)],v=()=>{for(const V of s)V.remove()},N=()=>{for(const V of s)X(this,Rt,Ye).call(this,V)};this.addCommands({cmd:v,undo:N,mustExec:!0})}commitOrRemove(){var s;(s=t(this,g))==null||s.commitOrRemove()}hasSomethingToControl(){return t(this,g)||this.hasSelection}selectAll(){for(const s of t(this,d))s.commit();X(this,xt,Ke).call(this,t(this,W).values())}unselectAll(){if(t(this,g)){t(this,g).commitOrRemove();return}if(this.hasSelection){for(const s of t(this,d))s.unselect();t(this,d).clear(),X(this,Y,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(s,v,N=!1){if(N||this.commitOrRemove(),!this.hasSelection)return;t(this,Dt)[0]+=s,t(this,Dt)[1]+=v;const[V,K]=t(this,Dt),ot=[...t(this,d)],bt=1e3;t(this,mt)&&clearTimeout(t(this,mt)),it(this,mt,setTimeout(()=>{it(this,mt,null),t(this,Dt)[0]=t(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const kt of ot)t(this,W).has(kt.id)&&kt.translateInPage(V,K)},undo:()=>{for(const kt of ot)t(this,W).has(kt.id)&&kt.translateInPage(-V,-K)},mustExec:!1})},bt));for(const kt of ot)kt.translateInPage(s,v)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),it(this,ht,new Map);for(const s of t(this,d))t(this,ht).set(s,{savedX:s.x,savedY:s.y,savedPageIndex:s.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ht))return!1;this.disableUserSelect(!1);const s=t(this,ht);it(this,ht,null);let v=!1;for(const[{x:V,y:K,pageIndex:ot},bt]of s)bt.newX=V,bt.newY=K,bt.newPageIndex=ot,v||(v=V!==bt.savedX||K!==bt.savedY||ot!==bt.savedPageIndex);if(!v)return!1;const N=(V,K,ot,bt)=>{if(t(this,W).has(V.id)){const kt=t(this,z).get(bt);kt?V._setParentAndPosition(kt,K,ot):(V.pageIndex=bt,V.x=K,V.y=ot)}};return this.addCommands({cmd:()=>{for(const[V,{newX:K,newY:ot,newPageIndex:bt}]of s)N(V,K,ot,bt)},undo:()=>{for(const[V,{savedX:K,savedY:ot,savedPageIndex:bt}]of s)N(V,K,ot,bt)},mustExec:!0}),!0}dragSelectedEditors(s,v){if(t(this,ht))for(const N of t(this,ht).keys())N.drag(s,v)}rebuild(s){if(s.parent===null){const v=this.getLayer(s.pageIndex);v?(v.changeParent(s),v.addOrRebuild(s)):(this.addEditor(s),this.addToAnnotationStorage(s),s.rebuild())}else s.parent.addOrRebuild(s)}isActive(s){return t(this,g)===s}getActive(){return t(this,g)}getMode(){return t(this,c)}get imageManager(){return(0,r.shadow)(this,"imageManager",new F)}};g=new WeakMap,W=new WeakMap,z=new WeakMap,w=new WeakMap,q=new WeakMap,nt=new WeakMap,at=new WeakMap,G=new WeakMap,ht=new WeakMap,gt=new WeakMap,vt=new WeakMap,St=new WeakMap,P=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,c=new WeakMap,d=new WeakMap,R=new WeakMap,I=new WeakMap,U=new WeakMap,st=new WeakMap,Z=new WeakMap,rt=new WeakMap,dt=new WeakMap,ft=new WeakMap,ct=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,At=new WeakMap,Dt=new WeakMap,mt=new WeakMap,tt=new WeakMap,et=new WeakMap,pt=new WeakSet,wn=function(){window.addEventListener("focus",t(this,U)),window.addEventListener("blur",t(this,I))},wt=new WeakSet,ze=function(){window.removeEventListener("focus",t(this,U)),window.removeEventListener("blur",t(this,I))},Gt=new WeakSet,Ve=function(){window.addEventListener("keydown",t(this,dt),{capture:!0})},zt=new WeakSet,Te=function(){window.removeEventListener("keydown",t(this,dt),{capture:!0})},$t=new WeakSet,qe=function(){document.addEventListener("copy",t(this,st)),document.addEventListener("cut",t(this,Z)),document.addEventListener("paste",t(this,rt))},ut=new WeakSet,Xe=function(){document.removeEventListener("copy",t(this,st)),document.removeEventListener("cut",t(this,Z)),document.removeEventListener("paste",t(this,rt))},Y=new WeakSet,re=function(s){Object.entries(s).some(([N,V])=>t(this,At)[N]!==V)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,At),s)})},_t=new WeakSet,me=function(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})},Zt=new WeakSet,Cn=function(){if(!t(this,n)){it(this,n,!0);for(const s of t(this,z).values())s.enable()}},Et=new WeakSet,Rn=function(){if(this.unselectAll(),t(this,n)){it(this,n,!1);for(const s of t(this,z).values())s.disable()}},Rt=new WeakSet,Ye=function(s){const v=t(this,z).get(s.pageIndex);v?v.addOrRebuild(s):this.addEditor(s)},Nt=new WeakSet,be=function(){if(t(this,W).size===0)return!0;if(t(this,W).size===1)for(const s of t(this,W).values())return s.isEmpty();return!1},xt=new WeakSet,Ke=function(s){t(this,d).clear();for(const v of s)v.isEmpty()||(t(this,d).add(v),v.select());X(this,Y,re).call(this,{hasSelectedEditor:!0})},ee(Ot,"TRANSLATE_SMALL",1),ee(Ot,"TRANSLATE_BIG",10);let O=Ot;e.AnnotationEditorUIManager=O},(S,e,M)=>{var at,G,ht,gt,vt,St,P,n,a,i,c,d,de,I,ue,st,Je,rt,we,ft,Ce,Ct,ye,At,xe;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=D,e.getColorValues=W,e.getCurrentTransform=z,e.getCurrentTransformInverse=w,e.getFilenameFromUrl=m,e.getPdfFilenameFromUrl=b,e.getRGB=g,e.getXfaPageViewport=k,e.isDataScheme=A,e.isPdfFile=p,e.isValidFetchUrl=_,e.loadScript=h,e.noContextMenu=o,e.setLayerDimensions=q;var r=M(7),u=M(1);const H="http://www.w3.org/2000/svg",nt=class nt{};ee(nt,"CSS",96),ee(nt,"PDF",72),ee(nt,"PDF_TO_CSS_UNITS",nt.CSS/nt.PDF);let B=nt;e.PixelsPerInch=B;class lt extends r.BaseFilterFactory{constructor({docId:et,ownerDocument:pt=globalThis.document}={}){super();$(this,d);$(this,I);$(this,st);$(this,rt);$(this,ft);$(this,Ct);$(this,At);$(this,at,void 0);$(this,G,void 0);$(this,ht,void 0);$(this,gt,void 0);$(this,vt,void 0);$(this,St,void 0);$(this,P,void 0);$(this,n,void 0);$(this,a,void 0);$(this,i,void 0);$(this,c,0);it(this,ht,et),it(this,gt,pt)}addFilter(et){if(!et)return"none";let pt=t(this,d,de).get(et);if(pt)return pt;let Tt,wt,Bt,Gt;if(et.length===1){const $t=et[0],Vt=new Array(256);for(let ut=0;ut<256;ut++)Vt[ut]=$t[ut]/255;Gt=Tt=wt=Bt=Vt.join(",")}else{const[$t,Vt,ut]=et,Q=new Array(256),Y=new Array(256),yt=new Array(256);for(let _t=0;_t<256;_t++)Q[_t]=$t[_t]/255,Y[_t]=Vt[_t]/255,yt[_t]=ut[_t]/255;Tt=Q.join(","),wt=Y.join(","),Bt=yt.join(","),Gt=`${Tt}${wt}${Bt}`}if(pt=t(this,d,de).get(Gt),pt)return t(this,d,de).set(et,pt),pt;const Ut=`g_${t(this,ht)}_transfer_map_${ge(this,c)._++}`,zt=`url(#${Ut})`;t(this,d,de).set(et,zt),t(this,d,de).set(Gt,zt);const Ht=X(this,rt,we).call(this,Ut);return X(this,Ct,ye).call(this,Tt,wt,Bt,Ht),zt}addHCMFilter(et,pt){var Vt;const Tt=`${et}-${pt}`;if(t(this,St)===Tt)return t(this,P);if(it(this,St,Tt),it(this,P,"none"),(Vt=t(this,vt))==null||Vt.remove(),!et||!pt)return t(this,P);const wt=X(this,At,xe).call(this,et);et=u.Util.makeHexColor(...wt);const Bt=X(this,At,xe).call(this,pt);if(pt=u.Util.makeHexColor(...Bt),t(this,I,ue).style.color="",et==="#000000"&&pt==="#ffffff"||et===pt)return t(this,P);const Gt=new Array(256);for(let ut=0;ut<=255;ut++){const Q=ut/255;Gt[ut]=Q<=.03928?Q/12.92:((Q+.055)/1.055)**2.4}const Ut=Gt.join(","),zt=`g_${t(this,ht)}_hcm_filter`,Ht=it(this,n,X(this,rt,we).call(this,zt));X(this,Ct,ye).call(this,Ut,Ut,Ut,Ht),X(this,st,Je).call(this,Ht);const $t=(ut,Q)=>{const Y=wt[ut]/255,yt=Bt[ut]/255,_t=new Array(Q+1);for(let te=0;te<=Q;te++)_t[te]=Y+te/Q*(yt-Y);return _t.join(",")};return X(this,Ct,ye).call(this,$t(0,5),$t(1,5),$t(2,5),Ht),it(this,P,`url(#${zt})`),t(this,P)}addHighlightHCMFilter(et,pt,Tt,wt){var yt;const Bt=`${et}-${pt}-${Tt}-${wt}`;if(t(this,a)===Bt)return t(this,i);if(it(this,a,Bt),it(this,i,"none"),(yt=t(this,n))==null||yt.remove(),!et||!pt)return t(this,i);const[Gt,Ut]=[et,pt].map(X(this,At,xe).bind(this));let zt=Math.round(.2126*Gt[0]+.7152*Gt[1]+.0722*Gt[2]),Ht=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),[$t,Vt]=[Tt,wt].map(X(this,At,xe).bind(this));Ht<zt&&([zt,Ht,$t,Vt]=[Ht,zt,Vt,$t]),t(this,I,ue).style.color="";const ut=(_t,te,Zt)=>{const J=new Array(256),Et=(Ht-zt)/Zt,It=_t/255,Rt=(te-_t)/(255*Zt);let jt=0;for(let Nt=0;Nt<=Zt;Nt++){const Jt=Math.round(zt+Nt*Et),xt=It+Nt*Rt;for(let Yt=jt;Yt<=Jt;Yt++)J[Yt]=xt;jt=Jt+1}for(let Nt=jt;Nt<256;Nt++)J[Nt]=J[jt-1];return J.join(",")},Q=`g_${t(this,ht)}_hcm_highlight_filter`,Y=it(this,n,X(this,rt,we).call(this,Q));return X(this,st,Je).call(this,Y),X(this,Ct,ye).call(this,ut($t[0],Vt[0],5),ut($t[1],Vt[1],5),ut($t[2],Vt[2],5),Y),it(this,i,`url(#${Q})`),t(this,i)}destroy(et=!1){et&&(t(this,P)||t(this,i))||(t(this,G)&&(t(this,G).parentNode.parentNode.remove(),it(this,G,null)),t(this,at)&&(t(this,at).clear(),it(this,at,null)),it(this,c,0))}}at=new WeakMap,G=new WeakMap,ht=new WeakMap,gt=new WeakMap,vt=new WeakMap,St=new WeakMap,P=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,c=new WeakMap,d=new WeakSet,de=function(){return t(this,at)||it(this,at,new Map)},I=new WeakSet,ue=function(){if(!t(this,G)){const et=t(this,gt).createElement("div"),{style:pt}=et;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const Tt=t(this,gt).createElementNS(H,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),it(this,G,t(this,gt).createElementNS(H,"defs")),et.append(Tt),Tt.append(t(this,G)),t(this,gt).body.append(et)}return t(this,G)},st=new WeakSet,Je=function(et){const pt=t(this,gt).createElementNS(H,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(pt)},rt=new WeakSet,we=function(et){const pt=t(this,gt).createElementNS(H,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",et),t(this,I,ue).append(pt),pt},ft=new WeakSet,Ce=function(et,pt,Tt){const wt=t(this,gt).createElementNS(H,pt);wt.setAttribute("type","discrete"),wt.setAttribute("tableValues",Tt),et.append(wt)},Ct=new WeakSet,ye=function(et,pt,Tt,wt){const Bt=t(this,gt).createElementNS(H,"feComponentTransfer");wt.append(Bt),X(this,ft,Ce).call(this,Bt,"feFuncR",et),X(this,ft,Ce).call(this,Bt,"feFuncG",pt),X(this,ft,Ce).call(this,Bt,"feFuncB",Tt)},At=new WeakSet,xe=function(et){return t(this,I,ue).style.color=et,g(getComputedStyle(t(this,I,ue)).getPropertyValue("color"))},e.DOMFilterFactory=lt;class F extends r.BaseCanvasFactory{constructor({ownerDocument:tt=globalThis.document}={}){super(),this._document=tt}_createCanvas(tt,et){const pt=this._document.createElement("canvas");return pt.width=tt,pt.height=et,pt}}e.DOMCanvasFactory=F;async function C(mt,tt=!1){if(_(mt,document.baseURI)){const et=await fetch(mt);if(!et.ok)throw new Error(et.statusText);return tt?new Uint8Array(await et.arrayBuffer()):(0,u.stringToBytes)(await et.text())}return new Promise((et,pt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",mt,!0),tt&&(Tt.responseType="arraybuffer"),Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){let wt;if(tt&&Tt.response?wt=new Uint8Array(Tt.response):!tt&&Tt.responseText&&(wt=(0,u.stringToBytes)(Tt.responseText)),wt){et(wt);return}}pt(new Error(Tt.statusText))}},Tt.send(null)})}class f extends r.BaseCMapReaderFactory{_fetchData(tt,et){return C(tt,this.isCompressed).then(pt=>({cMapData:pt,compressionType:et}))}}e.DOMCMapReaderFactory=f;class L extends r.BaseStandardFontDataFactory{_fetchData(tt){return C(tt,!0)}}e.DOMStandardFontDataFactory=L;class O extends r.BaseSVGFactory{_createSVG(tt){return document.createElementNS(H,tt)}}e.DOMSVGFactory=O;class T{constructor({viewBox:tt,scale:et,rotation:pt,offsetX:Tt=0,offsetY:wt=0,dontFlip:Bt=!1}){this.viewBox=tt,this.scale=et,this.rotation=pt,this.offsetX=Tt,this.offsetY=wt;const Gt=(tt[2]+tt[0])/2,Ut=(tt[3]+tt[1])/2;let zt,Ht,$t,Vt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:zt=-1,Ht=0,$t=0,Vt=1;break;case 90:zt=0,Ht=1,$t=1,Vt=0;break;case 270:zt=0,Ht=-1,$t=-1,Vt=0;break;case 0:zt=1,Ht=0,$t=0,Vt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&($t=-$t,Vt=-Vt);let ut,Q,Y,yt;zt===0?(ut=Math.abs(Ut-tt[1])*et+Tt,Q=Math.abs(Gt-tt[0])*et+wt,Y=(tt[3]-tt[1])*et,yt=(tt[2]-tt[0])*et):(ut=Math.abs(Gt-tt[0])*et+Tt,Q=Math.abs(Ut-tt[1])*et+wt,Y=(tt[2]-tt[0])*et,yt=(tt[3]-tt[1])*et),this.transform=[zt*et,Ht*et,$t*et,Vt*et,ut-zt*et*Gt-$t*et*Ut,Q-Ht*et*Gt-Vt*et*Ut],this.width=Y,this.height=yt}get rawDims(){const{viewBox:tt}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:tt[2]-tt[0],pageHeight:tt[3]-tt[1],pageX:tt[0],pageY:tt[1]})}clone({scale:tt=this.scale,rotation:et=this.rotation,offsetX:pt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:wt=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:tt,rotation:et,offsetX:pt,offsetY:Tt,dontFlip:wt})}convertToViewportPoint(tt,et){return u.Util.applyTransform([tt,et],this.transform)}convertToViewportRectangle(tt){const et=u.Util.applyTransform([tt[0],tt[1]],this.transform),pt=u.Util.applyTransform([tt[2],tt[3]],this.transform);return[et[0],et[1],pt[0],pt[1]]}convertToPdfPoint(tt,et){return u.Util.applyInverseTransform([tt,et],this.transform)}}e.PageViewport=T;class x extends u.BaseException{constructor(tt,et=0){super(tt,"RenderingCancelledException"),this.extraDelay=et}}e.RenderingCancelledException=x;function A(mt){const tt=mt.length;let et=0;for(;et<tt&&mt[et].trim()==="";)et++;return mt.substring(et,et+5).toLowerCase()==="data:"}function p(mt){return typeof mt=="string"&&/\.pdf$/i.test(mt)}function m(mt,tt=!1){return tt||([mt]=mt.split(/[#?]/,1)),mt.substring(mt.lastIndexOf("/")+1)}function b(mt,tt="document.pdf"){if(typeof mt!="string")return tt;if(A(mt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),tt;const et=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Tt=et.exec(mt);let wt=pt.exec(Tt[1])||pt.exec(Tt[2])||pt.exec(Tt[3]);if(wt&&(wt=wt[0],wt.includes("%")))try{wt=pt.exec(decodeURIComponent(wt))[0]}catch{}return wt||tt}class E{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(tt){tt in this.started&&(0,u.warn)(`Timer is already running for ${tt}`),this.started[tt]=Date.now()}timeEnd(tt){tt in this.started||(0,u.warn)(`Timer has not been started for ${tt}`),this.times.push({name:tt,start:this.started[tt],end:Date.now()}),delete this.started[tt]}toString(){const tt=[];let et=0;for(const{name:pt}of this.times)et=Math.max(pt.length,et);for(const{name:pt,start:Tt,end:wt}of this.times)tt.push(`${pt.padEnd(et)} ${wt-Tt}ms
`);return tt.join("")}}e.StatTimer=E;function _(mt,tt){try{const{protocol:et}=tt?new URL(mt,tt):new URL(mt);return et==="http:"||et==="https:"}catch{return!1}}function o(mt){mt.preventDefault()}function h(mt,tt=!1){return new Promise((et,pt)=>{const Tt=document.createElement("script");Tt.src=mt,Tt.onload=function(wt){tt&&Tt.remove(),et(wt)},Tt.onerror=function(){pt(new Error(`Cannot load script at: ${Tt.src}`))},(document.head||document.documentElement).append(Tt)})}function D(mt){console.log("Deprecated API usage: "+mt)}let y;class l{static toDateObject(tt){if(!tt||typeof tt!="string")return null;y||(y=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=y.exec(tt);if(!et)return null;const pt=parseInt(et[1],10);let Tt=parseInt(et[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let wt=parseInt(et[3],10);wt=wt>=1&&wt<=31?wt:1;let Bt=parseInt(et[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let Gt=parseInt(et[5],10);Gt=Gt>=0&&Gt<=59?Gt:0;let Ut=parseInt(et[6],10);Ut=Ut>=0&&Ut<=59?Ut:0;const zt=et[7]||"Z";let Ht=parseInt(et[8],10);Ht=Ht>=0&&Ht<=23?Ht:0;let $t=parseInt(et[9],10)||0;return $t=$t>=0&&$t<=59?$t:0,zt==="-"?(Bt+=Ht,Gt+=$t):zt==="+"&&(Bt-=Ht,Gt-=$t),new Date(Date.UTC(pt,Tt,wt,Bt,Gt,Ut))}}e.PDFDateString=l;function k(mt,{scale:tt=1,rotation:et=0}){const{width:pt,height:Tt}=mt.attributes.style,wt=[0,0,parseInt(pt),parseInt(Tt)];return new T({viewBox:wt,scale:tt,rotation:et})}function g(mt){if(mt.startsWith("#")){const tt=parseInt(mt.slice(1),16);return[(tt&16711680)>>16,(tt&65280)>>8,tt&255]}return mt.startsWith("rgb(")?mt.slice(4,-1).split(",").map(tt=>parseInt(tt)):mt.startsWith("rgba(")?mt.slice(5,-1).split(",").map(tt=>parseInt(tt)).slice(0,3):((0,u.warn)(`Not a valid color format: "${mt}"`),[0,0,0])}function W(mt){const tt=document.createElement("span");tt.style.visibility="hidden",document.body.append(tt);for(const et of mt.keys()){tt.style.color=et;const pt=window.getComputedStyle(tt).color;mt.set(et,g(pt))}tt.remove()}function z(mt){const{a:tt,b:et,c:pt,d:Tt,e:wt,f:Bt}=mt.getTransform();return[tt,et,pt,Tt,wt,Bt]}function w(mt){const{a:tt,b:et,c:pt,d:Tt,e:wt,f:Bt}=mt.getTransform().invertSelf();return[tt,et,pt,Tt,wt,Bt]}function q(mt,tt,et=!1,pt=!0){if(tt instanceof T){const{pageWidth:Tt,pageHeight:wt}=tt.rawDims,{style:Bt}=mt,Gt=u.FeatureTest.isCSSRoundSupported,Ut=`var(--scale-factor) * ${Tt}px`,zt=`var(--scale-factor) * ${wt}px`,Ht=Gt?`round(${Ut}, 1px)`:`calc(${Ut})`,$t=Gt?`round(${zt}, 1px)`:`calc(${zt})`;!et||tt.rotation%180===0?(Bt.width=Ht,Bt.height=$t):(Bt.width=$t,Bt.height=Ht)}pt&&mt.setAttribute("data-main-rotation",tt.rotation)}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=M(1);class u{constructor(){this.constructor===u&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,L){return"none"}addHighlightHCMFilter(f,L,O,T){return"none"}destroy(f=!1){}}e.BaseFilterFactory=u;class H{constructor(){this.constructor===H&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,L){if(f<=0||L<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(f,L);return{canvas:O,context:O.getContext("2d")}}reset(f,L,O){if(!f.canvas)throw new Error("Canvas is not specified");if(L<=0||O<=0)throw new Error("Invalid canvas size");f.canvas.width=L,f.canvas.height=O}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,L){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=H;class B{constructor({baseUrl:f=null,isCompressed:L=!0}){this.constructor===B&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=L}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const L=this.baseUrl+f+(this.isCompressed?".bcmap":""),O=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(L,O).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(f,L){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=B;class lt{constructor({baseUrl:f=null}){this.constructor===lt&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${f}`;return this._fetchData(L).catch(O=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(f){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=lt;class F{constructor(){this.constructor===F&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,L,O=!1){if(f<=0||L<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),O||(T.setAttribute("width",`${f}px`),T.setAttribute("height",`${L}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${f} ${L}`),T}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=F},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=M(1);const u=3285377520,H=4294901760,B=65535;class lt{constructor(C){this.h1=C?C&4294967295:u,this.h2=C?C&4294967295:u}update(C){let f,L;if(typeof C=="string"){f=new Uint8Array(C.length*2),L=0;for(let D=0,y=C.length;D<y;D++){const l=C.charCodeAt(D);l<=255?f[L++]=l:(f[L++]=l>>>8,f[L++]=l&255)}}else if((0,r.isArrayBuffer)(C))f=C.slice(),L=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=L>>2,T=L-O*4,x=new Uint32Array(f.buffer,0,O);let A=0,p=0,m=this.h1,b=this.h2;const E=3432918353,_=461845907,o=E&B,h=_&B;for(let D=0;D<O;D++)D&1?(A=x[D],A=A*E&H|A*o&B,A=A<<15|A>>>17,A=A*_&H|A*h&B,m^=A,m=m<<13|m>>>19,m=m*5+3864292196):(p=x[D],p=p*E&H|p*o&B,p=p<<15|p>>>17,p=p*_&H|p*h&B,b^=p,b=b<<13|b>>>19,b=b*5+3864292196);switch(A=0,T){case 3:A^=f[O*4+2]<<16;case 2:A^=f[O*4+1]<<8;case 1:A^=f[O*4],A=A*E&H|A*o&B,A=A<<15|A>>>17,A=A*_&H|A*h&B,O&1?m^=A:b^=A}this.h1=m,this.h2=b}hexdigest(){let C=this.h1,f=this.h2;return C^=f>>>1,C=C*3981806797&H|C*36045&B,f=f*4283543511&H|((f<<16|C>>>16)*2950163797&H)>>>16,C^=f>>>1,C=C*444984403&H|C*60499&B,f=f*3301882366&H|((f<<16|C>>>16)*3120437893&H)>>>16,C^=f>>>1,(C>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=lt},(S,e,M)=>{var B;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=M(1);class u{constructor({ownerDocument:F=globalThis.document,styleElement:C=null}){$(this,B,new Set);this._document=F,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(F){this.nativeFontFaces.add(F),this._document.fonts.add(F)}removeNativeFontFace(F){this.nativeFontFaces.delete(F),this._document.fonts.delete(F)}insertRule(F){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const C=this.styleElement.sheet;C.insertRule(F,C.cssRules.length)}clear(){for(const F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.clear(),t(this,B).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(F){if(!(!F||t(this,B).has(F.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:f,style:L}=F,O=new FontFace(C,f,L);this.addNativeFontFace(O);try{await O.load(),t(this,B).add(C)}catch{(0,r.warn)(`Cannot load system font: ${F.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(O)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(F){if(F.attached||F.missingFile&&!F.systemFontInfo)return;if(F.attached=!0,F.systemFontInfo){await this.loadSystemFont(F.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=F.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(L){throw(0,r.warn)(`Failed to load font '${f.family}': '${L}'.`),F.disableFontFace=!0,L}}return}const C=F.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const L=this._queueLoadingCallback(f);this._prepareFontLoadEvent(F,L)})}}get isFontLoadingAPISupported(){var C;const F=!!((C=this._document)!=null&&C.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",F)}get isSyncFontLoadingSupported(){let F=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(F=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){function C(){for((0,r.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;f.length>0&&f[0].done;){const O=f.shift();setTimeout(O.callback,0)}}const{loadingRequests:f}=this,L={done:!1,complete:C,callback:F};return f.push(L),L}get _loadTestFont(){const F=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",F)}_prepareFontLoadEvent(F,C){function f(g,W){return g.charCodeAt(W)<<24|g.charCodeAt(W+1)<<16|g.charCodeAt(W+2)<<8|g.charCodeAt(W+3)&255}function L(g,W,z,w){const q=g.substring(0,W),nt=g.substring(W+z);return q+w+nt}let O,T;const x=this._document.createElement("canvas");x.width=1,x.height=1;const A=x.getContext("2d");let p=0;function m(g,W){if(++p>30){(0,r.warn)("Load test font never loaded."),W();return}if(A.font="30px "+g,A.fillText(".",0,20),A.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(m.bind(null,g,W))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let E=this._loadTestFont;E=L(E,976,b.length,b);const o=16,h=1482184792;let D=f(E,o);for(O=0,T=b.length-3;O<T;O+=4)D=D-h+f(b,O)|0;O<b.length&&(D=D-h+f(b+"XXX",O)|0),E=L(E,o,4,(0,r.string32)(D));const y=`url(data:font/opentype;base64,${btoa(E)});`,l=`@font-face {font-family:"${b}";src:${y}}`;this.insertRule(l);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const g of[F.loadedName,b]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=g,k.append(W)}this._document.body.append(k),m(b,()=>{k.remove(),C.complete()})}}B=new WeakMap,e.FontLoader=u;class H{constructor(F,{isEvalSupported:C=!0,disableFontFace:f=!1,ignoreErrors:L=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const T in F)this[T]=F[T];this.isEvalSupported=C!==!1,this.disableFontFace=f===!0,this.ignoreErrors=L===!0,this._inspectFont=O}createNativeFontFace(){var C;if(!this.data||this.disableFontFace)return null;let F;if(!this.cssFontInfo)F=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),F=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(C=this._inspectFont)==null||C.call(this,this),F}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const F=(0,r.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(F)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${C}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${C}}`}return(L=this._inspectFont)==null||L.call(this,this,C),f}getPathGenerator(F,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let f;try{f=F.get(this.loadedName+"_path_"+C)}catch(L){if(!this.ignoreErrors)throw L;return(0,r.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[C]=function(O,T){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const L=[];for(const O of f){const T=O.args!==void 0?O.args.join(","):"";L.push("c.",O.cmd,"(",T,`);
`)}return this.compiledGlyphs[C]=new Function("c","size",L.join(""))}return this.compiledGlyphs[C]=function(L,O){for(const T of f)T.cmd==="scale"&&(T.args=[O,-O]),L[T.cmd].apply(L,T.args)}}}e.FontFaceObject=H},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=M(7);M(1);const u=function(C){return new Promise((f,L)=>{require$$5.readFile(C,(T,x)=>{if(T||!x){L(new Error(T));return}f(new Uint8Array(x))})})};class H extends r.BaseFilterFactory{}e.NodeFilterFactory=H;class B extends r.BaseCanvasFactory{_createCanvas(f,L){return require$$5.createCanvas(f,L)}}e.NodeCanvasFactory=B;class lt extends r.BaseCMapReaderFactory{_fetchData(f,L){return u(f).then(O=>({cMapData:O,compressionType:L}))}}e.NodeCMapReaderFactory=lt;class F extends r.BaseStandardFontDataFactory{_fetchData(f){return u(f)}}e.NodeStandardFontDataFactory=F},(S,e,M)=>{var G,Qe,gt,Ze;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=M(1),u=M(6),H=M(12),B=M(13);const lt=16,F=100,C=4096,f=15,L=10,O=1e3,T=16;function x(P,n){if(P._removeMirroring)throw new Error("Context is already forwarding operations.");P.__originalSave=P.save,P.__originalRestore=P.restore,P.__originalRotate=P.rotate,P.__originalScale=P.scale,P.__originalTranslate=P.translate,P.__originalTransform=P.transform,P.__originalSetTransform=P.setTransform,P.__originalResetTransform=P.resetTransform,P.__originalClip=P.clip,P.__originalMoveTo=P.moveTo,P.__originalLineTo=P.lineTo,P.__originalBezierCurveTo=P.bezierCurveTo,P.__originalRect=P.rect,P.__originalClosePath=P.closePath,P.__originalBeginPath=P.beginPath,P._removeMirroring=()=>{P.save=P.__originalSave,P.restore=P.__originalRestore,P.rotate=P.__originalRotate,P.scale=P.__originalScale,P.translate=P.__originalTranslate,P.transform=P.__originalTransform,P.setTransform=P.__originalSetTransform,P.resetTransform=P.__originalResetTransform,P.clip=P.__originalClip,P.moveTo=P.__originalMoveTo,P.lineTo=P.__originalLineTo,P.bezierCurveTo=P.__originalBezierCurveTo,P.rect=P.__originalRect,P.closePath=P.__originalClosePath,P.beginPath=P.__originalBeginPath,delete P._removeMirroring},P.save=function(){n.save(),this.__originalSave()},P.restore=function(){n.restore(),this.__originalRestore()},P.translate=function(i,c){n.translate(i,c),this.__originalTranslate(i,c)},P.scale=function(i,c){n.scale(i,c),this.__originalScale(i,c)},P.transform=function(i,c,d,R,I,U){n.transform(i,c,d,R,I,U),this.__originalTransform(i,c,d,R,I,U)},P.setTransform=function(i,c,d,R,I,U){n.setTransform(i,c,d,R,I,U),this.__originalSetTransform(i,c,d,R,I,U)},P.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},P.rotate=function(i){n.rotate(i),this.__originalRotate(i)},P.clip=function(i){n.clip(i),this.__originalClip(i)},P.moveTo=function(a,i){n.moveTo(a,i),this.__originalMoveTo(a,i)},P.lineTo=function(a,i){n.lineTo(a,i),this.__originalLineTo(a,i)},P.bezierCurveTo=function(a,i,c,d,R,I){n.bezierCurveTo(a,i,c,d,R,I),this.__originalBezierCurveTo(a,i,c,d,R,I)},P.rect=function(a,i,c,d){n.rect(a,i,c,d),this.__originalRect(a,i,c,d)},P.closePath=function(){n.closePath(),this.__originalClosePath()},P.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}class A{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,a,i){let c;return this.cache[n]!==void 0?(c=this.cache[n],this.canvasFactory.reset(c,a,i)):(c=this.canvasFactory.create(a,i),this.cache[n]=c),c}delete(n){delete this.cache[n]}clear(){for(const n in this.cache){const a=this.cache[n];this.canvasFactory.destroy(a),delete this.cache[n]}}}function p(P,n,a,i,c,d,R,I,U,st){const[Z,rt,dt,ft,ct,Ct]=(0,u.getCurrentTransform)(P);if(rt===0&&dt===0){const Dt=R*Z+ct,mt=Math.round(Dt),tt=I*ft+Ct,et=Math.round(tt),pt=(R+U)*Z+ct,Tt=Math.abs(Math.round(pt)-mt)||1,wt=(I+st)*ft+Ct,Bt=Math.abs(Math.round(wt)-et)||1;return P.setTransform(Math.sign(Z),0,0,Math.sign(ft),mt,et),P.drawImage(n,a,i,c,d,0,0,Tt,Bt),P.setTransform(Z,rt,dt,ft,ct,Ct),[Tt,Bt]}if(Z===0&&ft===0){const Dt=I*dt+ct,mt=Math.round(Dt),tt=R*rt+Ct,et=Math.round(tt),pt=(I+st)*dt+ct,Tt=Math.abs(Math.round(pt)-mt)||1,wt=(R+U)*rt+Ct,Bt=Math.abs(Math.round(wt)-et)||1;return P.setTransform(0,Math.sign(rt),Math.sign(dt),0,mt,et),P.drawImage(n,a,i,c,d,0,0,Bt,Tt),P.setTransform(Z,rt,dt,ft,ct,Ct),[Bt,Tt]}P.drawImage(n,a,i,c,d,R,I,U,st);const Lt=Math.hypot(Z,rt),At=Math.hypot(dt,ft);return[Lt*U,At*st]}function m(P){const{width:n,height:a}=P;if(n>O||a>O)return null;const i=1e3,c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),d=n+1;let R=new Uint8Array(d*(a+1)),I,U,st;const Z=n+7&-8;let rt=new Uint8Array(Z*a),dt=0;for(const At of P.data){let Dt=128;for(;Dt>0;)rt[dt++]=At&Dt?0:255,Dt>>=1}let ft=0;for(dt=0,rt[dt]!==0&&(R[0]=1,++ft),U=1;U<n;U++)rt[dt]!==rt[dt+1]&&(R[U]=rt[dt]?2:1,++ft),dt++;for(rt[dt]!==0&&(R[U]=2,++ft),I=1;I<a;I++){dt=I*Z,st=I*d,rt[dt-Z]!==rt[dt]&&(R[st]=rt[dt]?1:8,++ft);let At=(rt[dt]?4:0)+(rt[dt-Z]?8:0);for(U=1;U<n;U++)At=(At>>2)+(rt[dt+1]?4:0)+(rt[dt-Z+1]?8:0),c[At]&&(R[st+U]=c[At],++ft),dt++;if(rt[dt-Z]!==rt[dt]&&(R[st+U]=rt[dt]?2:4,++ft),ft>i)return null}for(dt=Z*(a-1),st=I*d,rt[dt]!==0&&(R[st]=8,++ft),U=1;U<n;U++)rt[dt]!==rt[dt+1]&&(R[st+U]=rt[dt]?4:8,++ft),dt++;if(rt[dt]!==0&&(R[st+U]=4,++ft),ft>i)return null;const ct=new Int32Array([0,d,-1,0,-d,0,0,0,1]),Ct=new Path2D;for(I=0;ft&&I<=a;I++){let At=I*d;const Dt=At+n;for(;At<Dt&&!R[At];)At++;if(At===Dt)continue;Ct.moveTo(At%d,I);const mt=At;let tt=R[At];do{const et=ct[tt];do At+=et;while(!R[At]);const pt=R[At];pt!==5&&pt!==10?(tt=pt,R[At]=0):(tt=pt&51*tt>>4,R[At]&=tt>>2|tt<<2),Ct.lineTo(At%d,At/d|0),R[At]||--ft}while(mt!==At);--I}return rt=null,R=null,function(At){At.save(),At.scale(1/n,-1/a),At.translate(0,-a),At.fill(Ct),At.beginPath(),At.restore()}}class b{constructor(n,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,a])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,a){this.x=n,this.y=a}updatePathMinMax(n,a,i){[a,i]=r.Util.applyTransform([a,i],n),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(n,a){const i=r.Util.applyTransform(a,n),c=r.Util.applyTransform(a.slice(2),n);this.minX=Math.min(this.minX,i[0],c[0]),this.minY=Math.min(this.minY,i[1],c[1]),this.maxX=Math.max(this.maxX,i[0],c[0]),this.maxY=Math.max(this.maxY,i[1],c[1])}updateScalingPathMinMax(n,a){r.Util.scaleMinMax(n,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(n,a,i,c,d,R,I,U,st,Z){const rt=r.Util.bezierBoundingBox(a,i,c,d,R,I,U,st);if(Z){Z[0]=Math.min(Z[0],rt[0],rt[2]),Z[1]=Math.max(Z[1],rt[0],rt[2]),Z[2]=Math.min(Z[2],rt[1],rt[3]),Z[3]=Math.max(Z[3],rt[1],rt[3]);return}this.updateRectMinMax(n,rt)}getPathBoundingBox(n=H.PathType.FILL,a=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(n===H.PathType.STROKE){a||(0,r.unreachable)("Stroke bounding box must include transform.");const c=r.Util.singularValueDecompose2dScale(a),d=c[0]*this.lineWidth/2,R=c[1]*this.lineWidth/2;i[0]-=d,i[1]-=R,i[2]+=d,i[3]+=R}return i}updateClipFromPath(){const n=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=H.PathType.FILL,a=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(n,a))}}function E(P,n){if(typeof ImageData<"u"&&n instanceof ImageData){P.putImageData(n,0,0);return}const a=n.height,i=n.width,c=a%T,d=(a-c)/T,R=c===0?d:d+1,I=P.createImageData(i,T);let U=0,st;const Z=n.data,rt=I.data;let dt,ft,ct,Ct;if(n.kind===r.ImageKind.GRAYSCALE_1BPP){const Lt=Z.byteLength,At=new Uint32Array(rt.buffer,0,rt.byteLength>>2),Dt=At.length,mt=i+7>>3,tt=4294967295,et=r.FeatureTest.isLittleEndian?4278190080:255;for(dt=0;dt<R;dt++){for(ct=dt<d?T:c,st=0,ft=0;ft<ct;ft++){const pt=Lt-U;let Tt=0;const wt=pt>mt?i:pt*8-7,Bt=wt&-8;let Gt=0,Ut=0;for(;Tt<Bt;Tt+=8)Ut=Z[U++],At[st++]=Ut&128?tt:et,At[st++]=Ut&64?tt:et,At[st++]=Ut&32?tt:et,At[st++]=Ut&16?tt:et,At[st++]=Ut&8?tt:et,At[st++]=Ut&4?tt:et,At[st++]=Ut&2?tt:et,At[st++]=Ut&1?tt:et;for(;Tt<wt;Tt++)Gt===0&&(Ut=Z[U++],Gt=128),At[st++]=Ut&Gt?tt:et,Gt>>=1}for(;st<Dt;)At[st++]=0;P.putImageData(I,0,dt*T)}}else if(n.kind===r.ImageKind.RGBA_32BPP){for(ft=0,Ct=i*T*4,dt=0;dt<d;dt++)rt.set(Z.subarray(U,U+Ct)),U+=Ct,P.putImageData(I,0,ft),ft+=T;dt<R&&(Ct=i*c*4,rt.set(Z.subarray(U,U+Ct)),P.putImageData(I,0,ft))}else if(n.kind===r.ImageKind.RGB_24BPP)for(ct=T,Ct=i*ct,dt=0;dt<R;dt++){for(dt>=d&&(ct=c,Ct=i*ct),st=0,ft=Ct;ft--;)rt[st++]=Z[U++],rt[st++]=Z[U++],rt[st++]=Z[U++],rt[st++]=255;P.putImageData(I,0,dt*T)}else throw new Error(`bad image kind: ${n.kind}`)}function _(P,n){if(n.bitmap){P.drawImage(n.bitmap,0,0);return}const a=n.height,i=n.width,c=a%T,d=(a-c)/T,R=c===0?d:d+1,I=P.createImageData(i,T);let U=0;const st=n.data,Z=I.data;for(let rt=0;rt<R;rt++){const dt=rt<d?T:c;({srcPos:U}=(0,B.convertBlackAndWhiteToRGBA)({src:st,srcPos:U,dest:Z,width:i,height:dt,nonBlackColor:0})),P.putImageData(I,0,rt*T)}}function o(P,n){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of a)P[i]!==void 0&&(n[i]=P[i]);P.setLineDash!==void 0&&(n.setLineDash(P.getLineDash()),n.lineDashOffset=P.lineDashOffset)}function h(P){if(P.strokeStyle=P.fillStyle="#000000",P.fillRule="nonzero",P.globalAlpha=1,P.lineWidth=1,P.lineCap="butt",P.lineJoin="miter",P.miterLimit=10,P.globalCompositeOperation="source-over",P.font="10px sans-serif",P.setLineDash!==void 0&&(P.setLineDash([]),P.lineDashOffset=0),!r.isNodeJS){const{filter:n}=P;n!=="none"&&n!==""&&(P.filter="none")}}function D(P,n,a,i){const c=P.length;for(let d=3;d<c;d+=4){const R=P[d];if(R===0)P[d-3]=n,P[d-2]=a,P[d-1]=i;else if(R<255){const I=255-R;P[d-3]=P[d-3]*R+n*I>>8,P[d-2]=P[d-2]*R+a*I>>8,P[d-1]=P[d-1]*R+i*I>>8}}}function y(P,n,a){const i=P.length,c=1/255;for(let d=3;d<i;d+=4){const R=a?a[P[d]]:P[d];n[d]=n[d]*R*c|0}}function l(P,n,a){const i=P.length;for(let c=3;c<i;c+=4){const d=P[c-3]*77+P[c-2]*152+P[c-1]*28;n[c]=a?n[c]*a[d>>8]>>8:n[c]*d>>16}}function k(P,n,a,i,c,d,R,I,U,st,Z){const rt=!!d,dt=rt?d[0]:0,ft=rt?d[1]:0,ct=rt?d[2]:0,Ct=c==="Luminosity"?l:y,At=Math.min(i,Math.ceil(1048576/a));for(let Dt=0;Dt<i;Dt+=At){const mt=Math.min(At,i-Dt),tt=P.getImageData(I-st,Dt+(U-Z),a,mt),et=n.getImageData(I,Dt+U,a,mt);rt&&D(tt.data,dt,ft,ct),Ct(tt.data,et.data,R),n.putImageData(et,I,Dt+U)}}function g(P,n,a,i){const c=i[0],d=i[1],R=i[2]-c,I=i[3]-d;R===0||I===0||(k(n.context,a,R,I,n.subtype,n.backdrop,n.transferMap,c,d,n.offsetX,n.offsetY),P.save(),P.globalAlpha=1,P.globalCompositeOperation="source-over",P.setTransform(1,0,0,1,0,0),P.drawImage(a.canvas,0,0),P.restore())}function W(P,n){const a=r.Util.singularValueDecompose2dScale(P);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return n!==void 0?n:a[0]<=i||a[1]<=i}const z=["butt","round","square"],w=["miter","round","bevel"],q={},nt={},St=class St{constructor(n,a,i,c,d,{optionalContentConfig:R,markedContentStack:I=null},U,st){$(this,G);$(this,gt);this.ctx=n,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=i,this.canvasFactory=c,this.filterFactory=d,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=R,this.cachedCanvases=new A(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=U,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=st,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,a=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):a}beginDrawing({transform:n,viewport:a,transparency:i=!1,background:c=null}){const d=this.ctx.canvas.width,R=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=c||"#ffffff",this.ctx.fillRect(0,0,d,R),this.ctx.fillStyle=I,i){const U=this.cachedCanvases.getCanvas("transparent",d,R);this.compositeCtx=this.ctx,this.transparentCanvas=U.canvas,this.ctx=U.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),h(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(n,a,i,c){const d=n.argsArray,R=n.fnArray;let I=a||0;const U=d.length;if(U===I)return I;const st=U-I>L&&typeof i=="function",Z=st?Date.now()+f:0;let rt=0;const dt=this.commonObjs,ft=this.objs;let ct;for(;;){if(c!==void 0&&I===c.nextBreakPoint)return c.breakIt(I,i),I;if(ct=R[I],ct!==r.OPS.dependency)this[ct].apply(this,d[I]);else for(const Ct of d[I]){const Lt=Ct.startsWith("g_")?dt:ft;if(!Lt.has(Ct))return Lt.get(Ct,i),I}if(I++,I===U)return I;if(st&&++rt>L){if(Date.now()>Z)return i(),I;rt=0}}}endDrawing(){X(this,G,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const a of n.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);n.clear()}this._cachedBitmapsMap.clear(),X(this,gt,Ze).call(this)}_scaleImage(n,a){const i=n.width,c=n.height;let d=Math.max(Math.hypot(a[0],a[1]),1),R=Math.max(Math.hypot(a[2],a[3]),1),I=i,U=c,st="prescale1",Z,rt;for(;d>2&&I>1||R>2&&U>1;){let dt=I,ft=U;d>2&&I>1&&(dt=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),d/=I/dt),R>2&&U>1&&(ft=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U)/2,R/=U/ft),Z=this.cachedCanvases.getCanvas(st,dt,ft),rt=Z.context,rt.clearRect(0,0,dt,ft),rt.drawImage(n,0,0,I,U,0,0,dt,ft),n=Z.canvas,I=dt,U=ft,st=st==="prescale1"?"prescale2":"prescale1"}return{img:n,paintWidth:I,paintHeight:U}}_createMaskCanvas(n){const a=this.ctx,{width:i,height:c}=n,d=this.current.fillColor,R=this.current.patternFill,I=(0,u.getCurrentTransform)(a);let U,st,Z,rt;if((n.bitmap||n.data)&&n.count>1){const Tt=n.bitmap||n.data.buffer;st=JSON.stringify(R?I:[I.slice(0,4),d]),U=this._cachedBitmapsMap.get(Tt),U||(U=new Map,this._cachedBitmapsMap.set(Tt,U));const wt=U.get(st);if(wt&&!R){const Bt=Math.round(Math.min(I[0],I[2])+I[4]),Gt=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:wt,offsetX:Bt,offsetY:Gt}}Z=wt}Z||(rt=this.cachedCanvases.getCanvas("maskCanvas",i,c),_(rt.context,n));let dt=r.Util.transform(I,[1/i,0,0,-1/c,0,0]);dt=r.Util.transform(dt,[1,0,0,1,0,-c]);const ft=r.Util.applyTransform([0,0],dt),ct=r.Util.applyTransform([i,c],dt),Ct=r.Util.normalizeRect([ft[0],ft[1],ct[0],ct[1]]),Lt=Math.round(Ct[2]-Ct[0])||1,At=Math.round(Ct[3]-Ct[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",Lt,At),mt=Dt.context,tt=Math.min(ft[0],ct[0]),et=Math.min(ft[1],ct[1]);mt.translate(-tt,-et),mt.transform(...dt),Z||(Z=this._scaleImage(rt.canvas,(0,u.getCurrentTransformInverse)(mt)),Z=Z.img,U&&R&&U.set(st,Z)),mt.imageSmoothingEnabled=W((0,u.getCurrentTransform)(mt),n.interpolate),p(mt,Z,0,0,Z.width,Z.height,0,0,i,c),mt.globalCompositeOperation="source-in";const pt=r.Util.transform((0,u.getCurrentTransformInverse)(mt),[1,0,0,1,-tt,-et]);return mt.fillStyle=R?d.getPattern(a,this,pt,H.PathType.FILL):d,mt.fillRect(0,0,i,c),U&&!R&&(this.cachedCanvases.delete("fillCanvas"),U.set(st,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(tt),offsetY:Math.round(et)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=z[n]}setLineJoin(n){this.ctx.lineJoin=w[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,a){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=a)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[a,i]of n)switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,a=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,c=this.cachedCanvases.getCanvas(i,n,a);this.suspendedCtx=this.ctx,this.ctx=c.context;const d=this.ctx;d.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,d),x(d,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){if(!this.current.activeSMask)return;n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,i=this.suspendedCtx;g(i,a,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,a,i,c,d,R){this.ctx.transform(n,a,i,c,d,R),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,a,i){const c=this.ctx,d=this.current;let R=d.x,I=d.y,U,st;const Z=(0,u.getCurrentTransform)(c),rt=Z[0]===0&&Z[3]===0||Z[1]===0&&Z[2]===0,dt=rt?i.slice(0):null;for(let ft=0,ct=0,Ct=n.length;ft<Ct;ft++)switch(n[ft]|0){case r.OPS.rectangle:R=a[ct++],I=a[ct++];const Lt=a[ct++],At=a[ct++],Dt=R+Lt,mt=I+At;c.moveTo(R,I),Lt===0||At===0?c.lineTo(Dt,mt):(c.lineTo(Dt,I),c.lineTo(Dt,mt),c.lineTo(R,mt)),rt||d.updateRectMinMax(Z,[R,I,Dt,mt]),c.closePath();break;case r.OPS.moveTo:R=a[ct++],I=a[ct++],c.moveTo(R,I),rt||d.updatePathMinMax(Z,R,I);break;case r.OPS.lineTo:R=a[ct++],I=a[ct++],c.lineTo(R,I),rt||d.updatePathMinMax(Z,R,I);break;case r.OPS.curveTo:U=R,st=I,R=a[ct+4],I=a[ct+5],c.bezierCurveTo(a[ct],a[ct+1],a[ct+2],a[ct+3],R,I),d.updateCurvePathMinMax(Z,U,st,a[ct],a[ct+1],a[ct+2],a[ct+3],R,I,dt),ct+=6;break;case r.OPS.curveTo2:U=R,st=I,c.bezierCurveTo(R,I,a[ct],a[ct+1],a[ct+2],a[ct+3]),d.updateCurvePathMinMax(Z,U,st,R,I,a[ct],a[ct+1],a[ct+2],a[ct+3],dt),R=a[ct+2],I=a[ct+3],ct+=4;break;case r.OPS.curveTo3:U=R,st=I,R=a[ct+2],I=a[ct+3],c.bezierCurveTo(a[ct],a[ct+1],R,I,R,I),d.updateCurvePathMinMax(Z,U,st,a[ct],a[ct+1],R,I,R,I,dt),ct+=4;break;case r.OPS.closePath:c.closePath();break}rt&&d.updateScalingPathMinMax(Z,dt),d.setCurrentPoint(R,I)}closePath(){this.ctx.closePath()}stroke(n=!0){const a=this.ctx,i=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(a.save(),a.strokeStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),H.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const a=this.ctx,i=this.current.fillColor,c=this.current.patternFill;let d=!1;c&&(a.save(),a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),H.PathType.FILL),d=!0);const R=this.current.getClippedPathBoundingBox();this.contentVisible&&R!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),d&&a.restore(),n&&this.consumePath(R)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=nt}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,a=this.ctx;if(n===void 0){a.beginPath();return}a.save(),a.beginPath();for(const i of n)a.setTransform(...i.transform),a.translate(i.x,i.y),i.addToPath(a,i.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,a){var Z;const i=this.commonObjs.get(n),c=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(c.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX,(c.fontMatrix[0]===0||c.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+n),a<0?(a=-a,c.fontDirection=-1):c.fontDirection=1,this.current.font=i,this.current.fontSize=a,i.isType3Font)return;const d=i.loadedName||"sans-serif",R=((Z=i.systemFontInfo)==null?void 0:Z.css)||`"${d}", ${i.fallbackName}`;let I="normal";i.black?I="900":i.bold&&(I="bold");const U=i.italic?"italic":"normal";let st=a;a<lt?st=lt:a>F&&(st=F),this.current.fontSizeScale=a/st,this.ctx.font=`${U} ${I} ${st}px ${R}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,a){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=a}setLeadingMoveText(n,a){this.setLeading(-a),this.moveText(n,a)}setTextMatrix(n,a,i,c,d,R){this.current.textMatrix=[n,a,i,c,d,R],this.current.textMatrixScale=Math.hypot(n,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,a,i,c){const d=this.ctx,R=this.current,I=R.font,U=R.textRenderingMode,st=R.fontSize/R.fontSizeScale,Z=U&r.TextRenderingMode.FILL_STROKE_MASK,rt=!!(U&r.TextRenderingMode.ADD_TO_PATH_FLAG),dt=R.patternFill&&!I.missingFile;let ft;(I.disableFontFace||rt||dt)&&(ft=I.getPathGenerator(this.commonObjs,n)),I.disableFontFace||dt?(d.save(),d.translate(a,i),d.beginPath(),ft(d,st),c&&d.setTransform(...c),(Z===r.TextRenderingMode.FILL||Z===r.TextRenderingMode.FILL_STROKE)&&d.fill(),(Z===r.TextRenderingMode.STROKE||Z===r.TextRenderingMode.FILL_STROKE)&&d.stroke(),d.restore()):((Z===r.TextRenderingMode.FILL||Z===r.TextRenderingMode.FILL_STROKE)&&d.fillText(n,a,i),(Z===r.TextRenderingMode.STROKE||Z===r.TextRenderingMode.FILL_STROKE)&&d.strokeText(n,a,i)),rt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(d),x:a,y:i,fontSize:st,addToPath:ft})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const a=n.getImageData(0,0,10,10).data;let i=!1;for(let c=3;c<a.length;c+=4)if(a[c]>0&&a[c]<255){i=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(n){const a=this.current,i=a.font;if(i.isType3Font)return this.showType3Text(n);const c=a.fontSize;if(c===0)return;const d=this.ctx,R=a.fontSizeScale,I=a.charSpacing,U=a.wordSpacing,st=a.fontDirection,Z=a.textHScale*st,rt=n.length,dt=i.vertical,ft=dt?1:-1,ct=i.defaultVMetrics,Ct=c*a.fontMatrix[0],Lt=a.textRenderingMode===r.TextRenderingMode.FILL&&!i.disableFontFace&&!a.patternFill;d.save(),d.transform(...a.textMatrix),d.translate(a.x,a.y+a.textRise),st>0?d.scale(Z,-1):d.scale(Z,1);let At;if(a.patternFill){d.save();const pt=a.fillColor.getPattern(d,this,(0,u.getCurrentTransformInverse)(d),H.PathType.FILL);At=(0,u.getCurrentTransform)(d),d.restore(),d.fillStyle=pt}let Dt=a.lineWidth;const mt=a.textMatrixScale;if(mt===0||Dt===0){const pt=a.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(pt===r.TextRenderingMode.STROKE||pt===r.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=mt;if(R!==1&&(d.scale(R,R),Dt/=R),d.lineWidth=Dt,i.isInvalidPDFjsFont){const pt=[];let Tt=0;for(const wt of n)pt.push(wt.unicode),Tt+=wt.width;d.fillText(pt.join(""),0,0),a.x+=Tt*Ct*Z,d.restore(),this.compose();return}let tt=0,et;for(et=0;et<rt;++et){const pt=n[et];if(typeof pt=="number"){tt+=ft*pt*c/1e3;continue}let Tt=!1;const wt=(pt.isSpace?U:0)+I,Bt=pt.fontChar,Gt=pt.accent;let Ut,zt,Ht=pt.width;if(dt){const Vt=pt.vmetric||ct,ut=-(pt.vmetric?Vt[1]:Ht*.5)*Ct,Q=Vt[2]*Ct;Ht=Vt?-Vt[0]:Ht,Ut=ut/R,zt=(tt+Q)/R}else Ut=tt/R,zt=0;if(i.remeasure&&Ht>0){const Vt=d.measureText(Bt).width*1e3/c*R;if(Ht<Vt&&this.isFontSubpixelAAEnabled){const ut=Ht/Vt;Tt=!0,d.save(),d.scale(ut,1),Ut/=ut}else Ht!==Vt&&(Ut+=(Ht-Vt)/2e3*c/R)}if(this.contentVisible&&(pt.isInFont||i.missingFile)){if(Lt&&!Gt)d.fillText(Bt,Ut,zt);else if(this.paintChar(Bt,Ut,zt,At),Gt){const Vt=Ut+c*Gt.offset.x/R,ut=zt-c*Gt.offset.y/R;this.paintChar(Gt.fontChar,Vt,ut,At)}}const $t=dt?Ht*Ct-wt*st:Ht*Ct+wt*st;tt+=$t,Tt&&d.restore()}dt?a.y-=tt:a.x+=tt*Z,d.restore(),this.compose()}showType3Text(n){const a=this.ctx,i=this.current,c=i.font,d=i.fontSize,R=i.fontDirection,I=c.vertical?1:-1,U=i.charSpacing,st=i.wordSpacing,Z=i.textHScale*R,rt=i.fontMatrix||r.FONT_IDENTITY_MATRIX,dt=n.length,ft=i.textRenderingMode===r.TextRenderingMode.INVISIBLE;let ct,Ct,Lt,At;if(!(ft||d===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...i.textMatrix),a.translate(i.x,i.y),a.scale(Z,R),ct=0;ct<dt;++ct){if(Ct=n[ct],typeof Ct=="number"){At=I*Ct*d/1e3,this.ctx.translate(At,0),i.x+=At*Z;continue}const Dt=(Ct.isSpace?st:0)+U,mt=c.charProcOperatorList[Ct.operatorListId];if(!mt){(0,r.warn)(`Type3 character "${Ct.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ct,this.save(),a.scale(d,d),a.transform(...rt),this.executeOperatorList(mt),this.restore()),Lt=r.Util.applyTransform([Ct.width,0],rt)[0]*d+Dt,a.translate(Lt,0),i.x+=Lt*Z}a.restore(),this.processingType3=null}}setCharWidth(n,a){}setCharWidthAndBounds(n,a,i,c,d,R){this.ctx.rect(i,c,d-i,R-c),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let a;if(n[0]==="TilingPattern"){const i=n[1],c=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),d={createCanvasGraphics:R=>new St(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};a=new H.TilingPattern(n,i,this.ctx,d,c)}else a=this._getPattern(n[1],n[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,a,i){const c=r.Util.makeHexColor(n,a,i);this.ctx.strokeStyle=c,this.current.strokeColor=c}setFillRGBColor(n,a,i){const c=r.Util.makeHexColor(n,a,i);this.ctx.fillStyle=c,this.current.fillColor=c,this.current.patternFill=!1}_getPattern(n,a=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=(0,H.getShadingPattern)(this.getObject(n)),this.cachedPatterns.set(n,i)),a&&(i.matrix=a),i}shadingFill(n){if(!this.contentVisible)return;const a=this.ctx;this.save();const i=this._getPattern(n);a.fillStyle=i.getPattern(a,this,(0,u.getCurrentTransformInverse)(a),H.PathType.SHADING);const c=(0,u.getCurrentTransformInverse)(a);if(c){const{width:d,height:R}=a.canvas,[I,U,st,Z]=r.Util.getAxialAlignedBoundingBox([0,0,d,R],c);this.ctx.fillRect(I,U,st-I,Z-U)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform(...n),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),a)){const i=a[2]-a[0],c=a[3]-a[1];this.ctx.rect(a[0],a[1],i,c),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;n.isolated||(0,r.info)("TODO: Support non-isolated groups."),n.knockout&&(0,r.warn)("Knockout groups not supported.");const i=(0,u.getCurrentTransform)(a);if(n.matrix&&a.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let c=r.Util.getAxialAlignedBoundingBox(n.bbox,(0,u.getCurrentTransform)(a));const d=[0,0,a.canvas.width,a.canvas.height];c=r.Util.intersect(c,d)||[0,0,0,0];const R=Math.floor(c[0]),I=Math.floor(c[1]);let U=Math.max(Math.ceil(c[2])-R,1),st=Math.max(Math.ceil(c[3])-I,1),Z=1,rt=1;U>C&&(Z=U/C,U=C),st>C&&(rt=st/C,st=C),this.current.startNewPathAndClipBox([0,0,U,st]);let dt="groupAt"+this.groupLevel;n.smask&&(dt+="_smask_"+this.smaskCounter++%2);const ft=this.cachedCanvases.getCanvas(dt,U,st),ct=ft.context;ct.scale(1/Z,1/rt),ct.translate(-R,-I),ct.transform(...i),n.smask?this.smaskStack.push({canvas:ft.canvas,context:ct,offsetX:R,offsetY:I,scaleX:Z,scaleY:rt,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(R,I),a.scale(Z,rt),a.save()),o(a,ct),this.ctx=ct,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const c=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...c);const d=r.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],c);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(n,a,i,c,d){if(X(this,G,Qe).call(this),h(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const R=a[2]-a[0],I=a[3]-a[1];if(d&&this.annotationCanvasMap){i=i.slice(),i[4]-=a[0],i[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=R,a[3]=I;const[U,st]=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:Z}=this,rt=Math.ceil(R*this.outputScaleX*Z),dt=Math.ceil(I*this.outputScaleY*Z);this.annotationCanvas=this.canvasFactory.create(rt,dt);const{canvas:ft,context:ct}=this.annotationCanvas;this.annotationCanvasMap.set(n,ft),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ct,this.ctx.save(),this.ctx.setTransform(U,0,0,-st,0,I*st),h(this.ctx)}else h(this.ctx),this.ctx.rect(a[0],a[1],R,I),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...c)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,gt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const a=n.count;n=this.getObject(n.data,n),n.count=a;const i=this.ctx,c=this.processingType3;if(c&&(c.compiled===void 0&&(c.compiled=m(n)),c.compiled)){c.compiled(i);return}const d=this._createMaskCanvas(n),R=d.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(R,d.offsetX,d.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(n,a,i=0,c=0,d,R){if(!this.contentVisible)return;n=this.getObject(n.data,n);const I=this.ctx;I.save();const U=(0,u.getCurrentTransform)(I);I.transform(a,i,c,d,0,0);const st=this._createMaskCanvas(n);I.setTransform(1,0,0,1,st.offsetX-U[4],st.offsetY-U[5]);for(let Z=0,rt=R.length;Z<rt;Z+=2){const dt=r.Util.transform(U,[a,i,c,d,R[Z],R[Z+1]]),[ft,ct]=r.Util.applyTransform([0,0],dt);I.drawImage(st.canvas,ft,ct)}I.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const a=this.ctx,i=this.current.fillColor,c=this.current.patternFill;for(const d of n){const{data:R,width:I,height:U,transform:st}=d,Z=this.cachedCanvases.getCanvas("maskCanvas",I,U),rt=Z.context;rt.save();const dt=this.getObject(R,d);_(rt,dt),rt.globalCompositeOperation="source-in",rt.fillStyle=c?i.getPattern(rt,this,(0,u.getCurrentTransformInverse)(a),H.PathType.FILL):i,rt.fillRect(0,0,I,U),rt.restore(),a.save(),a.transform(...st),a.scale(1,-1),p(a,Z.canvas,0,0,I,U,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const a=this.getObject(n);if(!a){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(n,a,i,c){if(!this.contentVisible)return;const d=this.getObject(n);if(!d){(0,r.warn)("Dependent image isn't ready yet");return}const R=d.width,I=d.height,U=[];for(let st=0,Z=c.length;st<Z;st+=2)U.push({transform:[a,0,0,i,c[st],c[st+1]],x:0,y:0,w:R,h:I});this.paintInlineImageXObjectGroup(d,U)}applyTransferMapsToCanvas(n){return this.current.transferMaps!=="none"&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if(this.current.transferMaps==="none")return n.bitmap;const{bitmap:a,width:i,height:c}=n,d=this.cachedCanvases.getCanvas("inlineImage",i,c),R=d.context;return R.filter=this.current.transferMaps,R.drawImage(a,0,0),R.filter="none",d.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const a=n.width,i=n.height,c=this.ctx;if(this.save(),!r.isNodeJS){const{filter:I}=c;I!=="none"&&I!==""&&(c.filter="none")}c.scale(1/a,-1/i);let d;if(n.bitmap)d=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)d=n;else{const U=this.cachedCanvases.getCanvas("inlineImage",a,i).context;E(U,n),d=this.applyTransferMapsToCanvas(U)}const R=this._scaleImage(d,(0,u.getCurrentTransformInverse)(c));c.imageSmoothingEnabled=W((0,u.getCurrentTransform)(c),n.interpolate),p(c,R.img,0,0,R.paintWidth,R.paintHeight,0,-i,a,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,a){if(!this.contentVisible)return;const i=this.ctx;let c;if(n.bitmap)c=n.bitmap;else{const d=n.width,R=n.height,U=this.cachedCanvases.getCanvas("inlineImage",d,R).context;E(U,n),c=this.applyTransferMapsToCanvas(U)}for(const d of a)i.save(),i.transform(...d.transform),i.scale(1,-1),p(i,c,d.x,d.y,d.w,d.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,a){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,a){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(a||(this.pendingClip===nt?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,u.getCurrentTransform)(this.ctx);if(n[1]===0&&n[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const a=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[2]),c=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(i,c)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:n}=this.current,{a,b:i,c,d}=this.ctx.getTransform();let R,I;if(i===0&&c===0){const U=Math.abs(a),st=Math.abs(d);if(U===st)if(n===0)R=I=1/U;else{const Z=U*n;R=I=Z<1?1/Z:1}else if(n===0)R=1/U,I=1/st;else{const Z=U*n,rt=st*n;R=Z<1?1/Z:1,I=rt<1?1/rt:1}}else{const U=Math.abs(a*d-i*c),st=Math.hypot(a,i),Z=Math.hypot(c,d);if(n===0)R=Z/U,I=st/U;else{const rt=n*U;R=Z>rt?Z/rt:1,I=st>rt?st/rt:1}}this._cachedScaleForStroking[0]=R,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:a}=this,{lineWidth:i}=this.current,[c,d]=this.getScaleForStroking();if(a.lineWidth=i||1,c===1&&d===1){a.stroke();return}const R=a.getLineDash();if(n&&a.save(),a.scale(c,d),R.length>0){const I=Math.max(c,d);a.setLineDash(R.map(U=>U/I)),a.lineDashOffset/=I}a.stroke(),n&&a.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};G=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gt=new WeakSet,Ze=function(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(n!=="none"){const a=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=a}}};let at=St;e.CanvasGraphics=at;for(const P in r.OPS)at.prototype[P]!==void 0&&(at.prototype[r.OPS[P]]=at.prototype[P])},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=T;var r=M(1),u=M(6);const H={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=H;function B(m,b){if(!b)return;const E=b[2]-b[0],_=b[3]-b[1],o=new Path2D;o.rect(b[0],b[1],E,_),m.clip(o)}class lt{constructor(){this.constructor===lt&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class F extends lt{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let E;this._type==="axial"?E=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(E=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _ of this._colorStops)E.addColorStop(_[0],_[1]);return E}getPattern(b,E,_,o){let h;if(o===H.STROKE||o===H.FILL){const D=E.current.getClippedPathBoundingBox(o,(0,u.getCurrentTransform)(b))||[0,0,0,0],y=Math.ceil(D[2]-D[0])||1,l=Math.ceil(D[3]-D[1])||1,k=E.cachedCanvases.getCanvas("pattern",y,l,!0),g=k.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-D[0],-D[1]),_=r.Util.transform(_,[1,0,0,1,D[0],D[1]]),g.transform(...E.baseTransform),this.matrix&&g.transform(...this.matrix),B(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),h=b.createPattern(k.canvas,"no-repeat");const W=new DOMMatrix(_);h.setTransform(W)}else B(b,this._bbox),h=this._createGradient(b);return h}}function C(m,b,E,_,o,h,D,y){const l=b.coords,k=b.colors,g=m.data,W=m.width*4;let z;l[E+1]>l[_+1]&&(z=E,E=_,_=z,z=h,h=D,D=z),l[_+1]>l[o+1]&&(z=_,_=o,o=z,z=D,D=y,y=z),l[E+1]>l[_+1]&&(z=E,E=_,_=z,z=h,h=D,D=z);const w=(l[E]+b.offsetX)*b.scaleX,q=(l[E+1]+b.offsetY)*b.scaleY,nt=(l[_]+b.offsetX)*b.scaleX,at=(l[_+1]+b.offsetY)*b.scaleY,G=(l[o]+b.offsetX)*b.scaleX,ht=(l[o+1]+b.offsetY)*b.scaleY;if(q>=ht)return;const gt=k[h],vt=k[h+1],St=k[h+2],P=k[D],n=k[D+1],a=k[D+2],i=k[y],c=k[y+1],d=k[y+2],R=Math.round(q),I=Math.round(ht);let U,st,Z,rt,dt,ft,ct,Ct;for(let Lt=R;Lt<=I;Lt++){if(Lt<at){const et=Lt<q?0:(q-Lt)/(q-at);U=w-(w-nt)*et,st=gt-(gt-P)*et,Z=vt-(vt-n)*et,rt=St-(St-a)*et}else{let et;Lt>ht?et=1:at===ht?et=0:et=(at-Lt)/(at-ht),U=nt-(nt-G)*et,st=P-(P-i)*et,Z=n-(n-c)*et,rt=a-(a-d)*et}let At;Lt<q?At=0:Lt>ht?At=1:At=(q-Lt)/(q-ht),dt=w-(w-G)*At,ft=gt-(gt-i)*At,ct=vt-(vt-c)*At,Ct=St-(St-d)*At;const Dt=Math.round(Math.min(U,dt)),mt=Math.round(Math.max(U,dt));let tt=W*Lt+Dt*4;for(let et=Dt;et<=mt;et++)At=(U-et)/(U-dt),At<0?At=0:At>1&&(At=1),g[tt++]=st-(st-ft)*At|0,g[tt++]=Z-(Z-ct)*At|0,g[tt++]=rt-(rt-Ct)*At|0,g[tt++]=255}}function f(m,b,E){const _=b.coords,o=b.colors;let h,D;switch(b.type){case"lattice":const y=b.verticesPerRow,l=Math.floor(_.length/y)-1,k=y-1;for(h=0;h<l;h++){let g=h*y;for(let W=0;W<k;W++,g++)C(m,E,_[g],_[g+1],_[g+y],o[g],o[g+1],o[g+y]),C(m,E,_[g+y+1],_[g+1],_[g+y],o[g+y+1],o[g+1],o[g+y])}break;case"triangles":for(h=0,D=_.length;h<D;h+=3)C(m,E,_[h],_[h+1],_[h+2],o[h],o[h+1],o[h+2]);break;default:throw new Error("illegal figure")}}class L extends lt{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,E,_){const y=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-y,g=Math.ceil(this._bounds[3])-l,W=Math.min(Math.ceil(Math.abs(k*b[0]*1.1)),3e3),z=Math.min(Math.ceil(Math.abs(g*b[1]*1.1)),3e3),w=k/W,q=g/z,nt={coords:this._coords,colors:this._colors,offsetX:-y,offsetY:-l,scaleX:1/w,scaleY:1/q},at=W+2*2,G=z+2*2,ht=_.getCanvas("mesh",at,G,!1),gt=ht.context,vt=gt.createImageData(W,z);if(E){const P=vt.data;for(let n=0,a=P.length;n<a;n+=4)P[n]=E[0],P[n+1]=E[1],P[n+2]=E[2],P[n+3]=255}for(const P of this._figures)f(vt,P,nt);return gt.putImageData(vt,2,2),{canvas:ht.canvas,offsetX:y-2*w,offsetY:l-2*q,scaleX:w,scaleY:q}}getPattern(b,E,_,o){B(b,this._bbox);let h;if(o===H.SHADING)h=r.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(b));else if(h=r.Util.singularValueDecompose2dScale(E.baseTransform),this.matrix){const y=r.Util.singularValueDecompose2dScale(this.matrix);h=[h[0]*y[0],h[1]*y[1]]}const D=this._createMeshCanvas(h,o===H.SHADING?null:this._background,E.cachedCanvases);return o!==H.SHADING&&(b.setTransform(...E.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(D.offsetX,D.offsetY),b.scale(D.scaleX,D.scaleY),b.createPattern(D.canvas,"no-repeat")}}class O extends lt{getPattern(){return"hotpink"}}function T(m){switch(m[0]){case"RadialAxial":return new F(m);case"Mesh":return new L(m);case"Dummy":return new O}throw new Error(`Unknown IR type: ${m[0]}`)}const x={COLORED:1,UNCOLORED:2},p=class p{constructor(b,E,_,o,h){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=E,this.ctx=_,this.canvasGraphicsFactory=o,this.baseTransform=h}createPatternCanvas(b){const E=this.operatorList,_=this.bbox,o=this.xstep,h=this.ystep,D=this.paintType,y=this.tilingType,l=this.color,k=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+y);const g=_[0],W=_[1],z=_[2],w=_[3],q=r.Util.singularValueDecompose2dScale(this.matrix),nt=r.Util.singularValueDecompose2dScale(this.baseTransform),at=[q[0]*nt[0],q[1]*nt[1]],G=this.getSizeAndScale(o,this.ctx.canvas.width,at[0]),ht=this.getSizeAndScale(h,this.ctx.canvas.height,at[1]),gt=b.cachedCanvases.getCanvas("pattern",G.size,ht.size,!0),vt=gt.context,St=k.createCanvasGraphics(vt);St.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(St,D,l);let P=g,n=W,a=z,i=w;return g<0&&(P=0,a+=Math.abs(g)),W<0&&(n=0,i+=Math.abs(W)),vt.translate(-(G.scale*P),-(ht.scale*n)),St.transform(G.scale,0,0,ht.scale,0,0),vt.save(),this.clipBbox(St,P,n,a,i),St.baseTransform=(0,u.getCurrentTransform)(St.ctx),St.executeOperatorList(E),St.endDrawing(),{canvas:gt.canvas,scaleX:G.scale,scaleY:ht.scale,offsetX:P,offsetY:n}}getSizeAndScale(b,E,_){b=Math.abs(b);const o=Math.max(p.MAX_PATTERN_SIZE,E);let h=Math.ceil(b*_);return h>=o?h=o:_=h/b,{scale:_,size:h}}clipBbox(b,E,_,o,h){const D=o-E,y=h-_;b.ctx.rect(E,_,D,y),b.current.updateRectMinMax((0,u.getCurrentTransform)(b.ctx),[E,_,o,h]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,E,_){const o=b.ctx,h=b.current;switch(E){case x.COLORED:const D=this.ctx;o.fillStyle=D.fillStyle,o.strokeStyle=D.strokeStyle,h.fillColor=D.fillStyle,h.strokeColor=D.strokeStyle;break;case x.UNCOLORED:const y=r.Util.makeHexColor(_[0],_[1],_[2]);o.fillStyle=y,o.strokeStyle=y,h.fillColor=y,h.strokeColor=y;break;default:throw new r.FormatError(`Unsupported paint type: ${E}`)}}getPattern(b,E,_,o){let h=_;o!==H.SHADING&&(h=r.Util.transform(h,E.baseTransform),this.matrix&&(h=r.Util.transform(h,this.matrix)));const D=this.createPatternCanvas(E);let y=new DOMMatrix(h);y=y.translate(D.offsetX,D.offsetY),y=y.scale(1/D.scaleX,1/D.scaleY);const l=b.createPattern(D.canvas,"repeat");return l.setTransform(y),l}};ee(p,"MAX_PATTERN_SIZE",3e3);let A=p;e.TilingPattern=A},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=H,e.convertToRGBA=u,e.grayToRGBA=lt;var r=M(1);function u(F){switch(F.kind){case r.ImageKind.GRAYSCALE_1BPP:return H(F);case r.ImageKind.RGB_24BPP:return B(F)}return null}function H({src:F,srcPos:C=0,dest:f,width:L,height:O,nonBlackColor:T=4294967295,inverseDecode:x=!1}){const A=r.FeatureTest.isLittleEndian?4278190080:255,[p,m]=x?[T,A]:[A,T],b=L>>3,E=L&7,_=F.length;f=new Uint32Array(f.buffer);let o=0;for(let h=0;h<O;h++){for(const y=C+b;C<y;C++){const l=C<_?F[C]:255;f[o++]=l&128?m:p,f[o++]=l&64?m:p,f[o++]=l&32?m:p,f[o++]=l&16?m:p,f[o++]=l&8?m:p,f[o++]=l&4?m:p,f[o++]=l&2?m:p,f[o++]=l&1?m:p}if(E===0)continue;const D=C<_?F[C++]:255;for(let y=0;y<E;y++)f[o++]=D&1<<7-y?m:p}return{srcPos:C,destPos:o}}function B({src:F,srcPos:C=0,dest:f,destPos:L=0,width:O,height:T}){let x=0;const A=F.length>>2,p=new Uint32Array(F.buffer,C,A);if(r.FeatureTest.isLittleEndian){for(;x<A-2;x+=3,L+=4){const m=p[x],b=p[x+1],E=p[x+2];f[L]=m|4278190080,f[L+1]=m>>>24|b<<8|4278190080,f[L+2]=b>>>16|E<<16|4278190080,f[L+3]=E>>>8|4278190080}for(let m=x*4,b=F.length;m<b;m+=3)f[L++]=F[m]|F[m+1]<<8|F[m+2]<<16|4278190080}else{for(;x<A-2;x+=3,L+=4){const m=p[x],b=p[x+1],E=p[x+2];f[L]=m|255,f[L+1]=m<<24|b>>>8|255,f[L+2]=b<<16|E>>>16|255,f[L+3]=E<<8|255}for(let m=x*4,b=F.length;m<b;m+=3)f[L++]=F[m]<<24|F[m+1]<<16|F[m+2]<<8|255}return{srcPos:C,destPos:L}}function lt(F,C){if(r.FeatureTest.isLittleEndian)for(let f=0,L=F.length;f<L;f++)C[f]=F[f]*65793|4278190080;else for(let f=0,L=F.length;f<L;f++)C[f]=F[f]*16843008|255}},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const M=Object.create(null);e.GlobalWorkerOptions=M,M.workerPort=null,M.workerSrc=""},(S,e,M)=>{var F,Pn,f,kn,O,Re;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=M(1);const u={UNKNOWN:0,DATA:1,ERROR:2},H={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function B(x){switch(x instanceof Error||typeof x=="object"&&x!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),x.name){case"AbortException":return new r.AbortException(x.message);case"MissingPDFException":return new r.MissingPDFException(x.message);case"PasswordException":return new r.PasswordException(x.message,x.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(x.message,x.status);case"UnknownErrorException":return new r.UnknownErrorException(x.message,x.details);default:return new r.UnknownErrorException(x.message,x.toString())}}class lt{constructor(A,p,m){$(this,F);$(this,f);$(this,O);this.sourceName=A,this.targetName=p,this.comObj=m,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const E=b.data;if(E.targetName!==this.sourceName)return;if(E.stream){X(this,f,kn).call(this,E);return}if(E.callback){const o=E.callbackId,h=this.callbackCapabilities[o];if(!h)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],E.callback===u.DATA)h.resolve(E.data);else if(E.callback===u.ERROR)h.reject(B(E.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[E.action];if(!_)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const o=this.sourceName,h=E.sourceName;new Promise(function(D){D(_(E.data))}).then(function(D){m.postMessage({sourceName:o,targetName:h,callback:u.DATA,callbackId:E.callbackId,data:D})},function(D){m.postMessage({sourceName:o,targetName:h,callback:u.ERROR,callbackId:E.callbackId,reason:B(D)})});return}if(E.streamId){X(this,F,Pn).call(this,E);return}_(E.data)},m.addEventListener("message",this._onComObjOnMessage)}on(A,p){const m=this.actionHandler;if(m[A])throw new Error(`There is already an actionName called "${A}"`);m[A]=p}send(A,p,m){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:p},m)}sendWithPromise(A,p,m){const b=this.callbackId++,E=new r.PromiseCapability;this.callbackCapabilities[b]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:b,data:p},m)}catch(_){E.reject(_)}return E.promise}sendWithStream(A,p,m,b){const E=this.streamId++,_=this.sourceName,o=this.targetName,h=this.comObj;return new ReadableStream({start:D=>{const y=new r.PromiseCapability;return this.streamControllers[E]={controller:D,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:_,targetName:o,action:A,streamId:E,data:p,desiredSize:D.desiredSize},b),y.promise},pull:D=>{const y=new r.PromiseCapability;return this.streamControllers[E].pullCall=y,h.postMessage({sourceName:_,targetName:o,stream:H.PULL,streamId:E,desiredSize:D.desiredSize}),y.promise},cancel:D=>{(0,r.assert)(D instanceof Error,"cancel must have a valid reason");const y=new r.PromiseCapability;return this.streamControllers[E].cancelCall=y,this.streamControllers[E].isClosed=!0,h.postMessage({sourceName:_,targetName:o,stream:H.CANCEL,streamId:E,reason:B(D)}),y.promise}},m)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}F=new WeakSet,Pn=function(A){const p=A.streamId,m=this.sourceName,b=A.sourceName,E=this.comObj,_=this,o=this.actionHandler[A.action],h={enqueue(D,y=1,l){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=y,k>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),E.postMessage({sourceName:m,targetName:b,stream:H.ENQUEUE,streamId:p,chunk:D},l)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:m,targetName:b,stream:H.CLOSE,streamId:p}),delete _.streamSinks[p])},error(D){(0,r.assert)(D instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:m,targetName:b,stream:H.ERROR,streamId:p,reason:B(D)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[p]=h,new Promise(function(D){D(o(A.data,h))}).then(function(){E.postMessage({sourceName:m,targetName:b,stream:H.START_COMPLETE,streamId:p,success:!0})},function(D){E.postMessage({sourceName:m,targetName:b,stream:H.START_COMPLETE,streamId:p,reason:B(D)})})},f=new WeakSet,kn=function(A){const p=A.streamId,m=this.sourceName,b=A.sourceName,E=this.comObj,_=this.streamControllers[p],o=this.streamSinks[p];switch(A.stream){case H.START_COMPLETE:A.success?_.startCall.resolve():_.startCall.reject(B(A.reason));break;case H.PULL_COMPLETE:A.success?_.pullCall.resolve():_.pullCall.reject(B(A.reason));break;case H.PULL:if(!o){E.postMessage({sourceName:m,targetName:b,stream:H.PULL_COMPLETE,streamId:p,success:!0});break}o.desiredSize<=0&&A.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=A.desiredSize,new Promise(function(h){var D;h((D=o.onPull)==null?void 0:D.call(o))}).then(function(){E.postMessage({sourceName:m,targetName:b,stream:H.PULL_COMPLETE,streamId:p,success:!0})},function(h){E.postMessage({sourceName:m,targetName:b,stream:H.PULL_COMPLETE,streamId:p,reason:B(h)})});break;case H.ENQUEUE:if((0,r.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(A.chunk);break;case H.CLOSE:if((0,r.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),X(this,O,Re).call(this,_,p);break;case H.ERROR:(0,r.assert)(_,"error should have stream controller"),_.controller.error(B(A.reason)),X(this,O,Re).call(this,_,p);break;case H.CANCEL_COMPLETE:A.success?_.cancelCall.resolve():_.cancelCall.reject(B(A.reason)),X(this,O,Re).call(this,_,p);break;case H.CANCEL:if(!o)break;new Promise(function(h){var D;h((D=o.onCancel)==null?void 0:D.call(o,B(A.reason)))}).then(function(){E.postMessage({sourceName:m,targetName:b,stream:H.CANCEL_COMPLETE,streamId:p,success:!0})},function(h){E.postMessage({sourceName:m,targetName:b,stream:H.CANCEL_COMPLETE,streamId:p,reason:B(h)})}),o.sinkCapability.reject(B(A.reason)),o.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},O=new WeakSet,Re=async function(A,p){var m,b,E;await Promise.allSettled([(m=A.startCall)==null?void 0:m.promise,(b=A.pullCall)==null?void 0:b.promise,(E=A.cancelCall)==null?void 0:E.promise]),delete this.streamControllers[p]},e.MessageHandler=lt},(S,e,M)=>{var H,B;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=M(1);class u{constructor({parsedData:F,rawData:C}){$(this,H,void 0);$(this,B,void 0);it(this,H,F),it(this,B,C)}getRaw(){return t(this,B)}get(F){return t(this,H).get(F)??null}getAll(){return(0,r.objectFromMap)(t(this,H))}has(F){return t(this,H).has(F)}}H=new WeakMap,B=new WeakMap,e.Metadata=u},(S,e,M)=>{var F,C,f,L,O,T,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=M(1),u=M(8);const H=Symbol("INTERNAL");class B{constructor(p,m){$(this,F,!0);this.name=p,this.intent=m}get visible(){return t(this,F)}_setVisible(p,m){p!==H&&(0,r.unreachable)("Internal method `_setVisible` called."),it(this,F,m)}}F=new WeakMap;class lt{constructor(p){$(this,T);$(this,C,null);$(this,f,new Map);$(this,L,null);$(this,O,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,it(this,O,p.order);for(const m of p.groups)t(this,f).set(m.id,new B(m.name,m.intent));if(p.baseState==="OFF")for(const m of t(this,f).values())m._setVisible(H,!1);for(const m of p.on)t(this,f).get(m)._setVisible(H,!0);for(const m of p.off)t(this,f).get(m)._setVisible(H,!1);it(this,L,this.getHash())}}isVisible(p){if(t(this,f).size===0)return!0;if(!p)return(0,r.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return t(this,f).has(p.id)?t(this,f).get(p.id).visible:((0,r.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return X(this,T,tn).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const m of p.ids){if(!t(this,f).has(m))return(0,r.warn)(`Optional content group not found: ${m}`),!0;if(t(this,f).get(m).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const m of p.ids){if(!t(this,f).has(m))return(0,r.warn)(`Optional content group not found: ${m}`),!0;if(!t(this,f).get(m).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const m of p.ids){if(!t(this,f).has(m))return(0,r.warn)(`Optional content group not found: ${m}`),!0;if(!t(this,f).get(m).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const m of p.ids){if(!t(this,f).has(m))return(0,r.warn)(`Optional content group not found: ${m}`),!0;if(t(this,f).get(m).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,r.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,m=!0){if(!t(this,f).has(p)){(0,r.warn)(`Optional content group not found: ${p}`);return}t(this,f).get(p)._setVisible(H,!!m),it(this,C,null)}get hasInitialVisibility(){return t(this,L)===null||this.getHash()===t(this,L)}getOrder(){return t(this,f).size?t(this,O)?t(this,O).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,r.objectFromMap)(t(this,f)):null}getGroup(p){return t(this,f).get(p)||null}getHash(){if(t(this,C)!==null)return t(this,C);const p=new u.MurmurHash3_64;for(const[m,b]of t(this,f))p.update(`${m}:${b.visible}`);return it(this,C,p.hexdigest())}}C=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakSet,tn=function(p){const m=p.length;if(m<2)return!0;const b=p[0];for(let E=1;E<m;E++){const _=p[E];let o;if(Array.isArray(_))o=X(this,T,tn).call(this,_);else if(t(this,f).has(_))o=t(this,f).get(_).visible;else return(0,r.warn)(`Optional content group not found: ${_}`),!0;switch(b){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return b==="And"},e.OptionalContentConfig=lt},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=M(1),u=M(6);class H{constructor({length:C,initialData:f,progressiveDone:L=!1,contentDispositionFilename:O=null,disableRange:T=!1,disableStream:x=!1},A){if((0,r.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=O,(f==null?void 0:f.length)>0){const p=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!x,this._isRangeSupported=!T,this._contentLength=C,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,m)=>{this._onReceiveData({begin:p,chunk:m})}),this._pdfDataRangeTransport.addProgressListener((p,m)=>{this._onProgress({loaded:p,total:m})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:C,chunk:f}){const L=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(C===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const O=this._rangeReaders.some(function(T){return T._begin!==C?!1:(T._enqueue(L),!0)});(0,r.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}_onProgress(C){var f,L,O,T;C.total===void 0?(L=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||L.call(f,{loaded:C.loaded}):(T=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||T.call(O,{loaded:C.loaded,total:C.total})}_onProgressiveDone(){var C;(C=this._fullRequestReader)==null||C.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const f=this._rangeReaders.indexOf(C);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new B(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,f){if(f<=this._progressiveDataLength)return null;const L=new lt(this,C,f);return this._pdfDataRangeTransport.requestDataRange(C,f),this._rangeReaders.push(L),L}cancelAllRequests(C){var f;(f=this._fullRequestReader)==null||f.cancel(C);for(const L of this._rangeReaders.slice(0))L.cancel(C);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=H;class B{constructor(C,f,L=!1,O=null){this._stream=C,this._done=L||!1,this._filename=(0,u.isPdfFile)(O)?O:null,this._queuedChunks=f||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new r.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lt{constructor(C,f,L){this._stream=C,this._begin=f,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(this._requests.length===0)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new r.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=M(1),u=M(20);function H(L,O,T){return{method:"GET",headers:L,signal:T.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function B(L){const O=new Headers;for(const T in L){const x=L[T];x!==void 0&&O.append(T,x)}return O}function lt(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,r.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class F{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C(this),this._fullRequestReader}getRangeReader(O,T){if(T<=this._progressiveDataLength)return null;const x=new f(this,O,T);return this._rangeRequestReaders.push(x),x}cancelAllRequests(O){var T;(T=this._fullRequestReader)==null||T.cancel(O);for(const x of this._rangeRequestReaders.slice(0))x.cancel(O)}}e.PDFFetchStream=F;class C{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const T=O.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new r.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=B(this._stream.httpHeaders);const x=T.url;fetch(x,H(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,u.validateResponseStatus)(A.status))throw(0,u.createResponseStatusError)(A.status,x);this._reader=A.body.getReader(),this._headersCapability.resolve();const p=E=>A.headers.get(E),{allowRangeRequests:m,suggestedLength:b}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=b||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._headersCapability.promise;const{value:O,done:T}=await this._reader.read();return T?{value:O,done:T}:(this._loaded+=O.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lt(O),done:!1})}cancel(O){var T;(T=this._reader)==null||T.cancel(O),this._abortController.abort()}}class f{constructor(O,T,x){this._stream=O,this._reader=null,this._loaded=0;const A=O.source;this._withCredentials=A.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!A.disableStream,this._abortController=new AbortController,this._headers=B(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${x-1}`);const p=A.url;fetch(p,H(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,u.validateResponseStatus)(m.status))throw(0,u.createResponseStatusError)(m.status,p);this._readCapability.resolve(),this._reader=m.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var x;await this._readCapability.promise;const{value:O,done:T}=await this._reader.read();return T?{value:O,done:T}:(this._loaded+=O.byteLength,(x=this.onProgress)==null||x.call(this,{loaded:this._loaded}),{value:lt(O),done:!1})}cancel(O){var T;(T=this._reader)==null||T.cancel(O),this._abortController.abort()}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=F,e.extractFilenameFromHeader=lt,e.validateRangeRequestCapabilities=B,e.validateResponseStatus=C;var r=M(1),u=M(21),H=M(6);function B({getResponseHeader:f,isHttp:L,rangeChunkSize:O,disableRange:T}){const x={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(f("Content-Length"),10);return!Number.isInteger(A)||(x.suggestedLength=A,A<=2*O)||T||!L||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(x.allowRangeRequests=!0),x}function lt(f){const L=f("Content-Disposition");if(L){let O=(0,u.getFilenameFromContentDispositionHeader)(L);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,H.isPdfFile)(O))return O}return null}function F(f,L){return f===404||f===0&&L.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+L+'".'):new r.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${L}".`,f)}function C(f){return f===200||f===206}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=u;var r=M(1);function u(H){let B=!0,lt=F("filename\\*","i").exec(H);if(lt){lt=lt[1];let A=O(lt);return A=unescape(A),A=T(A),A=x(A),f(A)}if(lt=L(H),lt){const A=x(lt);return f(A)}if(lt=F("filename","i").exec(H),lt){lt=lt[1];let A=O(lt);return A=x(A),f(A)}function F(A,p){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function C(A,p){if(A){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(A,{fatal:!0}),b=(0,r.stringToBytes)(p);p=m.decode(b),B=!1}catch{}}return p}function f(A){return B&&/[\x80-\xff]/.test(A)&&(A=C("utf-8",A),B&&(A=C("iso-8859-1",A))),A}function L(A){const p=[];let m;const b=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=b.exec(A))!==null;){let[,_,o,h]=m;if(_=parseInt(_,10),_ in p){if(_===0)break;continue}p[_]=[o,h]}const E=[];for(let _=0;_<p.length&&_ in p;++_){let[o,h]=p[_];h=O(h),o&&(h=unescape(h),_===0&&(h=T(h))),E.push(h)}return E.join("")}function O(A){if(A.startsWith('"')){const p=A.slice(1).split('\\"');for(let m=0;m<p.length;++m){const b=p[m].indexOf('"');b!==-1&&(p[m]=p[m].slice(0,b),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}A=p.join('"')}return A}function T(A){const p=A.indexOf("'");if(p===-1)return A;const m=A.slice(0,p),E=A.slice(p+1).replace(/^[^']*'/,"");return C(m,E)}function x(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,b,E){if(b==="q"||b==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,o){return String.fromCharCode(parseInt(o,16))}),C(m,E);try{E=atob(E)}catch{}return C(m,E)})}return""}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=M(1),u=M(20);const H=200,B=206;function lt(O){const T=O.response;return typeof T!="string"?T:(0,r.stringToBytes)(T).buffer}class F{constructor(T,x={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&x.httpHeaders||Object.create(null),this.withCredentials=x.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,x,A){const p={begin:T,end:x};for(const m in A)p[m]=A[m];return this.request(p)}requestFull(T){return this.request(T)}request(T){const x=new XMLHttpRequest,A=this.currXhrId++,p=this.pendingRequests[A]={xhr:x};x.open("GET",this.url),x.withCredentials=this.withCredentials;for(const m in this.httpHeaders){const b=this.httpHeaders[m];b!==void 0&&x.setRequestHeader(m,b)}return this.isHttp&&"begin"in T&&"end"in T?(x.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),p.expectedStatus=B):p.expectedStatus=H,x.responseType="arraybuffer",T.onError&&(x.onerror=function(m){T.onError(x.status)}),x.onreadystatechange=this.onStateChange.bind(this,A),x.onprogress=this.onProgress.bind(this,A),p.onHeadersReceived=T.onHeadersReceived,p.onDone=T.onDone,p.onError=T.onError,p.onProgress=T.onProgress,x.send(null),A}onProgress(T,x){var p;const A=this.pendingRequests[T];A&&((p=A.onProgress)==null||p.call(A,x))}onStateChange(T,x){var _,o,h;const A=this.pendingRequests[T];if(!A)return;const p=A.xhr;if(p.readyState>=2&&A.onHeadersReceived&&(A.onHeadersReceived(),delete A.onHeadersReceived),p.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],p.status===0&&this.isHttp){(_=A.onError)==null||_.call(A,p.status);return}const m=p.status||H;if(!(m===H&&A.expectedStatus===B)&&m!==A.expectedStatus){(o=A.onError)==null||o.call(A,p.status);return}const E=lt(p);if(m===B){const D=p.getResponseHeader("Content-Range"),y=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);A.onDone({begin:parseInt(y[1],10),chunk:E})}else E?A.onDone({begin:0,chunk:E}):(h=A.onError)==null||h.call(A,p.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const x=this.pendingRequests[T].xhr;delete this.pendingRequests[T],x.abort()}}class C{constructor(T){this._source=T,this._manager=new F(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const x=this._rangeRequestReaders.indexOf(T);x>=0&&this._rangeRequestReaders.splice(x,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(T,x){const A=new L(this._manager,T,x);return A.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(A),A}cancelAllRequests(T){var x;(x=this._fullRequestReader)==null||x.cancel(T);for(const A of this._rangeRequestReaders.slice(0))A.cancel(T)}}e.PDFNetworkStream=C;class f{constructor(T,x){this._manager=T;const A={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._fullRequestId=T.requestFull(A),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=x.disableRange||!1,this._contentLength=x.length,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,x=this._manager.getRequestXhr(T),A=b=>x.getResponseHeader(b),{allowRangeRequests:p,suggestedLength:m}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=m||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(A),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,u.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var x;(x=this.onProgress)==null||x.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new r.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(T,x,A){this._manager=T;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(x,A,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const x=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunk=x,this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,u.createResponseStatusError)(T,this._url);for(const x of this._requests)x.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var x;this.isStreamingSupported||(x=this.onProgress)==null||x.call(this,{loaded:T.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const x=this._queuedChunk;return this._queuedChunk=null,{value:x,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new r.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=M(1),u=M(20);const H=/^file:\/\/\/[a-zA-Z]:\//;function B(A){const p=require$$5,m=p.parse(A);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(A)?p.parse(`file:///${A}`):(m.host||(m.protocol="file:"),m)}class lt{constructor(p){this.source=p,this.url=B(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new L(this),this._fullRequestReader}getRangeReader(p,m){if(m<=this._progressiveDataLength)return null;const b=this.isFsUrl?new x(this,p,m):new O(this,p,m);return this._rangeRequestReaders.push(b),b}cancelAllRequests(p){var m;(m=this._fullRequestReader)==null||m.cancel(p);for(const b of this._rangeRequestReaders.slice(0))b.cancel(p)}}e.PDFNodeStream=lt;class F{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const m=p.source;this._contentLength=m.length,this._loaded=0,this._filename=null,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=p.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",m=>{this._error(m)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const m=p.source;this._isStreamingSupported=!m.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=p.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",m=>{this._error(m)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(A,p){return{protocol:A.protocol,auth:A.auth,host:A.hostname,port:A.port,path:A.path,method:"GET",headers:p}}class L extends F{constructor(p){super(p);const m=b=>{if(b.statusCode===404){const h=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(b);const E=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:_,suggestedLength:o}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=o||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(E)};if(this._request=null,this._url.protocol==="http:"){const b=require$$5;this._request=b.request(f(this._url,p.httpHeaders),m)}else{const b=require$$5;this._request=b.request(f(this._url,p.httpHeaders),m)}this._request.on("error",b=>{this._storedError=b,this._headersCapability.reject(b)}),this._request.end()}}class O extends C{constructor(p,m,b){super(p),this._httpHeaders={};for(const _ in p.httpHeaders){const o=p.httpHeaders[_];o!==void 0&&(this._httpHeaders[_]=o)}this._httpHeaders.Range=`bytes=${m}-${b-1}`;const E=_=>{if(_.statusCode===404){const o=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(_)};if(this._request=null,this._url.protocol==="http:"){const _=require$$5;this._request=_.request(f(this._url,this._httpHeaders),E)}else{const _=require$$5;this._request=_.request(f(this._url,this._httpHeaders),E)}this._request.on("error",_=>{this._storedError=_}),this._request.end()}}class T extends F{constructor(p){super(p);let m=decodeURIComponent(this._url.path);H.test(this._url.href)&&(m=m.replace(/^\//,""));const b=require$$5;b.lstat(m,(E,_)=>{if(E){E.code==="ENOENT"&&(E=new r.MissingPDFException(`Missing PDF "${m}".`)),this._storedError=E,this._headersCapability.reject(E);return}this._contentLength=_.size,this._setReadableStream(b.createReadStream(m)),this._headersCapability.resolve()})}}class x extends C{constructor(p,m,b){super(p);let E=decodeURIComponent(this._url.path);H.test(this._url.href)&&(E=E.replace(/^\//,""));const _=require$$5;this._setReadableStream(_.createReadStream(E,{start:m,end:b-1}))}}},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=M(6),u=M(1);const H={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},B="http://www.w3.org/XML/1998/namespace",lt="http://www.w3.org/1999/xlink",F=["butt","round","square"],C=["miter","round","bevel"],f=function(_,o="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([_],{type:o}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${o};base64,`;for(let l=0,k=_.length;l<k;l+=3){const g=_[l]&255,W=_[l+1]&255,z=_[l+2]&255,w=g>>2,q=(g&3)<<4|W>>4,nt=l+1<k?(W&15)<<2|z>>6:64,at=l+2<k?z&63:64;y+=D[w]+D[q]+D[nt]+D[at]}return y},L=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,h=new Int32Array(256);for(let z=0;z<256;z++){let w=z;for(let q=0;q<8;q++)w=w&1?3988292384^w>>1&2147483647:w>>1&2147483647;h[z]=w}function D(z,w,q){let nt=-1;for(let at=w;at<q;at++){const G=(nt^z[at])&255,ht=h[G];nt=nt>>>8^ht}return nt^-1}function y(z,w,q,nt){let at=nt;const G=w.length;q[at]=G>>24&255,q[at+1]=G>>16&255,q[at+2]=G>>8&255,q[at+3]=G&255,at+=4,q[at]=z.charCodeAt(0)&255,q[at+1]=z.charCodeAt(1)&255,q[at+2]=z.charCodeAt(2)&255,q[at+3]=z.charCodeAt(3)&255,at+=4,q.set(w,at),at+=w.length;const ht=D(q,nt+4,at);q[at]=ht>>24&255,q[at+1]=ht>>16&255,q[at+2]=ht>>8&255,q[at+3]=ht&255}function l(z,w,q){let nt=1,at=0;for(let G=w;G<q;++G)nt=(nt+(z[G]&255))%65521,at=(at+nt)%65521;return at<<16|nt}function k(z){if(!u.isNodeJS)return g(z);try{const w=parseInt(process.versions.node)>=8?z:Buffer.from(z),q=require$$5.deflateSync(w,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(w){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+w)}return g(z)}function g(z){let w=z.length;const q=65535,nt=Math.ceil(w/q),at=new Uint8Array(2+w+nt*5+4);let G=0;at[G++]=120,at[G++]=156;let ht=0;for(;w>q;)at[G++]=0,at[G++]=255,at[G++]=255,at[G++]=0,at[G++]=0,at.set(z.subarray(ht,ht+q),G),G+=q,ht+=q,w-=q;at[G++]=1,at[G++]=w&255,at[G++]=w>>8&255,at[G++]=~w&65535&255,at[G++]=(~w&65535)>>8&255,at.set(z.subarray(ht),G),G+=z.length-ht;const gt=l(z,0,z.length);return at[G++]=gt>>24&255,at[G++]=gt>>16&255,at[G++]=gt>>8&255,at[G++]=gt&255,at}function W(z,w,q,nt){const at=z.width,G=z.height;let ht,gt,vt;const St=z.data;switch(w){case u.ImageKind.GRAYSCALE_1BPP:gt=0,ht=1,vt=at+7>>3;break;case u.ImageKind.RGB_24BPP:gt=2,ht=8,vt=at*3;break;case u.ImageKind.RGBA_32BPP:gt=6,ht=8,vt=at*4;break;default:throw new Error("invalid format")}const P=new Uint8Array((1+vt)*G);let n=0,a=0;for(let U=0;U<G;++U)P[n++]=0,P.set(St.subarray(a,a+vt),n),a+=vt,n+=vt;if(w===u.ImageKind.GRAYSCALE_1BPP&&nt){n=0;for(let U=0;U<G;U++){n++;for(let st=0;st<vt;st++)P[n++]^=255}}const i=new Uint8Array([at>>24&255,at>>16&255,at>>8&255,at&255,G>>24&255,G>>16&255,G>>8&255,G&255,ht,gt,0,0,0]),c=k(P),d=_.length+o*3+i.length+c.length,R=new Uint8Array(d);let I=0;return R.set(_,I),I+=_.length,y("IHDR",i,R,I),I+=o+i.length,y("IDATA",c,R,I),I+=o+c.length,y("IEND",new Uint8Array(0),R,I),f(R,"image/png",q)}return function(w,q,nt){const at=w.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:w.kind;return W(w,at,q,nt)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=H.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=H.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,h){this.x=o,this.y=h}}function T(_){let o=[];const h=[];for(const D of _){if(D.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),h.push(o),o=o.at(-1).items;continue}D.fn==="restore"?o=h.pop():o.push(D)}return o}function x(_){if(Number.isInteger(_))return _.toString();const o=_.toFixed(10);let h=o.length-1;if(o[h]!=="0")return o;do h--;while(o[h]==="0");return o.substring(0,o[h]==="."?h:h+1)}function A(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${x(_[0])} ${x(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2]){const o=Math.acos(_[0])*180/Math.PI;return`rotate(${x(o)})`}}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${x(_[4])} ${x(_[5])})`;return`matrix(${x(_[0])} ${x(_[1])} ${x(_[2])} ${x(_[3])} ${x(_[4])} ${x(_[5])})`}let p=0,m=0,b=0;class E{constructor(o,h,D=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new O,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(const y in u.OPS)this._operatorIdMapping[u.OPS[y]]=y}getObject(o,h=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):h}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const h=o.fnArray,D=o.argsArray;for(let y=0,l=h.length;y<l;y++)if(h[y]===u.OPS.dependency)for(const k of D[y]){const g=k.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(z=>{g.get(k,z)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(o,h,D,y,l,k){const g=[o,h,D,y,l,k];this.transformMatrix=u.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(o,h){this.viewport=h;const D=this._initialize(h);return this.loadDependencies(o).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),D))}convertOpList(o){const h=this._operatorIdMapping,D=o.argsArray,y=o.fnArray,l=[];for(let k=0,g=y.length;k<g;k++){const W=y[k];l.push({fnId:W,fn:h[W],args:D[k]})}return T(l)}executeOpTree(o){for(const h of o){const D=h.fn,y=h.fnId,l=h.args;switch(y|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(l);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case u.OPS.setFont:this.setFont(l);break;case u.OPS.showText:this.showText(l[0]);break;case u.OPS.showSpacedText:this.showText(l[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(l[0],l[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case u.OPS.setHScale:this.setHScale(l[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.setTextRise:this.setTextRise(l[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case u.OPS.setLineWidth:this.setLineWidth(l[0]);break;case u.OPS.setLineJoin:this.setLineJoin(l[0]);break;case u.OPS.setLineCap:this.setLineCap(l[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case u.OPS.setFillColorN:this.setFillColorN(l);break;case u.OPS.shadingFill:this.shadingFill(l[0]);break;case u.OPS.setDash:this.setDash(l[0],l[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case u.OPS.setFlatness:this.setFlatness(l[0]);break;case u.OPS.setGState:this.setGState(l[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case u.OPS.constructPath:this.constructPath(l[0],l[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,u.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,h,D,y,l,k){const g=this.current;g.textMatrix=g.lineMatrix=[o,h,D,y,l,k],g.textMatrixScale=Math.hypot(o,h),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${x(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",x(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=u.IDENTITY_MATRIX,o.lineMatrix=u.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,h){const D=this.current;D.x=D.lineX+=o,D.y=D.lineY+=h,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${x(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",x(-D.y))}showText(o){const h=this.current,D=h.font,y=h.fontSize;if(y===0)return;const l=h.fontSizeScale,k=h.charSpacing,g=h.wordSpacing,W=h.fontDirection,z=h.textHScale*W,w=D.vertical,q=w?1:-1,nt=D.defaultVMetrics,at=y*h.fontMatrix[0];let G=0;for(const vt of o){if(vt===null){G+=W*g;continue}else if(typeof vt=="number"){G+=q*vt*y/1e3;continue}const St=(vt.isSpace?g:0)+k,P=vt.fontChar;let n,a,i=vt.width;if(w){let d;const R=vt.vmetric||nt;d=vt.vmetric?R[1]:i*.5,d=-d*at;const I=R[2]*at;i=R?-R[0]:i,n=d/l,a=(G+I)/l}else n=G/l,a=0;(vt.isInFont||D.missingFile)&&(h.xcoords.push(h.x+n),w&&h.ycoords.push(-h.y+a),h.tspan.textContent+=P);const c=w?i*at-St*W:i*at+St*W;G+=c}h.tspan.setAttributeNS(null,"x",h.xcoords.map(x).join(" ")),w?h.tspan.setAttributeNS(null,"y",h.ycoords.map(x).join(" ")):h.tspan.setAttributeNS(null,"y",x(-h.y)),w?h.y-=G:h.x+=G*z,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${x(h.fontSize)}px`),h.fontStyle!==H.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==H.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const ht=h.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(ht===u.TextRenderingMode.FILL||ht===u.TextRenderingMode.FILL_STROKE?(h.fillColor!==H.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),ht===u.TextRenderingMode.STROKE||ht===u.TextRenderingMode.FILL_STROKE){const vt=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,vt)}let gt=h.textMatrix;h.textRise!==0&&(gt=gt.slice(),gt[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform",`${A(gt)} scale(${x(z)}, -1)`),h.txtElement.setAttributeNS(B,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(o,h){this.setLeading(-h),this.moveText(o,h)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=f(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${h}); }
`}setFont(o){const h=this.current,D=this.commonObjs.get(o[0]);let y=o[1];h.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),h.fontMatrix=D.fontMatrix||u.FONT_IDENTITY_MATRIX;let l="normal";D.black?l="900":D.bold&&(l="bold");const k=D.italic?"italic":"normal";y<0?(y=-y,h.fontDirection=-1):h.fontDirection=1,h.fontSize=y,h.fontFamily=D.loadedName,h.fontWeight=l,h.fontStyle=k,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",x(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const o=this.current;o.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=o.txtElement)!=null&&h.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=F[o]}setLineJoin(o){this.current.lineJoin=C[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,h,D){this.current.strokeColor=u.Util.makeHexColor(o,h,D)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,h,D){this.current.fillColor=u.Util.makeHexColor(o,h,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:h,height:D}=this.viewport,y=u.Util.inverseTransform(this.transformMatrix),[l,k,g,W]=u.Util.getAxialAlignedBoundingBox([0,0,h,D],y),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",l),z.setAttributeNS(null,"y",k),z.setAttributeNS(null,"width",g-l),z.setAttributeNS(null,"height",W-k),z.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(z)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const h=o[1],D=o[2],y=o[3]||u.IDENTITY_MATRIX,[l,k,g,W]=o[4],z=o[5],w=o[6],q=o[7],nt=`shading${b++}`,[at,G,ht,gt]=u.Util.normalizeRect([...u.Util.applyTransform([l,k],y),...u.Util.applyTransform([g,W],y)]),[vt,St]=u.Util.singularValueDecompose2dScale(y),P=z*vt,n=w*St,a=this.svgFactory.createElement("svg:pattern");a.setAttributeNS(null,"id",nt),a.setAttributeNS(null,"patternUnits","userSpaceOnUse"),a.setAttributeNS(null,"width",P),a.setAttributeNS(null,"height",n),a.setAttributeNS(null,"x",`${at}`),a.setAttributeNS(null,"y",`${G}`);const i=this.svg,c=this.transformMatrix,d=this.current.fillColor,R=this.current.strokeColor,I=this.svgFactory.create(ht-at,gt-G);if(this.svg=I,this.transformMatrix=y,q===2){const U=u.Util.makeHexColor(...h);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(D)),this.svg=i,this.transformMatrix=c,this.current.fillColor=d,this.current.strokeColor=R,a.append(I.childNodes[0]),this.defs.append(a),`url(#${nt})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const h=`shading${b++}`,D=o[3];let y;switch(o[1]){case"axial":const l=o[4],k=o[5];y=this.svgFactory.createElement("svg:linearGradient"),y.setAttributeNS(null,"id",h),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"x1",l[0]),y.setAttributeNS(null,"y1",l[1]),y.setAttributeNS(null,"x2",k[0]),y.setAttributeNS(null,"y2",k[1]);break;case"radial":const g=o[4],W=o[5],z=o[6],w=o[7];y=this.svgFactory.createElement("svg:radialGradient"),y.setAttributeNS(null,"id",h),y.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),y.setAttributeNS(null,"cx",W[0]),y.setAttributeNS(null,"cy",W[1]),y.setAttributeNS(null,"r",w),y.setAttributeNS(null,"fx",g[0]),y.setAttributeNS(null,"fy",g[1]),y.setAttributeNS(null,"fr",z);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const l of D){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",l[0]),k.setAttributeNS(null,"stop-color",l[1]),y.append(k)}return this.defs.append(y),`url(#${h})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,h){this.current.dashArray=o,this.current.dashPhase=h}constructPath(o,h){const D=this.current;let y=D.x,l=D.y,k=[],g=0;for(const W of o)switch(W|0){case u.OPS.rectangle:y=h[g++],l=h[g++];const z=h[g++],w=h[g++],q=y+z,nt=l+w;k.push("M",x(y),x(l),"L",x(q),x(l),"L",x(q),x(nt),"L",x(y),x(nt),"Z");break;case u.OPS.moveTo:y=h[g++],l=h[g++],k.push("M",x(y),x(l));break;case u.OPS.lineTo:y=h[g++],l=h[g++],k.push("L",x(y),x(l));break;case u.OPS.curveTo:y=h[g+4],l=h[g+5],k.push("C",x(h[g]),x(h[g+1]),x(h[g+2]),x(h[g+3]),x(y),x(l)),g+=6;break;case u.OPS.curveTo2:k.push("C",x(y),x(l),x(h[g]),x(h[g+1]),x(h[g+2]),x(h[g+3])),y=h[g+2],l=h[g+3],g+=4;break;case u.OPS.curveTo3:y=h[g+2],l=h[g+3],k.push("C",x(h[g]),x(h[g+1]),x(y),x(l),x(y),x(l)),g+=4;break;case u.OPS.closePath:k.push("Z");break}k=k.join(" "),D.path&&o.length>0&&o[0]!==u.OPS.rectangle&&o[0]!==u.OPS.moveTo?k=D.path.getAttributeNS(null,"d")+k:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",k),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(y,l)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const h=`clippath${p++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",h),D.setAttributeNS(null,"transform",A(this.transformMatrix));const y=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?y.setAttributeNS(null,"clip-rule","evenodd"):y.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(y),this.defs.append(D),o.activeClipUrl){o.clipGroup=null;for(const l of this.extraStack)l.clipGroup=null;D.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${h})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const h=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",h)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[h,D]of o)switch(h){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,u.warn)(`Unimplemented graphic state operator ${h}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,h=1){const D=this.current;let y=D.dashArray;h!==1&&y.length>0&&(y=y.map(function(l){return h*l})),o.setAttributeNS(null,"stroke",D.strokeColor),o.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",x(D.miterLimit)),o.setAttributeNS(null,"stroke-linecap",D.lineCap),o.setAttributeNS(null,"stroke-linejoin",D.lineJoin),o.setAttributeNS(null,"stroke-width",x(h*D.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",y.map(x).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",x(h*D.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const h=this.getObject(o);if(!h){(0,u.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(h)}paintInlineImageXObject(o,h){const D=o.width,y=o.height,l=L(o,this.forceDataSchema,!!h),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",x(D)),k.setAttributeNS(null,"height",x(y)),this.current.element=k,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(lt,"xlink:href",l),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",x(-y)),g.setAttributeNS(null,"width",x(D)+"px"),g.setAttributeNS(null,"height",x(y)+"px"),g.setAttributeNS(null,"transform",`scale(${x(1/D)} ${x(-1/y)})`),h?h.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(o){const h=this.getObject(o.data,o);if(h.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const D=this.current,y=h.width,l=h.height,k=D.fillColor;D.maskId=`mask${m++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",D.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",x(y)),W.setAttributeNS(null,"height",x(l)),W.setAttributeNS(null,"fill",k),W.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(g),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(h,g)}paintFormXObjectBegin(o,h){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),h){const D=h[2]-h[0],y=h[3]-h[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",h[0]),l.setAttributeNS(null,"y",h[1]),l.setAttributeNS(null,"width",x(D)),l.setAttributeNS(null,"height",x(y)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const h=this.svgFactory.create(o.width,o.height),D=this.svgFactory.createElement("svg:defs");h.append(D),this.defs=D;const y=this.svgFactory.createElement("svg:g");return y.setAttributeNS(null,"transform",A(o.transform)),h.append(y),this.svg=y,h}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=E},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class M{static textContent(u){const H=[],B={items:H,styles:Object.create(null)};function lt(F){var L;if(!F)return;let C=null;const f=F.name;if(f==="#text")C=F.value;else if(M.shouldBuildText(f))(L=F==null?void 0:F.attributes)!=null&&L.textContent?C=F.attributes.textContent:F.value&&(C=F.value);else return;if(C!==null&&H.push({str:C}),!!F.children)for(const O of F.children)lt(O)}return lt(u),B}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}e.XfaText=M},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=A,e.updateTextLayer=p;var r=M(1),u=M(6);const H=1e5,B=30,lt=.8,F=new Map;function C(m,b){let E;if(b&&r.FeatureTest.isOffscreenCanvasSupported)E=new OffscreenCanvas(m,m).getContext("2d",{alpha:!1});else{const _=document.createElement("canvas");_.width=_.height=m,E=_.getContext("2d",{alpha:!1})}return E}function f(m,b){const E=F.get(m);if(E)return E;const _=C(B,b);_.font=`${B}px ${m}`;const o=_.measureText("");let h=o.fontBoundingBoxAscent,D=Math.abs(o.fontBoundingBoxDescent);if(h){const l=h/(h+D);return F.set(m,l),_.canvas.width=_.canvas.height=0,l}_.strokeStyle="red",_.clearRect(0,0,B,B),_.strokeText("g",0,0);let y=_.getImageData(0,0,B,B).data;D=0;for(let l=y.length-1-3;l>=0;l-=4)if(y[l]>0){D=Math.ceil(l/4/B);break}_.clearRect(0,0,B,B),_.strokeText("A",0,B),y=_.getImageData(0,0,B,B).data,h=0;for(let l=0,k=y.length;l<k;l+=4)if(y[l]>0){h=B-Math.floor(l/4/B);break}if(_.canvas.width=_.canvas.height=0,h){const l=h/(h+D);return F.set(m,l),l}return F.set(m,lt),lt}function L(m,b,E){const _=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:b.str!=="",hasEOL:b.hasEOL,fontSize:0};m._textDivs.push(_);const h=r.Util.transform(m._transform,b.transform);let D=Math.atan2(h[1],h[0]);const y=E[b.fontName];y.vertical&&(D+=Math.PI/2);const l=Math.hypot(h[2],h[3]),k=l*f(y.fontFamily,m._isOffscreenCanvasSupported);let g,W;D===0?(g=h[4],W=h[5]-k):(g=h[4]+k*Math.sin(D),W=h[5]-k*Math.cos(D));const z="calc(var(--scale-factor)*",w=_.style;m._container===m._rootContainer?(w.left=`${(100*g/m._pageWidth).toFixed(2)}%`,w.top=`${(100*W/m._pageHeight).toFixed(2)}%`):(w.left=`${z}${g.toFixed(2)}px)`,w.top=`${z}${W.toFixed(2)}px)`),w.fontSize=`${z}${l.toFixed(2)}px)`,w.fontFamily=y.fontFamily,o.fontSize=l,_.setAttribute("role","presentation"),_.textContent=b.str,_.dir=b.dir,m._fontInspectorEnabled&&(_.dataset.fontName=b.fontName),D!==0&&(o.angle=D*(180/Math.PI));let q=!1;if(b.str.length>1)q=!0;else if(b.str!==" "&&b.transform[0]!==b.transform[3]){const nt=Math.abs(b.transform[0]),at=Math.abs(b.transform[3]);nt!==at&&Math.max(nt,at)/Math.min(nt,at)>1.5&&(q=!0)}q&&(o.canvasWidth=y.vertical?b.height:b.width),m._textDivProperties.set(_,o),m._isReadableStream&&m._layoutText(_)}function O(m){const{div:b,scale:E,properties:_,ctx:o,prevFontSize:h,prevFontFamily:D}=m,{style:y}=b;let l="";if(_.canvasWidth!==0&&_.hasText){const{fontFamily:k}=y,{canvasWidth:g,fontSize:W}=_;(h!==W||D!==k)&&(o.font=`${W*E}px ${k}`,m.prevFontSize=W,m.prevFontFamily=k);const{width:z}=o.measureText(b.textContent);z>0&&(l=`scaleX(${g*E/z})`)}_.angle!==0&&(l=`rotate(${_.angle}deg) ${l}`),l.length>0&&(y.transform=l)}function T(m){if(m._canceled)return;const b=m._textDivs,E=m._capability;if(b.length>H){E.resolve();return}if(!m._isReadableStream)for(const o of b)m._layoutText(o);E.resolve()}class x{constructor({textContentSource:b,container:E,viewport:_,textDivs:o,textDivProperties:h,textContentItemsStr:D,isOffscreenCanvasSupported:y}){var z;this._textContentSource=b,this._isReadableStream=b instanceof ReadableStream,this._container=this._rootContainer=E,this._textDivs=o||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=y,this._fontInspectorEnabled=!!((z=globalThis.FontInspector)!=null&&z.enabled),this._reader=null,this._textDivProperties=h||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:C(0,y)};const{pageWidth:l,pageHeight:k,pageX:g,pageY:W}=_.rawDims;this._transform=[1,0,0,-1,-g,W+k],this._pageWidth=l,this._pageHeight=k,(0,u.setLayerDimensions)(E,_),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(b,E){for(const _ of b){if(_.str===void 0){if(_.type==="beginMarkedContentProps"||_.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),_.id!==null&&this._container.setAttribute("id",`${_.id}`),o.append(this._container)}else _.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(_.str),L(this,_,E)}}_layoutText(b){const E=this._layoutTextParams.properties=this._textDivProperties.get(b);if(this._layoutTextParams.div=b,O(this._layoutTextParams),E.hasText&&this._container.append(b),E.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(){const b=new r.PromiseCapability;let E=Object.create(null);if(this._isReadableStream){const _=()=>{this._reader.read().then(({value:o,done:h})=>{if(h){b.resolve();return}Object.assign(E,o.styles),this._processItems(o.items,E),_()},b.reject)};this._reader=this._textContentSource.getReader(),_()}else if(this._textContentSource){const{items:_,styles:o}=this._textContentSource;this._processItems(_,o),b.resolve()}else throw new Error('No "textContentSource" parameter specified.');b.promise.then(()=>{E=null,T(this)},this._capability.reject)}}e.TextLayerRenderTask=x;function A(m){!m.textContentSource&&(m.textContent||m.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),m.textContentSource=m.textContent||m.textContentStream);const{container:b,viewport:E}=m,_=getComputedStyle(b),o=_.getPropertyValue("visibility"),h=parseFloat(_.getPropertyValue("--scale-factor"));o==="visible"&&(!h||Math.abs(h-E.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const D=new x(m);return D._render(),D}function p({container:m,viewport:b,textDivs:E,textDivProperties:_,isOffscreenCanvasSupported:o,mustRotate:h=!0,mustRescale:D=!0}){if(h&&(0,u.setLayerDimensions)(m,{rotation:b.rotation}),D){const y=C(0,o),k={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y};for(const g of E)k.properties=_.get(g),k.div=g,O(k)}}},(S,e,M)=>{var f,L,O,T,x,A,p,m,b,E,_,en,h,Pe,y,nn,k,sn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=M(1),u=M(4),H=M(28),B=M(33),lt=M(6),F=M(34);const W=class W{constructor({uiManager:w,pageIndex:q,div:nt,accessibilityManager:at,annotationLayer:G,viewport:ht,l10n:gt}){$(this,_);$(this,h);$(this,y);$(this,k);$(this,f,void 0);$(this,L,!1);$(this,O,null);$(this,T,this.pointerup.bind(this));$(this,x,this.pointerdown.bind(this));$(this,A,new Map);$(this,p,!1);$(this,m,!1);$(this,b,!1);$(this,E,void 0);const vt=[H.FreeTextEditor,B.InkEditor,F.StampEditor];if(!W._initialized){W._initialized=!0;for(const St of vt)St.initialize(gt)}w.registerEditorTypes(vt),it(this,E,w),this.pageIndex=q,this.div=nt,it(this,f,at),it(this,O,G),this.viewport=ht,t(this,E).addLayer(this)}get isEmpty(){return t(this,A).size===0}updateToolbar(w){t(this,E).updateToolbar(w)}updateMode(w=t(this,E).getMode()){X(this,k,sn).call(this),w===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),w!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",w===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",w===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",w===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(w){if(!w&&t(this,E).getMode()!==r.AnnotationEditorType.INK)return;if(!w){for(const nt of t(this,A).values())if(nt.isEmpty()){nt.setInBackground();return}}X(this,h,Pe).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(w){t(this,E).setEditingState(w)}addCommands(w){t(this,E).addCommands(w)}enable(){this.div.style.pointerEvents="auto";const w=new Set;for(const nt of t(this,A).values())nt.enableEditing(),nt.annotationElementId&&w.add(nt.annotationElementId);if(!t(this,O))return;const q=t(this,O).getEditableAnnotations();for(const nt of q){if(nt.hide(),t(this,E).isDeletedAnnotationElement(nt.data.id)||w.has(nt.data.id))continue;const at=this.deserialize(nt);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var q;it(this,b,!0),this.div.style.pointerEvents="none";const w=new Set;for(const nt of t(this,A).values()){if(nt.disableEditing(),!nt.annotationElementId||nt.serialize()!==null){w.add(nt.annotationElementId);continue}(q=this.getEditableAnnotation(nt.annotationElementId))==null||q.show(),nt.remove()}if(t(this,O)){const nt=t(this,O).getEditableAnnotations();for(const at of nt){const{id:G}=at.data;w.has(G)||t(this,E).isDeletedAnnotationElement(G)||at.show()}}X(this,k,sn).call(this),this.isEmpty&&(this.div.hidden=!0),it(this,b,!1)}getEditableAnnotation(w){var q;return((q=t(this,O))==null?void 0:q.getEditableAnnotation(w))||null}setActiveEditor(w){t(this,E).getActive()!==w&&t(this,E).setActiveEditor(w)}enableClick(){this.div.addEventListener("pointerdown",t(this,x)),this.div.addEventListener("pointerup",t(this,T))}disableClick(){this.div.removeEventListener("pointerdown",t(this,x)),this.div.removeEventListener("pointerup",t(this,T))}attach(w){t(this,A).set(w.id,w);const{annotationElementId:q}=w;q&&t(this,E).isDeletedAnnotationElement(q)&&t(this,E).removeDeletedAnnotationElement(w)}detach(w){var q;t(this,A).delete(w.id),(q=t(this,f))==null||q.removePointerInTextLayer(w.contentDiv),!t(this,b)&&w.annotationElementId&&t(this,E).addDeletedAnnotationElement(w)}remove(w){this.detach(w),t(this,E).removeEditor(w),w.div.contains(document.activeElement)&&setTimeout(()=>{t(this,E).focusMainContainer()},0),w.div.remove(),w.isAttachedToDOM=!1,t(this,m)||this.addInkEditorIfNeeded(!1)}changeParent(w){var q;w.parent!==this&&(w.annotationElementId&&(t(this,E).addDeletedAnnotationElement(w.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(w),w.annotationElementId=null),this.attach(w),(q=w.parent)==null||q.detach(w),w.setParent(this),w.div&&w.isAttachedToDOM&&(w.div.remove(),this.div.append(w.div)))}add(w){if(this.changeParent(w),t(this,E).addEditor(w),this.attach(w),!w.isAttachedToDOM){const q=w.render();this.div.append(q),w.isAttachedToDOM=!0}w.fixAndSetPosition(),w.onceAdded(),t(this,E).addToAnnotationStorage(w)}moveEditorInDOM(w){var nt;if(!w.isAttachedToDOM)return;const{activeElement:q}=document;w.div.contains(q)&&(w._focusEventsAllowed=!1,setTimeout(()=>{w.div.contains(document.activeElement)?w._focusEventsAllowed=!0:(w.div.addEventListener("focusin",()=>{w._focusEventsAllowed=!0},{once:!0}),q.focus())},0)),w._structTreeParentId=(nt=t(this,f))==null?void 0:nt.moveElementInDOM(this.div,w.div,w.contentDiv,!0)}addOrRebuild(w){w.needsToBeRebuilt()?w.rebuild():this.add(w)}addUndoableEditor(w){const q=()=>w._uiManager.rebuild(w),nt=()=>{w.remove()};this.addCommands({cmd:q,undo:nt,mustExec:!1})}getNextId(){return t(this,E).getId()}pasteEditor(w,q){t(this,E).updateToolbar(w),t(this,E).updateMode(w);const{offsetX:nt,offsetY:at}=X(this,y,nn).call(this),G=this.getNextId(),ht=X(this,_,en).call(this,{parent:this,id:G,x:nt,y:at,uiManager:t(this,E),isCentered:!0,...q});ht&&this.add(ht)}deserialize(w){switch(w.annotationType??w.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return H.FreeTextEditor.deserialize(w,this,t(this,E));case r.AnnotationEditorType.INK:return B.InkEditor.deserialize(w,this,t(this,E));case r.AnnotationEditorType.STAMP:return F.StampEditor.deserialize(w,this,t(this,E))}return null}addNewEditor(){X(this,h,Pe).call(this,X(this,y,nn).call(this),!0)}setSelected(w){t(this,E).setSelected(w)}toggleSelected(w){t(this,E).toggleSelected(w)}isSelected(w){return t(this,E).isSelected(w)}unselect(w){t(this,E).unselect(w)}pointerup(w){const{isMac:q}=r.FeatureTest.platform;if(!(w.button!==0||w.ctrlKey&&q)&&w.target===this.div&&t(this,p)){if(it(this,p,!1),!t(this,L)){it(this,L,!0);return}if(t(this,E).getMode()===r.AnnotationEditorType.STAMP){t(this,E).unselectAll();return}X(this,h,Pe).call(this,w,!1)}}pointerdown(w){if(t(this,p)){it(this,p,!1);return}const{isMac:q}=r.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&q||w.target!==this.div)return;it(this,p,!0);const nt=t(this,E).getActive();it(this,L,!nt||nt.isEmpty())}findNewParent(w,q,nt){const at=t(this,E).findParent(q,nt);return at===null||at===this?!1:(at.changeParent(w),!0)}destroy(){var w,q;((w=t(this,E).getActive())==null?void 0:w.parent)===this&&(t(this,E).commitOrRemove(),t(this,E).setActiveEditor(null));for(const nt of t(this,A).values())(q=t(this,f))==null||q.removePointerInTextLayer(nt.contentDiv),nt.setParent(null),nt.isAttachedToDOM=!1,nt.div.remove();this.div=null,t(this,A).clear(),t(this,E).removeLayer(this)}render({viewport:w}){this.viewport=w,(0,lt.setLayerDimensions)(this.div,w);for(const q of t(this,E).getEditors(this.pageIndex))this.add(q);this.updateMode()}update({viewport:w}){t(this,E).commitOrRemove(),this.viewport=w,(0,lt.setLayerDimensions)(this.div,{rotation:w.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:w,pageHeight:q}=this.viewport.rawDims;return[w,q]}};f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,_=new WeakSet,en=function(w){switch(t(this,E).getMode()){case r.AnnotationEditorType.FREETEXT:return new H.FreeTextEditor(w);case r.AnnotationEditorType.INK:return new B.InkEditor(w);case r.AnnotationEditorType.STAMP:return new F.StampEditor(w)}return null},h=new WeakSet,Pe=function(w,q){const nt=this.getNextId(),at=X(this,_,en).call(this,{parent:this,id:nt,x:w.offsetX,y:w.offsetY,uiManager:t(this,E),isCentered:q});return at&&this.add(at),at},y=new WeakSet,nn=function(){const{x:w,y:q,width:nt,height:at}=this.div.getBoundingClientRect(),G=Math.max(0,w),ht=Math.max(0,q),gt=Math.min(window.innerWidth,w+nt),vt=Math.min(window.innerHeight,q+at),St=(G+gt)/2-w,P=(ht+vt)/2-q,[n,a]=this.viewport.rotation%180===0?[St,P]:[P,St];return{offsetX:n,offsetY:a}},k=new WeakSet,sn=function(){it(this,m,!0);for(const w of t(this,A).values())w.isEmpty()&&w.remove();it(this,m,!1)},ee(W,"_initialized",!1);let C=W;e.AnnotationEditorLayer=C},(S,e,M)=>{var F,C,f,L,O,T,x,A,p,m,Fn,E,Mn,o,Dn,D,_e,l,rn,g,Ln,z,an;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=M(1),u=M(5),H=M(4),B=M(29);const q=class q extends H.AnnotationEditor{constructor(G){super({...G,name:"freeTextEditor"});$(this,m);$(this,E);$(this,o);$(this,D);$(this,l);$(this,g);$(this,z);$(this,F,this.editorDivBlur.bind(this));$(this,C,this.editorDivFocus.bind(this));$(this,f,this.editorDivInput.bind(this));$(this,L,this.editorDivKeydown.bind(this));$(this,O,void 0);$(this,T,"");$(this,x,`${this.id}-editor`);$(this,A,void 0);$(this,p,null);it(this,O,G.color||q._defaultColor||H.AnnotationEditor._defaultLineColor),it(this,A,G.fontSize||q._defaultFontSize)}static get _keyboardManager(){const G=q.prototype,ht=St=>St.isEmpty(),gt=u.AnnotationEditorUIManager.TRANSLATE_SMALL,vt=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],G.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],G.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],G._translateEmpty,{args:[-gt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G._translateEmpty,{args:[-vt,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],G._translateEmpty,{args:[gt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G._translateEmpty,{args:[vt,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],G._translateEmpty,{args:[0,-gt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G._translateEmpty,{args:[0,-vt],checker:ht}],[["ArrowDown","mac+ArrowDown"],G._translateEmpty,{args:[0,gt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G._translateEmpty,{args:[0,vt],checker:ht}]]))}static initialize(G){H.AnnotationEditor.initialize(G,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ht=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ht.getPropertyValue("--freetext-padding"))}static updateDefaultParams(G,ht){switch(G){case r.AnnotationEditorParamsType.FREETEXT_SIZE:q._defaultFontSize=ht;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:q._defaultColor=ht;break}}updateParams(G,ht){switch(G){case r.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,m,Fn).call(this,ht);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,E,Mn).call(this,ht);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,q._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,q._defaultColor||H.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,A)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,O)]]}_translateEmpty(G,ht){this._uiManager.translateSelectedEditors(G,ht,!0)}getInitialTranslation(){const G=this.parentScale;return[-q._internalPadding*G,-(q._internalPadding+t(this,A))*G]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,L)),this.editorDiv.addEventListener("focus",t(this,C)),this.editorDiv.addEventListener("blur",t(this,F)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,x)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,L)),this.editorDiv.removeEventListener("focus",t(this,C)),this.editorDiv.removeEventListener("blur",t(this,F)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(G){this._focusEventsAllowed&&(super.focusin(G),G.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var G;if(this.width){X(this,z,an).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(G=this._initialOptions)!=null&&G.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const G=t(this,T),ht=it(this,T,X(this,o,Dn).call(this).trimEnd());if(G===ht)return;const gt=vt=>{if(it(this,T,vt),!vt){this.remove();return}X(this,l,rn).call(this),this._uiManager.rebuild(this),X(this,D,_e).call(this)};this.addCommands({cmd:()=>{gt(ht)},undo:()=>{gt(G)},mustExec:!1}),X(this,D,_e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(G){this.enterInEditMode()}keydown(G){G.target===this.div&&G.key==="Enter"&&(this.enterInEditMode(),G.preventDefault())}editorDivKeydown(G){q._keyboardManager.exec(this,G)}editorDivFocus(G){this.isEditing=!0}editorDivBlur(G){this.isEditing=!1}editorDivInput(G){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let G,ht;this.width&&(G=this.x,ht=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,x)),this.enableEditing(),H.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(vt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("aria-label",vt)}),H.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(vt=>{var St;return(St=this.editorDiv)==null?void 0:St.setAttribute("default-content",vt)}),this.editorDiv.contentEditable=!0;const{style:gt}=this.editorDiv;if(gt.fontSize=`calc(${t(this,A)}px * var(--scale-factor))`,gt.color=t(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[vt,St]=this.parentDimensions;if(this.annotationElementId){const{position:P}=t(this,p);let[n,a]=this.getInitialTranslation();[n,a]=this.pageTranslationToScreen(n,a);const[i,c]=this.pageDimensions,[d,R]=this.pageTranslation;let I,U;switch(this.rotation){case 0:I=G+(P[0]-d)/i,U=ht+this.height-(P[1]-R)/c;break;case 90:I=G+(P[0]-d)/i,U=ht-(P[1]-R)/c,[n,a]=[a,-n];break;case 180:I=G-this.width+(P[0]-d)/i,U=ht-(P[1]-R)/c,[n,a]=[-n,-a];break;case 270:I=G+(P[0]-d-this.height*c)/i,U=ht+(P[1]-R-this.width*i)/c,[n,a]=[-a,n];break}this.setAt(I*vt,U*St,n,a)}else this.setAt(G*vt,ht*St,this.width*vt,this.height*St);X(this,l,rn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(G,ht,gt){let vt=null;if(G instanceof B.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:P,fontColor:n},rect:a,rotation:i,id:c},textContent:d,textPosition:R,parent:{page:{pageNumber:I}}}=G;if(!d||d.length===0)return null;vt=G={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:P,value:d.join(`
`),position:R,pageIndex:I-1,rect:a,rotation:i,id:c,deleted:!1}}const St=super.deserialize(G,ht,gt);return it(St,A,G.fontSize),it(St,O,r.Util.makeHexColor(...G.color)),it(St,T,G.value),St.annotationElementId=G.id||null,it(St,p,vt),St}serialize(G=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ht=q._internalPadding*this.parentScale,gt=this.getRect(ht,ht),vt=H.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,O)),St={annotationType:r.AnnotationEditorType.FREETEXT,color:vt,fontSize:t(this,A),value:t(this,T),pageIndex:this.pageIndex,rect:gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return G?St:this.annotationElementId&&!X(this,g,Ln).call(this,St)?null:(St.id=this.annotationElementId,St)}};F=new WeakMap,C=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakSet,Fn=function(G){const ht=vt=>{this.editorDiv.style.fontSize=`calc(${vt}px * var(--scale-factor))`,this.translate(0,-(vt-t(this,A))*this.parentScale),it(this,A,vt),X(this,D,_e).call(this)},gt=t(this,A);this.addCommands({cmd:()=>{ht(G)},undo:()=>{ht(gt)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Mn=function(G){const ht=t(this,O);this.addCommands({cmd:()=>{it(this,O,this.editorDiv.style.color=G)},undo:()=>{it(this,O,this.editorDiv.style.color=ht)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Dn=function(){const G=this.editorDiv.getElementsByTagName("div");if(G.length===0)return this.editorDiv.innerText;const ht=[];for(const gt of G)ht.push(gt.innerText.replace(/\r\n?|\n/,""));return ht.join(`
`)},D=new WeakSet,_e=function(){const[G,ht]=this.parentDimensions;let gt;if(this.isAttachedToDOM)gt=this.div.getBoundingClientRect();else{const{currentLayer:vt,div:St}=this,P=St.style.display;St.style.display="hidden",vt.div.append(this.div),gt=St.getBoundingClientRect(),St.remove(),St.style.display=P}this.rotation%180===this.parentRotation%180?(this.width=gt.width/G,this.height=gt.height/ht):(this.width=gt.height/G,this.height=gt.width/ht),this.fixAndSetPosition()},l=new WeakSet,rn=function(){if(this.editorDiv.replaceChildren(),!!t(this,T))for(const G of t(this,T).split(`
`)){const ht=document.createElement("div");ht.append(G?document.createTextNode(G):document.createElement("br")),this.editorDiv.append(ht)}},g=new WeakSet,Ln=function(G){const{value:ht,fontSize:gt,color:vt,rect:St,pageIndex:P}=t(this,p);return G.value!==ht||G.fontSize!==gt||G.rect.some((n,a)=>Math.abs(n-St[a])>=1)||G.color.some((n,a)=>n!==vt[a])||G.pageIndex!==P},z=new WeakSet,an=function(G=!1){if(!this.annotationElementId)return;if(X(this,D,_e).call(this),!G&&(this.width===0||this.height===0)){setTimeout(()=>X(this,z,an).call(this,!0),0);return}const ht=q._internalPadding*this.parentScale;t(this,p).rect=this.getRect(ht,ht)},ee(q,"_freeTextDefaultContent",""),ee(q,"_internalPadding",0),ee(q,"_defaultColor",null),ee(q,"_defaultFontSize",10),ee(q,"_type","freetext");let lt=q;e.FreeTextEditor=lt},(S,e,M)=>{var a,c,ce,R,On,U,st,Z,rt,dt,ft,ct,Ct,Lt,At,Dt,mt,tt,et,pt,Tt,wt,Bt,In,Ut,ke,Ht,on,Vt,ln,Q,Y,yt,_t,te,Zt,J,cn,It,Rt,jt,Nt,jn,xt,hn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=M(1),u=M(6),H=M(3),B=M(30),lt=M(31),F=M(32);const C=1e3,f=9,L=new WeakSet;function O(Ot){return{width:Ot[2]-Ot[0],height:Ot[3]-Ot[1]}}class T{static create(j){switch(j.data.annotationType){case r.AnnotationType.LINK:return new A(j);case r.AnnotationType.TEXT:return new p(j);case r.AnnotationType.WIDGET:switch(j.data.fieldType){case"Tx":return new b(j);case"Btn":return j.data.radioButton?new o(j):j.data.checkBox?new _(j):new h(j);case"Ch":return new D(j);case"Sig":return new E(j)}return new m(j);case r.AnnotationType.POPUP:return new y(j);case r.AnnotationType.FREETEXT:return new k(j);case r.AnnotationType.LINE:return new g(j);case r.AnnotationType.SQUARE:return new W(j);case r.AnnotationType.CIRCLE:return new z(j);case r.AnnotationType.POLYLINE:return new w(j);case r.AnnotationType.CARET:return new nt(j);case r.AnnotationType.INK:return new at(j);case r.AnnotationType.POLYGON:return new q(j);case r.AnnotationType.HIGHLIGHT:return new G(j);case r.AnnotationType.UNDERLINE:return new ht(j);case r.AnnotationType.SQUIGGLY:return new gt(j);case r.AnnotationType.STRIKEOUT:return new vt(j);case r.AnnotationType.STAMP:return new St(j);case r.AnnotationType.FILEATTACHMENT:return new P(j);default:return new x(j)}}}const i=class i{constructor(j,{isRenderable:s=!1,ignoreBorder:v=!1,createQuadrilaterals:N=!1}={}){$(this,a,!1);this.isRenderable=s,this.data=j.data,this.layer=j.layer,this.linkService=j.linkService,this.downloadManager=j.downloadManager,this.imageResourcesPath=j.imageResourcesPath,this.renderForms=j.renderForms,this.svgFactory=j.svgFactory,this.annotationStorage=j.annotationStorage,this.enableScripting=j.enableScripting,this.hasJSActions=j.hasJSActions,this._fieldObjects=j.fieldObjects,this.parent=j.parent,s&&(this.container=this._createContainer(v)),N&&this._createQuadrilaterals()}static _hasPopupData({titleObj:j,contentsObj:s,richText:v}){return!!(j!=null&&j.str||s!=null&&s.str||v!=null&&v.str)}get hasPopupData(){return i._hasPopupData(this.data)}_createContainer(j){const{data:s,parent:{page:v,viewport:N}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",s.id),this instanceof m||(V.tabIndex=C),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),s.noRotate&&V.classList.add("norotate");const{pageWidth:K,pageHeight:ot,pageX:bt,pageY:kt}=N.rawDims;if(!s.rect||this instanceof y){const{rotation:Wt}=s;return!s.hasOwnCanvas&&Wt!==0&&this.setRotation(Wt,V),V}const{width:Pt,height:qt}=O(s.rect),Ft=r.Util.normalizeRect([s.rect[0],v.view[3]-s.rect[1]+v.view[1],s.rect[2],v.view[3]-s.rect[3]+v.view[1]]);if(!j&&s.borderStyle.width>0){V.style.borderWidth=`${s.borderStyle.width}px`;const Wt=s.borderStyle.horizontalCornerRadius,Xt=s.borderStyle.verticalCornerRadius;if(Wt>0||Xt>0){const Qt=`calc(${Wt}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;V.style.borderRadius=Qt}else if(this instanceof o){const Qt=`calc(${Pt}px * var(--scale-factor)) / calc(${qt}px * var(--scale-factor))`;V.style.borderRadius=Qt}switch(s.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const Kt=s.borderColor||null;Kt?(it(this,a,!0),V.style.borderColor=r.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(Ft[0]-bt)/K}%`,V.style.top=`${100*(Ft[1]-kt)/ot}%`;const{rotation:Mt}=s;return s.hasOwnCanvas||Mt===0?(V.style.width=`${100*Pt/K}%`,V.style.height=`${100*qt/ot}%`):this.setRotation(Mt,V),V}setRotation(j,s=this.container){if(!this.data.rect)return;const{pageWidth:v,pageHeight:N}=this.parent.viewport.rawDims,{width:V,height:K}=O(this.data.rect);let ot,bt;j%180===0?(ot=100*V/v,bt=100*K/N):(ot=100*K/v,bt=100*V/N),s.style.width=`${ot}%`,s.style.height=`${bt}%`,s.setAttribute("data-main-rotation",(360-j)%360)}get _commonActions(){const j=(s,v,N)=>{const V=N.detail[s],K=V[0],ot=V.slice(1);N.target.style[v]=B.ColorConverters[`${K}_HTML`](ot),this.annotationStorage.setValue(this.data.id,{[v]:B.ColorConverters[`${K}_rgb`](ot)})};return(0,r.shadow)(this,"_commonActions",{display:s=>{const{display:v}=s.detail,N=v%2===1;this.container.style.visibility=N?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:N,noPrint:v===1||v===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:v}=s.detail;this.container.style.visibility=v?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:v,noView:v})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{j("bgColor","backgroundColor",s)},fillColor:s=>{j("fillColor","backgroundColor",s)},fgColor:s=>{j("fgColor","color",s)},textColor:s=>{j("textColor","color",s)},borderColor:s=>{j("borderColor","borderColor",s)},strokeColor:s=>{j("strokeColor","borderColor",s)},rotation:s=>{const v=s.detail.rotation;this.setRotation(v),this.annotationStorage.setValue(this.data.id,{rotation:v})}})}_dispatchEventFromSandbox(j,s){const v=this._commonActions;for(const N of Object.keys(s.detail)){const V=j[N]||v[N];V==null||V(s)}}_setDefaultPropertiesFromJS(j){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const v=this._commonActions;for(const[N,V]of Object.entries(s)){const K=v[N];if(K){const ot={detail:{[N]:V},target:j};K(ot),delete s[N]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:j}=this.data;if(!j)return;const[s,v,N,V]=this.data.rect;if(j.length===1){const[,{x:Xt,y:Kt},{x:Qt,y:se}]=j[0];if(N===Xt&&V===Kt&&s===Qt&&v===se)return}const{style:K}=this.container;let ot;if(t(this,a)){const{borderColor:Xt,borderWidth:Kt}=K;K.borderWidth=0,ot=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Xt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const bt=N-s,kt=V-v,{svgFactory:Pt}=this,qt=Pt.createElement("svg");qt.classList.add("quadrilateralsContainer"),qt.setAttribute("width",0),qt.setAttribute("height",0);const Ft=Pt.createElement("defs");qt.append(Ft);const Mt=Pt.createElement("clipPath"),Wt=`clippath_${this.data.id}`;Mt.setAttribute("id",Wt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Mt);for(const[,{x:Xt,y:Kt},{x:Qt,y:se}]of j){const ne=Pt.createElement("rect"),ie=(Qt-s)/bt,oe=(V-Kt)/kt,le=(Xt-Qt)/bt,xn=(Kt-se)/kt;ne.setAttribute("x",ie),ne.setAttribute("y",oe),ne.setAttribute("width",le),ne.setAttribute("height",xn),Mt.append(ne),ot==null||ot.push(`<rect vector-effect="non-scaling-stroke" x="${ie}" y="${oe}" width="${le}" height="${xn}"/>`)}t(this,a)&&(ot.push("</g></svg>')"),K.backgroundImage=ot.join("")),this.container.append(qt),this.container.style.clipPath=`url(#${Wt})`}_createPopup(){const{container:j,data:s}=this;j.setAttribute("aria-haspopup","dialog");const v=new y({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]});this.parent.div.append(v.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(j,s=null){const v=[];if(this._fieldObjects){const N=this._fieldObjects[j];if(N)for(const{page:V,id:K,exportValues:ot}of N){if(V===-1||K===s)continue;const bt=typeof ot=="string"?ot:null,kt=document.querySelector(`[data-element-id="${K}"]`);if(kt&&!L.has(kt)){(0,r.warn)(`_getElementsByName - element not allowed: ${K}`);continue}v.push({id:K,exportValue:bt,domElement:kt})}return v}for(const N of document.getElementsByName(j)){const{exportValue:V}=N,K=N.getAttribute("data-element-id");K!==s&&L.has(N)&&v.push({id:K,exportValue:V,domElement:N})}return v}show(){var j;this.container&&(this.container.hidden=!1),(j=this.popup)==null||j.maybeShow()}hide(){var j;this.container&&(this.container.hidden=!0),(j=this.popup)==null||j.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const j=this.getElementsToTriggerPopup();if(Array.isArray(j))for(const s of j)s.classList.add("highlightArea");else j.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:j,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var v;(v=this.linkService.eventBus)==null||v.dispatch("switchannotationeditormode",{source:this,mode:j,editId:s})})}};a=new WeakMap;let x=i;class A extends x{constructor(s,v=null){super(s,{isRenderable:!0,ignoreBorder:!!(v!=null&&v.ignoreBorder),createQuadrilaterals:!0});$(this,c);$(this,R);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:v}=this,N=document.createElement("a");N.setAttribute("data-element-id",s.id);let V=!1;return s.url?(v.addLinkAttributes(N,s.url,s.newWindow),V=!0):s.action?(this._bindNamedAction(N,s.action),V=!0):s.attachment?(this._bindAttachment(N,s.attachment),V=!0):s.setOCGState?(X(this,R,On).call(this,N,s.setOCGState),V=!0):s.dest?(this._bindLink(N,s.dest),V=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(N,s),V=!0),s.resetForm?(this._bindResetFormAction(N,s.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(N,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(N),this.container}_bindLink(s,v){s.href=this.linkService.getDestinationHash(v),s.onclick=()=>(v&&this.linkService.goToDestination(v),!1),(v||v==="")&&X(this,c,ce).call(this)}_bindNamedAction(s,v){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(v),!1),X(this,c,ce).call(this)}_bindAttachment(s,v){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>{var N;return(N=this.downloadManager)==null||N.openOrDownloadData(this.container,v.content,v.filename),!1},X(this,c,ce).call(this)}_bindJSAction(s,v){s.href=this.linkService.getAnchorUrl("");const N=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(v.actions)){const K=N.get(V);K&&(s[K]=()=>{var ot;return(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v.id,name:V}}),!1})}s.onclick||(s.onclick=()=>!1),X(this,c,ce).call(this)}_bindResetFormAction(s,v){const N=s.onclick;if(N||(s.href=this.linkService.getAnchorUrl("")),X(this,c,ce).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),N||(s.onclick=()=>!1);return}s.onclick=()=>{var qt;N==null||N();const{fields:V,refs:K,include:ot}=v,bt=[];if(V.length!==0||K.length!==0){const Ft=new Set(K);for(const Mt of V){const Wt=this._fieldObjects[Mt]||[];for(const{id:Xt}of Wt)Ft.add(Xt)}for(const Mt of Object.values(this._fieldObjects))for(const Wt of Mt)Ft.has(Wt.id)===ot&&bt.push(Wt)}else for(const Ft of Object.values(this._fieldObjects))bt.push(...Ft);const kt=this.annotationStorage,Pt=[];for(const Ft of bt){const{id:Mt}=Ft;switch(Pt.push(Mt),Ft.type){case"text":{const Xt=Ft.defaultValue||"";kt.setValue(Mt,{value:Xt});break}case"checkbox":case"radiobutton":{const Xt=Ft.defaultValue===Ft.exportValues;kt.setValue(Mt,{value:Xt});break}case"combobox":case"listbox":{const Xt=Ft.defaultValue||"";kt.setValue(Mt,{value:Xt});break}default:continue}const Wt=document.querySelector(`[data-element-id="${Mt}"]`);if(Wt){if(!L.has(Wt)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Wt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Pt,name:"ResetForm"}})),!1}}}c=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},R=new WeakSet,On=function(s,v){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(v),!1),X(this,c,ce).call(this)};class p extends x{constructor(j){super(j,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const j=document.createElement("img");return j.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",j.alt="[{{type}} Annotation]",j.dataset.l10nId="text_annotation_type",j.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(j),this.container}}class m extends x{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(j){var s;this.data.hasOwnCanvas&&(((s=j.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(j.previousSibling.hidden=!0),j.hidden=!1)}_getKeyModifier(j){const{isWin:s,isMac:v}=r.FeatureTest.platform;return s&&j.ctrlKey||v&&j.metaKey}_setEventListener(j,s,v,N,V){v.includes("mouse")?j.addEventListener(v,K=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:N,value:V(K),shift:K.shiftKey,modifier:this._getKeyModifier(K)}})}):j.addEventListener(v,K=>{var ot;if(v==="blur"){if(!s.focused||!K.relatedTarget)return;s.focused=!1}else if(v==="focus"){if(s.focused)return;s.focused=!0}V&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:N,value:V(K)}}))})}_setEventListeners(j,s,v,N){var V,K,ot;for(const[bt,kt]of v)(kt==="Action"||(V=this.data.actions)!=null&&V[kt])&&((kt==="Focus"||kt==="Blur")&&(s||(s={focused:!1})),this._setEventListener(j,s,bt,kt,N),kt==="Focus"&&!((K=this.data.actions)!=null&&K.Blur)?this._setEventListener(j,s,"blur","Blur",null):kt==="Blur"&&!((ot=this.data.actions)!=null&&ot.Focus)&&this._setEventListener(j,s,"focus","Focus",null))}_setBackgroundColor(j){const s=this.data.backgroundColor||null;j.style.backgroundColor=s===null?"transparent":r.Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(j){const s=["left","center","right"],{fontColor:v}=this.data.defaultAppearanceData,N=this.data.defaultAppearanceData.fontSize||f,V=j.style;let K;const ot=2,bt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot),Pt=Math.round(kt/(r.LINE_FACTOR*N))||1,qt=kt/Pt;K=Math.min(N,bt(qt/r.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot);K=Math.min(N,bt(kt/r.LINE_FACTOR))}V.fontSize=`calc(${K}px * var(--scale-factor))`,V.color=r.Util.makeHexColor(v[0],v[1],v[2]),this.data.textAlignment!==null&&(V.textAlign=s[this.data.textAlignment])}_setRequired(j,s){s?j.setAttribute("required",!0):j.removeAttribute("required"),j.setAttribute("aria-required",s)}}class b extends m{constructor(j){const s=j.renderForms||!j.data.hasAppearance&&!!j.data.fieldValue;super(j,{isRenderable:s})}setPropertyOnSiblings(j,s,v,N){const V=this.annotationStorage;for(const K of this._getElementsByName(j.name,j.id))K.domElement&&(K.domElement[s]=v),V.setValue(K.id,{[N]:v})}render(){var N,V;const j=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let v=null;if(this.renderForms){const K=j.getValue(s,{value:this.data.fieldValue});let ot=K.value||"";const bt=j.getValue(s,{charLimit:this.data.maxLen}).charLimit;bt&&ot.length>bt&&(ot=ot.slice(0,bt));let kt=K.formattedValue||((N=this.data.textContent)==null?void 0:N.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Pt={userValue:ot,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(v=document.createElement("textarea"),v.textContent=kt??ot,this.data.doNotScroll&&(v.style.overflowY="hidden")):(v=document.createElement("input"),v.type="text",v.setAttribute("value",kt??ot),this.data.doNotScroll&&(v.style.overflowX="hidden")),this.data.hasOwnCanvas&&(v.hidden=!0),L.add(v),v.setAttribute("data-element-id",s),v.disabled=this.data.readOnly,v.name=this.data.fieldName,v.tabIndex=C,this._setRequired(v,this.data.required),bt&&(v.maxLength=bt),v.addEventListener("input",Ft=>{j.setValue(s,{value:Ft.target.value}),this.setPropertyOnSiblings(v,"value",Ft.target.value,"value"),Pt.formattedValue=null}),v.addEventListener("resetform",Ft=>{const Mt=this.data.defaultFieldValue??"";v.value=Pt.userValue=Mt,Pt.formattedValue=null});let qt=Ft=>{const{formattedValue:Mt}=Pt;Mt!=null&&(Ft.target.value=Mt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){v.addEventListener("focus",Mt=>{if(Pt.focused)return;const{target:Wt}=Mt;Pt.userValue&&(Wt.value=Pt.userValue),Pt.lastCommittedValue=Wt.value,Pt.commitKey=1,Pt.focused=!0}),v.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Wt={value(Xt){Pt.userValue=Xt.detail.value??"",j.setValue(s,{value:Pt.userValue.toString()}),Xt.target.value=Pt.userValue},formattedValue(Xt){const{formattedValue:Kt}=Xt.detail;Pt.formattedValue=Kt,Kt!=null&&Xt.target!==document.activeElement&&(Xt.target.value=Kt),j.setValue(s,{formattedValue:Kt})},selRange(Xt){Xt.target.setSelectionRange(...Xt.detail.selRange)},charLimit:Xt=>{var ne;const{charLimit:Kt}=Xt.detail,{target:Qt}=Xt;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let se=Pt.userValue;!se||se.length<=Kt||(se=se.slice(0,Kt),Qt.value=Pt.userValue=se,j.setValue(s,{value:se}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Wt,Mt)}),v.addEventListener("keydown",Mt=>{var Kt;Pt.commitKey=1;let Wt=-1;if(Mt.key==="Escape"?Wt=0:Mt.key==="Enter"&&!this.data.multiLine?Wt=2:Mt.key==="Tab"&&(Pt.commitKey=3),Wt===-1)return;const{value:Xt}=Mt.target;Pt.lastCommittedValue!==Xt&&(Pt.lastCommittedValue=Xt,Pt.userValue=Xt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Xt,willCommit:!0,commitKey:Wt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Ft=qt;qt=null,v.addEventListener("blur",Mt=>{var Xt;if(!Pt.focused||!Mt.relatedTarget)return;Pt.focused=!1;const{value:Wt}=Mt.target;Pt.userValue=Wt,Pt.lastCommittedValue!==Wt&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Wt,willCommit:!0,commitKey:Pt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Ft(Mt)}),(V=this.data.actions)!=null&&V.Keystroke&&v.addEventListener("beforeinput",Mt=>{var oe;Pt.lastCommittedValue=null;const{data:Wt,target:Xt}=Mt,{value:Kt,selectionStart:Qt,selectionEnd:se}=Xt;let ne=Qt,ie=se;switch(Mt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ne-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(ie+=le[0].length);break}case"deleteContentBackward":Qt===se&&(ne-=1);break;case"deleteContentForward":Qt===se&&(ie+=1);break}Mt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Kt,change:Wt||"",willCommit:!1,selStart:ne,selEnd:ie}})}),this._setEventListeners(v,Pt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(qt&&v.addEventListener("blur",qt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/bt;v.classList.add("comb"),v.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else v=document.createElement("div"),v.textContent=this.data.fieldValue,v.style.verticalAlign="middle",v.style.display="table-cell";return this._setTextStyle(v),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class E extends m{constructor(j){super(j,{isRenderable:!!j.data.hasOwnCanvas})}}class _ extends m{constructor(j){super(j,{isRenderable:j.renderForms})}render(){const j=this.annotationStorage,s=this.data,v=s.id;let N=j.getValue(v,{value:s.exportValue===s.fieldValue}).value;typeof N=="string"&&(N=N!=="Off",j.setValue(v,{value:N})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return L.add(V),V.setAttribute("data-element-id",v),V.disabled=s.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=s.fieldName,N&&V.setAttribute("checked",!0),V.setAttribute("exportValue",s.exportValue),V.tabIndex=C,V.addEventListener("change",K=>{const{name:ot,checked:bt}=K.target;for(const kt of this._getElementsByName(ot,v)){const Pt=bt&&kt.exportValue===s.exportValue;kt.domElement&&(kt.domElement.checked=Pt),j.setValue(kt.id,{value:Pt})}j.setValue(v,{value:bt})}),V.addEventListener("resetform",K=>{const ot=s.defaultFieldValue||"Off";K.target.checked=ot===s.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",K=>{const ot={value(bt){bt.target.checked=bt.detail.value!=="Off",j.setValue(v,{value:bt.target.checked})}};this._dispatchEventFromSandbox(ot,K)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class o extends m{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const j=this.annotationStorage,s=this.data,v=s.id;let N=j.getValue(v,{value:s.fieldValue===s.buttonValue}).value;typeof N=="string"&&(N=N!==s.buttonValue,j.setValue(v,{value:N}));const V=document.createElement("input");if(L.add(V),V.setAttribute("data-element-id",v),V.disabled=s.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=s.fieldName,N&&V.setAttribute("checked",!0),V.tabIndex=C,V.addEventListener("change",K=>{const{name:ot,checked:bt}=K.target;for(const kt of this._getElementsByName(ot,v))j.setValue(kt.id,{value:!1});j.setValue(v,{value:bt})}),V.addEventListener("resetform",K=>{const ot=s.defaultFieldValue;K.target.checked=ot!=null&&ot===s.buttonValue}),this.enableScripting&&this.hasJSActions){const K=s.buttonValue;V.addEventListener("updatefromsandbox",ot=>{const bt={value:kt=>{const Pt=K===kt.detail.value;for(const qt of this._getElementsByName(kt.target.name)){const Ft=Pt&&qt.id===v;qt.domElement&&(qt.domElement.checked=Ft),j.setValue(qt.id,{value:Ft})}}};this._dispatchEventFromSandbox(bt,ot)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class h extends A{constructor(j){super(j,{ignoreBorder:j.data.hasAppearance})}render(){const j=super.render();j.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(j.title=this.data.alternativeText);const s=j.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",v=>{this._dispatchEventFromSandbox({},v)})),j}}class D extends m{constructor(j){super(j,{isRenderable:j.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const j=this.annotationStorage,s=this.data.id,v=j.getValue(s,{value:this.data.fieldValue}),N=document.createElement("select");L.add(N),N.setAttribute("data-element-id",s),N.disabled=this.data.readOnly,this._setRequired(N,this.data.required),N.name=this.data.fieldName,N.tabIndex=C;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(N.size=this.data.options.length,this.data.multiSelect&&(N.multiple=!0)),N.addEventListener("resetform",Pt=>{const qt=this.data.defaultFieldValue;for(const Ft of N.options)Ft.selected=Ft.value===qt});for(const Pt of this.data.options){const qt=document.createElement("option");qt.textContent=Pt.displayValue,qt.value=Pt.exportValue,v.value.includes(Pt.exportValue)&&(qt.setAttribute("selected",!0),V=!1),N.append(qt)}let K=null;if(V){const Pt=document.createElement("option");Pt.value=" ",Pt.setAttribute("hidden",!0),Pt.setAttribute("selected",!0),N.prepend(Pt),K=()=>{Pt.remove(),N.removeEventListener("input",K),K=null},N.addEventListener("input",K)}const ot=Pt=>{const qt=Pt?"value":"textContent",{options:Ft,multiple:Mt}=N;return Mt?Array.prototype.filter.call(Ft,Wt=>Wt.selected).map(Wt=>Wt[qt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][qt]};let bt=ot(!1);const kt=Pt=>{const qt=Pt.target.options;return Array.prototype.map.call(qt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(N.addEventListener("updatefromsandbox",Pt=>{const qt={value(Ft){K==null||K();const Mt=Ft.detail.value,Wt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Xt of N.options)Xt.selected=Wt.has(Xt.value);j.setValue(s,{value:ot(!0)}),bt=ot(!1)},multipleSelection(Ft){N.multiple=!0},remove(Ft){const Mt=N.options,Wt=Ft.detail.remove;Mt[Wt].selected=!1,N.remove(Wt),Mt.length>0&&Array.prototype.findIndex.call(Mt,Kt=>Kt.selected)===-1&&(Mt[0].selected=!0),j.setValue(s,{value:ot(!0),items:kt(Ft)}),bt=ot(!1)},clear(Ft){for(;N.length!==0;)N.remove(0);j.setValue(s,{value:null,items:[]}),bt=ot(!1)},insert(Ft){const{index:Mt,displayValue:Wt,exportValue:Xt}=Ft.detail.insert,Kt=N.children[Mt],Qt=document.createElement("option");Qt.textContent=Wt,Qt.value=Xt,Kt?Kt.before(Qt):N.append(Qt),j.setValue(s,{value:ot(!0),items:kt(Ft)}),bt=ot(!1)},items(Ft){const{items:Mt}=Ft.detail;for(;N.length!==0;)N.remove(0);for(const Wt of Mt){const{displayValue:Xt,exportValue:Kt}=Wt,Qt=document.createElement("option");Qt.textContent=Xt,Qt.value=Kt,N.append(Qt)}N.options.length>0&&(N.options[0].selected=!0),j.setValue(s,{value:ot(!0),items:kt(Ft)}),bt=ot(!1)},indices(Ft){const Mt=new Set(Ft.detail.indices);for(const Wt of Ft.target.options)Wt.selected=Mt.has(Wt.index);j.setValue(s,{value:ot(!0)}),bt=ot(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(qt,Pt)}),N.addEventListener("input",Pt=>{var Ft;const qt=ot(!0);j.setValue(s,{value:qt}),Pt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:bt,changeEx:qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(N,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Pt=>Pt.target.value)):N.addEventListener("input",function(Pt){j.setValue(s,{value:ot(!0)})}),this.data.combo&&this._setTextStyle(N),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class y extends x{constructor(j){const{data:s,elements:v}=j;super(j,{isRenderable:x._hasPopupData(s)}),this.elements=v}render(){this.container.classList.add("popupAnnotation");const j=new l({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const v of this.elements)v.popup=j,s.push(v.data.id),v.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(v=>`${r.AnnotationPrefix}${v}`).join(",")),this.container}}class l{constructor({container:j,color:s,elements:v,titleObj:N,modificationDate:V,contentsObj:K,richText:ot,parent:bt,rect:kt,parentRect:Pt,open:qt}){$(this,Bt);$(this,Ut);$(this,Ht);$(this,Vt);$(this,U,null);$(this,st,X(this,Bt,In).bind(this));$(this,Z,X(this,Vt,ln).bind(this));$(this,rt,X(this,Ht,on).bind(this));$(this,dt,X(this,Ut,ke).bind(this));$(this,ft,null);$(this,ct,null);$(this,Ct,null);$(this,Lt,null);$(this,At,null);$(this,Dt,null);$(this,mt,!1);$(this,tt,null);$(this,et,null);$(this,pt,null);$(this,Tt,null);$(this,wt,!1);var Mt;it(this,ct,j),it(this,Tt,N),it(this,Ct,K),it(this,pt,ot),it(this,At,bt),it(this,ft,s),it(this,et,kt),it(this,Dt,Pt),it(this,Lt,v);const Ft=u.PDFDateString.toDateObject(V);Ft&&it(this,U,bt.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=v.flatMap(Wt=>Wt.getElementsToTriggerPopup());for(const Wt of this.trigger)Wt.addEventListener("click",t(this,dt)),Wt.addEventListener("mouseenter",t(this,rt)),Wt.addEventListener("mouseleave",t(this,Z)),Wt.classList.add("popupTriggerArea");for(const Wt of v)(Mt=Wt.container)==null||Mt.addEventListener("keydown",t(this,st));t(this,ct).hidden=!0,qt&&X(this,Ut,ke).call(this)}render(){if(t(this,tt))return;const{page:{view:j},viewport:{rawDims:{pageWidth:s,pageHeight:v,pageX:N,pageY:V}}}=t(this,At),K=it(this,tt,document.createElement("div"));if(K.className="popup",t(this,ft)){const ne=K.style.outlineColor=r.Util.makeHexColor(...t(this,ft));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?K.style.backgroundColor=`color-mix(in srgb, ${ne} 30%, white)`:K.style.backgroundColor=r.Util.makeHexColor(...t(this,ft).map(oe=>Math.floor(.7*(255-oe)+oe)))}const ot=document.createElement("span");ot.className="header";const bt=document.createElement("h1");if(ot.append(bt),{dir:bt.dir,str:bt.textContent}=t(this,Tt),K.append(ot),t(this,U)){const ne=document.createElement("span");ne.classList.add("popupDate"),t(this,U).then(ie=>{ne.textContent=ie}),ot.append(ne)}const kt=t(this,Ct),Pt=t(this,pt);if(Pt!=null&&Pt.str&&(!(kt!=null&&kt.str)||kt.str===Pt.str))F.XfaLayer.render({xfaHtml:Pt.html,intent:"richText",div:K}),K.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(kt);K.append(ne)}let qt=!!t(this,Dt),Ft=qt?t(this,Dt):t(this,et);for(const ne of t(this,Lt))if(!Ft||r.Util.intersect(ne.data.rect,Ft)!==null){Ft=ne.data.rect,qt=!0;break}const Mt=r.Util.normalizeRect([Ft[0],j[3]-Ft[1]+j[1],Ft[2],j[3]-Ft[3]+j[1]]),Wt=5,Xt=qt?Ft[2]-Ft[0]+Wt:0,Kt=Mt[0]+Xt,Qt=Mt[1],{style:se}=t(this,ct);se.left=`${100*(Kt-N)/s}%`,se.top=`${100*(Qt-V)/v}%`,t(this,ct).append(K)}_formatContents({str:j,dir:s}){const v=document.createElement("p");v.classList.add("popupContent"),v.dir=s;const N=j.split(/(?:\r\n?|\n)/);for(let V=0,K=N.length;V<K;++V){const ot=N[V];v.append(document.createTextNode(ot)),V<K-1&&v.append(document.createElement("br"))}return v}forceHide(){it(this,wt,this.isVisible),t(this,wt)&&(t(this,ct).hidden=!0)}maybeShow(){t(this,wt)&&(it(this,wt,!1),t(this,ct).hidden=!1)}get isVisible(){return t(this,ct).hidden===!1}}U=new WeakMap,st=new WeakMap,Z=new WeakMap,rt=new WeakMap,dt=new WeakMap,ft=new WeakMap,ct=new WeakMap,Ct=new WeakMap,Lt=new WeakMap,At=new WeakMap,Dt=new WeakMap,mt=new WeakMap,tt=new WeakMap,et=new WeakMap,pt=new WeakMap,Tt=new WeakMap,wt=new WeakMap,Bt=new WeakSet,In=function(j){j.altKey||j.shiftKey||j.ctrlKey||j.metaKey||(j.key==="Enter"||j.key==="Escape"&&t(this,mt))&&X(this,Ut,ke).call(this)},Ut=new WeakSet,ke=function(){it(this,mt,!t(this,mt)),t(this,mt)?(X(this,Ht,on).call(this),t(this,ct).addEventListener("click",t(this,dt)),t(this,ct).addEventListener("keydown",t(this,st))):(X(this,Vt,ln).call(this),t(this,ct).removeEventListener("click",t(this,dt)),t(this,ct).removeEventListener("keydown",t(this,st)))},Ht=new WeakSet,on=function(){t(this,tt)||this.render(),this.isVisible?t(this,mt)&&t(this,ct).classList.add("focused"):(t(this,ct).hidden=!1,t(this,ct).style.zIndex=parseInt(t(this,ct).style.zIndex)+1e3)},Vt=new WeakSet,ln=function(){t(this,ct).classList.remove("focused"),!(t(this,mt)||!this.isVisible)&&(t(this,ct).hidden=!0,t(this,ct).style.zIndex=parseInt(t(this,ct).style.zIndex)-1e3)};class k extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0}),this.textContent=j.data.textContent,this.textPosition=j.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const j=document.createElement("div");j.classList.add("annotationTextContent"),j.setAttribute("role","comment");for(const s of this.textContent){const v=document.createElement("span");v.textContent=s,j.append(v)}this.container.append(j)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=k;class g extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,Q,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:v,height:N}=O(s.rect),V=this.svgFactory.create(v,N,!0),K=it(this,Q,this.svgFactory.createElement("svg:line"));return K.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),K.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),K.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),K.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),K.setAttribute("stroke-width",s.borderStyle.width||1),K.setAttribute("stroke","transparent"),K.setAttribute("fill","transparent"),V.append(K),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Q)}addHighlightArea(){this.container.classList.add("highlightArea")}}Q=new WeakMap;class W extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:v,height:N}=O(s.rect),V=this.svgFactory.create(v,N,!0),K=s.borderStyle.width,ot=it(this,Y,this.svgFactory.createElement("svg:rect"));return ot.setAttribute("x",K/2),ot.setAttribute("y",K/2),ot.setAttribute("width",v-K),ot.setAttribute("height",N-K),ot.setAttribute("stroke-width",K||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),V.append(ot),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class z extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,yt,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:v,height:N}=O(s.rect),V=this.svgFactory.create(v,N,!0),K=s.borderStyle.width,ot=it(this,yt,this.svgFactory.createElement("svg:ellipse"));return ot.setAttribute("cx",v/2),ot.setAttribute("cy",N/2),ot.setAttribute("rx",v/2-K/2),ot.setAttribute("ry",N/2-K/2),ot.setAttribute("stroke-width",K||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),V.append(ot),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}yt=new WeakMap;class w extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,_t,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:v,height:N}=O(s.rect),V=this.svgFactory.create(v,N,!0);let K=[];for(const bt of s.vertices){const kt=bt.x-s.rect[0],Pt=s.rect[3]-bt.y;K.push(kt+","+Pt)}K=K.join(" ");const ot=it(this,_t,this.svgFactory.createElement(this.svgElementName));return ot.setAttribute("points",K),ot.setAttribute("stroke-width",s.borderStyle.width||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),V.append(ot),this.container.append(V),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class q extends w{constructor(j){super(j),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nt extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends x{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});$(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:v,height:N}=O(s.rect),V=this.svgFactory.create(v,N,!0);for(const K of s.inkLists){let ot=[];for(const kt of K){const Pt=kt.x-s.rect[0],qt=s.rect[3]-kt.y;ot.push(`${Pt},${qt}`)}ot=ot.join(" ");const bt=this.svgFactory.createElement(this.svgElementName);t(this,te).push(bt),bt.setAttribute("points",ot),bt.setAttribute("stroke-width",s.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),!s.popupRef&&this.hasPopupData&&this._createPopup(),V.append(bt)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,e.InkAnnotationElement=at;class G extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gt extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class vt extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class St extends x{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=St;class P extends x{constructor(s){var V;super(s,{isRenderable:!0});$(this,J);$(this,Zt,null);const{filename:v,content:N}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(v,!0),this.content=N,(V=this.linkService.eventBus)==null||V.dispatch("fileattachmentannotation",{source:this,filename:v,content:N})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:v}=this;let N;v.hasAppearance||v.fillAlpha===0?N=document.createElement("div"):(N=document.createElement("img"),N.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(v.name)?"paperclip":"pushpin"}.svg`,v.fillAlpha&&v.fillAlpha<1&&(N.style=`filter: opacity(${Math.round(v.fillAlpha*100)}%);`)),N.addEventListener("dblclick",X(this,J,cn).bind(this)),it(this,Zt,N);const{isMac:V}=r.FeatureTest.platform;return s.addEventListener("keydown",K=>{K.key==="Enter"&&(V?K.metaKey:K.ctrlKey)&&X(this,J,cn).call(this)}),!v.popupRef&&this.hasPopupData?this._createPopup():N.classList.add("popupTriggerArea"),s.append(N),s}getElementsToTriggerPopup(){return t(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,J=new WeakSet,cn=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)};class n{constructor({div:j,accessibilityManager:s,annotationCanvasMap:v,l10n:N,page:V,viewport:K}){$(this,Nt);$(this,xt);$(this,It,null);$(this,Rt,null);$(this,jt,new Map);this.div=j,it(this,It,s),it(this,Rt,v),this.l10n=N,this.page=V,this.viewport=K,this.zIndex=0,this.l10n||(this.l10n=lt.NullL10n)}async render(j){const{annotations:s}=j,v=this.div;(0,u.setLayerDimensions)(v,this.viewport);const N=new Map,V={data:null,layer:v,linkService:j.linkService,downloadManager:j.downloadManager,imageResourcesPath:j.imageResourcesPath||"",renderForms:j.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:j.annotationStorage||new H.AnnotationStorage,enableScripting:j.enableScripting===!0,hasJSActions:j.hasJSActions,fieldObjects:j.fieldObjects,parent:this,elements:null};for(const K of s){if(K.noHTML)continue;const ot=K.annotationType===r.AnnotationType.POPUP;if(ot){const Pt=N.get(K.id);if(!Pt)continue;V.elements=Pt}else{const{width:Pt,height:qt}=O(K.rect);if(Pt<=0||qt<=0)continue}V.data=K;const bt=T.create(V);if(!bt.isRenderable)continue;if(!ot&&K.popupRef){const Pt=N.get(K.popupRef);Pt?Pt.push(bt):N.set(K.popupRef,[bt])}bt.annotationEditorType>0&&t(this,jt).set(bt.data.id,bt);const kt=bt.render();K.hidden&&(kt.style.visibility="hidden"),X(this,Nt,jn).call(this,kt,K.id)}X(this,xt,hn).call(this),await this.l10n.translate(v)}update({viewport:j}){const s=this.div;this.viewport=j,(0,u.setLayerDimensions)(s,{rotation:j.rotation}),X(this,xt,hn).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(t(this,jt).values())}getEditableAnnotation(j){return t(this,jt).get(j)}}It=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Nt=new WeakSet,jn=function(j,s){var N;const v=j.firstChild||j;v.id=`${r.AnnotationPrefix}${s}`,this.div.append(j),(N=t(this,It))==null||N.moveElementInDOM(this.div,j,v,!1)},xt=new WeakSet,hn=function(){if(!t(this,Rt))return;const j=this.div;for(const[s,v]of t(this,Rt)){const N=j.querySelector(`[data-annotation-id="${s}"]`);if(!N)continue;const{firstChild:V}=N;V?V.nodeName==="CANVAS"?V.replaceWith(v):V.before(v):N.append(v)}t(this,Rt).clear()},e.AnnotationLayer=n},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function M(H){return Math.floor(Math.max(0,Math.min(1,H))*255).toString(16).padStart(2,"0")}function r(H){return Math.max(0,Math.min(255,255*H))}class u{static CMYK_G([B,lt,F,C]){return["G",1-Math.min(1,.3*B+.59*F+.11*lt+C)]}static G_CMYK([B]){return["CMYK",0,0,0,1-B]}static G_RGB([B]){return["RGB",B,B,B]}static G_rgb([B]){return B=r(B),[B,B,B]}static G_HTML([B]){const lt=M(B);return`#${lt}${lt}${lt}`}static RGB_G([B,lt,F]){return["G",.3*B+.59*lt+.11*F]}static RGB_rgb(B){return B.map(r)}static RGB_HTML(B){return`#${B.map(M).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([B,lt,F,C]){return["RGB",1-Math.min(1,B+C),1-Math.min(1,F+C),1-Math.min(1,lt+C)]}static CMYK_rgb([B,lt,F,C]){return[r(1-Math.min(1,B+C)),r(1-Math.min(1,F+C)),r(1-Math.min(1,lt+C))]}static CMYK_HTML(B){const lt=this.CMYK_RGB(B).slice(1);return this.RGB_HTML(lt)}static RGB_CMYK([B,lt,F]){const C=1-B,f=1-lt,L=1-F,O=Math.min(C,f,L);return["CMYK",C,f,L,O]}}e.ColorConverters=u},(S,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};M.print_progress_percent="{{progress}}%";function r(B,lt){switch(B){case"find_match_count":B=`find_match_count[${lt.total===1?"one":"other"}]`;break;case"find_match_count_limit":B=`find_match_count_limit[${lt.limit===1?"one":"other"}]`;break}return M[B]||""}function u(B,lt){return lt?B.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(F,C)=>C in lt?lt[C]:"{{"+C+"}}"):B}const H={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(B,lt=null,F=r(B,lt)){return u(F,lt)},async translate(B){}};e.NullL10n=H},(S,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=M(25);class u{static setupStorage(B,lt,F,C,f){const L=C.getValue(lt,{value:null});switch(F.name){case"textarea":if(L.value!==null&&(B.textContent=L.value),f==="print")break;B.addEventListener("input",O=>{C.setValue(lt,{value:O.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(L.value===F.attributes.xfaOn?B.setAttribute("checked",!0):L.value===F.attributes.xfaOff&&B.removeAttribute("checked"),f==="print")break;B.addEventListener("change",O=>{C.setValue(lt,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&B.setAttribute("value",L.value),f==="print")break;B.addEventListener("input",O=>{C.setValue(lt,{value:O.target.value})})}break;case"select":if(L.value!==null){B.setAttribute("value",L.value);for(const O of F.children)O.attributes.value===L.value?O.attributes.selected=!0:O.attributes.hasOwnProperty("selected")&&delete O.attributes.selected}B.addEventListener("input",O=>{const T=O.target.options,x=T.selectedIndex===-1?"":T[T.selectedIndex].value;C.setValue(lt,{value:x})});break}}static setAttributes({html:B,element:lt,storage:F=null,intent:C,linkService:f}){const{attributes:L}=lt,O=B instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${C}`);for(const[T,x]of Object.entries(L))if(x!=null)switch(T){case"class":x.length&&B.setAttribute(T,x.join(" "));break;case"dataId":break;case"id":B.setAttribute("data-element-id",x);break;case"style":Object.assign(B.style,x);break;case"textContent":B.textContent=x;break;default:(!O||T!=="href"&&T!=="newWindow")&&B.setAttribute(T,x)}O&&f.addLinkAttributes(B,L.href,L.newWindow),F&&L.dataId&&this.setupStorage(B,L.dataId,lt,F)}static render(B){var A;const lt=B.annotationStorage,F=B.linkService,C=B.xfaHtml,f=B.intent||"display",L=document.createElement(C.name);C.attributes&&this.setAttributes({html:L,element:C,intent:f,linkService:F});const O=[[C,-1,L]],T=B.div;if(T.append(L),B.viewport){const p=`matrix(${B.viewport.transform.join(",")})`;T.style.transform=p}f!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const x=[];for(;O.length>0;){const[p,m,b]=O.at(-1);if(m+1===p.children.length){O.pop();continue}const E=p.children[++O.at(-1)[1]];if(E===null)continue;const{name:_}=E;if(_==="#text"){const h=document.createTextNode(E.value);x.push(h),b.append(h);continue}const o=(A=E==null?void 0:E.attributes)!=null&&A.xmlns?document.createElementNS(E.attributes.xmlns,_):document.createElement(_);if(b.append(o),E.attributes&&this.setAttributes({html:o,element:E,storage:lt,intent:f,linkService:F}),E.children&&E.children.length>0)O.push([E,-1,o]);else if(E.value){const h=document.createTextNode(E.value);r.XfaText.shouldBuildText(_)&&x.push(h),o.append(h)}}for(const p of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:x}}static update(B){const lt=`matrix(${B.viewport.transform.join(",")})`;B.div.style.transform=lt,B.div.hidden=!1}}e.XfaLayer=u},(S,e,M)=>{var C,f,L,O,T,x,A,p,m,b,E,_,o,h,D,Nn,l,Bn,g,Un,z,$n,q,dn,at,Wn,ht,un,vt,Hn,P,Gn,a,zn,c,Vn,R,qn,U,ae,Z,pn,dt,Fe,ct,Me,Lt,pe,Dt,fn,tt,De,pt,Xn,wt,gn,Gt,Yn,zt,Kn,$t,mn,ut,Le,Y,fe;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=M(1),u=M(4),H=M(29),B=M(6),lt=M(5);const _t=class _t extends u.AnnotationEditor{constructor(J){super({...J,name:"inkEditor"});$(this,D);$(this,l);$(this,g);$(this,z);$(this,q);$(this,at);$(this,ht);$(this,vt);$(this,P);$(this,a);$(this,c);$(this,R);$(this,U);$(this,Z);$(this,dt);$(this,ct);$(this,Lt);$(this,Dt);$(this,tt);$(this,zt);$(this,$t);$(this,ut);$(this,Y);$(this,C,0);$(this,f,0);$(this,L,this.canvasPointermove.bind(this));$(this,O,this.canvasPointerleave.bind(this));$(this,T,this.canvasPointerup.bind(this));$(this,x,this.canvasPointerdown.bind(this));$(this,A,new Path2D);$(this,p,!1);$(this,m,!1);$(this,b,!1);$(this,E,null);$(this,_,0);$(this,o,0);$(this,h,null);this.color=J.color||null,this.thickness=J.thickness||null,this.opacity=J.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(J){u.AnnotationEditor.initialize(J,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(J,Et){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:_t._defaultThickness=Et;break;case r.AnnotationEditorParamsType.INK_COLOR:_t._defaultColor=Et;break;case r.AnnotationEditorParamsType.INK_OPACITY:_t._defaultOpacity=Et/100;break}}updateParams(J,Et){switch(J){case r.AnnotationEditorParamsType.INK_THICKNESS:X(this,D,Nn).call(this,Et);break;case r.AnnotationEditorParamsType.INK_COLOR:X(this,l,Bn).call(this,Et);break;case r.AnnotationEditorParamsType.INK_OPACITY:X(this,g,Un).call(this,Et);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,_t._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,_t._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(_t._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_t._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||_t._defaultColor||u.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??_t._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,dt,Fe).call(this),X(this,ct,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,Lt,pe).call(this)),X(this,Y,fe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,E).disconnect(),it(this,E,null),super.remove())}setParent(J){!this.parent&&J?this._uiManager.removeShouldRescale(this):this.parent&&J===null&&this._uiManager.addShouldRescale(this),super.setParent(J)}onScaleChanging(){const[J,Et]=this.parentDimensions,It=this.width*J,Rt=this.height*Et;this.setDimensions(It,Rt)}enableEditMode(){t(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,x)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,x)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),it(this,p,!0),this.div.classList.add("disabled"),X(this,Y,fe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(J){this._focusEventsAllowed&&(super.focusin(J),this.enableEditMode())}canvasPointerdown(J){J.button!==0||!this.isInEditMode()||t(this,p)||(this.setInForeground(),J.preventDefault(),J.type!=="mouse"&&this.div.focus(),X(this,at,Wn).call(this,J.offsetX,J.offsetY))}canvasPointermove(J){J.preventDefault(),X(this,ht,un).call(this,J.offsetX,J.offsetY)}canvasPointerup(J){J.preventDefault(),X(this,Z,pn).call(this,J)}canvasPointerleave(J){X(this,Z,pn).call(this,J)}get isResizable(){return!this.isEmpty()&&t(this,p)}render(){if(this.div)return this.div;let J,Et;this.width&&(J=this.x,Et=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var xt;return(xt=this.div)==null?void 0:xt.setAttribute("aria-label",Jt)});const[It,Rt,jt,Nt]=X(this,z,$n).call(this);if(this.setAt(It,Rt,0,0),this.setDims(jt,Nt),X(this,dt,Fe).call(this),this.width){const[Jt,xt]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*xt),this.setAt(J*Jt,Et*xt,this.width*Jt,this.height*xt),it(this,b,!0),X(this,Lt,pe).call(this),this.setDims(this.width*Jt,this.height*xt),X(this,U,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,ct,Me).call(this),this.div}setDimensions(J,Et){const It=Math.round(J),Rt=Math.round(Et);if(t(this,_)===It&&t(this,o)===Rt)return;it(this,_,It),it(this,o,Rt),this.canvas.style.visibility="hidden";const[jt,Nt]=this.parentDimensions;this.width=J/jt,this.height=Et/Nt,this.fixAndSetPosition(),t(this,p)&&X(this,Dt,fn).call(this,J,Et),X(this,Lt,pe).call(this),X(this,U,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(J,Et,It){var V,K,ot;if(J instanceof H.InkAnnotationElement)return null;const Rt=super.deserialize(J,Et,It);Rt.thickness=J.thickness,Rt.color=r.Util.makeHexColor(...J.color),Rt.opacity=J.opacity;const[jt,Nt]=Rt.pageDimensions,Jt=Rt.width*jt,xt=Rt.height*Nt,Yt=Rt.parentScale,Ot=J.thickness/2;it(Rt,p,!0),it(Rt,_,Math.round(Jt)),it(Rt,o,Math.round(xt));const{paths:j,rect:s,rotation:v}=J;for(let{bezier:bt}of j){bt=X(V=_t,Gt,Yn).call(V,bt,s,v);const kt=[];Rt.paths.push(kt);let Pt=Yt*(bt[0]-Ot),qt=Yt*(bt[1]-Ot);for(let Mt=2,Wt=bt.length;Mt<Wt;Mt+=6){const Xt=Yt*(bt[Mt]-Ot),Kt=Yt*(bt[Mt+1]-Ot),Qt=Yt*(bt[Mt+2]-Ot),se=Yt*(bt[Mt+3]-Ot),ne=Yt*(bt[Mt+4]-Ot),ie=Yt*(bt[Mt+5]-Ot);kt.push([[Pt,qt],[Xt,Kt],[Qt,se],[ne,ie]]),Pt=ne,qt=ie}const Ft=X(this,pt,Xn).call(this,kt);Rt.bezierPath2D.push(Ft)}const N=X(K=Rt,$t,mn).call(K);return it(Rt,f,Math.max(u.AnnotationEditor.MIN_SIZE,N[2]-N[0])),it(Rt,C,Math.max(u.AnnotationEditor.MIN_SIZE,N[3]-N[1])),X(ot=Rt,Dt,fn).call(ot,Jt,xt),Rt}serialize(){if(this.isEmpty())return null;const J=this.getRect(0,0),Et=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:Et,thickness:this.thickness,opacity:this.opacity,paths:X(this,zt,Kn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,J),pageIndex:this.pageIndex,rect:J,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};C=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,_=new WeakMap,o=new WeakMap,h=new WeakMap,D=new WeakSet,Nn=function(J){const Et=this.thickness;this.addCommands({cmd:()=>{this.thickness=J,X(this,Y,fe).call(this)},undo:()=>{this.thickness=Et,X(this,Y,fe).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Bn=function(J){const Et=this.color;this.addCommands({cmd:()=>{this.color=J,X(this,U,ae).call(this)},undo:()=>{this.color=Et,X(this,U,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Un=function(J){J/=100;const Et=this.opacity;this.addCommands({cmd:()=>{this.opacity=J,X(this,U,ae).call(this)},undo:()=>{this.opacity=Et,X(this,U,ae).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,$n=function(){const{parentRotation:J,parentDimensions:[Et,It]}=this;switch(J){case 90:return[0,It,It,Et];case 180:return[Et,It,Et,It];case 270:return[Et,0,It,Et];default:return[0,0,Et,It]}},q=new WeakSet,dn=function(){const{ctx:J,color:Et,opacity:It,thickness:Rt,parentScale:jt,scaleFactor:Nt}=this;J.lineWidth=Rt*jt/Nt,J.lineCap="round",J.lineJoin="round",J.miterLimit=10,J.strokeStyle=`${Et}${(0,lt.opacityToHex)(It)}`},at=new WeakSet,Wn=function(J,Et){this.canvas.addEventListener("contextmenu",B.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,O)),this.canvas.addEventListener("pointermove",t(this,L)),this.canvas.addEventListener("pointerup",t(this,T)),this.canvas.removeEventListener("pointerdown",t(this,x)),this.isEditing=!0,t(this,b)||(it(this,b,!0),X(this,Lt,pe).call(this),this.thickness||(this.thickness=_t._defaultThickness),this.color||(this.color=_t._defaultColor||u.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=_t._defaultOpacity)),this.currentPath.push([J,Et]),it(this,m,!1),X(this,q,dn).call(this),it(this,h,()=>{X(this,a,zn).call(this),t(this,h)&&window.requestAnimationFrame(t(this,h))}),window.requestAnimationFrame(t(this,h))},ht=new WeakSet,un=function(J,Et){const[It,Rt]=this.currentPath.at(-1);if(this.currentPath.length>1&&J===It&&Et===Rt)return;const jt=this.currentPath;let Nt=t(this,A);if(jt.push([J,Et]),it(this,m,!0),jt.length<=2){Nt.moveTo(...jt[0]),Nt.lineTo(J,Et);return}jt.length===3&&(it(this,A,Nt=new Path2D),Nt.moveTo(...jt[0])),X(this,c,Vn).call(this,Nt,...jt.at(-3),...jt.at(-2),J,Et)},vt=new WeakSet,Hn=function(){if(this.currentPath.length===0)return;const J=this.currentPath.at(-1);t(this,A).lineTo(...J)},P=new WeakSet,Gn=function(J,Et){it(this,h,null),J=Math.min(Math.max(J,0),this.canvas.width),Et=Math.min(Math.max(Et,0),this.canvas.height),X(this,ht,un).call(this,J,Et),X(this,vt,Hn).call(this);let It;if(this.currentPath.length!==1)It=X(this,R,qn).call(this);else{const xt=[J,Et];It=[[xt,xt.slice(),xt.slice(),xt]]}const Rt=t(this,A),jt=this.currentPath;this.currentPath=[],it(this,A,new Path2D);const Nt=()=>{this.allRawPaths.push(jt),this.paths.push(It),this.bezierPath2D.push(Rt),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,dt,Fe).call(this),X(this,ct,Me).call(this)),X(this,Y,fe).call(this))};this.addCommands({cmd:Nt,undo:Jt,mustExec:!0})},a=new WeakSet,zn=function(){if(!t(this,m))return;it(this,m,!1);const J=Math.ceil(this.thickness*this.parentScale),Et=this.currentPath.slice(-3),It=Et.map(Nt=>Nt[0]),Rt=Et.map(Nt=>Nt[1]);Math.min(...It)-J,Math.max(...It)+J,Math.min(...Rt)-J,Math.max(...Rt)+J;const{ctx:jt}=this;jt.save(),jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Nt of this.bezierPath2D)jt.stroke(Nt);jt.stroke(t(this,A)),jt.restore()},c=new WeakSet,Vn=function(J,Et,It,Rt,jt,Nt,Jt){const xt=(Et+Rt)/2,Yt=(It+jt)/2,Ot=(Rt+Nt)/2,j=(jt+Jt)/2;J.bezierCurveTo(xt+2*(Rt-xt)/3,Yt+2*(jt-Yt)/3,Ot+2*(Rt-Ot)/3,j+2*(jt-j)/3,Ot,j)},R=new WeakSet,qn=function(){const J=this.currentPath;if(J.length<=2)return[[J[0],J[0],J.at(-1),J.at(-1)]];const Et=[];let It,[Rt,jt]=J[0];for(It=1;It<J.length-2;It++){const[s,v]=J[It],[N,V]=J[It+1],K=(s+N)/2,ot=(v+V)/2,bt=[Rt+2*(s-Rt)/3,jt+2*(v-jt)/3],kt=[K+2*(s-K)/3,ot+2*(v-ot)/3];Et.push([[Rt,jt],bt,kt,[K,ot]]),[Rt,jt]=[K,ot]}const[Nt,Jt]=J[It],[xt,Yt]=J[It+1],Ot=[Rt+2*(Nt-Rt)/3,jt+2*(Jt-jt)/3],j=[xt+2*(Nt-xt)/3,Yt+2*(Jt-Yt)/3];return Et.push([[Rt,jt],Ot,j,[xt,Yt]]),Et},U=new WeakSet,ae=function(){if(this.isEmpty()){X(this,tt,De).call(this);return}X(this,q,dn).call(this);const{canvas:J,ctx:Et}=this;Et.setTransform(1,0,0,1,0,0),Et.clearRect(0,0,J.width,J.height),X(this,tt,De).call(this);for(const It of this.bezierPath2D)Et.stroke(It)},Z=new WeakSet,pn=function(J){this.canvas.removeEventListener("pointerleave",t(this,O)),this.canvas.removeEventListener("pointermove",t(this,L)),this.canvas.removeEventListener("pointerup",t(this,T)),this.canvas.addEventListener("pointerdown",t(this,x)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",B.noContextMenu)},10),X(this,P,Gn).call(this,J.offsetX,J.offsetY),this.addToAnnotationStorage(),this.setInBackground()},dt=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(J=>{var Et;return(Et=this.canvas)==null?void 0:Et.setAttribute("aria-label",J)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ct=new WeakSet,Me=function(){it(this,E,new ResizeObserver(J=>{const Et=J[0].contentRect;Et.width&&Et.height&&this.setDimensions(Et.width,Et.height)})),t(this,E).observe(this.div)},Lt=new WeakSet,pe=function(){if(!t(this,b))return;const[J,Et]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*J),this.canvas.height=Math.ceil(this.height*Et),X(this,tt,De).call(this)},Dt=new WeakSet,fn=function(J,Et){const It=X(this,ut,Le).call(this),Rt=(J-It)/t(this,f),jt=(Et-It)/t(this,C);this.scaleFactor=Math.min(Rt,jt)},tt=new WeakSet,De=function(){const J=X(this,ut,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+J,this.translationY*this.scaleFactor+J)},pt=new WeakSet,Xn=function(J){const Et=new Path2D;for(let It=0,Rt=J.length;It<Rt;It++){const[jt,Nt,Jt,xt]=J[It];It===0&&Et.moveTo(...jt),Et.bezierCurveTo(Nt[0],Nt[1],Jt[0],Jt[1],xt[0],xt[1])}return Et},wt=new WeakSet,gn=function(J,Et,It){const[Rt,jt,Nt,Jt]=Et;switch(It){case 0:for(let xt=0,Yt=J.length;xt<Yt;xt+=2)J[xt]+=Rt,J[xt+1]=Jt-J[xt+1];break;case 90:for(let xt=0,Yt=J.length;xt<Yt;xt+=2){const Ot=J[xt];J[xt]=J[xt+1]+Rt,J[xt+1]=Ot+jt}break;case 180:for(let xt=0,Yt=J.length;xt<Yt;xt+=2)J[xt]=Nt-J[xt],J[xt+1]+=jt;break;case 270:for(let xt=0,Yt=J.length;xt<Yt;xt+=2){const Ot=J[xt];J[xt]=Nt-J[xt+1],J[xt+1]=Jt-Ot}break;default:throw new Error("Invalid rotation")}return J},Gt=new WeakSet,Yn=function(J,Et,It){const[Rt,jt,Nt,Jt]=Et;switch(It){case 0:for(let xt=0,Yt=J.length;xt<Yt;xt+=2)J[xt]-=Rt,J[xt+1]=Jt-J[xt+1];break;case 90:for(let xt=0,Yt=J.length;xt<Yt;xt+=2){const Ot=J[xt];J[xt]=J[xt+1]-jt,J[xt+1]=Ot-Rt}break;case 180:for(let xt=0,Yt=J.length;xt<Yt;xt+=2)J[xt]=Nt-J[xt],J[xt+1]-=jt;break;case 270:for(let xt=0,Yt=J.length;xt<Yt;xt+=2){const Ot=J[xt];J[xt]=Jt-J[xt+1],J[xt+1]=Nt-Ot}break;default:throw new Error("Invalid rotation")}return J},zt=new WeakSet,Kn=function(J,Et,It,Rt){var Yt,Ot;const jt=[],Nt=this.thickness/2,Jt=J*Et+Nt,xt=J*It+Nt;for(const j of this.paths){const s=[],v=[];for(let N=0,V=j.length;N<V;N++){const[K,ot,bt,kt]=j[N],Pt=J*K[0]+Jt,qt=J*K[1]+xt,Ft=J*ot[0]+Jt,Mt=J*ot[1]+xt,Wt=J*bt[0]+Jt,Xt=J*bt[1]+xt,Kt=J*kt[0]+Jt,Qt=J*kt[1]+xt;N===0&&(s.push(Pt,qt),v.push(Pt,qt)),s.push(Ft,Mt,Wt,Xt,Kt,Qt),v.push(Ft,Mt),N===V-1&&v.push(Kt,Qt)}jt.push({bezier:X(Yt=_t,wt,gn).call(Yt,s,Rt,this.rotation),points:X(Ot=_t,wt,gn).call(Ot,v,Rt,this.rotation)})}return jt},$t=new WeakSet,mn=function(){let J=1/0,Et=-1/0,It=1/0,Rt=-1/0;for(const jt of this.paths)for(const[Nt,Jt,xt,Yt]of jt){const Ot=r.Util.bezierBoundingBox(...Nt,...Jt,...xt,...Yt);J=Math.min(J,Ot[0]),It=Math.min(It,Ot[1]),Et=Math.max(Et,Ot[2]),Rt=Math.max(Rt,Ot[3])}return[J,It,Et,Rt]},ut=new WeakSet,Le=function(){return t(this,p)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,fe=function(J=!1){if(this.isEmpty())return;if(!t(this,p)){X(this,U,ae).call(this);return}const Et=X(this,$t,mn).call(this),It=X(this,ut,Le).call(this);it(this,f,Math.max(u.AnnotationEditor.MIN_SIZE,Et[2]-Et[0])),it(this,C,Math.max(u.AnnotationEditor.MIN_SIZE,Et[3]-Et[1]));const Rt=Math.ceil(It+t(this,f)*this.scaleFactor),jt=Math.ceil(It+t(this,C)*this.scaleFactor),[Nt,Jt]=this.parentDimensions;this.width=Rt/Nt,this.height=jt/Jt,this.setAspectRatio(Rt,jt);const xt=this.translationX,Yt=this.translationY;this.translationX=-Et[0],this.translationY=-Et[1],X(this,Lt,pe).call(this),X(this,U,ae).call(this),it(this,_,Rt),it(this,o,jt),this.setDims(Rt,jt);const Ot=J?It/this.scaleFactor/2:0;this.translate(xt-this.translationX-Ot,Yt-this.translationY-Ot)},$(_t,pt),$(_t,wt),$(_t,Gt),ee(_t,"_defaultColor",null),ee(_t,"_defaultOpacity",1),ee(_t,"_defaultThickness",1),ee(_t,"_type","ink");let F=_t;e.InkEditor=F},(S,e,M)=>{var F,C,f,L,O,T,x,A,p,m,b,Ae,_,ve,h,Oe,y,bn,k,Jn,W,Qn,w,yn,nt,Ie,G,Zn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=M(1),u=M(4),H=M(6),B=M(29);const gt=class gt extends u.AnnotationEditor{constructor(P){super({...P,name:"stampEditor"});$(this,b);$(this,_);$(this,h);$(this,y);$(this,k);$(this,W);$(this,w);$(this,nt);$(this,G);$(this,F,null);$(this,C,null);$(this,f,null);$(this,L,null);$(this,O,null);$(this,T,null);$(this,x,null);$(this,A,null);$(this,p,!1);$(this,m,!1);it(this,L,P.bitmapUrl),it(this,O,P.bitmapFile)}static initialize(P){u.AnnotationEditor.initialize(P)}static get supportedTypes(){const P=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",P.map(n=>`image/${n}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(P){return this.supportedTypes.includes(P)}static paste(P,n){n.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:P.getAsFile()})}remove(){var P,n;t(this,C)&&(it(this,F,null),this._uiManager.imageManager.deleteId(t(this,C)),(P=t(this,T))==null||P.remove(),it(this,T,null),(n=t(this,x))==null||n.disconnect(),it(this,x,null)),super.remove()}rebuild(){if(!this.parent){t(this,C)&&X(this,h,Oe).call(this);return}super.rebuild(),this.div!==null&&(t(this,C)&&X(this,h,Oe).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,F)||t(this,L)||t(this,O))}get isResizable(){return!0}render(){if(this.div)return this.div;let P,n;if(this.width&&(P=this.x,n=this.y),super.render(),this.div.hidden=!0,t(this,F)?X(this,y,bn).call(this):X(this,h,Oe).call(this),this.width){const[a,i]=this.parentDimensions;this.setAt(P*a,n*i,this.width*a,this.height*i)}return this.div}static deserialize(P,n,a){if(P instanceof B.StampAnnotationElement)return null;const i=super.deserialize(P,n,a),{rect:c,bitmapUrl:d,bitmapId:R,isSvg:I,accessibilityData:U}=P;R&&a.imageManager.isValidId(R)?it(i,C,R):it(i,L,d),it(i,p,I);const[st,Z]=i.pageDimensions;return i.width=(c[2]-c[0])/st,i.height=(c[3]-c[1])/Z,U&&(i.altTextData=U),i}serialize(P=!1,n=null){if(this.isEmpty())return null;const a={annotationType:r.AnnotationEditorType.STAMP,bitmapId:t(this,C),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,p),structTreeParentId:this._structTreeParentId};if(P)return a.bitmapUrl=X(this,nt,Ie).call(this,!0),a.accessibilityData=this.altTextData,a;const{decorative:i,altText:c}=this.altTextData;if(!i&&c&&(a.accessibilityData={type:"Figure",alt:c}),n===null)return a;n.stamps||(n.stamps=new Map);const d=t(this,p)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(t(this,C)))n.stamps.set(t(this,C),{area:d,serialized:a}),a.bitmap=X(this,nt,Ie).call(this,!1);else if(t(this,p)){const R=n.stamps.get(t(this,C));d>R.area&&(R.area=d,R.serialized.bitmap.close(),R.serialized.bitmap=X(this,nt,Ie).call(this,!1))}return a}};F=new WeakMap,C=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakSet,Ae=function(P,n=!1){if(!P){this.remove();return}it(this,F,P.bitmap),n||(it(this,C,P.id),it(this,p,P.isSvg)),X(this,y,bn).call(this)},_=new WeakSet,ve=function(){it(this,f,null),this._uiManager.enableWaiting(!1),t(this,T)&&this.div.focus()},h=new WeakSet,Oe=function(){if(t(this,C)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,C)).then(n=>X(this,b,Ae).call(this,n,!0)).finally(()=>X(this,_,ve).call(this));return}if(t(this,L)){const n=t(this,L);it(this,L,null),this._uiManager.enableWaiting(!0),it(this,f,this._uiManager.imageManager.getFromUrl(n).then(a=>X(this,b,Ae).call(this,a)).finally(()=>X(this,_,ve).call(this)));return}if(t(this,O)){const n=t(this,O);it(this,O,null),this._uiManager.enableWaiting(!0),it(this,f,this._uiManager.imageManager.getFromFile(n).then(a=>X(this,b,Ae).call(this,a)).finally(()=>X(this,_,ve).call(this)));return}const P=document.createElement("input");P.type="file",P.accept=gt.supportedTypesStr,it(this,f,new Promise(n=>{P.addEventListener("change",async()=>{if(!P.files||P.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(P.files[0]);X(this,b,Ae).call(this,a)}n()}),P.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>X(this,_,ve).call(this))),P.click()},y=new WeakSet,bn=function(){const{div:P}=this;let{width:n,height:a}=t(this,F);const[i,c]=this.pageDimensions,d=.75;if(this.width)n=this.width*i,a=this.height*c;else if(n>d*i||a>d*c){const st=Math.min(d*i/n,d*c/a);n*=st,a*=st}const[R,I]=this.parentDimensions;this.setDims(n*R/i,a*I/c),this._uiManager.enableWaiting(!1);const U=it(this,T,document.createElement("canvas"));P.append(U),P.hidden=!1,X(this,w,yn).call(this,n,a),X(this,G,Zn).call(this),t(this,m)||(this.parent.addUndoableEditor(this),it(this,m,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},k=new WeakSet,Jn=function(P,n){var d;const[a,i]=this.parentDimensions;this.width=P/a,this.height=n/i,this.setDims(P,n),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,A)!==null&&clearTimeout(t(this,A)),it(this,A,setTimeout(()=>{it(this,A,null),X(this,w,yn).call(this,P,n)},200))},W=new WeakSet,Qn=function(P,n){const{width:a,height:i}=t(this,F);let c=a,d=i,R=t(this,F);for(;c>2*P||d>2*n;){const I=c,U=d;c>2*P&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const st=new OffscreenCanvas(c,d);st.getContext("2d").drawImage(R,0,0,I,U,0,0,c,d),R=st.transferToImageBitmap()}return R},w=new WeakSet,yn=function(P,n){P=Math.ceil(P),n=Math.ceil(n);const a=t(this,T);if(!a||a.width===P&&a.height===n)return;a.width=P,a.height=n;const i=t(this,p)?t(this,F):X(this,W,Qn).call(this,P,n),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(i,0,0,i.width,i.height,0,0,P,n)},nt=new WeakSet,Ie=function(P){if(P){if(t(this,p)){const i=this._uiManager.imageManager.getSvgUrl(t(this,C));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=t(this,F),n.getContext("2d").drawImage(t(this,F),0,0),n.toDataURL()}if(t(this,p)){const[n,a]=this.pageDimensions,i=Math.round(this.width*n*H.PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*H.PixelsPerInch.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(i,c);return d.getContext("2d").drawImage(t(this,F),0,0,t(this,F).width,t(this,F).height,0,0,i,c),d.transferToImageBitmap()}return structuredClone(t(this,F))},G=new WeakSet,Zn=function(){it(this,x,new ResizeObserver(P=>{const n=P[0].contentRect;n.width&&n.height&&X(this,k,Jn).call(this,n.width,n.height)})),t(this,x).observe(this.div)},ee(gt,"_type","stamp");let lt=gt;e.StampEditor=lt}],__webpack_module_cache__={};function __w_pdfjs_require__(S){var e=__webpack_module_cache__[S];if(e!==void 0)return e.exports;var M=__webpack_module_cache__[S]={exports:{}};return __webpack_modules__[S](M,M.exports,__w_pdfjs_require__),M.exports}var __webpack_exports__={};return(()=>{var S=__webpack_exports__;Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(S,"AnnotationEditorLayer",{enumerable:!0,get:function(){return H.AnnotationEditorLayer}}),Object.defineProperty(S,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(S,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(S,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return B.AnnotationEditorUIManager}}),Object.defineProperty(S,"AnnotationLayer",{enumerable:!0,get:function(){return lt.AnnotationLayer}}),Object.defineProperty(S,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(S,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(S,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(S,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(S,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(S,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(S,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(S,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(S,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(S,"PDFDataRangeTransport",{enumerable:!0,get:function(){return M.PDFDataRangeTransport}}),Object.defineProperty(S,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(S,"PDFWorker",{enumerable:!0,get:function(){return M.PDFWorker}}),Object.defineProperty(S,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(S,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(S,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(S,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(S,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(S,"SVGGraphics",{enumerable:!0,get:function(){return M.SVGGraphics}}),Object.defineProperty(S,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(S,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(S,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(S,"XfaLayer",{enumerable:!0,get:function(){return C.XfaLayer}}),Object.defineProperty(S,"build",{enumerable:!0,get:function(){return M.build}}),Object.defineProperty(S,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(S,"getDocument",{enumerable:!0,get:function(){return M.getDocument}}),Object.defineProperty(S,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(S,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(S,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(S,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(S,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(S,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(S,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(S,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(S,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(S,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(S,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(S,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(S,"version",{enumerable:!0,get:function(){return M.version}});var e=__w_pdfjs_require__(1),M=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),H=__w_pdfjs_require__(27),B=__w_pdfjs_require__(5),lt=__w_pdfjs_require__(29),F=__w_pdfjs_require__(14),C=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var __spreadArray=globalThis&&globalThis.__spreadArray||function(S,e,M){if(M||arguments.length===2)for(var r=0,u=e.length,H;r<u;r++)(H||!(r in e))&&(H||(H=Array.prototype.slice.call(e,0,r)),H[r]=e[r]);return S.concat(H||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(S,e){var M={};return allEvents.forEach(function(r){var u=S[r];u&&(e?M[r]=function(H){return u(H,e(r))}:M[r]=u)}),M}function makeCancellablePromise(S){var e=!1,M=new Promise(function(r,u){S.then(function(H){return!e&&r(H)}).catch(function(H){return!e&&u(H)})});return{promise:M,cancel:function(){e=!0}}}var isProduction=!0,prefix="Invariant failed";function invariant(S,e){if(!S){if(isProduction)throw new Error(prefix);var M=typeof e=="function"?e():e,r=M?"".concat(prefix,": ").concat(M):prefix;throw new Error(r)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(S,e,M){for(M of S.keys())if(dequal(M,e))return M}function dequal(S,e){var M,r,u;if(S===e)return!0;if(S&&e&&(M=S.constructor)===e.constructor){if(M===Date)return S.getTime()===e.getTime();if(M===RegExp)return S.toString()===e.toString();if(M===Array){if((r=S.length)===e.length)for(;r--&&dequal(S[r],e[r]););return r===-1}if(M===Set){if(S.size!==e.size)return!1;for(r of S)if(u=r,u&&typeof u=="object"&&(u=find(e,u),!u)||!e.has(u))return!1;return!0}if(M===Map){if(S.size!==e.size)return!1;for(r of S)if(u=r[0],u&&typeof u=="object"&&(u=find(e,u),!u)||!dequal(r[1],e.get(u)))return!1;return!0}if(M===ArrayBuffer)S=new Uint8Array(S),e=new Uint8Array(e);else if(M===DataView){if((r=S.byteLength)===e.byteLength)for(;r--&&S.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(S)){if((r=S.byteLength)===e.byteLength)for(;r--&&S[r]===e[r];);return r===-1}if(!M||typeof S=="object"){r=0;for(M in S)if(has.call(S,M)&&++r&&!has.call(e,M)||!(M in e)||!dequal(S[M],e[M]))return!1;return Object.keys(e).length===r}}return S!==S&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:S,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},S)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(M=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(M):Array.isArray(e)?M(e):e.then(M)}).then(M=>{invariant(Array.isArray(M),`"${M}" is not a valid destination array.`);const r=M[0];new Promise(u=>{invariant(this.pdfDocument,"PDF document not loaded."),r instanceof Object?this.pdfDocument.getPageIndex(r).then(H=>{u(H)}).catch(()=>{invariant(!1,`"${r}" is not a valid page reference.`)}):typeof r=="number"?u(r):invariant(!1,`"${r}" is not a valid destination reference.`)}).then(u=>{const H=u+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(H>=1&&H<=this.pagesCount,`"${H}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:M,pageIndex:u,pageNumber:H})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const M=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:M,pageNumber:e})}addLinkAttributes(e,M,r){e.href=M,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(S){return typeof S<"u"}function isProvided(S){return isDefined(S)&&S!==null}function isString(S){return typeof S=="string"}function isArrayBuffer(S){return S instanceof ArrayBuffer}function isBlob(S){return invariant(isBrowser,"isBlob can only be used in a browser environment"),S instanceof Blob}function isDataURI(S){return isString(S)&&/^data:/.test(S)}function dataURItoByteString(S){invariant(isDataURI(S),"Invalid data URI.");const[e="",M=""]=S.split(",");return e.split(";").indexOf("base64")!==-1?atob(M):unescape(M)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(S){S&&S.cancel&&S.cancel()}function makePageCallback(S,e){return Object.defineProperty(S,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(S,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(S,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(S,"originalHeight",{get(){return this.view[3]},configurable:!0}),S}function isCancelException(S){return S.name==="RenderingCancelledException"}function loadFromFile(S){return new Promise((e,M)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return M(new Error("Error while reading a file."));e(r.result)},r.onerror=u=>{if(!u.target)return M(new Error("Error while reading a file."));const{error:H}=u.target;if(!H)return M(new Error("Error while reading a file."));switch(H.code){case H.NOT_FOUND_ERR:return M(new Error("Error while reading a file: File not found."));case H.SECURITY_ERR:return M(new Error("Error while reading a file: Security error."));case H.ABORT_ERR:return M(new Error("Error while reading a file: Aborted."));default:return M(new Error("Error while reading a file."))}},r.readAsArrayBuffer(S)})}function reducer(S,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return S}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const S={};return allEvents.forEach(e=>{S[e]=PropTypes.func}),S})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function S(e,M,r){const{[M]:u,pageNumber:H,pdf:B}=e;if(!isDefined(B))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${r}\`, expected \`number\`.`);if(u<0)return new Error(`Expected \`${M}\` to be greater or equal to 0.`);const{numPages:lt}=B;if(u+1>lt)return new Error(`Expected \`${M}\` to be less or equal to ${lt-1}.`)}else if(!isDefined(H))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${r}\`.`);return null},isPageNumber=function S(e,M,r){const{[M]:u,pageIndex:H,pdf:B}=e;if(!isDefined(B))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${r}\`, expected \`number\`.`);if(u<1)return new Error(`Expected \`${M}\` to be greater or equal to 1.`);const{numPages:lt}=B;if(u>lt)return new Error(`Expected \`${M}\` to be less or equal to ${lt}.`)}else if(!isDefined(H))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${r}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(S,e,M,r){function u(H){return H instanceof M?H:new M(function(B){B(H)})}return new(M||(M=Promise))(function(H,B){function lt(f){try{C(r.next(f))}catch(L){B(L)}}function F(f){try{C(r.throw(f))}catch(L){B(L)}}function C(f){f.done?H(f.value):u(f.value).then(lt,F)}C((r=r.apply(S,e||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(S,e){var M={};for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&e.indexOf(r)<0&&(M[r]=S[r]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(S);u<r.length;u++)e.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(S,r[u])&&(M[r[u]]=S[r[u]]);return M};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(S,e)=>{switch(e){case PasswordResponses$1.NEED_PASSWORD:{const M=prompt("Enter the password to open this PDF file.");S(M);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const M=prompt("Invalid password. Please try again.");S(M);break}}};function isParameterObject(S){return typeof S=="object"&&S!==null&&("data"in S||"range"in S||"url"in S)}const Document=reactExports.forwardRef(function S(e,M){var{children:r,className:u,error:H="Failed to load PDF file.",externalLinkRel:B,externalLinkTarget:lt,file:F,inputRef:C,imageResourcesPath:f,loading:L="Loading PDF…",noData:O="No PDF file specified.",onItemClick:T,onLoadError:x,onLoadProgress:A,onLoadSuccess:p,onPassword:m=defaultOnPassword,onSourceError:b,onSourceSuccess:E,options:_,renderMode:o,rotate:h}=e,D=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[y,l]=useResolver(),{value:k,error:g}=y,[W,z]=useResolver(),{value:w,error:q}=W,nt=reactExports.useRef(new LinkService),at=reactExports.useRef([]),G=reactExports.useRef(),ht=reactExports.useRef();reactExports.useEffect(()=>{F&&F!==G.current&&isParameterObject(F)&&(warning$1(!dequal(F,G.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),G.current=F)},[F]),reactExports.useEffect(()=>{_&&_!==ht.current&&(warning$1(!dequal(_,ht.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ht.current=_)},[_]);const gt=reactExports.useRef({scrollPageIntoView:ft=>{const{dest:ct,pageNumber:Ct,pageIndex:Lt=Ct-1}=ft;if(T){T({dest:ct,pageIndex:Lt,pageNumber:Ct});return}const At=at.current[Lt];if(At){At.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Ct} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(M,()=>({linkService:nt,pages:at,viewer:gt}),[]);function vt(){E&&E()}function St(){g&&(warning$1(!1,g.toString()),b&&b(g))}function P(){l({type:"RESET"})}reactExports.useEffect(P,[F,l]);const n=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!F)return null;if(typeof F=="string")return isDataURI(F)?{data:dataURItoByteString(F)}:(displayCORSWarning(),{url:F});if(F instanceof PDFDataRangeTransport)return{range:F};if(isArrayBuffer(F))return{data:F};if(isBrowser&&isBlob(F))return{data:yield loadFromFile(F)};if(invariant(typeof F=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(F),"Invalid parameter object: need either .data, .range or .url"),"url"in F&&typeof F.url=="string"){if(isDataURI(F.url)){const{url:ft}=F,ct=__rest$1(F,["url"]),Ct=dataURItoByteString(ft);return Object.assign({data:Ct},ct)}displayCORSWarning()}return F}),[F]);reactExports.useEffect(()=>{const ft=makeCancellablePromise(n());return ft.promise.then(ct=>{l({type:"RESOLVE",value:ct})}).catch(ct=>{l({type:"REJECT",error:ct})}),()=>{cancelRunningTask(ft)}},[n,l]),reactExports.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){St();return}vt()}},[k]);function a(){w&&(p&&p(w),at.current=new Array(w.numPages),nt.current.setDocument(w))}function i(){q&&(warning$1(!1,q.toString()),x&&x(q))}function c(){z({type:"RESET"})}reactExports.useEffect(c,[z,k]);function d(){if(!k)return;const ft=_?Object.assign(Object.assign({},k),_):k,ct=pdfjs$1.getDocument(ft);A&&(ct.onProgress=A),m&&(ct.onPassword=m);const Ct=ct;return Ct.promise.then(Lt=>{z({type:"RESOLVE",value:Lt})}).catch(Lt=>{Ct.destroyed||z({type:"REJECT",error:Lt})}),()=>{Ct.destroy()}}reactExports.useEffect(d,[_,z,k]),reactExports.useEffect(()=>{if(!(typeof w>"u")){if(w===!1){i();return}a()}},[w]);function R(){nt.current.setViewer(gt.current),nt.current.setExternalLinkRel(B),nt.current.setExternalLinkTarget(lt)}reactExports.useEffect(R,[B,lt]);function I(ft,ct){at.current[ft]=ct}function U(ft){delete at.current[ft]}const st=reactExports.useMemo(()=>({imageResourcesPath:f,linkService:nt.current,onItemClick:T,pdf:w,registerPage:I,renderMode:o,rotate:h,unregisterPage:U}),[f,T,w,o,h]),Z=reactExports.useMemo(()=>makeEventProps(D,()=>w),[D,w]);function rt(){return React.createElement(DocumentContext.Provider,{value:st},r)}function dt(){return F?w==null?React.createElement(Message,{type:"loading"},typeof L=="function"?L():L):w===!1?React.createElement(Message,{type:"error"},typeof H=="function"?H():H):rt():React.createElement(Message,{type:"no-data"},typeof O=="function"?O():O)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",u),ref:C,style:{"--scale-factor":"1"}},Z),dt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var S=[],e=0;e<arguments.length;e++)S[e]=arguments[e];var M=S.filter(Boolean);if(M.length<=1){var r=M[0];return r||null}return function(H){M.forEach(function(B){typeof B=="function"?B(H):B&&(B.current=H)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(S){return S in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(S){return"children"in S}function isStructTreeNodeWithOnlyContentChild(S){return isStructTreeNode(S)?S.children.length===1&&0 in S.children&&"id"in S.children[0]:!1}function getRoleAttributes(S){const e={};if(isStructTreeNode(S)){const{role:M}=S,r=M.match(HEADING_PATTERN);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(isPdfRole(M)){const u=PDF_ROLE_TO_HTML_ROLE[M];u&&(e.role=u)}}return e}function getBaseAttributes(S){const e={};if(isStructTreeNode(S)){if(S.alt!==void 0&&(e["aria-label"]=S.alt),S.lang!==void 0&&(e.lang=S.lang),isStructTreeNodeWithOnlyContentChild(S)){const[M]=S.children;if(M){const r=getBaseAttributes(M);return Object.assign(Object.assign({},e),r)}}}else"id"in S&&(e["aria-owns"]=S.id);return e}function getAttributes(S){return S?Object.assign(Object.assign({},getRoleAttributes(S)),getBaseAttributes(S)):null}function StructTreeItem({className:S,node:e}){const M=reactExports.useMemo(()=>getAttributes(e),[e]),r=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((u,H)=>React.createElement(StructTreeItem,{key:H,node:u})),[e]);return React.createElement("span",Object.assign({className:S},M),r)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:M}=S,[r,u]=useResolver(),{value:H,error:B}=r,{customTextRenderer:lt,page:F}=S;function C(){H&&M&&M(H)}function f(){B&&(warning$1(!1,B.toString()),e&&e(B))}function L(){u({type:"RESET"})}reactExports.useEffect(L,[u,F]);function O(){if(lt||!F)return;const T=makeCancellablePromise(F.getStructTree()),x=T;return T.promise.then(A=>{u({type:"RESOLVE",value:A})}).catch(A=>{u({type:"REJECT",error:A})}),()=>cancelRunningTask(x)}return reactExports.useEffect(O,[lt,F,u]),reactExports.useEffect(()=>{if(H!==void 0){if(H===!1){f();return}C()}},[H]),H?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:H}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(S){const e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},e),S),{_className:r,canvasBackground:u,devicePixelRatio:H=getDevicePixelRatio(),onRenderError:B,onRenderSuccess:lt,page:F,renderForms:C,renderTextLayer:f,rotate:L,scale:O}=M,{canvasRef:T}=S;invariant(F,"Attempted to render page canvas, but no page was specified.");const x=reactExports.useRef(null);function A(){F&&lt&&lt(makePageCallback(F,O))}function p(o){isCancelException(o)||(warning$1(!1,o.toString()),B&&B(o))}const m=reactExports.useMemo(()=>F.getViewport({scale:O*H,rotation:L}),[H,F,L,O]),b=reactExports.useMemo(()=>F.getViewport({scale:O,rotation:L}),[F,L,O]);function E(){if(!F)return;F.cleanup();const{current:o}=x;if(!o)return;o.width=m.width,o.height=m.height,o.style.width=`${Math.floor(b.width)}px`,o.style.height=`${Math.floor(b.height)}px`,o.style.visibility="hidden";const h={annotationMode:C?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:m};u&&(h.background=u);const D=F.render(h),y=D;return D.promise.then(()=>{o.style.visibility="",A()}).catch(p),()=>cancelRunningTask(y)}reactExports.useEffect(E,[u,x,H,F,C,m,b]);const _=reactExports.useCallback(()=>{const{current:o}=x;o&&(o.width=0,o.height=0)},[x]);return reactExports.useEffect(()=>_,[_]),React.createElement("canvas",{className:`${r}__canvas`,dir:"ltr",ref:mergeRefs(T,x),style:{display:"block",userSelect:"none"}},f?React.createElement(StructTree,null):null)}function PageSVG(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{_className:e,onRenderSuccess:M,onRenderError:r,page:u,rotate:H,scale:B}=S;invariant(u,"Attempted to render page SVG, but no page was specified.");const[lt,F]=useResolver(),{value:C,error:f}=lt;function L(){u&&M&&M(makePageCallback(u,B))}function O(){f&&(isCancelException(f)||(warning$1(!1,f.toString()),r&&r(f)))}const T=reactExports.useMemo(()=>u.getViewport({scale:B,rotation:H}),[u,H,B]);function x(){F({type:"RESET"})}reactExports.useEffect(x,[u,F,T]);function A(){if(!u)return;const E=makeCancellablePromise(u.getOperatorList());return E.promise.then(_=>{new pdfjs$1.SVGGraphics(u.commonObjs,u.objs).getSVG(_,T).then(h=>{if(!(h instanceof SVGElement))throw new Error("getSVG returned unexpected result.");F({type:"RESOLVE",value:h})}).catch(h=>{F({type:"REJECT",error:h})})}).catch(_=>{F({type:"REJECT",error:_})}),()=>cancelRunningTask(E)}reactExports.useEffect(A,[u,F,T]),reactExports.useEffect(()=>{if(C!==void 0){if(C===!1){O();return}L()}},[C]);function p(E){if(!E||!C)return;E.firstElementChild||E.appendChild(C);const{width:_,height:o}=T;C.setAttribute("width",`${_}`),C.setAttribute("height",`${o}`)}const{width:m,height:b}=T;return React.createElement("div",{className:`${e}__svg`,ref:E=>p(E),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:m,height:b,userSelect:"none"}})}function isTextItem(S){return"str"in S}function TextLayer(){const S=usePageContext();invariant(S,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:M,onGetTextSuccess:r,onRenderTextLayerError:u,onRenderTextLayerSuccess:H,page:B,pageIndex:lt,pageNumber:F,rotate:C,scale:f}=S;invariant(B,"Attempted to load page text content, but no page was specified.");const[L,O]=useResolver(),{value:T,error:x}=L,A=reactExports.useRef(null),p=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function m(){T&&r&&r(T)}function b(){x&&(warning$1(!1,x.toString()),M&&M(x))}function E(){O({type:"RESET"})}reactExports.useEffect(E,[B,O]);function _(){if(!B)return;const g=makeCancellablePromise(B.getTextContent()),W=g;return g.promise.then(z=>{O({type:"RESOLVE",value:z})}).catch(z=>{O({type:"REJECT",error:z})}),()=>cancelRunningTask(W)}reactExports.useEffect(_,[B,O]),reactExports.useEffect(()=>{if(T!==void 0){if(T===!1){b();return}m()}},[T]);const o=reactExports.useCallback(()=>{H&&H()},[H]),h=reactExports.useCallback(g=>{warning$1(!1,g.toString()),u&&u(g)},[u]);function D(){const g=p.current;g&&g.classList.add("active")}function y(){const g=p.current;g&&g.classList.remove("active")}const l=reactExports.useMemo(()=>B.getViewport({scale:f,rotation:C}),[B,C,f]);function k(){if(!B||!T)return;const{current:g}=A;if(!g)return;g.innerHTML="";const W=B.streamTextContent({includeMarkedContent:!0}),z={container:g,textContentSource:W,viewport:l},w=pdfjs$1.renderTextLayer(z),q=w;return w.promise.then(()=>{const nt=document.createElement("div");nt.className="endOfContent",g.append(nt),p.current=nt;const at=g.querySelectorAll('[role="presentation"]');if(e){let G=0;T.items.forEach((ht,gt)=>{if(!isTextItem(ht))return;const vt=at[G];if(!vt)return;const St=e(Object.assign({pageIndex:lt,pageNumber:F,itemIndex:gt},ht));vt.innerHTML=St,G+=ht.str&&ht.hasEOL?2:1})}o()}).catch(h),()=>cancelRunningTask(q)}return reactExports.useLayoutEffect(k,[e,h,o,B,lt,F,T,l]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:y,onMouseDown:D,ref:A})}function AnnotationLayer(){const S=useDocumentContext();invariant(S,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},S),e),{imageResourcesPath:r,linkService:u,onGetAnnotationsError:H,onGetAnnotationsSuccess:B,onRenderAnnotationLayerError:lt,onRenderAnnotationLayerSuccess:F,page:C,pdf:f,renderForms:L,rotate:O,scale:T=1}=M;invariant(C,"Attempted to load page annotations, but no page was specified.");const[x,A]=useResolver(),{value:p,error:m}=x,b=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){p&&B&&B(p)}function _(){m&&(warning$1(!1,m.toString()),H&&H(m))}function o(){A({type:"RESET"})}reactExports.useEffect(o,[A,C]);function h(){if(!C)return;const g=makeCancellablePromise(C.getAnnotations()),W=g;return g.promise.then(z=>{A({type:"RESOLVE",value:z})}).catch(z=>{A({type:"REJECT",error:z})}),()=>{cancelRunningTask(W)}}reactExports.useEffect(h,[A,C,L]),reactExports.useEffect(()=>{if(p!==void 0){if(p===!1){_();return}E()}},[p]);function D(){F&&F()}function y(g){warning$1(!1,`${g}`),lt&&lt(g)}const l=reactExports.useMemo(()=>C.getViewport({scale:T,rotation:O}),[C,O,T]);function k(){if(!f||!C||!p)return;const{current:g}=b;if(!g)return;const W=l.clone({dontFlip:!0}),z={accessibilityManager:null,annotationCanvasMap:null,div:g,l10n:null,page:C,viewport:W},w={annotations:p,annotationStorage:f.annotationStorage,div:g,downloadManager:null,imageResourcesPath:r,linkService:u,page:C,renderForms:L,viewport:W};g.innerHTML="";try{new pdfjs$1.AnnotationLayer(z).render(w),D()}catch(q){y(q)}return()=>{}}return reactExports.useEffect(k,[p,r,u,C,L,l]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:b})}var __rest=globalThis&&globalThis.__rest||function(S,e){var M={};for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&e.indexOf(r)<0&&(M[r]=S[r]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(S);u<r.length;u++)e.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(S,r[u])&&(M[r[u]]=S[r[u]]);return M};const defaultScale=1,Page=function S(e){const M=useDocumentContext();invariant(M,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const r=Object.assign(Object.assign({},M),e),{_className:u="react-pdf__Page",_enableRegisterUnregisterPage:H=!0,canvasBackground:B,canvasRef:lt,children:F,className:C,customRenderer:f,customTextRenderer:L,devicePixelRatio:O,error:T="Failed to load the page.",height:x,inputRef:A,loading:p="Loading page…",noData:m="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:h,onGetTextSuccess:D,onLoadError:y,onLoadSuccess:l,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:g,onRenderError:W,onRenderSuccess:z,onRenderTextLayerError:w,onRenderTextLayerSuccess:q,pageIndex:nt,pageNumber:at,pdf:G,registerPage:ht,renderAnnotationLayer:gt=!0,renderForms:vt=!1,renderMode:St="canvas",renderTextLayer:P=!0,rotate:n,scale:a=defaultScale,unregisterPage:i,width:c}=r,d=__rest(r,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[R,I]=useResolver(),{value:U,error:st}=R,Z=reactExports.useRef(null);invariant(G,"Attempted to load a page, but no document was specified.");const rt=isProvided(at)?at-1:nt??null,dt=at??(isProvided(nt)?nt+1:null),ft=n??(U?U.rotate:null),ct=reactExports.useMemo(()=>{if(!U)return null;let Ht=1;const $t=a??defaultScale;if(c||x){const Vt=U.getViewport({scale:1,rotation:ft});c?Ht=c/Vt.width:x&&(Ht=x/Vt.height)}return $t*Ht},[x,U,ft,a,c]);function Ct(){return()=>{isProvided(rt)&&H&&i&&i(rt)}}reactExports.useEffect(Ct,[H,G,rt,i]);function Lt(){if(l){if(!U||!ct)return;l(makePageCallback(U,ct))}if(H&&ht){if(!isProvided(rt)||!Z.current)return;ht(rt,Z.current)}}function At(){st&&(warning$1(!1,st.toString()),y&&y(st))}function Dt(){I({type:"RESET"})}reactExports.useEffect(Dt,[I,G,rt]);function mt(){if(!G||!dt)return;const Ht=makeCancellablePromise(G.getPage(dt)),$t=Ht;return Ht.promise.then(Vt=>{I({type:"RESOLVE",value:Vt})}).catch(Vt=>{I({type:"REJECT",error:Vt})}),()=>cancelRunningTask($t)}reactExports.useEffect(mt,[I,G,rt,dt,ht]),reactExports.useEffect(()=>{if(U!==void 0){if(U===!1){At();return}Lt()}},[U,ct]);const tt=reactExports.useMemo(()=>U&&isProvided(rt)&&dt&&isProvided(ft)&&isProvided(ct)?{_className:u,canvasBackground:B,customTextRenderer:L,devicePixelRatio:O,onGetAnnotationsError:b,onGetAnnotationsSuccess:E,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:h,onGetTextSuccess:D,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:g,onRenderError:W,onRenderSuccess:z,onRenderTextLayerError:w,onRenderTextLayerSuccess:q,page:U,pageIndex:rt,pageNumber:dt,renderForms:vt,renderTextLayer:P,rotate:ft,scale:ct}:null,[u,B,L,O,b,E,_,o,h,D,k,g,W,z,w,q,U,rt,dt,vt,P,ft,ct]),et=reactExports.useMemo(()=>makeEventProps(d,()=>U&&(ct?makePageCallback(U,ct):void 0)),[d,U,ct]),pt=`${rt}@${ct}/${ft}`,Tt=`${rt}/${ft}`;function wt(){switch(St){case"custom":return invariant(f,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(f,{key:`${pt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Tt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${pt}_canvas`,canvasRef:lt})}}function Bt(){return P?React.createElement(TextLayer,{key:`${pt}_text`}):null}function Gt(){return gt?React.createElement(AnnotationLayer,{key:`${pt}_annotations`}):null}function Ut(){return React.createElement(PageContext.Provider,{value:tt},wt(),Bt(),Gt(),F)}function zt(){return dt?G===null||U===void 0||U===null?React.createElement(Message,{type:"loading"},typeof p=="function"?p():p):G===!1||U===!1?React.createElement(Message,{type:"error"},typeof T=="function"?T():T):Ut():React.createElement(Message,{type:"no-data"},typeof m=="function"?m():m)}return React.createElement("div",Object.assign({className:clsx(u,C),"data-page-number":dt,ref:mergeRefs(A,Z),style:{"--scale-factor":`${ct}`,backgroundColor:B||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},et),zt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const NTA$1="";pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const fullscreen=()=>{document.getElementsByClassName("m3")[0].requestFullscreen()};function NTA(){const{userName:S,setPage:e,examParams:M,setUserRes:r}=useTestStore(),u=reactExports.useRef(null),H=()=>{u.current.scrollTo({top:u.current.scrollHeight})},B=()=>{u.current.scrollTo({top:0})},lt=M.quesAns.length,[F,C]=reactExports.useState(M.quesAns.map(()=>["nvd",null])),[f,L]=reactExports.useState({nvd:lt,nad:0,asd:0,mfr:0,amr:0}),[O,T]=reactExports.useState(1),[x,A]=reactExports.useState(null),p=n=>{A(n),C(a=>(a[O-1][1]=n,a))},m=n=>p(n.target.value),b=n=>{F[n][0]==="nvd"&&(C(a=>(a[n][0]="nad",a)),L(a=>(a.nvd-=1,a.nad+=1,a)))},E=n=>{let a=parseInt(n.target.dataset.key);A(F[a][1]),T(a+1),b(a)},_=()=>{let n=O===lt?0:O;A(F[n][1]),T(n+1),b(n)},o=n=>{let a="nad";switch(n.target.dataset.i){case"clr":C(d=>(d[i][1]=null,d));break;case"mfr":a=x===null?"mfr":"amr";break;case"svn":a=x===null?"nad":"asd";break}let i=O-1,c=F[i][0];C(d=>(d[i][0]=a,d)),L(d=>(d[c]-=1,d[a]+=1,d)),_()},[h,D]=reactExports.useState(M.meta.timeMinutes*6e4),[y,l]=reactExports.useState(null),[k,g]=reactExports.useState(null);let W=new Date(h);const z=()=>{D(n=>n-1e3)};var w,q;const nt=M.meta.showAns?3:4,at=n=>n.map(i=>(i[1]!==null&&(i[1]=parseInt(i[1])),i)),G=()=>{w(),q(),document.exitFullscreen(),e(nt),r(at(F))},ht=()=>{clearInterval(y),clearTimeout(k),document.exitFullscreen(),e(nt),r(at(F))},gt=()=>{let n=setInterval(z,1e3);l(n);let a=setTimeout(G,h*6e4);g(a),w=()=>clearInterval(n),q=()=>clearTimeout(a),b(0)},[vt,St]=reactExports.useState(!1),P=()=>St(n=>!n);return jsxRuntimeExports.jsxs("div",{className:"m",style:{height:"100vh"},children:[jsxRuntimeExports.jsx("nav",{className:"m1"}),jsxRuntimeExports.jsx("header",{className:"m2",children:jsxRuntimeExports.jsxs("div",{className:"m21",children:[jsxRuntimeExports.jsx("table",{className:"m211",children:jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{rowSpan:"4",className:"m2112",style:{backgroundImage:"url(./image/user.svg)"}}),jsxRuntimeExports.jsx("td",{children:"Candidate Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2115",children:S||"John Smith"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Exam Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2116",children:M.meta.eName})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:"Subject Name"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{className:"m2117",children:M.meta.tName})]}),jsxRuntimeExports.jsxs("tr",{className:"m213",children:[jsxRuntimeExports.jsx("td",{children:"Remaining Time"}),jsxRuntimeExports.jsx("td",{children:": "}),jsxRuntimeExports.jsx("td",{children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${h<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+W.getUTCHours()).slice(-2),":",("0"+W.getUTCMinutes()).slice(-2),":",("0"+W.getUTCSeconds()).slice(-2)]})})]})]})}),jsxRuntimeExports.jsx("select",{className:"m212",defaultValue:"English",children:jsxRuntimeExports.jsx("option",{value:"English",children:"English"})})]})}),jsxRuntimeExports.jsxs("div",{className:"m3",children:[jsxRuntimeExports.jsxs("main",{className:"m31",ref:u,children:[jsxRuntimeExports.jsxs("div",{className:"m3110",children:[jsxRuntimeExports.jsx("span",{onClick:H,id:"up",className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m17.575 4.0336-.24009 20.602-3.3133-4.3701-4.0816 3.3136 10.084 10.997 10.372-11.286-3.9856-3.1215-3.7455 4.8984c-.048018-6.9954-.096037-13.991-.14406-20.986z",fill:"#fff"})]})}),jsxRuntimeExports.jsxs("h4",{children:["Question number: ",O]})]}),jsxRuntimeExports.jsx(Document$1,{file:M.meta.pdfUrl,onLoadSuccess:gt,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:O,renderTextLayer:!1,renderAnnotationLayer:!1})}),jsxRuntimeExports.jsxs("div",{className:"m3112",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"option-one",children:[jsxRuntimeExports.jsx("input",{id:"option-one",name:"radio",value:0,type:"radio",checked:x==="0",onChange:m})," (A)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-two",children:[jsxRuntimeExports.jsx("input",{id:"option-two",name:"radio",value:1,type:"radio",checked:x==="1",onChange:m})," (B)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-three",children:[jsxRuntimeExports.jsx("input",{id:"option-three",name:"radio",value:2,type:"radio",checked:x==="2",onChange:m})," (C)"]}),jsxRuntimeExports.jsxs("label",{htmlFor:"option-four",children:[jsxRuntimeExports.jsx("input",{id:"option-four",name:"radio",value:3,type:"radio",checked:x==="3",onChange:m})," (D)"]})]}),jsxRuntimeExports.jsx("div",{className:"m3110",children:jsxRuntimeExports.jsx("span",{onClick:B,className:"m31101",children:jsxRuntimeExports.jsxs("svg",{version:"1.1",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",width:30,children:[jsxRuntimeExports.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#44f"}),jsxRuntimeExports.jsx("path",{d:"m22.761 34.577.24009-20.602 3.3133 4.3701 4.0816-3.3136-10.084-10.997-10.372 11.286 3.9856 3.1215 3.7455-4.8984c.04802 6.9954.09604 13.991.14406 20.986z",fill:"#fff"})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"m32",children:[jsxRuntimeExports.jsx("button",{className:"m3211",onClick:o,"data-i":"clr",children:" CLEAR RESPONSE "}),jsxRuntimeExports.jsx("button",{className:"m3212",onClick:o,"data-i":"mfr",children:" MARK FOR REVIEW "}),jsxRuntimeExports.jsx("button",{className:"m3213",onClick:o,"data-i":"svn",children:" SAVE & NEXT "})]}),jsxRuntimeExports.jsxs("div",{className:"m33",children:[jsxRuntimeExports.jsx("span",{className:"nvd",children:f.nvd}),jsxRuntimeExports.jsx("div",{children:"Not Visited"}),jsxRuntimeExports.jsx("span",{className:"nad",children:f.nad}),jsxRuntimeExports.jsx("div",{children:"Not Answered"}),jsxRuntimeExports.jsx("span",{className:"asd",children:f.asd}),jsxRuntimeExports.jsx("div",{children:"Answered"}),jsxRuntimeExports.jsx("span",{className:"mfr",children:f.mfr}),jsxRuntimeExports.jsx("div",{children:"Marked for Review"}),jsxRuntimeExports.jsx("span",{className:"amr",children:f.amr}),jsxRuntimeExports.jsx("div",{className:"m33j",children:"Answered & Marked for Review (Will be considered for evalution)"})]}),jsxRuntimeExports.jsx("aside",{className:"m34",children:F.map((n,a)=>jsxRuntimeExports.jsx("div",{className:n[0],onClick:E,"data-key":a,children:a+1},a))}),jsxRuntimeExports.jsxs("div",{className:"opt",children:[jsxRuntimeExports.jsx("button",{className:"m35 m36",onClick:fullscreen,children:"Fullscreen"}),jsxRuntimeExports.jsx("span",{className:"m35",children:jsxRuntimeExports.jsxs("span",{style:{backgroundColor:`${h<12e4?"red":"#5cb85c"}`,color:"whitesmoke",padding:"2px 10px",borderRadius:"5px",fontWeight:"bold"},children:[("0"+W.getUTCHours()).slice(-2),":",("0"+W.getUTCMinutes()).slice(-2),":",("0"+W.getUTCSeconds()).slice(-2)]})}),jsxRuntimeExports.jsx("button",{onClick:P,style:{backgroundColor:"GrayText",cursor:"not-allowed"},children:"SUBMIT"})]})]}),jsxRuntimeExports.jsx("footer",{className:"m4"}),jsxRuntimeExports.jsxs(Dialog,{open:vt,onClose:P,children:[jsxRuntimeExports.jsx(DialogTitle,{children:jsxRuntimeExports.jsx(Typography,{fontWeight:"bold",align:"center",color:"primary",children:"PLEASE CONFIRM YOUR RESPONSES"})}),jsxRuntimeExports.jsx(DialogContent,{children:jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{border:2,children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{children:"Status"}),jsxRuntimeExports.jsx(TableCell,{children:"Number of Questions"})]})}),jsxRuntimeExports.jsxs(TableBody,{children:[jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Visited"}),jsxRuntimeExports.jsx(TableCell,{children:f.nvd})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Not Answered"}),jsxRuntimeExports.jsx(TableCell,{children:f.nad})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered"}),jsxRuntimeExports.jsx(TableCell,{children:f.asd})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Marked for Review"}),jsxRuntimeExports.jsx(TableCell,{children:f.mfr})]}),jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{children:"Answered & Marked for Review (Will be considered for evalution)"}),jsxRuntimeExports.jsx(TableCell,{children:f.amr})]})]})]})})}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",onClick:ht,children:"CONFIRM & SUBMIT"}),jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:P,children:"BACK"})]})]})]})}pdfjs$1.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-feabdf30.js",self.location).toString();const Result=()=>{const{setPage:S,examParams:e,userRes:M}=useTestStore(),[r,u]=reactExports.useState(!1),H=()=>u(b=>!b),B=()=>{S(0)},lt=b=>{switch(b){case"nvd":return"Not Visited";case"nad":return"Not Answered";case"asd":return"Answered";case"mfr":return"Marked for Review";case"amr":return"Answered & Marked for Review"}},F=b=>{switch(b.t){case 1:return`Option ${b.a+1}`;case 2:return b.a;case 3:return b.a;case 4:return String.fromCharCode(b.a+65);case 5:return String.fromCharCode(b.a+65)}},C=(b,E)=>{if(E===null)return"None";switch(b){case 1:return`Option ${E+1}`;case 2:return E;case 3:return E;case 4:return String.fromCharCode(E+65);case 5:return String.fromCharCode(E+65)}};let f=0;const L=e.quesAns,O=M.map((b,E)=>{let _="inherit";return(b[0]==="asd"||b[0]==="amr")&&(b[1]===L[E].a?(_="#71eb71",f=f+L[E].m[0]):(_="#eb7171",f=f+L[E].m[1])),[E+1,lt(b[0]),C(L[E].t,b[1]),F(L[E]),_]}),[T,x]=reactExports.useState(0),A=()=>{let b=T===O.length-1?0:T+1;x(b)},p=()=>{let b=T===0?O.length-1:T-1;x(b)},m=b=>{x(parseInt(b.target.dataset.i)),H()};return jsxRuntimeExports.jsxs(Box,{p:1,maxWidth:"sm",mx:"auto",children:[jsxRuntimeExports.jsxs(Stack,{direction:"row",display:"flex",justifyContent:"space-between",alignItems:"stretch",py:1,children:[jsxRuntimeExports.jsxs(Typography,{variant:"h5",bgcolor:"success.main",fontFamily:"monospace",flexGrow:1,mr:1,textAlign:"center",p:1,borderRadius:1,color:"#fff",fontWeight:"bold",children:["You scored ",f," out of ",L.length*4]}),jsxRuntimeExports.jsx(Button,{variant:"contained",color:"warning",onClick:B,children:"Home"})]}),jsxRuntimeExports.jsxs(Stack,{justifyContent:"space-between",alignItems:"center",p:1,sx:{border:"1px solid blue",backgroundColor:O[T][4],borderRadius:1},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" Correct answer is ",O[T][3]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" You have choosen ",O[T][2]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",textAlign:"center",children:[" Question status is ",O[T][1]]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",children:[" Question number ",T+1," / ",L.length]})]}),jsxRuntimeExports.jsx(Document$1,{file:e.meta.pdfUrl,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:T+1,renderAnnotationLayer:!1,renderTextLayer:!1})}),jsxRuntimeExports.jsxs(ButtonGroup$1,{fullWidth:!0,children:[jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,sx:{mb:3},onClick:p,children:"Previous"}),jsxRuntimeExports.jsx(Button,{color:"secondary",autoFocus:!0,fullWidth:!0,sx:{mb:3},onClick:H,children:"Question wise view"}),jsxRuntimeExports.jsx(Button,{variant:"contained",fullWidth:!0,sx:{mb:3},onClick:A,children:"NEXT"})]}),jsxRuntimeExports.jsxs(Dialog,{open:r,children:[jsxRuntimeExports.jsx(DialogContent,{sx:{p:1},children:jsxRuntimeExports.jsx(TableContainer,{children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHead,{children:jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:"#eee"},children:[jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Question Number"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Status"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Choosen answer"}),jsxRuntimeExports.jsx(TableCell,{sx:{px:1,textAlign:"center"},children:"Correct answer"})]})}),jsxRuntimeExports.jsx(TableBody,{children:O.map((b,E)=>jsxRuntimeExports.jsxs(TableRow,{sx:{backgroundColor:b[4]},children:[jsxRuntimeExports.jsx(TableCell,{"data-i":E,onClick:m,sx:{textAlign:"center"},children:b[0]}),jsxRuntimeExports.jsx(TableCell,{"data-i":E,onClick:m,sx:{textAlign:"center"},children:b[1]}),jsxRuntimeExports.jsx(TableCell,{"data-i":E,onClick:m,sx:{textAlign:"center"},children:b[2]}),jsxRuntimeExports.jsx(TableCell,{"data-i":E,onClick:m,sx:{textAlign:"center"},children:b[3]})]},E))})]})})}),jsxRuntimeExports.jsx(DialogActions,{children:jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:H,children:"BACK"})})]})]})},MockTest=()=>{const{page:S}=useTestStore();switch(S){case 0:return jsxRuntimeExports.jsx(Password,{});case 1:return jsxRuntimeExports.jsx(Instruction,{});case 2:return jsxRuntimeExports.jsx(NTA,{});case 3:return jsxRuntimeExports.jsx(Result,{});case 4:return"Thank You your response has been submitted";default:return jsxRuntimeExports.jsx(Password,{})}};export{MockTest as default};
